"use strict";var rne=Object.defineProperty,sne=Object.defineProperties,one=Object.getOwnPropertyDescriptors,B$=Object.getOwnPropertySymbols,ane=Object.prototype.hasOwnProperty,lne=Object.prototype.propertyIsEnumerable,V$=(it,be,F)=>be in it?rne(it,be,{enumerable:!0,configurable:!0,writable:!0,value:F}):it[be]=F,U$=(it,be)=>{for(var F in be||(be={}))ane.call(be,F)&&V$(it,F,be[F]);if(B$)for(var F of B$(be))lne.call(be,F)&&V$(it,F,be[F]);return it},H$=(it,be)=>sne(it,one(be));(self.webpackChunkAdmin_Dashboard=self.webpackChunkAdmin_Dashboard||[]).push([[179],{2011:(it,be,F)=>{F.d(be,{hO:()=>Ye,xv:()=>he,Dh:()=>ce,GT:()=>_e,cc:()=>Re,on:()=>$,pX:()=>ae});var l=F(5e3),ee=F(127),B=F(5813);it=F.hmd(it);const de=["ngOnDestroy"],ae=(Ae,Ke,et,Me={})=>new Proxy(Ae,{get:(Ce,Te)=>et.runOutsideAngular(()=>{var ze;if(Ae[Te])return(null===(ze=null==Me?void 0:Me.spy)||void 0===ze?void 0:ze.get)&&Me.spy.get(Te,Ae[Te]),Ae[Te];if(de.indexOf(Te)>-1)return()=>{};const $e=Ke.toPromise().then(z=>{const De=z&&z[Te];return"function"==typeof De?De.bind(z):De&&De.then?De.then(Q=>et.run(()=>Q)):et.run(()=>De)});return new Proxy(()=>{},{get:(z,De)=>$e[De],apply:(z,De,Q)=>$e.then(le=>{var ie;const ve=le&&le(...Q);return(null===(ie=null==Me?void 0:Me.spy)||void 0===ie?void 0:ie.apply)&&Me.spy.apply(Te,Q,ve),ve})})})}),_e=(Ae,Ke)=>{Ke.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Me=>{Object.defineProperty(Ae.prototype,Me,Object.getOwnPropertyDescriptor(et.prototype||et,Me))})})};class ne{constructor(Ke){return Ke}}const ce=new l.OlP("angularfire2.app.options"),he=new l.OlP("angularfire2.app.name");function $(Ae,Ke,et){const Ce="object"==typeof et&&et||{};Ce.name=Ce.name||"string"==typeof et&&et||"[DEFAULT]";const ze=ee.Z.apps.filter($e=>$e&&$e.name===Ce.name)[0]||Ke.runOutsideAngular(()=>ee.Z.initializeApp(Ae,Ce));try{JSON.stringify(Ae)!==JSON.stringify(ze.options)&&G("error",`${ze.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new ne(ze)}const G=(Ae,...Ke)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Ke)},re={provide:ne,useFactory:$,deps:[ce,l.R0b,[new l.FiY,he]]};let Ye=(()=>{class Ae{constructor(et){ee.Z.registerVersion("angularfire",B.q4.full,"core"),ee.Z.registerVersion("angularfire",B.q4.full,"app-compat"),ee.Z.registerVersion("angular",l.q4F.full,et.toString())}static initializeApp(et,Me){return{ngModule:Ae,providers:[{provide:ce,useValue:et},{provide:he,useValue:Me}]}}}return Ae.\u0275fac=function(et){return new(et||Ae)(l.LFG(l.Lbi))},Ae.\u0275mod=l.oAB({type:Ae}),Ae.\u0275inj=l.cJS({providers:[re]}),Ae})();function Re(Ae,Ke,et,Me,Ce){const[,Te,ze]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Ae)||[];if(Te)return function Ne(Ae,Ke){try{return Ae.toString()===Ke.toString()}catch(et){return Ae===Ke}}(Ce,ze)||(pe("error",`${Ke} was already initialized on the ${et} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ce,was:ze})),Te;{const $e=Me();return globalThis.\u0275AngularfireInstanceCache.push([Ae,$e,Ce]),$e}}const je=!!it.hot,pe=(Ae,...Ke)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(it,be,F)=>{F.d(be,{q4:()=>zo,iC:()=>La,fc:()=>yi,HU:()=>Fd,vb:()=>Nd,JM:()=>Gg});var l=F(5e3),ee=F(5867),B=F(5861),de=F(9681),ae=F(2090),_e=F(4859),ne=F(1877),ce=F(8766);const he="@firebase/installations",$="0.5.9",re=`w:${$}`,Ye="FIS_v2",Ke=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(S){return S instanceof ae.ZR&&S.code.includes("request-failed")}function Me({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Ce(S){return{token:S.token,requestStatus:2,expiresIn:le(S.expiresIn),creationTime:Date.now()}}function Te(S,I){return ze.apply(this,arguments)}function ze(){return(ze=(0,B.Z)(function*(S,I){const U=(yield I.json()).error;return Ke.create("request-failed",{requestName:S,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function $e({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function z(S,{refreshToken:I}){const k=$e(S);return k.append("Authorization",function ie(S){return`${Ye} ${S}`}(I)),k}function De(S){return Q.apply(this,arguments)}function Q(){return(Q=(0,B.Z)(function*(S){const I=yield S();return I.status>=500&&I.status<600?S():I})).apply(this,arguments)}function le(S){return Number(S.replace("s","000"))}function ve(S,I){return ue.apply(this,arguments)}function ue(){return(ue=(0,B.Z)(function*({appConfig:S,heartbeatServiceProvider:I},{fid:k}){const U=Me(S),J=$e(S),se=I.getImmediate({optional:!0});if(se){const mt=yield se.getHeartbeatsHeader();mt&&J.append("x-firebase-client",mt)}const Ue={method:"POST",headers:J,body:JSON.stringify({fid:k,authVersion:Ye,appId:S.appId,sdkVersion:re})},It=yield De(()=>fetch(U,Ue));if(It.ok){const mt=yield It.json();return{fid:mt.fid||k,registrationStatus:2,refreshToken:mt.refreshToken,authToken:Ce(mt.authToken)}}throw yield Te("Create Installation",It)})).apply(this,arguments)}function Fe(S){return new Promise(I=>{setTimeout(I,S)})}const qt=/^[cdef][\w-]{21}$/;function tt(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const k=function ln(S){return function pt(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return qt.test(k)?k:""}catch(S){return""}}function Gn(S){return`${S.appName}!${S.appId}`}const fn=new Map;function tn(S,I){const k=Gn(S);Ht(k,I),function is(S,I){const k=function Pi(){return!_r&&"BroadcastChannel"in self&&(_r=new BroadcastChannel("[Firebase] FID Change"),_r.onmessage=S=>{Ht(S.data.key,S.data.fid)}),_r}();k&&k.postMessage({key:S,fid:I}),function Zi(){0===fn.size&&_r&&(_r.close(),_r=null)}()}(k,I)}function Ht(S,I){const k=fn.get(S);if(k)for(const U of k)U(I)}let _r=null;const or="firebase-installations-store";let Hr=null;function bt(){return Hr||(Hr=(0,ce.X3)("firebase-installations-database",1,{upgrade:(S,I)=>{0===I&&S.createObjectStore(or)}})),Hr}function yr(S,I){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,B.Z)(function*(S,I){const k=Gn(S),J=(yield bt()).transaction(or,"readwrite"),se=J.objectStore(or),ye=yield se.get(k);return yield se.put(I,k),yield J.done,(!ye||ye.fid!==I.fid)&&tn(S,I.fid),I})).apply(this,arguments)}function zn(S){return io.apply(this,arguments)}function io(){return(io=(0,B.Z)(function*(S){const I=Gn(S),U=(yield bt()).transaction(or,"readwrite");yield U.objectStore(or).delete(I),yield U.done})).apply(this,arguments)}function ar(S,I){return ci.apply(this,arguments)}function ci(){return(ci=(0,B.Z)(function*(S,I){const k=Gn(S),J=(yield bt()).transaction(or,"readwrite"),se=J.objectStore(or),ye=yield se.get(k),Ue=I(ye);return void 0===Ue?yield se.delete(k):yield se.put(Ue,k),yield J.done,Ue&&(!ye||ye.fid!==Ue.fid)&&tn(S,Ue.fid),Ue})).apply(this,arguments)}function $n(S){return vr.apply(this,arguments)}function vr(){return(vr=(0,B.Z)(function*(S){let I;const k=yield ar(S.appConfig,U=>{const J=Ao(U),se=Wt(S,J);return I=se.registrationPromise,se.installationEntry});return""===k.fid?{installationEntry:yield I}:{installationEntry:k,registrationPromise:I}})).apply(this,arguments)}function Ao(S){return Mo(S||{fid:tt(),registrationStatus:0})}function Wt(S,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(Ke.create("app-offline"))};const k={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},U=function ct(S,I){return Ct.apply(this,arguments)}(S,k);return{installationEntry:k,registrationPromise:U}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:Ni(S)}:{installationEntry:I}}function Ct(){return(Ct=(0,B.Z)(function*(S,I){try{const k=yield ve(S,I);return yr(S.appConfig,k)}catch(k){throw et(k)&&409===k.customData.serverCode?yield zn(S.appConfig):yield yr(S.appConfig,{fid:I.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Ni(S){return br.apply(this,arguments)}function br(){return(br=(0,B.Z)(function*(S){let I=yield zt(S.appConfig);for(;1===I.registrationStatus;)yield Fe(100),I=yield zt(S.appConfig);if(0===I.registrationStatus){const{installationEntry:k,registrationPromise:U}=yield $n(S);return U||k}return I})).apply(this,arguments)}function zt(S){return ar(S,I=>{if(!I)throw Ke.create("installation-not-found");return Mo(I)})}function Mo(S){return function Fi(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Li(S,I){return H.apply(this,arguments)}function H(){return(H=(0,B.Z)(function*({appConfig:S,heartbeatServiceProvider:I},k){const U=W(S,k),J=z(S,k),se=I.getImmediate({optional:!0});if(se){const mt=yield se.getHeartbeatsHeader();mt&&J.append("x-firebase-client",mt)}const Ue={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:re,appId:S.appId}})},It=yield De(()=>fetch(U,Ue));if(It.ok)return Ce(yield It.json());throw yield Te("Generate Auth Token",It)})).apply(this,arguments)}function W(S,{fid:I}){return`${Me(S)}/${I}/authTokens:generate`}function Y(S){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,B.Z)(function*(S,I=!1){let k;const U=yield ar(S.appConfig,se=>{if(!St(se))throw Ke.create("not-registered");const ye=se.authToken;if(!I&&Dn(ye))return se;if(1===ye.requestStatus)return k=q(S,I),se;{if(!navigator.onLine)throw Ke.create("app-offline");const Ue=ti(se);return k=rt(S,Ue),Ue}});return k?yield k:U.authToken})).apply(this,arguments)}function q(S,I){return te.apply(this,arguments)}function te(){return(te=(0,B.Z)(function*(S,I){let k=yield Oe(S.appConfig);for(;1===k.authToken.requestStatus;)yield Fe(100),k=yield Oe(S.appConfig);const U=k.authToken;return 0===U.requestStatus?Y(S,I):U})).apply(this,arguments)}function Oe(S){return ar(S,I=>{if(!St(I))throw Ke.create("not-registered");return function Yi(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function rt(S,I){return yt.apply(this,arguments)}function yt(){return(yt=(0,B.Z)(function*(S,I){try{const k=yield Li(S,I),U=Object.assign(Object.assign({},I),{authToken:k});return yield yr(S.appConfig,U),k}catch(k){if(!et(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const U=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield yr(S.appConfig,U)}else yield zn(S.appConfig);throw k}})).apply(this,arguments)}function St(S){return void 0!==S&&2===S.registrationStatus}function Dn(S){return 2===S.requestStatus&&!function Et(S){const I=Date.now();return I<S.creationTime||S.creationTime+S.expiresIn<I+36e5}(S)}function ti(S){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:I})}function pl(){return(pl=(0,B.Z)(function*(S){const I=S,{installationEntry:k,registrationPromise:U}=yield $n(I);return U?U.catch(console.error):Y(I).catch(console.error),k.fid})).apply(this,arguments)}function gl(){return(gl=(0,B.Z)(function*(S,I=!1){const k=S;return yield ni(k),(yield Y(k,I)).token})).apply(this,arguments)}function ni(S){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,B.Z)(function*(S){const{registrationPromise:I}=yield $n(S);I&&(yield I)})).apply(this,arguments)}function pa(S){return Ke.create("missing-app-config-values",{valueName:S})}const cr="installations",ht=S=>{const I=S.getProvider("app").getImmediate(),k=function Di(S){if(!S||!S.options)throw pa("App Configuration");if(!S.name)throw pa("App Name");const I=["projectId","apiKey","appId"];for(const k of I)if(!S.options[k])throw pa(k);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(I);return{app:I,appConfig:k,heartbeatServiceProvider:(0,de._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},pn=S=>{const I=S.getProvider("app").getImmediate(),k=(0,de._getProvider)(I,cr).getImmediate();return{getId:()=>function rc(S){return pl.apply(this,arguments)}(k),getToken:J=>function sc(S){return gl.apply(this,arguments)}(k,J)}};(function ur(){(0,de._registerComponent)(new _e.wA(cr,ht,"PUBLIC")),(0,de._registerComponent)(new _e.wA("installations-internal",pn,"PRIVATE"))})(),(0,de.registerVersion)(he,$),(0,de.registerVersion)(he,$,"esm2017");const ss="@firebase/remote-config",qn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kg{constructor(I,k,U,J){this.client=I,this.storage=k,this.storageCache=U,this.logger=J}isCachedDataFresh(I,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-k,J=U<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${J}.`),J}fetch(I){var k=this;return(0,B.Z)(function*(){const[U,J]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(J&&k.isCachedDataFresh(I.cacheMaxAgeMillis,U))return J;I.eTag=J&&J.eTag;const se=yield k.client.fetch(I),ye=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&ye.push(k.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(ye),se})()}}function yd(S=navigator){return S.languages&&S.languages[0]||S.language}class Vi{constructor(I,k,U,J,se,ye){this.firebaseInstallations=I,this.sdkVersion=k,this.namespace=U,this.projectId=J,this.apiKey=se,this.appId=ye}fetch(I){var k=this;return(0,B.Z)(function*(){const[U,J]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),ye=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Ue={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},It={sdk_version:k.sdkVersion,app_instance_id:U,app_instance_id_token:J,app_id:k.appId,language_code:yd()},mt={method:"POST",headers:Ue,body:JSON.stringify(It)},$t=fetch(ye,mt),Dt=new Promise((Ar,Mr)=>{I.signal.addEventListener(()=>{const Ec=new Error("The operation was aborted.");Ec.name="AbortError",Mr(Ec)})});let ji;try{yield Promise.race([$t,Dt]),ji=yield $t}catch(Ar){let Mr="fetch-client-network";throw"AbortError"===Ar.name&&(Mr="fetch-timeout"),qn.create(Mr,{originalErrorMessage:Ar.message})}let vi=ji.status;const Ns=ji.headers.get("ETag")||void 0;let pr,Ir;if(200===ji.status){let Ar;try{Ar=yield ji.json()}catch(Mr){throw qn.create("fetch-client-parse",{originalErrorMessage:Mr.message})}pr=Ar.entries,Ir=Ar.state}if("INSTANCE_STATE_UNSPECIFIED"===Ir?vi=500:"NO_CHANGE"===Ir?vi=304:("NO_TEMPLATE"===Ir||"EMPTY_CONFIG"===Ir)&&(pr={}),304!==vi&&200!==vi)throw qn.create("fetch-status",{httpStatus:vi});return{status:vi,eTag:Ns,config:pr}})()}}class Og{constructor(I,k){this.client=I,this.storage=k}fetch(I){var k=this;return(0,B.Z)(function*(){const U=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(I,U)})()}attemptFetch(I,{throttleEndTimeMillis:k,backoffCount:U}){var J=this;return(0,B.Z)(function*(){yield function ao(S,I){return new Promise((k,U)=>{const J=Math.max(I-Date.now(),0),se=setTimeout(k,J);S.addEventListener(()=>{clearTimeout(se),U(qn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,k);try{const se=yield J.client.fetch(I);return yield J.storage.deleteThrottleMetadata(),se}catch(se){if(!function vd(S){if(!(S instanceof ae.ZR&&S.customData))return!1;const I=Number(S.customData.httpStatus);return 429===I||500===I||503===I||504===I}(se))throw se;const ye={throttleEndTimeMillis:Date.now()+(0,ae.$s)(U),backoffCount:U+1};return yield J.storage.setThrottleMetadata(ye),J.attemptFetch(I,ye)}})()}}class bd{constructor(I,k,U,J,se){this.app=I,this._client=k,this._storageCache=U,this._storage=J,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ou(S,I){const k=S.target.error||void 0;return qn.create(I,{originalErrorMessage:k&&k.message})}const lo="app_namespace_store";class Fg{constructor(I,k,U,J=function Ng(){return new Promise((S,I)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=U=>{I(ou(U,"storage-open"))},k.onsuccess=U=>{S(U.target.result)},k.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(lo,{keyPath:"compositeKey"})}}catch(k){I(qn.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=I,this.appName=k,this.namespace=U,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var k=this;return(0,B.Z)(function*(){const U=yield k.openDbPromise;return new Promise((J,se)=>{const Ue=U.transaction([lo],"readonly").objectStore(lo),It=k.createCompositeKey(I);try{const mt=Ue.get(It);mt.onerror=$t=>{se(ou($t,"storage-get"))},mt.onsuccess=$t=>{const Dt=$t.target.result;J(Dt?Dt.value:void 0)}}catch(mt){se(qn.create("storage-get",{originalErrorMessage:mt&&mt.message}))}})})()}set(I,k){var U=this;return(0,B.Z)(function*(){const J=yield U.openDbPromise;return new Promise((se,ye)=>{const It=J.transaction([lo],"readwrite").objectStore(lo),mt=U.createCompositeKey(I);try{const $t=It.put({compositeKey:mt,value:k});$t.onerror=Dt=>{ye(ou(Dt,"storage-set"))},$t.onsuccess=()=>{se()}}catch($t){ye(qn.create("storage-set",{originalErrorMessage:$t&&$t.message}))}})})()}delete(I){var k=this;return(0,B.Z)(function*(){const U=yield k.openDbPromise;return new Promise((J,se)=>{const Ue=U.transaction([lo],"readwrite").objectStore(lo),It=k.createCompositeKey(I);try{const mt=Ue.delete(It);mt.onerror=$t=>{se(ou($t,"storage-delete"))},mt.onsuccess=()=>{J()}}catch(mt){se(qn.create("storage-delete",{originalErrorMessage:mt&&mt.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class Cd{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,B.Z)(function*(){const k=I.storage.getLastFetchStatus(),U=I.storage.getLastSuccessfulFetchTimestampMillis(),J=I.storage.getActiveConfig(),se=yield k;se&&(I.lastFetchStatus=se);const ye=yield U;ye&&(I.lastSuccessfulFetchTimestampMillis=ye);const Ue=yield J;Ue&&(I.activeConfig=Ue)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function lc(){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,B.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(S){return!1}})).apply(this,arguments)}!function ma(){(0,de._registerComponent)(new _e.wA("remote-config",function S(I,{instanceIdentifier:k}){const U=I.getProvider("app").getImmediate(),J=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw qn.create("registration-window");if(!(0,ae.hl)())throw qn.create("indexed-db-unavailable");const{projectId:se,apiKey:ye,appId:Ue}=U.options;if(!se)throw qn.create("registration-project-id");if(!ye)throw qn.create("registration-api-key");if(!Ue)throw qn.create("registration-app-id");const It=new Fg(Ue,U.name,k=k||"firebase"),mt=new Cd(It),$t=new ne.Yd(ss);$t.logLevel=ne.in.ERROR;const Dt=new Vi(J,de.SDK_VERSION,k,se,ye,Ue),ji=new Og(Dt,It),vi=new kg(ji,It,mt,$t),Ns=new bd(U,vi,mt,It,$t);return function yn(S){const I=(0,ae.m9)(S);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(Ns),Ns},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(ss,"0.3.8"),(0,de.registerVersion)(ss,"0.3.8","esm2017")}();const Dd="/firebase-messaging-sw.js",Ui="/firebase-cloud-messaging-push-scope",ko="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_a="google.c.a.c_id",Td="google.c.a.c_l",rf="google.c.a.ts",co="google.c.a.e";var ya=(()=>{return(S=ya||(ya={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",ya;var S})();function Qi(S){const I=new Uint8Array(S);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sd(S){const k=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(k),J=new Uint8Array(U.length);for(let se=0;se<U.length;++se)J[se]=U.charCodeAt(se);return J}const Hi="fcm_token_details_db",Cr="fcm_token_object_Store";function au(S){return Id.apply(this,arguments)}function Id(){return Id=(0,B.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(Hi))return null;let I=null;return(yield(0,ce.X3)(Hi,5,{upgrade:(U=(0,B.Z)(function*(J,se,ye,Ue){var It;if(se<2||!J.objectStoreNames.contains(Cr))return;const mt=Ue.objectStore(Cr),$t=yield mt.index("fcmSenderId").get(S);if(yield mt.clear(),$t)if(2===se){const Dt=$t;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;I={token:Dt.fcmToken,createTime:null!==(It=Dt.createTime)&&void 0!==It?It:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:Qi(Dt.vapidKey)}}}else if(3===se){const Dt=$t;I={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Qi(Dt.auth),p256dh:Qi(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Qi(Dt.vapidKey)}}}else if(4===se){const Dt=$t;I={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Qi(Dt.auth),p256dh:Qi(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Qi(Dt.vapidKey)}}}}),function(se,ye,Ue,It){return U.apply(this,arguments)})})).close(),yield(0,ce.Lj)(Hi),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),lu(I)?I:null;var U}),Id.apply(this,arguments)}function lu(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:I}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const ds="firebase-messaging-store";let sf=null;function gn(){return sf||(sf=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(S,I)=>{0===I&&S.createObjectStore(ds)}})),sf}function bl(S){return Po.apply(this,arguments)}function Po(){return(Po=(0,B.Z)(function*(S){const I=Ti(S),U=yield(yield gn()).transaction(ds).objectStore(ds).get(I);if(U)return U;{const J=yield au(S.appConfig.senderId);if(J)return yield rn(S,J),J}})).apply(this,arguments)}function rn(S,I){return wl.apply(this,arguments)}function wl(){return(wl=(0,B.Z)(function*(S,I){const k=Ti(S),J=(yield gn()).transaction(ds,"readwrite");return yield J.objectStore(ds).put(I,k),yield J.done,I})).apply(this,arguments)}function cc(S){return uo.apply(this,arguments)}function uo(){return(uo=(0,B.Z)(function*(S){const I=Ti(S),U=(yield gn()).transaction(ds,"readwrite");yield U.objectStore(ds).delete(I),yield U.done})).apply(this,arguments)}function Ti({appConfig:S}){return S.appId}const kn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function hs(S,I){return Si.apply(this,arguments)}function Si(){return(Si=(0,B.Z)(function*(S,I){const k=yield wa(S),U=Ca(I),J={method:"POST",headers:k,body:JSON.stringify(U)};let se;try{se=yield(yield fetch(fs(S.appConfig),J)).json()}catch(ye){throw kn.create("token-subscribe-failed",{errorInfo:ye})}if(se.error)throw kn.create("token-subscribe-failed",{errorInfo:se.error.message});if(!se.token)throw kn.create("token-subscribe-no-token");return se.token})).apply(this,arguments)}function No(S,I){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,B.Z)(function*(S,I){const k=yield wa(S),U=Ca(I.subscriptionOptions),J={method:"PATCH",headers:k,body:JSON.stringify(U)};let se;try{se=yield(yield fetch(`${fs(S.appConfig)}/${I.token}`,J)).json()}catch(ye){throw kn.create("token-update-failed",{errorInfo:ye})}if(se.error)throw kn.create("token-update-failed",{errorInfo:se.error.message});if(!se.token)throw kn.create("token-update-no-token");return se.token})).apply(this,arguments)}function Cl(S,I){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,B.Z)(function*(S,I){const U={method:"DELETE",headers:yield wa(S)};try{const se=yield(yield fetch(`${fs(S.appConfig)}/${I}`,U)).json();if(se.error)throw kn.create("token-unsubscribe-failed",{errorInfo:se.error.message})}catch(J){throw kn.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function fs({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function wa(S){return vt.apply(this,arguments)}function vt(){return(vt=(0,B.Z)(function*({appConfig:S,installations:I}){const k=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Ca({p256dh:S,auth:I,endpoint:k,vapidKey:U}){const J={web:{endpoint:k,auth:I,p256dh:S}};return U!==ko&&(J.web.applicationPubKey=U),J}const uc=6048e5;function El(S){return du.apply(this,arguments)}function du(){return(du=(0,B.Z)(function*(S){const I=yield Sn(S.swRegistration,S.vapidKey),k={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:I.endpoint,auth:Qi(I.getKey("auth")),p256dh:Qi(I.getKey("p256dh"))},U=yield bl(S.firebaseDependencies);if(U){if(Fo(U.subscriptionOptions,k))return Date.now()>=U.createTime+uc?fu(S,{token:U.token,createTime:Date.now(),subscriptionOptions:k}):U.token;try{yield Cl(S.firebaseDependencies,U.token)}catch(J){console.warn(J)}return Lt(S.firebaseDependencies,k)}return Lt(S.firebaseDependencies,k)})).apply(this,arguments)}function Dl(S){return hu.apply(this,arguments)}function hu(){return(hu=(0,B.Z)(function*(S){const I=yield bl(S.firebaseDependencies);I&&(yield Cl(S.firebaseDependencies,I.token),yield cc(S.firebaseDependencies));const k=yield S.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function fu(S,I){return xe.apply(this,arguments)}function xe(){return(xe=(0,B.Z)(function*(S,I){try{const k=yield No(S.firebaseDependencies,I),U=Object.assign(Object.assign({},I),{token:k,createTime:Date.now()});return yield rn(S.firebaseDependencies,U),k}catch(k){throw yield Dl(S),k}})).apply(this,arguments)}function Lt(S,I){return dc.apply(this,arguments)}function dc(){return(dc=(0,B.Z)(function*(S,I){const U={token:yield hs(S,I),createTime:Date.now(),subscriptionOptions:I};return yield rn(S,U),U.token})).apply(this,arguments)}function Sn(S,I){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,B.Z)(function*(S,I){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Sd(I)})})).apply(this,arguments)}function Fo(S,I){return I.vapidKey===S.vapidKey&&I.endpoint===S.endpoint&&I.auth===S.auth&&I.p256dh===S.p256dh}function Er(S){const I={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function Tl(S,I){if(!I.notification)return;S.notification={};const k=I.notification.title;k&&(S.notification.title=k);const U=I.notification.body;U&&(S.notification.body=U);const J=I.notification.image;J&&(S.notification.image=J)}(I,S),function pu(S,I){!I.data||(S.data=I.data)}(I,S),function Lg(S,I){if(!I.fcmOptions)return;S.fcmOptions={};const k=I.fcmOptions.link;k&&(S.fcmOptions.link=k);const U=I.fcmOptions.analytics_label;U&&(S.fcmOptions.analyticsLabel=U)}(I,S),I}function hc(S){return"object"==typeof S&&!!S&&_a in S}function Sl(S,I){const k=[];for(let U=0;U<S.length;U++)k.push(S.charAt(U)),U<I.length&&k.push(I.charAt(U));return k.join("")}function Wn(S){return kn.create("missing-app-config-values",{valueName:S})}Sl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Sl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xs{constructor(I,k,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function fc(S){if(!S||!S.options)throw Wn("App Configuration Object");if(!S.name)throw Wn("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:k}=S;for(const U of I)if(!k[U])throw Wn(U);return{appName:S.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:J,installations:k,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Il(S){return ho.apply(this,arguments)}function ho(){return(ho=(0,B.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(Dd,{scope:Ui}),S.swRegistration.update().catch(()=>{})}catch(I){throw kn.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function zr(S,I){return gu.apply(this,arguments)}function gu(){return(gu=(0,B.Z)(function*(S,I){if(!I&&!S.swRegistration&&(yield Il(S)),I||!S.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw kn.create("invalid-sw-registration");S.swRegistration=I}})).apply(this,arguments)}function pc(S,I){return mu.apply(this,arguments)}function mu(){return(mu=(0,B.Z)(function*(S,I){I?S.vapidKey=I:S.vapidKey||(S.vapidKey=ko)})).apply(this,arguments)}function Al(){return(Al=(0,B.Z)(function*(S,I){if(!navigator)throw kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kn.create("permission-blocked");return yield pc(S,null==I?void 0:I.vapidKey),yield zr(S,null==I?void 0:I.serviceWorkerRegistration),El(S)})).apply(this,arguments)}function Da(S,I,k){return _u.apply(this,arguments)}function _u(){return(_u=(0,B.Z)(function*(S,I,k){const U=Ml(I);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:k[_a],message_name:k[Td],message_time:k[rf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ml(S){switch(S){case ya.NOTIFICATION_CLICKED:return"notification_open";case ya.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function yu(){return(yu=(0,B.Z)(function*(S,I){const k=I.data;if(!k.isFirebaseMessaging)return;S.onMessageHandler&&k.messageType===ya.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Er(k)):S.onMessageHandler.next(Er(k)));const U=k.data;hc(U)&&"1"===U[co]&&(yield Da(S,k.messageType,U))})).apply(this,arguments)}const Ta="@firebase/messaging",Ad=S=>{const I=new xs(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Bg(S,I){return yu.apply(this,arguments)}(I,k)),I},Sa=S=>{const I=S.getProvider("messaging").getImmediate();return{getToken:U=>function gc(S,I){return Al.apply(this,arguments)}(I,U)}};function Ia(){return ps.apply(this,arguments)}function ps(){return(ps=(0,B.Z)(function*(){try{yield(0,ae.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Md(){(0,de._registerComponent)(new _e.wA("messaging",Ad,"PUBLIC")),(0,de._registerComponent)(new _e.wA("messaging-internal",Sa,"PRIVATE")),(0,de.registerVersion)(Ta,"0.9.13"),(0,de.registerVersion)(Ta,"0.9.13","esm2017")}();const xd="analytics",Vg="firebase_id",Rs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Aa="https://www.googletagmanager.com/gtag/js",hi=new ne.Yd("@firebase/analytics");function cf(S){return Promise.all(S.map(I=>I.catch(k=>k)))}function Lo(S,I){const k=document.createElement("script");k.src=`${Aa}?l=${S}&id=${I}`,k.async=!0,document.head.appendChild(k)}function kd(S,I,k,U,J,se){return _c.apply(this,arguments)}function _c(){return(_c=(0,B.Z)(function*(S,I,k,U,J,se){const ye=U[J];try{if(ye)yield I[ye];else{const It=(yield cf(k)).find(mt=>mt.measurementId===J);It&&(yield I[It.appId])}}catch(Ue){hi.error(Ue)}S("config",J,se)})).apply(this,arguments)}function Bo(S,I,k,U,J){return fo.apply(this,arguments)}function fo(){return(fo=(0,B.Z)(function*(S,I,k,U,J){try{let se=[];if(J&&J.send_to){let ye=J.send_to;Array.isArray(ye)||(ye=[ye]);const Ue=yield cf(k);for(const It of ye){const mt=Ue.find(Dt=>Dt.measurementId===It),$t=mt&&I[mt.appId];if(!$t){se=[];break}se.push($t)}}0===se.length&&(se=Object.values(I)),yield Promise.all(se),S("event",U,J||{})}catch(se){hi.error(se)}})).apply(this,arguments)}function vn(){const S=window.document.getElementsByTagName("script");for(const I of Object.values(S))if(I.src&&I.src.includes(Aa))return I;return null}const Ze=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),bu=new class sn{constructor(I={},k=1e3){this.throttleMetadata=I,this.intervalMillis=k}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,k){this.throttleMetadata[I]=k}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Od(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function ms(S){return wu.apply(this,arguments)}function wu(){return(wu=(0,B.Z)(function*(S){var I;const{appId:k,apiKey:U}=S,J={method:"GET",headers:Od(U)},se=Rs.replace("{app-id}",k),ye=yield fetch(se,J);if(200!==ye.status&&304!==ye.status){let Ue="";try{const It=yield ye.json();(null===(I=It.error)||void 0===I?void 0:I.message)&&(Ue=It.error.message)}catch(It){}throw Ze.create("config-fetch-failed",{httpStatus:ye.status,responseMessage:Ue})}return ye.json()})).apply(this,arguments)}function Cn(S){return kl.apply(this,arguments)}function kl(){return(kl=(0,B.Z)(function*(S,I=bu,k){const{appId:U,apiKey:J,measurementId:se}=S.options;if(!U)throw Ze.create("no-app-id");if(!J){if(se)return{measurementId:se,appId:U};throw Ze.create("no-api-key")}const ye=I.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new Cu;return setTimeout((0,B.Z)(function*(){Ue.abort()}),void 0!==k?k:6e4),Dr({appId:U,apiKey:J,measurementId:se},ye,Ue,I)})).apply(this,arguments)}function Dr(S,I,k){return ot.apply(this,arguments)}function ot(){return(ot=(0,B.Z)(function*(S,{throttleEndTimeMillis:I,backoffCount:k},U,J=bu){const{appId:se,measurementId:ye}=S;try{yield yc(U,I)}catch(Ue){if(ye)return hi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ye} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:se,measurementId:ye};throw Ue}try{const Ue=yield ms(S);return J.deleteThrottleMetadata(se),Ue}catch(Ue){if(!Pd(Ue)){if(J.deleteThrottleMetadata(se),ye)return hi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ye} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:se,measurementId:ye};throw Ue}const It=503===Number(Ue.customData.httpStatus)?(0,ae.$s)(k,J.intervalMillis,30):(0,ae.$s)(k,J.intervalMillis),mt={throttleEndTimeMillis:Date.now()+It,backoffCount:k+1};return J.setThrottleMetadata(se,mt),hi.debug(`Calling attemptFetch again in ${It} millis`),Dr(S,mt,U,J)}})).apply(this,arguments)}function yc(S,I){return new Promise((k,U)=>{const J=Math.max(I-Date.now(),0),se=setTimeout(k,J);S.addEventListener(()=>{clearTimeout(se),U(Ze.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function Pd(S){if(!(S instanceof ae.ZR&&S.customData))return!1;const I=Number(S.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Cu{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function Eu(){return cn.apply(this,arguments)}function cn(){return(cn=(0,B.Z)(function*(){if(!(0,ae.hl)())return hi.warn(Ze.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(S){return hi.warn(Ze.create("indexeddb-unavailable",{errorInfo:S}).message),!1}return!0})).apply(this,arguments)}function _s(){return(_s=(0,B.Z)(function*(S,I,k,U,J,se,ye){var Ue;const It=Cn(S);It.then(vi=>{k[vi.measurementId]=vi.appId,S.options.measurementId&&vi.measurementId!==S.options.measurementId&&hi.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${vi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vi=>hi.error(vi)),I.push(It);const mt=Eu().then(vi=>{if(vi)return U.getId()}),[$t,Dt]=yield Promise.all([It,mt]);vn()||Lo(se,$t.measurementId),J("js",new Date);const ji=null!==(Ue=null==ye?void 0:ye.config)&&void 0!==Ue?Ue:{};return ji.origin="firebase",ji.update=!0,null!=Dt&&(ji[Vg]=Dt),J("config",$t.measurementId,ji),$t.measurementId})).apply(this,arguments)}class po{constructor(I){this.app=I}_delete(){return delete Ii[this.app.options.appId],Promise.resolve()}}let Ii={},dr=[];const ks={};let ka,Vo,Ra="dataLayer",Uo=!1;function Oa(S,I,k){!function mo(){const S=[];if((0,ae.ru)()&&S.push("This is a browser extension environment."),(0,ae.zI)()||S.push("Cookies are not available."),S.length>0){const I=S.map((U,J)=>`(${J+1}) ${U}`).join(" "),k=Ze.create("invalid-analytics-context",{errorInfo:I});hi.warn(k.message)}}();const U=S.options.appId;if(!U)throw Ze.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw Ze.create("no-api-key");hi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ii[U])throw Ze.create("already-exists",{id:U});if(!Uo){!function mc(S){let I=[];Array.isArray(window[S])?I=window[S]:window[S]=I}(Ra);const{wrappedGtag:se,gtagCore:ye}=function Ug(S,I,k,U,J){let se=function(...ye){window[U].push(arguments)};return window[J]&&"function"==typeof window[J]&&(se=window[J]),window[J]=function vu(S,I,k,U){function se(){return(se=(0,B.Z)(function*(ye,Ue,It){try{"event"===ye?yield Bo(S,I,k,Ue,It):"config"===ye?yield kd(S,I,k,U,Ue,It):S("set",Ue)}catch(mt){hi.error(mt)}})).apply(this,arguments)}return function J(ye,Ue,It){return se.apply(this,arguments)}}(se,S,I,k),{gtagCore:se,wrappedGtag:window[J]}}(Ii,dr,ks,Ra,"gtag");Vo=se,ka=ye,Uo=!0}return Ii[U]=function xa(S,I,k,U,J,se,ye){return _s.apply(this,arguments)}(S,dr,ks,I,ka,Ra,k),new po(S)}function On(){return(On=(0,B.Z)(function*(S,I,k,U,J){if(J&&J.global)S("event",k,U);else{const se=yield I;S("event",k,Object.assign(Object.assign({},U),{send_to:se}))}})).apply(this,arguments)}function Ol(){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,B.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(S){return!1}})).apply(this,arguments)}const mi="@firebase/analytics";!function _o(){(0,de._registerComponent)(new _e.wA(xd,(I,{options:k})=>Oa(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,de._registerComponent)(new _e.wA("analytics-internal",function S(I){try{const k=I.getProvider(xd).getImmediate();return{logEvent:(U,J,se)=>function Pa(S,I,k,U){S=(0,ae.m9)(S),function pi(S,I,k,U,J){return On.apply(this,arguments)}(Vo,Ii[S.app.options.appId],I,k,U).catch(J=>hi.error(J))}(k,U,J,se)}}catch(k){throw Ze.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,de.registerVersion)(mi,"0.7.9"),(0,de.registerVersion)(mi,"0.7.9","esm2017")}();var jo=F(4408),Ln=F(7565);const Go=new class Tu extends Ln.v{}(class bc extends jo.o{constructor(I,k){super(I,k),this.scheduler=I,this.work=k}schedule(I,k=0){return k>0?super.schedule(I,k):(this.delay=k,this.state=I,this.scheduler.flush(this),this)}execute(I,k){return k>0||this.closed?super.execute(I,k):this._execute(I,k)}requestAsyncId(I,k,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(I,k,U):I.flush(this)}});var Su=F(4986),Sr=F(8505),fr=F(5363),Na=F(9468);const zo=new l.GfV("7.3.0"),$o="__angularfire_symbol__analyticsIsSupportedValue",Fa="__angularfire_symbol__analyticsIsSupported",qo="__angularfire_symbol__remoteConfigIsSupportedValue",Ps="__angularfire_symbol__remoteConfigIsSupported",Nl="__angularfire_symbol__messagingIsSupportedValue",Nt="__angularfire_symbol__messagingIsSupported";function Gg(S,I,k){if(I){if(1===I.length)return I[0];const se=I.filter(ye=>ye.app===k);if(1===se.length)return se[0]}return k.container.getProvider(S).getImmediate({optional:!0})}globalThis[Fa]||(globalThis[Fa]=Ol().then(S=>globalThis[$o]=S).catch(()=>globalThis[$o]=!1)),globalThis[Nt]||(globalThis[Nt]=Ia().then(S=>globalThis[Nl]=S).catch(()=>globalThis[Nl]=!1)),globalThis[Ps]||(globalThis[Ps]=lc().then(S=>globalThis[qo]=S).catch(()=>globalThis[qo]=!1));const Nd=(S,I)=>{const k=I?[I]:(0,ee.C6)(),U=[];return k.forEach(J=>{J.container.getProvider(S).instances.forEach(ye=>{U.includes(ye)||U.push(ye)})}),U};function vo(){}class $r{constructor(I,k=Go){this.zone=I,this.delegate=k}now(){return this.delegate.now()}schedule(I,k,U){const J=this.zone;return this.delegate.schedule(function(ye){J.runGuarded(()=>{I.apply(this,[ye])})},k,U)}}class Cc{constructor(I){this.zone=I,this.task=null}call(I,k){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vo,{},vo,vo)),k.pipe((0,Sr.b)({next:U,complete:U,error:U})).subscribe(I).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Fd=(()=>{class S{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new $r(Zone.current)),this.insideAngular=k.run(()=>new $r(Zone.current,Su.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(k){return new(k||S)(l.LFG(l.R0b))},S.\u0275prov=l.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function vs(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function yi(S){return S.pipe((0,fr.Q)(vs().outsideAngular))}function La(S){return vs(),function Ba(S){return function(k){return(k=k.lift(new Cc(S.ngZone))).pipe((0,Na.R)(S.outsideAngular),(0,fr.Q)(S.insideAngular))}}(vs())(S)}},2090:(it,be,F)=>{F.d(be,{BH:()=>Ye,LL:()=>ue,ZR:()=>ve,gQ:()=>or,zI:()=>Q,hu:()=>ee,g5:()=>B,US:()=>_e,tV:()=>he,h$:()=>ne,L:()=>ce,$s:()=>zt,r3:()=>Wi,Sg:()=>Re,ne:()=>Hr,p$:()=>$,vZ:()=>_r,ZB:()=>G,gK:()=>ar,pd:()=>no,m9:()=>Li,z$:()=>Ne,GJ:()=>tn,jU:()=>Ae,ru:()=>Ke,d:()=>Me,xb:()=>Ht,w1:()=>Ce,hl:()=>z,uI:()=>je,UG:()=>pe,Yr:()=>ze,b$:()=>et,G6:()=>$e,Mn:()=>Te,w9:()=>fn,cI:()=>qt,UI:()=>is,xO:()=>Zi,zd:()=>rs,DV:()=>Jt,ug:()=>Wt,dS:()=>Ao,Pz:()=>Ut,Dv:()=>io,Wj:()=>$n,lb:()=>vr,eu:()=>De});const ee=function(H,W){if(!H)throw B(W)},B=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},de=function(H){const W=[];let Y=0;for(let Ie=0;Ie<H.length;Ie++){let q=H.charCodeAt(Ie);q<128?W[Y++]=q:q<2048?(W[Y++]=q>>6|192,W[Y++]=63&q|128):55296==(64512&q)&&Ie+1<H.length&&56320==(64512&H.charCodeAt(Ie+1))?(q=65536+((1023&q)<<10)+(1023&H.charCodeAt(++Ie)),W[Y++]=q>>18|240,W[Y++]=q>>12&63|128,W[Y++]=q>>6&63|128,W[Y++]=63&q|128):(W[Y++]=q>>12|224,W[Y++]=q>>6&63|128,W[Y++]=63&q|128)}return W},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,W){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let q=0;q<H.length;q+=3){const te=H[q],Oe=q+1<H.length,rt=Oe?H[q+1]:0,yt=q+2<H.length,St=yt?H[q+2]:0;let ti=(15&rt)<<2|St>>6,Yi=63&St;yt||(Yi=64,Oe||(ti=64)),Ie.push(Y[te>>2],Y[(3&te)<<4|rt>>4],Y[ti],Y[Yi])}return Ie.join("")},encodeString(H,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(H):this.encodeByteArray(de(H),W)},decodeString(H,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(H):function(H){const W=[];let Y=0,Ie=0;for(;Y<H.length;){const q=H[Y++];if(q<128)W[Ie++]=String.fromCharCode(q);else if(q>191&&q<224){const te=H[Y++];W[Ie++]=String.fromCharCode((31&q)<<6|63&te)}else if(q>239&&q<365){const yt=((7&q)<<18|(63&H[Y++])<<12|(63&H[Y++])<<6|63&H[Y++])-65536;W[Ie++]=String.fromCharCode(55296+(yt>>10)),W[Ie++]=String.fromCharCode(56320+(1023&yt))}else{const te=H[Y++],Oe=H[Y++];W[Ie++]=String.fromCharCode((15&q)<<12|(63&te)<<6|63&Oe)}}return W.join("")}(this.decodeStringToByteArray(H,W))},decodeStringToByteArray(H,W){this.init_();const Y=W?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let q=0;q<H.length;){const te=Y[H.charAt(q++)],rt=q<H.length?Y[H.charAt(q)]:0;++q;const St=q<H.length?Y[H.charAt(q)]:64;++q;const Et=q<H.length?Y[H.charAt(q)]:64;if(++q,null==te||null==rt||null==St||null==Et)throw Error();Ie.push(te<<2|rt>>4),64!==St&&(Ie.push(rt<<4&240|St>>2),64!==Et&&Ie.push(St<<6&192|Et))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},ne=function(H){const W=de(H);return _e.encodeByteArray(W,!0)},ce=function(H){return ne(H).replace(/\./g,"")},he=function(H){try{return _e.decodeString(H,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function $(H){return G(void 0,H)}function G(H,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return W}for(const Y in W)!W.hasOwnProperty(Y)||!re(Y)||(H[Y]=G(H[Y],W[Y]));return H}function re(H){return"__proto__"!==H}class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,Y)=>{this.resolve=W,this.reject=Y})}wrapCallback(W){return(Y,Ie)=>{Y?this.reject(Y):this.resolve(Ie),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(Y):W(Y,Ie))}}}function Re(H,W){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=W||"demo-project",q=H.iat||0,te=H.sub||H.user_id;if(!te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Oe=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:q,exp:q+3600,auth_time:q,sub:te,user_id:te,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Oe)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function Ae(){return"object"==typeof self&&self.self===self}function Ke(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Ne().indexOf("Electron/")>=0}function Ce(){const H=Ne();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Te(){return Ne().indexOf("MSAppHost/")>=0}function ze(){return!1}function $e(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function De(){return new Promise((H,W)=>{try{let Y=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(Ie);q.onsuccess=()=>{q.result.close(),Y||self.indexedDB.deleteDatabase(Ie),H(!0)},q.onupgradeneeded=()=>{Y=!1},q.onerror=()=>{var te;W((null===(te=q.error)||void 0===te?void 0:te.message)||"")}}catch(Y){W(Y)}})}function Q(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ve extends Error{constructor(W,Y,Ie){super(Y),this.code=W,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(W,Y,Ie){this.service=W,this.serviceName=Y,this.errors=Ie}create(W,...Y){const Ie=Y[0]||{},q=`${this.service}/${W}`,te=this.errors[W],Oe=te?function Fe(H,W){return H.replace(pt,(Y,Ie)=>{const q=W[Ie];return null!=q?String(q):`<${Ie}?>`})}(te,Ie):"Error";return new ve(q,`${this.serviceName}: ${Oe} (${q}).`,Ie)}}const pt=/\{\$([^}]+)}/g;function qt(H){return JSON.parse(H)}function Ut(H){return JSON.stringify(H)}const tt=function(H){let W={},Y={},Ie={},q="";try{const te=H.split(".");W=qt(he(te[0])||""),Y=qt(he(te[1])||""),q=te[2],Ie=Y.d||{},delete Y.d}catch(te){}return{header:W,claims:Y,data:Ie,signature:q}},fn=function(H){const Y=tt(H).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},tn=function(H){const W=tt(H).claims;return"object"==typeof W&&!0===W.admin};function Wi(H,W){return Object.prototype.hasOwnProperty.call(H,W)}function Jt(H,W){if(Object.prototype.hasOwnProperty.call(H,W))return H[W]}function Ht(H){for(const W in H)if(Object.prototype.hasOwnProperty.call(H,W))return!1;return!0}function is(H,W,Y){const Ie={};for(const q in H)Object.prototype.hasOwnProperty.call(H,q)&&(Ie[q]=W.call(Y,H[q],q,H));return Ie}function _r(H,W){if(H===W)return!0;const Y=Object.keys(H),Ie=Object.keys(W);for(const q of Y){if(!Ie.includes(q))return!1;const te=H[q],Oe=W[q];if(Pi(te)&&Pi(Oe)){if(!_r(te,Oe))return!1}else if(te!==Oe)return!1}for(const q of Ie)if(!Y.includes(q))return!1;return!0}function Pi(H){return null!==H&&"object"==typeof H}function Zi(H){const W=[];for(const[Y,Ie]of Object.entries(H))Array.isArray(Ie)?Ie.forEach(q=>{W.push(encodeURIComponent(Y)+"="+encodeURIComponent(q))}):W.push(encodeURIComponent(Y)+"="+encodeURIComponent(Ie));return W.length?"&"+W.join("&"):""}function rs(H){const W={};return H.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[q,te]=Ie.split("=");W[decodeURIComponent(q)]=decodeURIComponent(te)}}),W}function no(H){const W=H.indexOf("?");if(!W)return"";const Y=H.indexOf("#",W);return H.substring(W,Y>0?Y:void 0)}class or{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,Y){Y||(Y=0);const Ie=this.W_;if("string"==typeof W)for(let Et=0;Et<16;Et++)Ie[Et]=W.charCodeAt(Y)<<24|W.charCodeAt(Y+1)<<16|W.charCodeAt(Y+2)<<8|W.charCodeAt(Y+3),Y+=4;else for(let Et=0;Et<16;Et++)Ie[Et]=W[Y]<<24|W[Y+1]<<16|W[Y+2]<<8|W[Y+3],Y+=4;for(let Et=16;Et<80;Et++){const ti=Ie[Et-3]^Ie[Et-8]^Ie[Et-14]^Ie[Et-16];Ie[Et]=4294967295&(ti<<1|ti>>>31)}let St,Dn,q=this.chain_[0],te=this.chain_[1],Oe=this.chain_[2],rt=this.chain_[3],yt=this.chain_[4];for(let Et=0;Et<80;Et++){Et<40?Et<20?(St=rt^te&(Oe^rt),Dn=1518500249):(St=te^Oe^rt,Dn=1859775393):Et<60?(St=te&Oe|rt&(te|Oe),Dn=2400959708):(St=te^Oe^rt,Dn=3395469782);const ti=(q<<5|q>>>27)+St+yt+Dn+Ie[Et]&4294967295;yt=rt,rt=Oe,Oe=4294967295&(te<<30|te>>>2),te=q,q=ti}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+te&4294967295,this.chain_[2]=this.chain_[2]+Oe&4294967295,this.chain_[3]=this.chain_[3]+rt&4294967295,this.chain_[4]=this.chain_[4]+yt&4294967295}update(W,Y){if(null==W)return;void 0===Y&&(Y=W.length);const Ie=Y-this.blockSize;let q=0;const te=this.buf_;let Oe=this.inbuf_;for(;q<Y;){if(0===Oe)for(;q<=Ie;)this.compress_(W,q),q+=this.blockSize;if("string"==typeof W){for(;q<Y;)if(te[Oe]=W.charCodeAt(q),++Oe,++q,Oe===this.blockSize){this.compress_(te),Oe=0;break}}else for(;q<Y;)if(te[Oe]=W[q],++Oe,++q,Oe===this.blockSize){this.compress_(te),Oe=0;break}}this.inbuf_=Oe,this.total_+=Y}digest(){const W=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&Y,Y/=256;this.compress_(this.buf_);let Ie=0;for(let q=0;q<5;q++)for(let te=24;te>=0;te-=8)W[Ie]=this.chain_[q]>>te&255,++Ie;return W}}function Hr(H,W){const Y=new bt(H,W);return Y.subscribe.bind(Y)}class bt{constructor(W,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{W(this)}).catch(Ie=>{this.error(Ie)})}next(W){this.forEachObserver(Y=>{Y.next(W)})}error(W){this.forEachObserver(Y=>{Y.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,Y,Ie){let q;if(void 0===W&&void 0===Y&&void 0===Ie)throw new Error("Missing Observer.");q=function Bn(H,W){if("object"!=typeof H||null===H)return!1;for(const Y of W)if(Y in H&&"function"==typeof H[Y])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:Y,complete:Ie},void 0===q.next&&(q.next=zn),void 0===q.error&&(q.error=zn),void 0===q.complete&&(q.complete=zn);const te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch(Oe){}}),this.observers.push(q),te}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,W)}sendOne(W,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{Y(this.observers[W])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zn(){}const io=function(H,W,Y,Ie){let q;if(Ie<W?q="at least "+W:Ie>Y&&(q=0===Y?"none":"no more than "+Y),q)throw new Error(H+" failed: Was called with "+Ie+(1===Ie?" argument.":" arguments.")+" Expects "+q+".")};function ar(H,W){return`${H} failed: ${W} argument `}function $n(H,W,Y,Ie){if((!Ie||Y)&&"function"!=typeof Y)throw new Error(ar(H,W)+"must be a valid function.")}function vr(H,W,Y,Ie){if((!Ie||Y)&&("object"!=typeof Y||null===Y))throw new Error(ar(H,W)+"must be a valid context object.")}const Ao=function(H){const W=[];let Y=0;for(let Ie=0;Ie<H.length;Ie++){let q=H.charCodeAt(Ie);if(q>=55296&&q<=56319){const te=q-55296;Ie++,ee(Ie<H.length,"Surrogate pair missing trail surrogate."),q=65536+(te<<10)+(H.charCodeAt(Ie)-56320)}q<128?W[Y++]=q:q<2048?(W[Y++]=q>>6|192,W[Y++]=63&q|128):q<65536?(W[Y++]=q>>12|224,W[Y++]=q>>6&63|128,W[Y++]=63&q|128):(W[Y++]=q>>18|240,W[Y++]=q>>12&63|128,W[Y++]=q>>6&63|128,W[Y++]=63&q|128)}return W},Wt=function(H){let W=0;for(let Y=0;Y<H.length;Y++){const Ie=H.charCodeAt(Y);Ie<128?W++:Ie<2048?W+=2:Ie>=55296&&Ie<=56319?(W+=4,Y++):W+=3}return W};function zt(H,W=1e3,Y=2){const Ie=W*Math.pow(Y,H),q=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+q)}function Li(H){return H&&H._delegate?H._delegate:H}},4336:(it,be,F)=>{var l=F(5e3);let ee=null;function B(){return ee}const ne=new l.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function he(){return(0,l.LFG)(G)}()},providedIn:"platform"}),n})();const $=new l.OlP("Location Initialized");let G=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(t){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){re()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){re()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ye(){return new G((0,l.LFG)(ne))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ae(n){const e=(0,l.LFG)(ne).location;return new et((0,l.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ke=new l.OlP("appBaseHref");let et=(()=>{class n extends pe{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+je(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const c=this.prepareExternalUrl(r+je(s));this._platformLocation.pushState(t,i,c)}replaceState(t,i,r,s){const c=this.prepareExternalUrl(r+je(s));this._platformLocation.replaceState(t,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce),l.LFG(Ke,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n extends pe{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Re(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let c=this.prepareExternalUrl(r+je(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,i,c)}replaceState(t,i,r,s){let c=this.prepareExternalUrl(r+je(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce),l.LFG(Ke,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(t,i){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Ne($e(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+je(i))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=je,n.joinWithSlash=Re,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(l.LFG(pe),l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Te(){return new Ce((0,l.LFG)(pe),(0,l.LFG)(ce))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}function ga(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let as=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class so{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ui=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new so(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),Ro(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Ro(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ro(n,e){n.context.$implicit=e.item}let Vn=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new yn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ac("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ac("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class yn{constructor(){this.$implicit=null,this.ngIf=null}}function ac(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}class _l{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Bi=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),wr=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new _l(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(Bi,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),yl=(()=>{class n{constructor(t,i,r){r._addDefault(new _l(t,i))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(Bi,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchDefault",""]]}),n})();class ao{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class vd{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}onDestroy(e){}}const Og=new vd,As=new ao;let tf=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if((0,l.QGY)(t))return Og;if((0,l.F4k)(t))return As;throw function Vi(n,e){return new l.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.sBO,16))},n.\u0275pipe=l.Yjl({name:"async",type:n,pure:!1}),n})(),co=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Oo="browser";function va(n){return"server"===n}let lu=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new ba((0,l.LFG)(ne),window)}),n})();class ba{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ds(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=cu(this.window.history)||cu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function cu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class gn{}class Po extends class bl extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){ee||(ee=n)}(new Po)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wl(){return rn=rn||document.querySelector("base"),rn?rn.getAttribute("href"):null}();return null==t?null:function uo(n){cc=cc||document.createElement("a"),cc.setAttribute("href",n);const e=cc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ga(document.cookie,e)}}let cc,rn=null;const Ti=new l.OlP("TRANSITION_ID"),kn=[{provide:l.ip1,useFactory:function uu(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const i=B(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Ti,ne,l.zs3],multi:!0}];class hs{static init(){(0,l.VLi)(new hs)}addToWindow(e){l.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(p){c=c||p,s--,0==s&&i(c)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?B().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Si=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const No=new l.OlP("EventManagerPlugins");let Ms=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(No),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Cl{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=B().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Gr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),fs=(()=>{class n extends Gr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(wa),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(wa))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function wa(n){B().remove(n)}const vt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ca=/%COMP%/g;function xe(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?xe(n,r,t):(r=r.replace(Ca,n),t.push(r))}return t}function Lt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Sn=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Ea(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Tl(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case l.ifc.ShadowDom:return new pu(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=xe(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ms),l.LFG(fs),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ea{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(vt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=vt[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=vt[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,i,r&l.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lt(i)):this.eventManager.addEventListener(e,t,Lt(i))}}class Tl extends Ea{constructor(e,t,i,r){super(e),this.component=i;const s=xe(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function hu(n){return"_ngcontent-%COMP%".replace(Ca,n)}(r+"-"+i.id),this.hostAttr=function fu(n){return"_nghost-%COMP%".replace(Ca,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class pu extends Ea{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=xe(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Lg=(()=>{class n extends Cl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const hc=["alt","control","meta","shift"],fc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Il=(()=>{class n extends Cl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="";if(hc.forEach(p=>{const y=i.indexOf(p);y>-1&&(i.splice(y,1),c+=p+".")}),c+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=c,d}static getEventFullKey(t){let i="",r=function ho(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Wn.hasOwnProperty(e)&&(e=Wn[e]))}return fc[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),hc.forEach(s=>{s!=r&&xs[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const gc=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:Oo},{provide:l.g9A,useValue:function zr(){Po.makeCurrent(),hs.init()},multi:!0},{provide:ne,useFactory:function pc(){return(0,l.RDi)(document),document},deps:[]}]),Al=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function gu(){return new l.qLn},deps:[]},{provide:No,useClass:Lg,multi:!0,deps:[ne,l.R0b,l.Lbi]},{provide:No,useClass:Il,multi:!0,deps:[ne]},{provide:Sn,useClass:Sn,deps:[Ms,fs,l.AFp]},{provide:l.FYo,useExisting:Sn},{provide:Gr,useExisting:fs},{provide:fs,useClass:fs,deps:[ne]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:Ms,useClass:Ms,deps:[No,l.R0b]},{provide:gn,useClass:Si,deps:[]}];let Da=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Ti,useExisting:l.AFp},kn]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:Al,imports:[co,l.hGG]}),n})();"undefined"!=typeof window&&window;let Bo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(t){let i=null;return i=t?new(t||n):l.LFG(vu),i},providedIn:"root"}),n})(),vu=(()=>{class n extends Bo{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case l.q3G.NONE:return i;case l.q3G.HTML:return(0,l.qzn)(i,"HTML")?(0,l.z3N)(i):(0,l.EiD)(this._doc,String(i)).toString();case l.q3G.STYLE:return(0,l.qzn)(i,"Style")?(0,l.z3N)(i):i;case l.q3G.SCRIPT:if((0,l.qzn)(i,"Script"))return(0,l.z3N)(i);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.yhl)(i),(0,l.qzn)(i,"URL")?(0,l.z3N)(i):(0,l.mCW)(String(i));case l.q3G.RESOURCE_URL:if((0,l.qzn)(i,"ResourceURL"))return(0,l.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,l.JVY)(t)}bypassSecurityTrustStyle(t){return(0,l.L6k)(t)}bypassSecurityTrustScript(t){return(0,l.eBb)(t)}bypassSecurityTrustUrl(t){return(0,l.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,l.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function fo(n){return new vu(n.get(ne))}(l.LFG(l.zs3)),i},providedIn:"root"}),n})();var vn=F(8996),Ma=F(3269);function Ze(...n){const e=(0,Ma.yG)(n);return(0,vn.D)(n,e)}var gt=F(7579);class fi extends gt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}var sn=F(8306);const{isArray:bu}=Array,{getPrototypeOf:Od,prototype:ms,keys:wu}=Object;function Cn(n){if(1===n.length){const e=n[0];if(bu(e))return{args:e,keys:null};if(function kl(n){return n&&"object"==typeof n&&Od(n)===ms}(e)){const t=wu(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var Dr=F(4671),ot=F(4004);const{isArray:yc}=Array;function Cu(n){return(0,ot.U)(e=>function Pd(n,e){return yc(e)?n(...e):n(e)}(n,e))}function Eu(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var cn=F(5403),xa=F(9672);function _s(...n){const e=(0,Ma.yG)(n),t=(0,Ma.jO)(n),{args:i,keys:r}=Cn(n);if(0===i.length)return(0,vn.D)([],e);const s=new sn.y(function po(n,e,t=Dr.y){return i=>{Ii(e,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let p=0;p<r;p++)Ii(e,()=>{const y=(0,vn.D)(n[p],e);let E=!1;y.subscribe((0,cn.x)(i,T=>{s[p]=T,E||(E=!0,d--),d||i.next(t(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,e,r?c=>Eu(r,c):Dr.y));return t?s.pipe(Cu(t)):s}function Ii(n,e,t){n?(0,xa.f)(t,n,e):e()}var dr=F(576);function ks(n,e){const t=(0,dr.m)(n)?n:()=>n,i=r=>r.error(t());return new sn.y(e?r=>e.schedule(i,0,r):i)}const go=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ka=F(8189);function Uo(...n){return function Vo(){return(0,ka.J)(1)}()((0,vn.D)(n,(0,Ma.yG)(n)))}var ys=F(8421);function mo(n){return new sn.y(e=>{(0,ys.Xf)(n()).subscribe(e)})}var Oa=F(515),pi=F(727),On=F(4482);function Ho(){return(0,On.e)((n,e)=>{let t=null;n._refCount++;const i=(0,cn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class vc extends sn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,On.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,cn.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pi.w0.EMPTY)}return e}refCount(){return Ho()(this)}}function In(n,e){return(0,On.e)((t,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();t.subscribe((0,cn.x)(i,p=>{null==r||r.unsubscribe();let y=0;const E=s++;(0,ys.Xf)(n(p,E)).subscribe(r=(0,cn.x)(i,T=>i.next(e?e(p,T,E,y++):T),()=>{r=null,d()}))},()=>{c=!0,d()}))})}var Pn=F(5698);function gi(...n){const e=(0,Ma.yG)(n);return(0,On.e)((t,i)=>{(e?Uo(n,t,e):Uo(n,t)).subscribe(i)})}function Os(n,e,t,i,r){return(s,c)=>{let d=t,p=e,y=0;s.subscribe((0,cn.x)(c,E=>{const T=y++;p=d?n(p,E,T):(d=!0,E),i&&c.next(p)},r&&(()=>{d&&c.next(p),c.complete()})))}}function Tr(n,e){return(0,On.e)(Os(n,e,arguments.length>=2,!0))}function Nn(n,e){return(0,On.e)((t,i)=>{let r=0;t.subscribe((0,cn.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}function hr(n){return(0,On.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,cn.x)(t,void 0,void 0,c=>{s=(0,ys.Xf)(n(c,hr(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}var Fn=F(5577);function Ol(n,e){return(0,dr.m)(e)?(0,Fn.z)(n,e,1):(0,Fn.z)(n,1)}function Pl(n){return n<=0?()=>Oa.E:(0,On.e)((e,t)=>{let i=[];e.subscribe((0,cn.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Rn(n=Hg){return(0,On.e)((e,t)=>{let i=!1;e.subscribe((0,cn.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Hg(){return new go}function jg(n){return(0,On.e)((e,t)=>{let i=!1;e.subscribe((0,cn.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Pa(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Nn((r,s)=>n(r,s,i)):Dr.y,(0,Pn.q)(1),t?jg(e):Rn(()=>new go))}var mi=F(8505);function Du(n){return(0,On.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class _o{constructor(e,t){this.id=e,this.url=t}}class jo extends _o{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bc extends _o{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ln extends _o{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tu extends _o{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Go extends _o{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zy extends _o{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Su extends _o{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sr extends _o{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fr extends _o{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Na{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $o{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fa{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ps{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nl{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Nt="primary";class wc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function _i(n){return new wc(n)}const Fl="ngNavigationCancelingError";function yo(n){const e=Error("NavigationCancelingError: "+n);return e[Fl]=!0,e}function Nd(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function $r(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Cc(n[r],e[r]))return!1;return!0}function Cc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Fd(n){return Array.prototype.concat.apply([],n)}function vs(n){return n.length>0?n[n.length-1]:null}function En(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function yi(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,vn.D)(Promise.resolve(n)):Ze(n)}const La={exact:function S(n,e,t){if(!mt(n.segments,e.segments)||!J(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!S(n.children[i],e.children[i],t))return!1;return!0},subset:k},Ba={exact:function Ld(n,e){return $r(n,e)},subset:function I(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Cc(n[t],e[t]))},ignored:()=>!0};function Wo(n,e,t){return La[t.paths](n.root,e.root,t.matrixParams)&&Ba[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function k(n,e,t){return U(n,e,e.segments,t)}function U(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!mt(r,t)||e.hasChildren()||!J(r,t,i))}if(n.segments.length===t.length){if(!mt(n.segments,t)||!J(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!k(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(mt(n.segments,r)&&J(n.segments,r,i)&&n.children[Nt])&&U(n.children[Nt],e,s,i)}}function J(n,e,t){return e.every((i,r)=>Ba[t](n[r].parameters,i.parameters))}class se{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_i(this.queryParams)),this._queryParamMap}toString(){return vi.serialize(this)}}class ye{constructor(e,t){this.segments=e,this.children=t,this.parent=null,En(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ns(this)}}class Ue{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=_i(this.parameters)),this._parameterMap}toString(){return Tc(this)}}function mt(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class Dt{}class ji{parse(e){const t=new Wy(e);return new se(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${pr(e.root,!0)}`,i=function $g(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Ar(t)}=${Ar(r)}`).join("&"):`${Ar(t)}=${Ar(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Mr(n){return encodeURI(n)}(e.fragment)}`:""}`}}const vi=new ji;function Ns(n){return n.segments.map(e=>Tc(e)).join("/")}function pr(n,e){if(!n.hasChildren())return Ns(n);if(e){const t=n.children[Nt]?pr(n.children[Nt],!1):"",i=[];return En(n.children,(r,s)=>{s!==Nt&&i.push(`${s}:${pr(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function $t(n,e){let t=[];return En(n.children,(i,r)=>{r===Nt&&(t=t.concat(e(i,r)))}),En(n.children,(i,r)=>{r!==Nt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Nt?[pr(n.children[Nt],!1)]:[`${r}:${pr(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${Ns(n)}/${t[0]}`:`${Ns(n)}/(${t.join("//")})`}}function Ir(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ar(n){return Ir(n).replace(/%3B/gi,";")}function Ec(n){return Ir(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dc(n){return decodeURIComponent(n)}function Au(n){return Dc(n.replace(/\+/g,"%20"))}function Tc(n){return`${Ec(n.path)}${function zg(n){return Object.keys(n).map(e=>`;${Ec(e)}=${Ec(n[e])}`).join("")}(n.parameters)}`}const uf=/^[^\/()?;=#]+/;function Zo(n){const e=n.match(uf);return e?e[0]:""}const Mu=/^[^=?&#]+/,qg=/^[^&#]+/;class Wy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Nt]=new ye(e,t)),i}parseSegment(){const e=Zo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ue(Dc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Zo(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Zo(this.remaining);r&&(i=r,this.capture(i))}e[Dc(t)]=Dc(i)}parseQueryParam(e){const t=function qy(n){const e=n.match(Mu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const c=function Wg(n){const e=n.match(qg);return e?e[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=Au(t),s=Au(i);if(e.hasOwnProperty(r)){let c=e[r];Array.isArray(c)||(c=[c],e[r]=c),c.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Zo(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Nt);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[Nt]:new ye([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Zg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=df(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=df(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Sc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Sc(e,this._root).map(t=>t.value)}}function df(n,e){if(n===e.value)return e;for(const t of e.children){const i=df(n,t);if(i)return i}return null}function Sc(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Sc(n,t);if(i.length)return i.unshift(e),i}return[]}class Yo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ko(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Bd extends Zg{constructor(e,t){super(e),this.snapshot=t,Ud(this,e)}toString(){return this.snapshot.toString()}}function Ll(n,e){const t=function Zy(n,e){const c=new Va([],{},{},"",{},Nt,e,null,n.root,-1,{});return new hf("",new Yo(c,[]))}(n,e),i=new fi([new Ue("",{})]),r=new fi({}),s=new fi({}),c=new fi({}),d=new fi(""),p=new Bl(i,r,c,d,s,Nt,e,t.root);return p.snapshot=t.root,new Bd(new Yo(p,[]),t)}class Bl{constructor(e,t,i,r,s,c,d,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(e=>_i(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(e=>_i(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yy(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Vd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Va{constructor(e,t,i,r,s,c,d,p,y,E,T){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=E,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_i(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_i(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hf extends Zg{constructor(e,t){super(t),this.url=e,Ud(this,t)}toString(){return ff(this._root)}}function Ud(n,e){e.value._routerState=n,e.children.forEach(t=>Ud(n,t))}function ff(n){const e=n.children.length>0?` { ${n.children.map(ff).join(", ")} } `:"";return`${n.value}${e}`}function Qo(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$r(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),$r(e.params,t.params)||n.params.next(t.params),function vo(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$r(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),$r(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function pf(n,e){const t=$r(n.params,e.params)&&function It(n,e){return mt(n,e)&&n.every((t,i)=>$r(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||pf(n.parent,e.parent))}function xu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Ky(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return xu(n,i,r);return xu(n,i)})}(n,e,t);return new Yo(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(d=>xu(n,d)),c}}const i=function Qy(n){return new Bl(new fi(n.url),new fi(n.params),new fi(n.queryParams),new fi(n.fragment),new fi(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>xu(n,s));return new Yo(i,r)}}function Fs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ic(n){return"object"==typeof n&&null!=n&&n.outlets}function Ru(n,e,t,i,r){let s={};if(i&&En(i,(d,p)=>{s[p]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),n===e)return new se(t,s,r);const c=Kg(n,e,t);return new se(c,s,r)}function Kg(n,e,t){const i={};return En(n.children,(r,s)=>{i[s]=r===e?t:Kg(r,e,t)}),new ye(n.segments,i)}class gf{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Fs(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Ic);if(r&&r!==vs(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ku{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function em(n,e,t){if(n||(n=new ye([],{})),0===n.segments.length&&n.hasChildren())return Hd(n,e,t);const i=function aC(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const c=n.segments[r],d=t[i];if(Ic(d))break;const p=`${d}`,y=i<t.length-1?t[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Bs(p,y,c))return s;i+=2}else{if(!Bs(p,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new ye(n.segments.slice(0,i.pathIndex),{});return s.children[Nt]=new ye(n.segments.slice(i.pathIndex),n.children),Hd(s,0,r)}return i.match&&0===r.length?new ye(n.segments,{}):i.match&&!n.hasChildren()?tm(n,e,t):i.match?Hd(n,0,r):tm(n,e,t)}function Hd(n,e,t){if(0===t.length)return new ye(n.segments,{});{const i=function Xg(n){return Ic(n[0])?n[0].outlets:{[Nt]:n}}(t),r={};return En(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=em(n.children[c],e,s))}),En(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new ye(n.segments,r)}}function tm(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Ic(s)){const p=Ls(s.outlets);return new ye(i,p)}if(0===r&&Fs(t[0])){i.push(new Ue(n.segments[e].path,mf(t[0]))),r++;continue}const c=Ic(s)?s.outlets[Nt]:`${s}`,d=r<t.length-1?t[r+1]:null;c&&d&&Fs(d)?(i.push(new Ue(c,mf(d))),r+=2):(i.push(new Ue(c,{})),r++)}return new ye(i,{})}function Ls(n){const e={};return En(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=tm(new ye([],{}),0,t))}),e}function mf(n){const e={};return En(n,(t,i)=>e[i]=`${t}`),e}function Bs(n,e,t){return n==t.path&&$r(e,t.parameters)}class nm{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Qo(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ko(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),En(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ko(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ko(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ko(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Ps(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Fa(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Qo(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),Qo(d.route.value),this.activateChildRoutes(e,null,c.children)}else{const d=function jd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),p=d?d.module.componentFactoryResolver:null;c.attachRef=null,c.route=r,c.resolver=p,c.outlet&&c.outlet.activateWith(r,p),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,i)}}class Gd{constructor(e,t){this.routes=e,this.module=t}}function Ul(n){return"function"==typeof n}function Ac(n){return n instanceof se}const zd=Symbol("INITIAL_VALUE");function Mc(){return In(n=>_s(n.map(e=>e.pipe((0,Pn.q)(1),gi(zd)))).pipe(Tr((e,t)=>{let i=!1;return t.reduce((r,s,c)=>r!==zd?r:(s===zd&&(i=!0),i||!1!==s&&c!==t.length-1&&!Ac(s)?r:s),e)},zd),Nn(e=>e!==zd),(0,ot.U)(e=>Ac(e)?e:!0===e),(0,Pn.q)(1)))}class Xy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xc,this.attachRef=null}}class xc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Xy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Pu=(()=>{class n{constructor(t,i,r,s,c){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=s||Nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new ev(t,d,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(xc),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ev{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Bl?this.route:e===xc?this.childContexts:this.parent.get(e,t)}}let vf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&l._UZ(0,"router-outlet")},directives:[Pu],encapsulation:2}),n})();function Hl(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];$d(i,bf(e,i))}}function $d(n,e){n.children&&Hl(n.children,e)}function bf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function wf(n){const e=n.children&&n.children.map(wf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=vf),t}function Zt(n){return n.outlet||Nt}function rm(n,e){const t=n.filter(i=>Zt(i)===e);return t.push(...n.filter(i=>Zt(i)!==e)),t}const sm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Rc(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},sm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Nd)(t,n,e);if(!s)return Object.assign({},sm);const c={};En(s.posParams,(p,y)=>{c[y]=p.path});const d=s.consumed.length>0?Object.assign(Object.assign({},c),s.consumed[s.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function kc(n,e,t,i,r="corrected"){if(t.length>0&&function iv(n,e,t){return t.some(i=>Ua(n,e,i)&&Zt(i)!==Nt)}(n,t,i)){const c=new ye(e,function nv(n,e,t,i){const r={};r[Nt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Zt(s)!==Nt){const c=new ye([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,r[Zt(s)]=c}return r}(n,e,i,new ye(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function rv(n,e,t){return t.some(i=>Ua(n,e,i))}(n,t,i)){const c=new ye(n.segments,function tv(n,e,t,i,r,s){const c={};for(const d of i)if(Ua(n,t,d)&&!r[Zt(d)]){const p=new ye([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,c[Zt(d)]=p}return Object.assign(Object.assign({},r),c)}(n,e,t,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const s=new ye(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Ua(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function sv(n,e,t,i){return!!(Zt(n)===i||i!==Nt&&Ua(e,t,n))&&("**"===n.path||Rc(e,n,t).matched)}function om(n,e,t){return 0===e.length&&!n.children[t]}class Ha{constructor(e){this.segmentGroup=e||null}}class Ji{constructor(e){this.urlTree=e}}function jl(n){return ks(new Ha(n))}function Cf(n){return ks(new Ji(n))}class qd{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(l.h0i)}apply(){const e=kc(this.urlTree.root,[],[],this.config).segmentGroup,t=new ye(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Nt).pipe((0,ot.U)(s=>this.createUrlTree(Nu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(hr(s=>{if(s instanceof Ji)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Ha?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Nt).pipe((0,ot.U)(r=>this.createUrlTree(Nu(r),e.queryParams,e.fragment))).pipe(hr(r=>{throw r instanceof Ha?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new ye([],{[Nt]:e}):e;return new se(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,ot.U)(s=>new ye([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,vn.D)(r).pipe(Ol(s=>{const c=i.children[s],d=rm(t,s);return this.expandSegmentGroup(e,d,c,s).pipe((0,ot.U)(p=>({segment:p,outlet:s})))}),Tr((s,c)=>(s[c.outlet]=c.segment,s),{}),function Gy(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Nn((r,s)=>n(r,s,i)):Dr.y,Pl(1),t?jg(e):Rn(()=>new go))}())}expandSegment(e,t,i,r,s,c){return(0,vn.D)(i).pipe(Ol(d=>this.expandSegmentAgainstRoute(e,t,i,d,r,s,c).pipe(hr(y=>{if(y instanceof Ha)return Ze(null);throw y}))),Pa(d=>!!d),hr((d,p)=>{if(d instanceof go||"EmptyError"===d.name)return om(t,r,s)?Ze(new ye([],{})):jl(t);throw d}))}expandSegmentAgainstRoute(e,t,i,r,s,c,d){return sv(r,t,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c):jl(t):jl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Cf(s):this.lineralizeSegments(i,s).pipe((0,Fn.z)(c=>{const d=new ye(c,{});return this.expandSegment(e,d,t,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:E}=Rc(t,r,s);if(!d)return jl(t);const T=this.applyRedirectCommands(p,r.redirectTo,E);return r.redirectTo.startsWith("/")?Cf(T):this.lineralizeSegments(r,T).pipe((0,Fn.z)(x=>this.expandSegment(e,t,i,x.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Ze(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe((0,ot.U)(T=>(i._loadedConfig=T,new ye(r,{})))):Ze(new ye(r,{}));const{matched:c,consumedSegments:d,remainingSegments:p}=Rc(t,i,r);return c?this.getChildConfig(e,i,r).pipe((0,Fn.z)(E=>{const T=E.module,x=E.routes,{segmentGroup:P,slicedSegments:L}=kc(t,d,p,x),Z=new ye(P.segments,P.children);if(0===L.length&&Z.hasChildren())return this.expandChildren(T,x,Z).pipe((0,ot.U)(He=>new ye(d,He)));if(0===x.length&&0===L.length)return Ze(new ye(d,{}));const oe=Zt(i)===s;return this.expandSegment(T,Z,x,L,oe?Nt:s,!0).pipe((0,ot.U)(We=>new ye(d.concat(We.segments),We.children)))})):jl(t)}getChildConfig(e,t,i){return t.children?Ze(new Gd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ze(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe((0,Fn.z)(r=>r?this.configLoader.load(e.injector,t).pipe((0,ot.U)(s=>(t._loadedConfig=s,s))):function Ai(n){return ks(yo(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Ze(new Gd([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;return r&&0!==r.length?Ze(r.map(c=>{const d=e.get(c);let p;if(function _f(n){return n&&Ul(n.canLoad)}(d))p=d.canLoad(t,i);else{if(!Ul(d))throw new Error("Invalid CanLoad guard");p=d(t,i)}return yi(p)})).pipe(Mc(),(0,mi.b)(c=>{if(!Ac(c))return;const d=yo(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw d.url=c,d}),(0,ot.U)(c=>!0===c)):Ze(!0)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ze(i);if(r.numberOfChildren>1||!r.children[Nt])return ks(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));r=r.children[Nt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new se(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return En(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=t[d]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let c={};return En(t.children,(d,p)=>{c[p]=this.createSegmentGroup(e,d,i,r)}),new ye(s,c)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function Nu(n){const e={};for(const i of Object.keys(n.children)){const s=Nu(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function ov(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new ye(n.segments.concat(e.segments),e.children)}return n}(new ye(n.segments,e))}class xr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Xo{constructor(e,t){this.component=e,this.route=t}}function lm(n,e,t){const i=n._root;return zl(i,e?e._root:null,t,[i.value])}function Oc(n,e,t){const i=function Df(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function zl(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ko(e);return n.children.forEach(c=>{(function um(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function av(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!mt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mt(n.url,e.url)||!$r(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pf(n,e)||!$r(n.queryParams,e.queryParams);default:return!pf(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new xr(i)):(s.data=c.data,s._resolvedData=c._resolvedData),zl(n,e,s.component?d?d.children:null:t,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new Xo(d.outlet.component,c))}else c&&Rr(e,d,r),r.canActivateChecks.push(new xr(i)),zl(n,null,s.component?d?d.children:null:t,i,r)})(c,s[c.value.outlet],t,i.concat([c.value]),r),delete s[c.value.outlet]}),En(s,(c,d)=>Rr(c,t.getContext(d),r)),r}function Rr(n,e,t){const i=Ko(n),r=n.value;En(i,(s,c)=>{Rr(s,r.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Xo(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class fm{}function bo(n){return new sn.y(e=>e.error(n))}class pm{constructor(e,t,i,r,s,c){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=c}recognize(){const e=kc(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Nt);if(null===t)return null;const i=new Va([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Yo(i,t),s=new hf(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=Yy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const c=t.children[s],d=rm(e,s),p=this.processSegmentGroup(d,c,s);if(null===p)return null;i.push(...p)}const r=mm(i);return function gm(n){n.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const c=this.processSegmentAgainstRoute(s,t,i,r);if(null!==c)return c}return om(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!sv(e,t,i,r))return null;let s,c=[],d=[];if("**"===e.path){const P=i.length>0?vs(i).parameters:{};s=new Va(i,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Zt(e),e.component,e,$l(t),Vs(t)+i.length,g(e))}else{const P=Rc(t,e,i);if(!P.matched)return null;c=P.consumedSegments,d=P.remainingSegments,s=new Va(c,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Zt(e),e.component,e,$l(t),Vs(t)+c.length,g(e))}const p=function uv(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:E}=kc(t,c,d,p.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===E.length&&y.hasChildren()){const P=this.processChildren(p,y);return null===P?null:[new Yo(s,P)]}if(0===p.length&&0===E.length)return[new Yo(s,[])];const T=Zt(e)===r,x=this.processSegment(p,y,E,T?Nt:r);return null===x?null:[new Yo(s,x)]}}function If(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function mm(n){const e=[],t=new Set;for(const i of n){if(!If(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=mm(i.children);e.push(new Yo(i.value,r))}return e.filter(i=>!t.has(i))}function $l(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Vs(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function g(n){return n.resolve||{}}function K(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Be(n){return In(e=>{const t=n(e);return t?(0,vn.D)(t).pipe((0,ot.U)(()=>e)):Ze(e)})}class _t extends class wt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Hn=new l.OlP("ROUTES");class Or{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe((0,ot.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=s.create(e);return new Gd(Fd(c.injector.get(Hn,void 0,l.XFs.Self|l.XFs.Optional)).map(wf),c)}),hr(s=>{throw t._loader$=void 0,s}));return t._loader$=new vc(r,()=>new gt.x).pipe(Ho()),t._loader$}loadModuleFactory(e){return yi(e()).pipe((0,Fn.z)(t=>t instanceof l.YKP?Ze(t):(0,vn.D)(this.compiler.compileModuleAsync(t))))}}class dv{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ja(n){throw n}function Zd(n,e,t){return e.parse("/")}function Yd(n,e){return Ze(null)}const Af={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ri=(()=>{class n{constructor(t,i,r,s,c,d,p){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new gt.x,this.errorHandler=ja,this.malformedUriErrorHandler=Zd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Yd,afterPreactivation:Yd},this.urlHandlingStrategy=new dv,this.routeReuseStrategy=new _t,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const T=c.get(l.R0b);this.isNgZoneEnabled=T instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function $y(){return new se(new ye([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Or(c,d,x=>this.triggerEvent(new Na(x)),x=>this.triggerEvent(new zo(x))),this.routerState=Ll(this.currentUrlTree,this.rootComponentType),this.transitions=new fi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(Nn(r=>0!==r.id),(0,ot.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),In(r=>{let s=!1,c=!1;return Ze(r).pipe((0,mi.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),In(d=>{const p=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return xf(d.source)&&(this.browserUrlTree=d.extractedUrl),Ze(d).pipe(In(T=>{const x=this.transitions.getValue();return i.next(new jo(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),x!==this.transitions.getValue()?Oa.E:Promise.resolve(T)}),function am(n,e,t,i){return In(r=>function Gl(n,e,t,i,r){return new qd(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,ot.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mi.b)(T=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:T.urlAfterRedirects})}),function _(n,e,t,i,r){return(0,Fn.z)(s=>function Fu(n,e,t,i,r="emptyOnly",s="legacy"){try{const c=new pm(n,e,t,i,r,s).recognize();return null===c?bo(new fm):Ze(c)}catch(c){return bo(c)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe((0,ot.U)(c=>Object.assign(Object.assign({},s),{targetSnapshot:c}))))}(this.rootComponentType,this.config,T=>this.serializeUrl(T),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mi.b)(T=>{if("eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(P,T)}this.browserUrlTree=T.urlAfterRedirects}const x=new Go(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);i.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:P,source:L,restoredState:Z,extras:oe}=d,Le=new jo(x,this.serializeUrl(P),L,Z);i.next(Le);const We=Ll(P,this.rootComponentType).snapshot;return Ze(Object.assign(Object.assign({},d),{targetSnapshot:We,urlAfterRedirects:P,extras:Object.assign(Object.assign({},oe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),Oa.E}),Be(d=>{const{targetSnapshot:p,id:y,extractedUrl:E,rawUrl:T,extras:{skipLocationChange:x,replaceUrl:P}}=d;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:E,rawUrlTree:T,skipLocationChange:!!x,replaceUrl:!!P})}),(0,mi.b)(d=>{const p=new zy(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,ot.U)(d=>Object.assign(Object.assign({},d),{guards:lm(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function dm(n,e){return(0,Fn.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?Ze(Object.assign(Object.assign({},t),{guardsResult:!0})):function lv(n,e,t,i){return(0,vn.D)(n).pipe((0,Fn.z)(r=>function Sf(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ze(s.map(d=>{const p=Oc(d,e,r);let y;if(function lC(n){return n&&Ul(n.canDeactivate)}(p))y=yi(p.canDeactivate(n,e,t,i));else{if(!Ul(p))throw new Error("Invalid CanDeactivate guard");y=yi(p(n,e,t,i))}return y.pipe(Pa())})).pipe(Mc()):Ze(!0)}(r.component,r.route,t,e,i)),Pa(r=>!0!==r,!0))}(c,i,r,n).pipe((0,Fn.z)(d=>d&&function im(n){return"boolean"==typeof n}(d)?function Wd(n,e,t,i){return(0,vn.D)(e).pipe(Ol(r=>Uo(function hm(n,e){return null!==n&&e&&e(new $o(n)),Ze(!0)}(r.route.parent,i),function cv(n,e){return null!==n&&e&&e(new qo(n)),Ze(!0)}(r.route,i),function Tf(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function cm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>mo(()=>Ze(c.guards.map(p=>{const y=Oc(p,c.node,t);let E;if(function yf(n){return n&&Ul(n.canActivateChild)}(y))E=yi(y.canActivateChild(i,n));else{if(!Ul(y))throw new Error("Invalid CanActivateChild guard");E=yi(y(i,n))}return E.pipe(Pa())})).pipe(Mc())));return Ze(s).pipe(Mc())}(n,r.path,t),function kr(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ze(!0);const r=i.map(s=>mo(()=>{const c=Oc(s,e,t);let d;if(function Ou(n){return n&&Ul(n.canActivate)}(c))d=yi(c.canActivate(e,n));else{if(!Ul(c))throw new Error("Invalid CanActivate guard");d=yi(c(e,n))}return d.pipe(Pa())}));return Ze(r).pipe(Mc())}(n,r.route,t))),Pa(r=>!0!==r,!0))}(i,s,n,e):Ze(d)),(0,ot.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,mi.b)(d=>{if(Ac(d.guardsResult)){const y=yo(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const p=new Su(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),Nn(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Be(d=>{if(d.guards.canActivateChecks.length)return Ze(d).pipe((0,mi.b)(p=>{const y=new Sr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),In(p=>{let y=!1;return Ze(p).pipe(function w(n,e){return(0,Fn.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ze(t);let s=0;return(0,vn.D)(r).pipe(Ol(c=>function A(n,e,t,i){return function O(n,e,t,i){const r=K(n);if(0===r.length)return Ze({});const s={};return(0,vn.D)(r).pipe((0,Fn.z)(c=>function ge(n,e,t,i){const r=Oc(n,e,i);return yi(r.resolve?r.resolve(e,t):r(e,t))}(n[c],e,t,i).pipe((0,mi.b)(d=>{s[c]=d}))),Pl(1),(0,Fn.z)(()=>K(s).length===r.length?Ze(s):Oa.E))}(n._resolve,n,e,i).pipe((0,ot.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),Yy(n,t).resolve),null)))}(c.route,i,n,e)),(0,mi.b)(()=>s++),Pl(1),(0,Fn.z)(c=>s===r.length?Ze(t):Oa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mi.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,mi.b)(p=>{const y=new fr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),Be(d=>{const{targetSnapshot:p,id:y,extractedUrl:E,rawUrl:T,extras:{skipLocationChange:x,replaceUrl:P}}=d;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:E,rawUrlTree:T,skipLocationChange:!!x,replaceUrl:!!P})}),(0,ot.U)(d=>{const p=function Yg(n,e,t){const i=xu(n,e._root,t?t._root:void 0);return new Bd(i,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),(0,mi.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,ot.U)(i=>(new nm(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,mi.b)({next(){s=!0},complete(){s=!0}}),Du(()=>{var d;s||c||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),hr(d=>{if(c=!0,function Gg(n){return n&&n[Fl]}(d)){const p=Ac(d.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const y=new Ln(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(y),p?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),T={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||xf(r.source)};this.scheduleNavigation(E,"imperative",null,T,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new Tu(r.id,this.serializeUrl(r.extractedUrl),d);i.next(p);try{r.resolve(this.errorHandler(d))}catch(y){r.reject(y)}}return Oa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},c=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(c){const p=Object.assign({},c);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,i,c,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Hl(t),this.config=t.map(wf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:p}=i,y=r||this.routerState.root,E=p?this.currentUrlTree.fragment:c;let T=null;switch(d){case"merge":T=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),function Jo(n,e,t,i,r){if(0===t.length)return Ru(e.root,e.root,e.root,i,r);const s=function Jy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new gf(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return En(s.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new gf(t,e,i)}(t);if(s.toRoot())return Ru(e.root,e.root,new ye([],{}),i,r);const c=function Qg(n,e,t){if(n.isAbsolute)return new ku(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new ku(s,s===e.root,0)}const i=Fs(n.commands[0])?0:1;return function Jg(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new ku(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),d=c.processChildren?Hd(c.segmentGroup,c.index,s.commands):em(c.segmentGroup,c.index,s.commands);return Ru(e.root,c.segmentGroup,d,i,r)}(y,this.currentUrlTree,t,T,null!=E?E:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Ac(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Mf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},Af):!1===i?Object.assign({},Kd):i,Ac(t))return Wo(this.currentUrlTree,t,r);const s=this.parseUrl(t);return Wo(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new bc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,c){var d,p;if(this.disposed)return Promise.resolve(!1);let y,E,T;c?(y=c.resolve,E=c.reject,T=c.promise):T=new Promise((L,Z)=>{y=L,E=Z});const x=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),P=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):P=0,this.setTransition({id:x,targetPageId:P,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:y,reject:E,promise:T,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),T.catch(L=>Promise.reject(L))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===c?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new Ln(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function xf(n){return"imperative"!==n}let Qd=(()=>{class n{constructor(t,i,r,s,c){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this.commands=null,this.onChanges=new gt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Pc(this.skipLocationChange),replaceUrl:Pc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Pc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ri),l.Y36(Bl),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&l.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})(),Ga=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new gt.x,this.subscription=t.events.subscribe(s=>{s instanceof bc&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,c){if(0!==t||i||r||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const d={skipLocationChange:Pc(this.skipLocationChange),replaceUrl:Pc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,d),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Pc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ri),l.Y36(Bl),l.Y36(pe))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&l.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&l.uIk("target",i.target)("href",i.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[l.TTD]}),n})();function Pc(n){return""===n||!!n}class fv{}class dC{preload(e,t){return Ze(null)}}let hC=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new Or(r,i,p=>t.triggerEvent(new Na(p)),p=>t.triggerEvent(new zo(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Nn(t=>t instanceof bc),Ol(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(l.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const c=s._loadedConfig;r.push(this.processRoutes(c.module,c.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return(0,vn.D)(r).pipe((0,ka.J)(),(0,ot.U)(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Ze(i._loadedConfig):this.loader.load(t.injector,i)).pipe((0,Fn.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ri),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(fv))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),_m=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof jo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Nl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new Nl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Us=new l.OlP("ROUTER_CONFIGURATION"),gv=new l.OlP("ROUTER_FORROOT_GUARD"),fC=[Ce,{provide:Dt,useClass:ji},{provide:ri,useFactory:function _v(n,e,t,i,r,s,c={},d,p){const y=new ri(null,n,e,t,i,r,Fd(s));return d&&(y.urlHandlingStrategy=d),p&&(y.routeReuseStrategy=p),function mC(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,y),c.enableTracing&&y.events.subscribe(E=>{var T,x;null===(T=console.group)||void 0===T||T.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(x=console.groupEnd)||void 0===x||x.call(console)}),y},deps:[Dt,xc,Ce,l.zs3,l.Sil,Hn,Us,[class Lu{},new l.FiY],[class Xe{},new l.FiY]]},xc,{provide:Bl,useFactory:function ym(n){return n.routerState.root},deps:[ri]},hC,dC,class pv{preload(e,t){return t().pipe(hr(()=>Ze(null)))}},{provide:Us,useValue:{enableTracing:!1}}];function TA(){return new l.PXZ("Router",ri)}let Rf=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[fC,mv(t),{provide:gv,useFactory:gC,deps:[[ri,new l.FiY,new l.tp0]]},{provide:Us,useValue:i||{}},{provide:pe,useFactory:pC,deps:[ce,[new l.tBr(Ke),new l.FiY],Us]},{provide:_m,useFactory:SA,deps:[ri,lu,Us]},{provide:fv,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:dC},{provide:l.PXZ,multi:!0,useFactory:TA},[Jd,{provide:l.ip1,multi:!0,useFactory:_C,deps:[Jd]},{provide:vv,useFactory:yv,deps:[Jd]},{provide:l.tb,multi:!0,useExisting:vv}]]}}static forChild(t){return{ngModule:n,providers:[mv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(gv,8),l.LFG(ri,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function SA(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new _m(n,e,t)}function pC(n,e,t={}){return t.useHash?new Me(n,e):new et(n,e)}function gC(n){return"guarded"}function mv(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:Hn,multi:!0,useValue:n}]}let Jd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new gt.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),s=this.injector.get(ri),c=this.injector.get(Us);return"disabled"===c.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Ze(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Us),r=this.injector.get(hC),s=this.injector.get(_m),c=this.injector.get(ri),d=this.injector.get(l.z2F);t===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&c.initialNavigation(),r.setUpPreloading(),s.init(),c.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function _C(n){return n.appInitializer.bind(n)}function yv(n){return n.bootstrapListener.bind(n)}const vv=new l.OlP("Router Initializer");function un(n){return null!=n&&"false"!=`${n}`}function za(n,e=0){return yC(n)?Number(n):e}function yC(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function bm(n){return Array.isArray(n)?n:[n]}function bi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ea(n){return n instanceof l.SBq?n.nativeElement:n}var j1=F(1144);const vC=["addListener","removeListener"],AA=["addEventListener","removeEventListener"],bC=["on","off"];function wm(n,e,t,i){if((0,dr.m)(t)&&(i=t,t=void 0),i)return wm(n,e,t).pipe(Cu(i));const[r,s]=function CC(n){return(0,dr.m)(n.addEventListener)&&(0,dr.m)(n.removeEventListener)}(n)?AA.map(c=>d=>n[c](e,d,t)):function ta(n){return(0,dr.m)(n.addListener)&&(0,dr.m)(n.removeListener)}(n)?vC.map(wC(n,e)):function MA(n){return(0,dr.m)(n.on)&&(0,dr.m)(n.off)}(n)?bC.map(wC(n,e)):[];if(!r&&(0,j1.z)(n))return(0,Fn.z)(c=>wm(c,e,t))((0,ys.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new sn.y(c=>{const d=(...p)=>c.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function wC(n,e){return t=>i=>n[t](e,i)}var EC=F(4408);const kf={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=kf;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new pi.w0(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=kf;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=kf;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var DC=F(7565);new class TC extends DC.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class xA extends EC.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=kf.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(kf.cancelAnimationFrame(t),e._scheduled=void 0)}});let kt,kA=1;const Of={};function wv(n){return n in Of&&(delete Of[n],!0)}const SC={setImmediate(n){const e=kA++;return Of[e]=!0,kt||(kt=Promise.resolve()),kt.then(()=>wv(e)&&n()),e},clearImmediate(n){wv(n)}},{setImmediate:na,clearImmediate:IC}=SC,Cm={setImmediate(...n){const{delegate:e}=Cm;return((null==e?void 0:e.setImmediate)||na)(...n)},clearImmediate(n){const{delegate:e}=Cm;return((null==e?void 0:e.clearImmediate)||IC)(n)},delegate:void 0};new class ql extends DC.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Ev extends EC.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Cm.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(Cm.clearImmediate(t),e._scheduled=void 0)}});var Bu=F(4986),AC=F(3532);function Pf(n,e=Bu.z){return function z1(n){return(0,On.e)((e,t)=>{let i=!1,r=null,s=null,c=!1;const d=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const y=r;r=null,t.next(y)}c&&t.complete()},p=()=>{s=null,c&&t.complete()};e.subscribe((0,cn.x)(t,y=>{i=!0,r=y,s||(0,ys.Xf)(n(y)).subscribe(s=(0,cn.x)(t,d,p))},()=>{c=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>function Em(n=0,e,t=Bu.P){let i=-1;return null!=e&&((0,AC.K)(e)?t=e:i=e),new sn.y(r=>{let s=function $1(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let c=0;return t.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,e))}let Nf;try{Nf="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Nf=!1}let Ff,Mi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Hi(n){return n===Oo}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Nf)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xC=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function RC(){if(Ff)return Ff;if("object"!=typeof document||!document)return Ff=new Set(xC),Ff;let n=document.createElement("input");return Ff=new Set(xC.filter(e=>(n.setAttribute("type",e),n.type===e))),Ff}let Lf,Vu,Dm;function Xd(n){return function PA(){if(null==Lf&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Lf=!0}))}finally{Lf=Lf||!1}return Lf}()?n:!!n.capture}function q1(){if(null==Vu){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Vu=!1,Vu;if("scrollBehavior"in document.documentElement.style)Vu=!0;else{const n=Element.prototype.scrollTo;Vu=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Vu}function kC(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function eh(n){return n.composedPath?n.composedPath()[0]:n.target}function OC(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const W1=new l.OlP("cdk-dir-doc",{providedIn:"root",factory:function Z1(){return(0,l.f3M)(ne)}}),Y1=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Uu=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new l.vpe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function K1(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Y1.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(W1,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),FC=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new gt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new sn.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(Pf(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ze()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Nn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=ea(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>wm(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.R0b),l.LFG(Mi),l.LFG(ne,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sm=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new gt.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Pf(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Mi),l.LFG(l.R0b),l.LFG(ne,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),Fc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Tm,Nc],Tm,Nc]}),n})();class Am{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Lc extends Am{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class th extends Am{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class UC extends Am{constructor(e){super(),this.element=e instanceof l.SBq?e.nativeElement:e}}class Gu{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Lc?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof th?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof UC?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class HC extends Gu{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||l.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Mm=(()=>{class n extends Gu{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new l.vpe,this.attachDomPortal=s=>{const c=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(d,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),c=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=t,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l._Vd),l.Y36(l.s_b),l.Y36(ne))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[l.qOj]}),n})(),Av=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();var si=F(6451),jC=F(5032);function An(n){return(0,On.e)((e,t)=>{(0,ys.Xf)(n).subscribe((0,cn.x)(t,()=>t.complete(),jC.Z)),!t.closed&&e.subscribe(t)})}function Wl(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}const ia=q1();class Gf{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=bi(-this._previousScrollPosition.left),e.style.top=bi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),ia&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ia&&(i.scrollBehavior=s,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class zu{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class zf{enable(){}disable(){}attach(){}}function bs(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Pm(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class ih{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();bs(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let rh=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new zf,this.close=c=>new zu(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new Gf(this._viewportRuler,this._document),this.reposition=c=>new ih(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(FC),l.LFG(Sm),l.LFG(l.R0b),l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Zl{constructor(e){if(this.scrollStrategy=new zf,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class sh{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class oh{constructor(e,t,i,r,s,c,d,p,y){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=c,this._document=d,this._location=p,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new gt.x,this._attachments=new gt.x,this._detachments=new gt.x,this._locationChanges=pi.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new gt.x,this._outsidePointerEvents=new gt.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Pn.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=bi(this._config.width),e.height=bi(this._config.height),e.minWidth=bi(this._config.minWidth),e.minHeight=bi(this._config.minHeight),e.maxWidth=bi(this._config.maxWidth),e.maxHeight=bi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=bm(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(An((0,si.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let Nm=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||OC()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),OC()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne),l.LFG(Mi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nv="cdk-overlay-connected-position-bounding-box",oE=/([A-Za-z%]+)$/;class aE{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new gt.x,this._resizeSubscription=pi.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(Nv),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(e,r,d),y=this._getOverlayPoint(p,t,d),E=this._getOverlayFit(y,t,i,d);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(E,y,i)?s.push({position:d,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<E.visibleArea)&&(c={overlayFit:E,overlayPoint:y,originPoint:p,position:d,overlayRect:t})}if(s.length){let d=null,p=-1;for(const y of s){const E=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);E>p&&(p=E,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Vc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Nv),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const c=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;r="start"==i.originX?c:d}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=Lv(t);let{x:c,y:d}=e,p=this._getOffset(r,"x"),y=this._getOffset(r,"y");p&&(c+=p),y&&(d+=y);let x=0-d,P=d+s.height-i.height,L=this._subtractOverflows(s.width,0-c,c+s.width-i.width),Z=this._subtractOverflows(s.height,x,P),oe=L*Z;return{visibleArea:oe,isCompletelyWithinViewport:s.width*s.height===oe,fitsInViewportVertically:Z===s.height,fitsInViewportHorizontally:L==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,c=Fv(this._overlayRef.getConfig().minHeight),d=Fv(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=d&&d<=s;return(e.fitsInViewportVertically||null!=c&&c<=r)&&y}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=Lv(t),s=this._viewportRect,c=Math.max(e.x+r.width-s.width,0),d=Math.max(e.y+r.height-s.height,0),p=Math.max(s.top-i.top-e.y,0),y=Math.max(s.left-i.left-e.x,0);let E=0,T=0;return E=r.width<=s.width?y||-c:e.x<this._viewportMargin?s.left-i.left-e.x:0,T=r.height<=s.height?p||-d:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:E,y:T},{x:e.x+E,y:e.y+T}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new sh(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,c,d,E,T,x;if("top"===t.overlayY)c=e.y,s=i.height-c+this._viewportMargin;else if("bottom"===t.overlayY)d=i.height-e.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const P=Math.min(i.bottom-e.y+i.top,e.y),L=this._lastBoundingBoxSize.height;s=2*P,c=e.y-P,s>L&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-L/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)x=i.width-e.x+this._viewportMargin,E=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)T=e.x,E=i.right-e.x;else{const P=Math.min(i.right-e.x+i.left,e.x),L=this._lastBoundingBoxSize.width;E=2*P,T=e.x-P,E>L&&!this._isInitialRender&&!this._growAfterOpen&&(T=e.x-L/2)}return{top:c,left:T,bottom:d,right:x,width:E,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=bi(i.height),r.top=bi(i.top),r.bottom=bi(i.bottom),r.width=bi(i.width),r.left=bi(i.left),r.right=bi(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=bi(s)),c&&(r.maxWidth=bi(c))}this._lastBoundingBoxSize=i,Vc(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Vc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Vc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const E=this._viewportRuler.getViewportScrollPosition();Vc(i,this._getExactOverlayY(t,e,E)),Vc(i,this._getExactOverlayX(t,e,E))}else i.position="static";let d="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(d+=`translateX(${p}px) `),y&&(d+=`translateY(${y}px)`),i.transform=d.trim(),c.maxHeight&&(r?i.maxHeight=bi(c.maxHeight):s&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=bi(c.maxWidth):s&&(i.maxWidth="")),Vc(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=bi(s.y),r}_getExactOverlayX(e,t,i){let c,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=bi(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Pm(e,i),isOriginOutsideView:bs(e,i),isOverlayClipped:Pm(t,i),isOverlayOutsideView:bs(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&bm(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof l.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Vc(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Fv(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(oE);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Lv(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Bv="cdk-global-overlay-wrapper";class lE{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Bv),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:c,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),y=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);e.position=this._cssPosition,e.marginLeft=p?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,p?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Bv),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let wM=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new lE}flexibleConnectedTo(t){return new aE(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Sm),l.LFG(ne),l.LFG(Mi),l.LFG(Nm))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vv=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CM=(()=>{class n extends Vv{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const d=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cE=(()=>{class n extends Vv{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=eh(s)},this._clickListener=s=>{const c=eh(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const E=p[y];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(c)||E.overlayElement.contains(d))break;const T=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>T.next(s)):T.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne),l.LFG(Mi),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uE=0,Wa=(()=>{class n{constructor(t,i,r,s,c,d,p,y,E,T,x){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=d,this._ngZone=p,this._document=y,this._directionality=E,this._location=T,this._outsideClickDispatcher=x}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),c=new Zl(t);return c.direction=c.direction||this._directionality.value,new oh(s,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+uE++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(l.z2F)),new HC(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(rh),l.LFG(Nm),l.LFG(l._Vd),l.LFG(wM),l.LFG(CM),l.LFG(l.zs3),l.LFG(l.R0b),l.LFG(ne),l.LFG(Uu),l.LFG(Ce),l.LFG(cE))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const EM=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Uv=new l.OlP("cdk-connected-overlay-scroll-strategy");let dE=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),Hv=(()=>{class n{constructor(t,i,r,s,c){this._overlay=t,this._dir=c,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=pi.w0.EMPTY,this._attachSubscription=pi.w0.EMPTY,this._detachSubscription=pi.w0.EMPTY,this._positionSubscription=pi.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new l.vpe,this.positionChange=new l.vpe,this.attach=new l.vpe,this.detach=new l.vpe,this.overlayKeydown=new l.vpe,this.overlayOutsideClick=new l.vpe,this._templatePortal=new th(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=un(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=un(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=un(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=un(t)}get push(){return this._push}set push(t){this._push=un(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=EM);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!Wl(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new Zl({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof dE?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function rF(n,e=!1){return(0,On.e)((t,i)=>{let r=0;t.subscribe((0,cn.x)(i,s=>{const c=n(s,r++);(c||e)&&i.next(s),!c&&i.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Wa),l.Y36(l.Rgc),l.Y36(l.s_b),l.Y36(Uv),l.Y36(Uu,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[l.TTD]}),n})();const TM={provide:Uv,deps:[Wa],useFactory:function DM(n){return()=>n.scrollStrategies.reposition()}};let jv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Wa,TM],imports:[[Tm,Av,Fc],Fc]}),n})();function ah(n,e=Bu.z){return(0,On.e)((t,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function p(){const y=c+n,E=e.now();if(E<y)return r=this.schedule(void 0,y-E),void i.add(r);d()}t.subscribe((0,cn.x)(i,y=>{s=y,c=e.now(),r||(r=e.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}function hE(n){return Nn((e,t)=>n<=t)}function Gv(n,e=Dr.y){return n=null!=n?n:YF,(0,On.e)((t,i)=>{let r,s=!0;t.subscribe((0,cn.x)(i,c=>{const d=e(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function YF(n,e){return n===e}let SM=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IM=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=ea(t);return new sn.y(r=>{const c=this._observeElement(i).subscribe(r);return()=>{c.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new gt.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(SM))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zv=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=un(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=za(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(ah(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(IM),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),fE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[SM]}),n})();function Yf(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}const $v="cdk-describedby-message",$u="cdk-describedby-host";let gE=0,mE=(()=>{class n{constructor(t,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+gE++,this._document=t}describe(t,i,r){if(!this._canBeDescribed(t,i))return;const s=qv(i,r);"string"!=typeof i?(_E(i),this._messageRegistry.set(s,{messageElement:i,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(i,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,i,r){var s;if(!i||!this._isElementNode(t))return;const c=qv(i,r);if(this._isElementDescribedByMessage(t,c)&&this._removeMessageReference(t,c),"string"==typeof i){const d=this._messageRegistry.get(c);d&&0===d.referenceCount&&this._deleteMessageElement(c)}0===(null===(s=this._messagesContainer)||void 0===s?void 0:s.childNodes.length)&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){var t;const i=this._document.querySelectorAll(`[${$u}="${this._id}"]`);for(let r=0;r<i.length;r++)this._removeCdkDescribedByReferenceIds(i[r]),i[r].removeAttribute($u);null===(t=this._messagesContainer)||void 0===t||t.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,i){const r=this._document.createElement("div");_E(r),r.textContent=t,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(qv(t,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){var i,r;null===(r=null===(i=this._messageRegistry.get(t))||void 0===i?void 0:i.messageElement)||void 0===r||r.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<i.length;s++)i[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const i=Yf(t,"aria-describedby").filter(r=>0!=r.indexOf($v));t.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(t,i){const r=this._messageRegistry.get(i);(function lh(n,e,t){const i=Yf(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute($u,this._id),r.referenceCount++}_removeMessageReference(t,i){const r=this._messageRegistry.get(i);r.referenceCount--,function AM(n,e,t){const r=Yf(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute($u)}_isElementDescribedByMessage(t,i){const r=Yf(t,"aria-describedby"),s=this._messageRegistry.get(i),c=s&&s.messageElement.id;return!!c&&-1!=r.indexOf(c)}_canBeDescribed(t,i){if(!this._isElementNode(t))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne),l.LFG(Mi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qv(n,e){return"string"==typeof n?`${e||""}/${n}`:n}function _E(n){n.id||(n.id=`${$v}-${gE++}`)}class xM extends class MM{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new gt.x,this._typeaheadSubscription=pi.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new gt.x,this.change=new gt.x,e instanceof l.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,mi.b)(t=>this._pressedLetters.push(t)),ah(e),Nn(()=>this._pressedLetters.length>0),(0,ot.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,c=i[s];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||Wl(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let yE=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function bE(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function vE(n){try{return n.frameElement}catch(e){return null}}(function OM(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===Yv(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=Yv(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function Kv(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function Qv(n){return!function JF(n){return function kM(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Wv(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Zv(n){return function XF(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||ch(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Mi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ch(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function Yv(n){if(!ch(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Lm{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,Pn.q)(1)).subscribe(e)}}let Bm=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Lm(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(yE),l.LFG(l.R0b),l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eb(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Vm(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const EE=new l.OlP("cdk-input-modality-detector-options"),DE={ignoreKeys:[18,17,224,91,16]},Uc=Xd({passive:!0,capture:!0});let PM=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new fi(null),this._lastTouchMs=0,this._onKeydown=c=>{var d,p;(null===(p=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===p?void 0:p.some(y=>y===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=eh(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(eb(c)?"keyboard":"mouse"),this._mostRecentTarget=eh(c))},this._onTouchstart=c=>{Vm(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=eh(c))},this._options=Object.assign(Object.assign({},DE),s),this.modalityDetected=this._modality.pipe(hE(1)),this.modalityChanged=this.modalityDetected.pipe(Gv()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Uc),r.addEventListener("mousedown",this._onMousedown,Uc),r.addEventListener("touchstart",this._onTouchstart,Uc)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Uc),document.removeEventListener("mousedown",this._onMousedown,Uc),document.removeEventListener("touchstart",this._onTouchstart,Uc))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Mi),l.LFG(l.R0b),l.LFG(ne),l.LFG(EE,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TE=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function SE(){return null}}),tb=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Hm=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,c;return 1===i.length&&"number"==typeof i[0]?c=i[0]:[s,c]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==c&&r&&(c=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t,i;clearTimeout(this._previousTimeout),null===(t=this._liveElement)||void 0===t||t.remove(),this._liveElement=null,null===(i=this._currentResolve)||void 0===i||i.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(TE,8),l.LFG(l.R0b),l.LFG(ne),l.LFG(tb,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const IE=new l.OlP("cdk-focus-monitor-default-options"),Kf=Xd({passive:!0,capture:!0});let uh=(()=>{class n{constructor(t,i,r,s,c){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new gt.x,this._rootNodeFocusAndBlurListener=d=>{const p=eh(d),y="focus"===d.type?this._onFocus:this._onBlur;for(let E=p;E;E=E.parentElement)y.call(this,d,E)},this._document=s,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(t,i=!1){const r=ea(t);if(!this._platform.isBrowser||1!==r.nodeType)return Ze(null);const s=function Sv(n){if(function FA(){if(null==Dm){const n="undefined"!=typeof document?document.head:null;Dm=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Dm}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const d={checkChildren:i,subject:new gt.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const i=ea(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=ea(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=eh(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Kf),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Kf)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(An(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Kf),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Kf),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.R0b),l.LFG(Mi),l.LFG(PM),l.LFG(ne,8),l.LFG(IE,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ib="cdk-high-contrast-black-on-white",rb="cdk-high-contrast-white-on-black",jm="cdk-high-contrast-active";let sb=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(jm),t.remove(ib),t.remove(rb),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(jm),t.add(ib)):2===i&&(t.add(jm),t.add(rb))}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Mi),l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AE=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sb))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[fE]]}),n})();class ob{}const Za="*";function ra(n,e){return{type:7,name:n,definitions:e,options:{}}}function Xi(n,e=null){return{type:4,styles:e,timings:n}}function xE(n,e=null){return{type:3,steps:n,options:e}}function ab(n,e=null){return{type:2,steps:n,options:e}}function Bt(n){return{type:6,styles:n,offset:null}}function jt(n,e,t){return{type:0,name:n,styles:e,options:t}}function xi(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Qf(n=null){return{type:9,options:n}}function Jf(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function qu(n){Promise.resolve(null).then(n)}class Xf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qu(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class RE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?qu(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Xt=!1;function FM(n){return new l.vHH(3e3,Xt)}function qE(){return"undefined"!=typeof window&&void 0!==window.document}function hb(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Hc(n){switch(n.length){case 0:return new Xf;case 1:return n[0];default:return new RE(n)}}function WE(n,e,t,i,r={},s={}){const c=[],d=[];let p=-1,y=null;if(i.forEach(E=>{const T=E.offset,x=T==p,P=x&&y||{};Object.keys(E).forEach(L=>{let Z=L,oe=E[L];if("offset"!==L)switch(Z=e.normalizePropertyName(Z,c),oe){case"!":oe=r[L];break;case Za:oe=s[L];break;default:oe=e.normalizeStyleValue(L,Z,oe,c)}P[Z]=oe}),x||d.push(P),y=P,p=T}),c.length)throw function LE(n){return new l.vHH(3502,Xt)}();return d}function fb(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&pb(t,"start",n)));break;case"done":n.onDone(()=>i(t&&pb(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&pb(t,"destroy",n)))}}function pb(n,e,t){const i=t.totalTime,s=gb(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),c=n._data;return null!=c&&(s._data=c),s}function gb(n,e,t,i,r="",s=0,c){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function Hs(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function ZE(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let mb=(n,e)=>!1,YE=(n,e,t)=>[],KE=null;function _b(n){const e=n.parentNode||n.host;return e===KE?null:e}(hb()||"undefined"!=typeof Element)&&(qE()?(KE=(()=>document.documentElement)(),mb=(n,e)=>{for(;e;){if(e===n)return!0;e=_b(e)}return!1}):mb=(n,e)=>n.contains(e),YE=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Wu=null,QE=!1;function JE(n){Wu||(Wu=function XE(){return"undefined"!=typeof document?document.body:null}()||{},QE=!!Wu.style&&"WebkitAppearance"in Wu.style);let e=!0;return Wu.style&&!function qM(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Wu.style,!e&&QE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Wu.style)),e}const yb=mb,vb=YE;let bb=(()=>{class n{validateStyleProperty(t){return JE(t)}matchesElement(t,i){return!1}containsElement(t,i){return yb(t,i)}getParentElement(t){return _b(t)}query(t,i,r){return vb(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,c,d=[],p){return new Xf(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),qm=(()=>{class n{}return n.NOOP=new bb,n})();const np="ng-enter",hh="ng-leave",Qa="ng-trigger",Wm=".ng-trigger",nD="ng-animating",jc=".ng-animating";function fh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ip(parseFloat(e[1]),e[2])}function ip(n,e){return"s"===e?1e3*n:n}function Cb(n,e,t){return n.hasOwnProperty("duration")?n:function iD(n,e,t){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(FM()),{duration:0,delay:0,easing:""};r=ip(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=ip(parseFloat(p),d[4]));const y=d[5];y&&(c=y)}else r=n;if(!t){let d=!1,p=e.length;r<0&&(e.push(function lb(){return new l.vHH(3100,Xt)}()),d=!0),s<0&&(e.push(function cb(){return new l.vHH(3101,Xt)}()),d=!0),d&&e.splice(p,0,FM())}return{duration:r,delay:s,easing:c}}(n,e,t)}function Zu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function ft(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Zu(n,t);return t}function rD(n,e,t){return t?e+":"+t+";":""}function sD(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=rD(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=rD(0,oD(t),n.style[t]));n.setAttribute("style",e)}function Ja(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=Db(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),hb()&&sD(n))}function Xa(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=Db(t);n.style[i]=""}),hb()&&sD(n))}function rp(n){return Array.isArray(n)?1==n.length?n[0]:ab(n):n}const ph=new RegExp("{{\\s*(.+?)\\s*}}","g");function Jn(n){let e=[];if("string"==typeof n){let t;for(;t=ph.exec(n);)e.push(t[1]);ph.lastIndex=0}return e}function Eb(n,e,t){const i=n.toString(),r=i.replace(ph,(s,c)=>{let d=e[c];return e.hasOwnProperty(c)||(t.push(function LM(n){return new l.vHH(3003,Xt)}()),d=""),d.toString()});return r==i?n:r}function sp(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const YM=/-+([a-z0-9])/g;function Db(n){return n.replace(YM,(...e)=>e[1].toUpperCase())}function oD(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ws(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function BM(n){return new l.vHH(3004,Xt)}()}}function cD(n,e){return window.getComputedStyle(n)[e]}function uD(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function dD(n,e,t){if(":"==n[0]){const p=function JM(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function NE(n){return new l.vHH(3016,Xt)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function GM(n){return new l.vHH(3015,Xt)}()),e;const r=i[1],s=i[2],c=i[3];e.push(hD(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&e.push(hD(c,r))}(i,t,e)):t.push(n),t}const Gc=new Set(["true","1"]),zc=new Set(["false","0"]);function hD(n,e){const t=Gc.has(n)||zc.has(n),i=Gc.has(e)||zc.has(e);return(r,s)=>{let c="*"==n||n==r,d="*"==e||e==s;return!c&&t&&"boolean"==typeof r&&(c=r?Gc.has(n):zc.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?Gc.has(e):zc.has(e)),c&&d}}const XM=new RegExp("s*:selfs*,?","g");function Qm(n,e,t,i){return new pD(n).build(e,t,i)}class pD{constructor(e){this._driver=e}build(e,t,i){const r=new tx(t);this._resetContextStyleTimingState(r);const s=ws(this,rp(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function sa(){return new l.vHH(3006,Xt)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,s.push(this.visitState(p,t))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,t);i+=p.queryCount,r+=p.depCount,c.push(p)}else t.errors.push(function oa(){return new l.vHH(3007,Xt)}())}),{type:7,name:e.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{if(Ib(d)){const p=d;Object.keys(p).forEach(y=>{Jn(p[y]).forEach(E=>{c.hasOwnProperty(E)||s.add(E)})})}}),s.size&&(sp(s.values()),t.errors.push(function kE(n,e){return new l.vHH(3008,Xt)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=ws(this,rp(e.animation),t);return{type:1,matchers:uD(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:gh(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>ws(this,i,t)),options:gh(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(c=>{t.currentTime=i;const d=ws(this,c,t);return r=Math.max(r,t.currentTime),d});return t.currentTime=r,{type:3,steps:s,options:gh(e.options)}}visitAnimate(e,t){const i=function aL(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return mD(Cb(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=mD(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||Cb(i,e),mD(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Bt({});if(5==s.type)r=this.visitKeyframes(s,t);else{let c=e.styles,d=!1;if(!c){d=!0;const y={};i.easing&&(y.easing=i.easing),c=Bt(y)}t.currentTime+=i.duration+i.delay;const p=this.visitStyle(c,t);p.isEmptyStep=d,r=p}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Za?i.push(c):t.errors.push(function OE(n){return new l.vHH(3002,Xt)}()):i.push(c)}):i.push(e.styles);let r=!1,s=null;return i.forEach(c=>{if(Ib(c)){const d=c,p=d.easing;if(p&&(s=p,delete d.easing),!r)for(let y in d)if(d[y].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete c[d],void t.unsupportedCSSPropertiesFound.add(d);const p=t.collectedStyles[t.currentQuerySelector],y=p[d];let E=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(t.errors.push(function VM(n,e,t,i,r){return new l.vHH(3010,Xt)}()),E=!1),s=y.startTime),E&&(p[d]={startTime:s,endTime:r}),t.options&&function Zm(n,e,t){const i=e.params||{},r=Jn(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function Ya(n){return new l.vHH(3001,Xt)}())})}(c[d],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function UM(){return new l.vHH(3011,Xt)}()),i;let s=0;const c=[];let d=!1,p=!1,y=0;const E=e.steps.map(Le=>{const We=this._makeStyleAst(Le,t);let He=null!=We.offset?We.offset:function nx(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Ib(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(Ib(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(We.styles),Ge=0;return null!=He&&(s++,Ge=We.offset=He),p=p||Ge<0||Ge>1,d=d||Ge<y,y=Ge,c.push(Ge),We});p&&t.errors.push(function HM(){return new l.vHH(3012,Xt)}()),d&&t.errors.push(function ub(){return new l.vHH(3200,Xt)}());const T=e.steps.length;let x=0;s>0&&s<T?t.errors.push(function tp(){return new l.vHH(3202,Xt)}()):0==s&&(x=1/(T-1));const P=T-1,L=t.currentTime,Z=t.currentAnimateTimings,oe=Z.duration;return E.forEach((Le,We)=>{const He=x>0?We==P?1:x*We:c[We],Ge=He*oe;t.currentTime=L+Z.delay+Ge,Z.duration=Ge,this._validateStyleAst(Le,t),Le.offset=He,i.styles.push(Le)}),i}visitReference(e,t){return{type:8,animation:ws(this,rp(e.animation),t),options:gh(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:gh(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:gh(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,c]=function ex(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(XM,"")),n=n.replace(/@\*/g,Wm).replace(/@\w+/g,t=>Wm+"-"+t.substr(1)).replace(/:animating/g,jc),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Hs(t.collectedStyles,t.currentQuerySelector,{});const d=ws(this,rp(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:e.selector,options:gh(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function jM(){return new l.vHH(3013,Xt)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Cb(e.timings,t.errors,!0);return{type:12,animation:ws(this,rp(e.animation),t),timings:i,options:null}}}class tx{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ib(n){return!Array.isArray(n)&&"object"==typeof n}function gh(n){return n?(n=Zu(n)).params&&(n.params=function gD(n){return n?Zu(n):null}(n.params)):n={},n}function mD(n,e,t){return{duration:n,delay:e,easing:t}}function Jm(n,e,t,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class Yu{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const _D=new RegExp(":enter","g"),sx=new RegExp(":leave","g");function Ab(n,e,t,i,r,s={},c={},d,p,y=[]){return(new ox).buildKeyframes(n,e,t,i,r,s,c,d,p,y)}class ox{buildKeyframes(e,t,i,r,s,c,d,p,y,E=[]){y=y||new Yu;const T=new Mb(e,t,y,r,s,E,[]);T.options=p,T.currentTimeline.setStyles([c],null,T.errors,p),ws(this,i,T);const x=T.timelines.filter(P=>P.containsAnimation());if(Object.keys(d).length){let P;for(let L=x.length-1;L>=0;L--){const Z=x[L];if(Z.element===t){P=Z;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([d],null,T.errors,p)}return x.length?x.map(P=>P.buildKeyframes()):[Jm(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const c=null!=i.duration?fh(i.duration):null,d=null!=i.delay?fh(i.delay):null;return 0!==c&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,c,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ws(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Xm);const c=fh(s.delay);r.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>ws(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?fh(e.options.delay):0;e.steps.forEach(c=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),ws(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Cb(t.params?Eb(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,d=t.createSubContext().currentTimeline;d.easing=i.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?fh(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Xm);let c=i;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((y,E)=>{t.currentQueryIndex=E;const T=t.createSubContext(e.options,y);s&&T.delayNextStep(s),y===t.element&&(p=T.currentTimeline),ws(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,c=Math.abs(s.duration),d=c*(t.currentQueryTotal-1);let p=c*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const E=t.currentTimeline;p&&E.delayNextStep(p);const T=E.currentTime;ws(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-T+(r.startTime-i.currentTimeline.startTime)}}const Xm={};class Mb{constructor(e,t,i,r,s,c,d,p){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Xm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new cp(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=fh(i.duration)),null!=i.delay&&(r.delay=fh(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!c.hasOwnProperty(d))&&(c[d]=Eb(s[d],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new Mb(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Xm,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new ax(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,c){let d=[];if(r&&d.push(this.element),e.length>0){e=(e=e.replace(_D,"."+this._enterClassName)).replace(sx,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),d.push(...y)}return!s&&0==d.length&&c.push(function PE(n){return new l.vHH(3014,Xt)}()),d}}class cp{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new cp(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Za,this._currentKeyframe[t]=Za}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},c=function mh(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=Za})):ft(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(d=>{const p=Eb(c[d],s,i);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Za),this._updateStyle(d,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const y=ft(d,!0);Object.keys(y).forEach(E=>{const T=y[E];"!"==T?e.add(E):T==Za&&t.add(E)}),i||(y.offset=p/this.duration),r.push(y)});const s=e.size?sp(e.values()):[],c=t.size?sp(t.values()):[];if(i){const d=r[0],p=Zu(d);d.offset=0,p.offset=1,r=[d,p]}return Jm(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class ax extends cp{constructor(e,t,i,r,s,c,d=!1){super(e,t,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],c=i+t,d=t/c,p=ft(e[0],!1);p.offset=0,s.push(p);const y=ft(e[0],!1);y.offset=yD(d),s.push(y);const E=e.length-1;for(let T=1;T<=E;T++){let x=ft(e[T],!1);x.offset=yD((t+x.offset*i)/c),s.push(x)}i=c,t=0,r="",e=s}return Jm(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function yD(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class e_{}class vD extends e_{normalizePropertyName(e,t){return Db(e)}normalizeStyleValue(e,t,i,r){let s="";const c=i.toString().trim();if(lx[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function Ka(n,e){return new l.vHH(3005,Xt)}())}return c+s}}const lx=(()=>function bD(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function wD(n,e,t,i,r,s,c,d,p,y,E,T,x){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:E,totalTime:T,errors:x}}const up={};class CD{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function ED(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],c=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):c}build(e,t,i,r,s,c,d,p,y,E){const T=[],x=this.ast.options&&this.ast.options.params||up,L=this.buildStyles(i,d&&d.params||up,T),Z=p&&p.params||up,oe=this.buildStyles(r,Z,T),Le=new Set,We=new Map,He=new Map,Ge="void"===r,At={params:Object.assign(Object.assign({},x),Z)},xt=E?[]:Ab(e,t,this.ast.animation,s,c,L,oe,At,y,T);let nn=0;if(xt.forEach(ha=>{nn=Math.max(ha.duration+ha.delay,nn)}),T.length)return wD(t,this._triggerName,i,r,Ge,L,oe,[],[],We,He,nn,T);xt.forEach(ha=>{const gd=ha.element,P$=Hs(We,gd,{});ha.preStyleProps.forEach(Mg=>P$[Mg]=!0);const oC=Hs(He,gd,{});ha.postStyleProps.forEach(Mg=>oC[Mg]=!0),gd!==t&&Le.add(gd)});const qi=sp(Le.values());return wD(t,this._triggerName,i,r,Ge,L,oe,xt,qi,We,He,nn)}}class DD{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Zu(this.defaultParams);return Object.keys(e).forEach(s=>{const c=e[s];null!=c&&(r[s]=c)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const c=s;Object.keys(c).forEach(d=>{let p=c[d];p.length>1&&(p=Eb(p,r,t));const y=this.normalizer.normalizePropertyName(d,t);p=this.normalizer.normalizeStyleValue(d,y,p,t),i[y]=p})}}),i}}class ux{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new DD(r.style,r.options&&r.options.params||{},i)}),t_(this.states,"true","1"),t_(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new CD(e,r,this.states))}),this.fallbackTransition=function dx(n,e,t){return new CD(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(c=>c.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function t_(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const hx=new Yu;class TD{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=Qm(this._driver,t,i,[]);if(i.length)throw function BE(n){return new l.vHH(3503,Xt)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=WE(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let c;const d=new Map;if(s?(c=Ab(this._driver,t,s,np,hh,{},{},i,hx,r),c.forEach(E=>{const T=Hs(d,E.element,{});E.postStyleProps.forEach(x=>T[x]=null)})):(r.push(function db(){return new l.vHH(3300,Xt)}()),c=[]),r.length)throw function $m(n){return new l.vHH(3504,Xt)}();d.forEach((E,T)=>{Object.keys(E).forEach(x=>{E[x]=this._driver.computeStyle(T,x,Za)})});const y=Hc(c.map(E=>{const T=d.get(E.element);return this._buildPlayer(E,{},T)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function VE(n){return new l.vHH(3301,Xt)}();return t}listen(e,t,i,r){const s=gb(t,"","","");return fb(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const SD="ng-animate-queued",xb="ng-animate-disabled",_x=[],ID={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},AD={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},js="__ng_removed";class Rb{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Pb(n){return null!=n?n:null}(i?e.value:e),i){const s=Zu(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const dp="void",n_=new Rb(dp);class yx{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Co(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function UE(n,e){return new l.vHH(3302,Xt)}();if(null==i||0==i.length)throw function HE(n){return new l.vHH(3303,Xt)}();if(!function Nb(n){return"start"==n||"done"==n}(i))throw function jE(n,e){return new l.vHH(3400,Xt)}();const s=Hs(this._elementListeners,e,[]),c={name:t,phase:i,callback:r};s.push(c);const d=Hs(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(Co(e,Qa),Co(e,Qa+"-"+t),d[t]=n_),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function GE(n){return new l.vHH(3401,Xt)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),c=new kb(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Co(e,Qa),Co(e,Qa+"-"+t),this._engine.statesByElement.set(e,d={}));let p=d[t];const y=new Rb(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d[t]=y,p||(p=n_),y.value!==dp&&p.value===y.value){if(!function OD(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const Z=[],oe=s.matchStyles(p.value,p.params,Z),Le=s.matchStyles(y.value,y.params,Z);Z.length?this._engine.reportError(Z):this._engine.afterFlush(()=>{Xa(e,oe),Ja(e,Le)})}return}const x=Hs(this._engine.playersByElement,e,[]);x.forEach(Z=>{Z.namespaceId==this.id&&Z.triggerName==t&&Z.queued&&Z.destroy()});let P=s.matchTransition(p.value,y.value,e,y.params),L=!1;if(!P){if(!r)return;P=s.fallbackTransition,L=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:p,toState:y,player:c,isFallbackTransition:L}),L||(Co(e,SD),c.onStart(()=>{Ku(e,SD)})),c.onDone(()=>{let Z=this.players.indexOf(c);Z>=0&&this.players.splice(Z,1);const oe=this._engine.playersByElement.get(e);if(oe){let Le=oe.indexOf(c);Le>=0&&oe.splice(Le,1)}}),this.players.push(c),x.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Wm,!0);i.forEach(r=>{if(r[js])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),c=new Map;if(s){const d=[];if(Object.keys(s).forEach(p=>{if(c.set(p,s[p].value),this._triggers[p]){const y=this.trigger(e,p,dp,r);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),i&&Hc(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const p=this._triggers[c].fallbackTransition,y=i[c]||n_,E=new Rb(dp),T=new kb(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:p,fromState:y,toState:E,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let c=e;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[js];(!s||s===ID)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Co(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const p=gb(s,i.triggerName,i.fromState.value,i.toState.value);p._data=e,fb(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class vx{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new yx(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let c=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const p=r.get(d);if(p){const y=i.indexOf(p);i.splice(y+1,0,e),c=!0;break}d=this.driver.getParentElement(d)}}else for(let d=s;d>=0;d--)if(this.driver.containsElement(i[d].hostElement,t)){i.splice(d+1,0,e),c=!0;break}c||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const c=i[r[s]].namespaceId;if(c){const d=this._fetchNamespace(c);d&&t.add(d)}}}return t}trigger(e,t,i,r){if(hp(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!hp(t))return;const s=t[js];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Co(e,xb)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ku(e,xb))}removeNode(e,t,i,r){if(hp(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[js]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return hp(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Wm,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,jc,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Hc(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[js];if(i&&i.setForRemoval){if(e[js]=ID,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(xb))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Co(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Hc(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function zE(n){return new l.vHH(3402,Xt)}()}_flushAnimations(e,t){const i=new Yu,r=[],s=new Map,c=[],d=new Map,p=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(dt=>{E.add(dt);const Tt=this.driver.query(dt,".ng-animate-queued",!0);for(let Ot=0;Ot<Tt.length;Ot++)E.add(Tt[Ot])});const T=this.bodyNode,x=Array.from(this.statesByElement.keys()),P=i_(x,this.collectedEnterElements),L=new Map;let Z=0;P.forEach((dt,Tt)=>{const Ot=np+Z++;L.set(Tt,Ot),dt.forEach(_n=>Co(_n,Ot))});const oe=[],Le=new Set,We=new Set;for(let dt=0;dt<this.collectedLeaveElements.length;dt++){const Tt=this.collectedLeaveElements[dt],Ot=Tt[js];Ot&&Ot.setForRemoval&&(oe.push(Tt),Le.add(Tt),Ot.hasAnimation?this.driver.query(Tt,".ng-star-inserted",!0).forEach(_n=>Le.add(_n)):We.add(Tt))}const He=new Map,Ge=i_(x,Array.from(Le));Ge.forEach((dt,Tt)=>{const Ot=hh+Z++;He.set(Tt,Ot),dt.forEach(_n=>Co(_n,Ot))}),e.push(()=>{P.forEach((dt,Tt)=>{const Ot=L.get(Tt);dt.forEach(_n=>Ku(_n,Ot))}),Ge.forEach((dt,Tt)=>{const Ot=He.get(Tt);dt.forEach(_n=>Ku(_n,Ot))}),oe.forEach(dt=>{this.processLeaveNode(dt)})});const At=[],xt=[];for(let dt=this._namespaceList.length-1;dt>=0;dt--)this._namespaceList[dt].drainQueuedTransitions(t).forEach(Ot=>{const _n=Ot.player,Ur=Ot.element;if(At.push(_n),this.collectedEnterElements.length){const to=Ur[js];if(to&&to.setForMove){if(to.previousTriggersValues&&to.previousTriggersValues.has(Ot.triggerName)){const xg=to.previousTriggersValues.get(Ot.triggerName),ef=this.statesByElement.get(Ot.element);ef&&ef[Ot.triggerName]&&(ef[Ot.triggerName].value=xg)}return void _n.destroy()}}const ru=!T||!this.driver.containsElement(T,Ur),fa=He.get(Ur),Xh=L.get(Ur),Ei=this._buildInstruction(Ot,i,Xh,fa,ru);if(Ei.errors&&Ei.errors.length)return void xt.push(Ei);if(ru)return _n.onStart(()=>Xa(Ur,Ei.fromStyles)),_n.onDestroy(()=>Ja(Ur,Ei.toStyles)),void r.push(_n);if(Ot.isFallbackTransition)return _n.onStart(()=>Xa(Ur,Ei.fromStyles)),_n.onDestroy(()=>Ja(Ur,Ei.toStyles)),void r.push(_n);const L$=[];Ei.timelines.forEach(to=>{to.stretchStartingKeyframe=!0,this.disabledNodes.has(to.element)||L$.push(to)}),Ei.timelines=L$,i.append(Ur,Ei.timelines),c.push({instruction:Ei,player:_n,element:Ur}),Ei.queriedElements.forEach(to=>Hs(d,to,[]).push(_n)),Ei.preStyleProps.forEach((to,xg)=>{const ef=Object.keys(to);if(ef.length){let Rg=p.get(xg);Rg||p.set(xg,Rg=new Set),ef.forEach(H1=>Rg.add(H1))}}),Ei.postStyleProps.forEach((to,xg)=>{const ef=Object.keys(to);let Rg=y.get(xg);Rg||y.set(xg,Rg=new Set),ef.forEach(H1=>Rg.add(H1))})});if(xt.length){const dt=[];xt.forEach(Tt=>{dt.push(function $E(n,e){return new l.vHH(3505,Xt)}())}),At.forEach(Tt=>Tt.destroy()),this.reportError(dt)}const nn=new Map,qi=new Map;c.forEach(dt=>{const Tt=dt.element;i.has(Tt)&&(qi.set(Tt,Tt),this._beforeAnimationBuild(dt.player.namespaceId,dt.instruction,nn))}),r.forEach(dt=>{const Tt=dt.element;this._getPreviousPlayers(Tt,!1,dt.namespaceId,dt.triggerName,null).forEach(_n=>{Hs(nn,Tt,[]).push(_n),_n.destroy()})});const ha=oe.filter(dt=>wx(dt,p,y)),gd=new Map;xD(gd,this.driver,We,y,Za).forEach(dt=>{wx(dt,p,y)&&ha.push(dt)});const oC=new Map;P.forEach((dt,Tt)=>{xD(oC,this.driver,new Set(dt),p,"!")}),ha.forEach(dt=>{const Tt=gd.get(dt),Ot=oC.get(dt);gd.set(dt,Object.assign(Object.assign({},Tt),Ot))});const Mg=[],N$=[],F$={};c.forEach(dt=>{const{element:Tt,player:Ot,instruction:_n}=dt;if(i.has(Tt)){if(E.has(Tt))return Ot.onDestroy(()=>Ja(Tt,_n.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(_n.totalTime),void r.push(Ot);let Ur=F$;if(qi.size>1){let fa=Tt;const Xh=[];for(;fa=fa.parentNode;){const Ei=qi.get(fa);if(Ei){Ur=Ei;break}Xh.push(fa)}Xh.forEach(Ei=>qi.set(Ei,Ur))}const ru=this._buildAnimation(Ot.namespaceId,_n,nn,s,oC,gd);if(Ot.setRealPlayer(ru),Ur===F$)Mg.push(Ot);else{const fa=this.playersByElement.get(Ur);fa&&fa.length&&(Ot.parentPlayer=Hc(fa)),r.push(Ot)}}else Xa(Tt,_n.fromStyles),Ot.onDestroy(()=>Ja(Tt,_n.toStyles)),N$.push(Ot),E.has(Tt)&&r.push(Ot)}),N$.forEach(dt=>{const Tt=s.get(dt.element);if(Tt&&Tt.length){const Ot=Hc(Tt);dt.setRealPlayer(Ot)}}),r.forEach(dt=>{dt.parentPlayer?dt.syncPlayerEvents(dt.parentPlayer):dt.destroy()});for(let dt=0;dt<oe.length;dt++){const Tt=oe[dt],Ot=Tt[js];if(Ku(Tt,hh),Ot&&Ot.hasAnimation)continue;let _n=[];if(d.size){let ru=d.get(Tt);ru&&ru.length&&_n.push(...ru);let fa=this.driver.query(Tt,jc,!0);for(let Xh=0;Xh<fa.length;Xh++){let Ei=d.get(fa[Xh]);Ei&&Ei.length&&_n.push(...Ei)}}const Ur=_n.filter(ru=>!ru.destroyed);Ur.length?bx(this,Tt,Ur):this.processLeaveNode(Tt)}return oe.length=0,Mg.forEach(dt=>{this.players.push(dt),dt.onDone(()=>{dt.destroy();const Tt=this.players.indexOf(dt);this.players.splice(Tt,1)}),dt.play()}),Mg}elementContainsData(e,t){let i=!1;const r=t[js];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let c=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(c=d)}else{const d=this.playersByElement.get(e);if(d){const p=!s||s==dp;d.forEach(y=>{y.queued||!p&&y.triggerName!=r||c.push(y)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(e,t,i){const s=t.element,c=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,E=y!==s,T=Hs(i,y,[]);this._getPreviousPlayers(y,E,c,d,t.toState).forEach(P=>{const L=P.getRealPlayer();L.beforeDestroy&&L.beforeDestroy(),P.destroy(),T.push(P)})}Xa(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,c){const d=t.triggerName,p=t.element,y=[],E=new Set,T=new Set,x=t.timelines.map(L=>{const Z=L.element;E.add(Z);const oe=Z[js];if(oe&&oe.removedBeforeQueried)return new Xf(L.duration,L.delay);const Le=Z!==p,We=function RD(n){const e=[];return kD(n,e),e}((i.get(Z)||_x).map(nn=>nn.getRealPlayer())).filter(nn=>!!nn.element&&nn.element===Z),He=s.get(Z),Ge=c.get(Z),At=WE(0,this._normalizer,0,L.keyframes,He,Ge),xt=this._buildPlayer(L,At,We);if(L.subTimeline&&r&&T.add(Z),Le){const nn=new kb(e,d,Z);nn.setRealPlayer(xt),y.push(nn)}return xt});y.forEach(L=>{Hs(this.playersByQueriedElement,L.element,[]).push(L),L.onDone(()=>function Ob(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,L.element,L))}),E.forEach(L=>Co(L,nD));const P=Hc(x);return P.onDestroy(()=>{E.forEach(L=>Ku(L,nD)),Ja(p,t.toStyles)}),T.forEach(L=>{Hs(r,L,[]).push(P)}),P}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Xf(e.duration,e.delay)}}class kb{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Xf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>fb(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Hs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function hp(n){return n&&1===n.nodeType}function MD(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function xD(n,e,t,i,r){const s=[];t.forEach(p=>s.push(MD(p)));const c=[];i.forEach((p,y)=>{const E={};p.forEach(T=>{const x=E[T]=e.computeStyle(y,T,r);(!x||0==x.length)&&(y[js]=AD,c.push(y))}),n.set(y,E)});let d=0;return t.forEach(p=>MD(p,s[d++])),c}function i_(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const r=new Set(e),s=new Map;function c(d){if(!d)return 1;let p=s.get(d);if(p)return p;const y=d.parentNode;return p=t.has(y)?y:r.has(y)?1:c(y),s.set(d,p),p}return e.forEach(d=>{const p=c(d);1!==p&&t.get(p).push(d)}),t}function Co(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ku(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function bx(n,e,t){Hc(t).onDone(()=>n.processLeaveNode(e))}function kD(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof RE?kD(i.players,e):e.push(i)}}function wx(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class r_{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new vx(e,t,i),this._timelineEngine=new TD(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const c=e+"-"+r;let d=this._triggerCache[c];if(!d){const p=[],E=Qm(this._driver,s,p,[]);if(p.length)throw function zM(n,e){return new l.vHH(3404,Xt)}();d=function cx(n,e,t){return new ux(n,e,t)}(r,E,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(t,r,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,c]=ZE(i);this._timelineEngine.command(s,t,c,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[c,d]=ZE(i);return this._timelineEngine.listen(c,t,d,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Cx=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ja(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ja(this._element,this._initialStyles),this._endStyles&&(Ja(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Xa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Xa(this._element,this._endStyles),this._endStyles=null),Ja(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function $c(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];fp(r)&&(e=e||{},e[r]=n[r])}return e}function fp(n){return"display"===n||"position"===n}class PD{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:cD(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class uL{validateStyleProperty(e){return JE(e)}matchesElement(e,t){return!1}containsElement(e,t){return yb(e,t)}getParentElement(e){return _b(e)}query(e,t,i){return vb(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,c=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const y={},E=c.filter(x=>x instanceof PD);(function aD(n,e){return 0===n||0===e})(i,r)&&E.forEach(x=>{let P=x.currentSnapshot;Object.keys(P).forEach(L=>y[L]=P[L])}),t=function lD(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],c=[];if(i.forEach(d=>{s.hasOwnProperty(d)||c.push(d),s[d]=t[d]}),c.length)for(var r=1;r<e.length;r++){let d=e[r];c.forEach(function(p){d[p]=cD(n,p)})}}return e}(e,t=t.map(x=>ft(x,!1)),y);const T=function s_(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=$c(e[0]),e.length>1&&(i=$c(e[e.length-1]))):e&&(t=$c(e)),t||i?new Cx(n,t,i):null}(e,t);return new PD(e,t,p,T)}}let ND=(()=>{class n extends ob{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?ab(t):t;return FD(this._renderer,null,i,"register",[r]),new Ex(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(ne))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ex extends class ME{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Dx(this._id,e,t||{},this._renderer)}}class Dx{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return FD(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function FD(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const Fb="@.disabled";let LD=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=null==c?void 0:c.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let E=this._rendererCache.get(s);return E||(E=new a_("",s,this.engine),this._rendererCache.set(s,E)),E}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(c,d,t,E.name,E)};return i.data.animation.forEach(p),new l_(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(r_),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class a_{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==Fb?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class l_ extends a_{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Fb?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function pp(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),c="";return"@"!=s.charAt(0)&&([s,c]=function Tx(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(e,t,i)}}let BD=(()=>{class n extends r_{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne),l.LFG(qm),l.LFG(e_))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const el=new l.OlP("AnimationModuleType"),c_=[{provide:ob,useClass:ND},{provide:e_,useFactory:function VD(){return new vD}},{provide:r_,useClass:BD},{provide:l.FYo,useFactory:function Sx(n,e,t){return new LD(n,e,t)},deps:[Sn,r_,l.R0b]}],UD=[{provide:qm,useFactory:()=>new uL},{provide:el,useValue:"BrowserAnimations"},...c_],dL=[{provide:qm,useClass:bb},{provide:el,useValue:"NoopAnimations"},...c_];let Ix=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?dL:UD}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:UD,imports:[Da]}),n})();function _h(n,e){if(1&n&&l._UZ(0,"mat-pseudo-checkbox",4),2&n){const t=l.oxw();l.Q6J("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function fL(n,e){if(1&n&&(l.TgZ(0,"span",5),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.hij("(",t.group.label,")")}}const HD=["*"],zD=new l.OlP("mat-sanity-checks",{providedIn:"root",factory:function gL(){return!0}});let bn=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!OC()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sb),l.LFG(zD,8),l.LFG(ne))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Tm],Tm]}),n})();function mp(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=un(e)}}}function u_(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function d_(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=un(e)}}}function $D(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?za(t):this.defaultTabIndex}}}function qD(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new gt.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}function WD(n){return class extends n{constructor(...e){super(...e),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new sn.y(t=>{this._isInitialized?this._notifySubscriber(t):this._pendingSubscribers.push(t)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(e){e.next(),e.complete()}}}let Lb=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Bb{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const aa={enterDuration:225,exitDuration:150},yh=Xd({passive:!0}),vh=["mousedown","touchstart"],ZD=["mouseup","mouseleave","touchend","touchcancel"];class Vx{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ea(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},aa),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const c=i.radius||function h_(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),d=e-r.left,p=t-r.top,y=s.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=d-c+"px",E.style.top=p-c+"px",E.style.height=2*c+"px",E.style.width=2*c+"px",null!=i.color&&(E.style.backgroundColor=i.color),E.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(E),function Ux(n){window.getComputedStyle(n).getPropertyValue("opacity")}(E),E.style.transform="scale(1)";const T=new Bb(this,E,i);return T.state=0,this._activeRipples.add(T),i.persistent||(this._mostRecentTransientRipple=T),this._runTimeoutOutsideZone(()=>{const x=T===this._mostRecentTransientRipple;T.state=1,!i.persistent&&(!x||!this._isPointerDown)&&T.fadeOut()},y),T}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},aa),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ea(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(vh))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ZD),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=eb(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Vm(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,yh)})})}_removeTriggerEvents(){this._triggerElement&&(vh.forEach(e=>{this._triggerElement.removeEventListener(e,this,yh)}),this._pointerUpEventsRegistered&&ZD.forEach(e=>{this._triggerElement.removeEventListener(e,this,yh)}))}}const f_=new l.OlP("mat-ripple-global-options");let yp=(()=>{class n{constructor(t,i,r,s,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Vx(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(Mi),l.Y36(f_,8),l.Y36(el,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&l.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),p_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[bn],bn]}),n})(),YD=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(el,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,i){2&t&&l.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),KD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[bn]]}),n})();const g_=new l.OlP("MAT_OPTION_PARENT_COMPONENT"),jx=new l.OlP("MatOptgroup");let Vb=0;class JD{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let Ub=(()=>{class n{constructor(t,i,r,s){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Vb++,this.onSelectionChange=new l.vpe,this._stateChanges=new gt.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=un(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!Wl(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new JD(this,t))}}return n.\u0275fac=function(t){l.$Z()},n.\u0275dir=l.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),m_=(()=>{class n extends Ub{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(g_,8),l.Y36(jx,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,i){1&t&&l.NdJ("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&t&&(l.Ikx("id",i.id),l.uIk("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),l.ekj("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[l.qOj],ngContentSelectors:HD,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,i){1&t&&(l.F$t(),l.YNc(0,_h,1,2,"mat-pseudo-checkbox",0),l.TgZ(1,"span",1),l.Hsn(2),l.qZA(),l.YNc(3,fL,2,1,"span",2),l._UZ(4,"div",3)),2&t&&(l.Q6J("ngIf",i.multiple),l.xp6(3),l.Q6J("ngIf",i.group&&i.group._inert),l.xp6(1),l.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},directives:[YD,Vn,yp],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function XD(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),s=0;for(let c=0;c<n+1;c++)i[c].group&&i[c].group===r[s]&&s++;return s}return 0}let eT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[p_,co,bn,KD]]}),n})();const zx=["mat-button",""],tT=["*"],rT=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],sT=u_(mp(d_(class{constructor(n){this._elementRef=n}})));let tl=(()=>{class n extends sT{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of rT)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(uh),l.Y36(el,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&l.Gf(yp,5),2&t){let r;l.iGM(r=l.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(l.uIk("disabled",i.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[l.qOj],attrs:zx,ngContentSelectors:tT,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(l.F$t(),l.TgZ(0,"span",0),l.Hsn(1),l.qZA(),l._UZ(2,"span",1)(3,"span",2)),2&t&&(l.xp6(2),l.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),l.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[yp],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),vp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[p_,bn],bn]}),n})();const oT=new Set;let Qu,qx=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):bh}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Wr(n){if(!oT.has(n))try{Qu||(Qu=document.createElement("style"),Qu.setAttribute("type","text/css"),document.head.appendChild(Qu)),Qu.sheet&&(Qu.sheet.insertRule(`@media ${n} {body{ }}`,0),oT.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Mi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bh(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Hb=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new gt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return aT(bm(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=_s(aT(bm(t)).map(c=>this._registerQuery(c).observable));return s=Uo(s.pipe((0,Pn.q)(1)),s.pipe(hE(1),ah(0))),s.pipe((0,ot.U)(c=>{const d={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:y})=>{d.matches=d.matches||p,d.breakpoints[y]=p}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new sn.y(c=>{const d=p=>this._zone.run(()=>c.next(p));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(gi(i),(0,ot.U)(({matches:c})=>({query:t,matches:c})),An(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(qx),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aT(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function bp(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",2)(1,"button",3),l.NdJ("click",function(){return l.CHM(t),l.oxw().action()}),l._uU(2),l.qZA()()}if(2&n){const t=l.oxw();l.xp6(2),l.Oqu(t.data.action)}}function Zx(n,e){}const __=new l.OlP("MatSnackBarData");class y_{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const lT=Math.pow(2,31)-1;class jb{constructor(e,t){this._overlayRef=t,this._afterDismissed=new gt.x,this._afterOpened=new gt.x,this._onAction=new gt.x,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,lT))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let Yx=(()=>{class n{constructor(t,i){this.snackBarRef=t,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(jb),l.Y36(__))},n.\u0275cmp=l.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"span",0),l._uU(1),l.qZA(),l.YNc(2,bp,3,1,"div",1)),2&t&&(l.xp6(1),l.Oqu(i.data.message),l.xp6(1),l.Q6J("ngIf",i.hasAction))},directives:[tl,Vn],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();const Gb={snackBarState:ra("state",[jt("void, hidden",Bt({transform:"scale(0.8)",opacity:0})),jt("visible",Bt({transform:"scale(1)",opacity:1})),xi("* => visible",Xi("150ms cubic-bezier(0, 0, 0.2, 1)")),xi("* => void, * => hidden",Xi("75ms cubic-bezier(0.4, 0.0, 1, 1)",Bt({opacity:0})))])};let cT=(()=>{class n extends Gu{constructor(t,i,r,s,c){super(),this._ngZone=t,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=c,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new gt.x,this._onExit=new gt.x,this._onEnter=new gt.x,this._animationState="void",this.attachDomPortal=d=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(d)),this._live="assertive"!==c.politeness||c.announcementMessage?"off"===c.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:i,toState:r}=t;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,Pn.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>t.classList.add(r)):t.classList.add(i)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),i.appendChild(t),null==r||r.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.R0b),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Mi),l.Y36(y_))},n.\u0275cmp=l.Xpm({type:n,selectors:[["snack-bar-container"]],viewQuery:function(t,i){if(1&t&&l.Gf(Mm,7),2&t){let r;l.iGM(r=l.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,i){1&t&&l.WFA("@state.done",function(s){return i.onAnimationEnd(s)}),2&t&&l.d8E("@state",i._animationState)},features:[l.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.YNc(1,Zx,0,0,"ng-template",1),l.qZA(),l._UZ(2,"div")),2&t&&(l.xp6(2),l.uIk("aria-live",i._live)("role",i._role))},directives:[Mm],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[Gb.snackBarState]}}),n})(),v_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[jv,Av,co,vp,bn],bn]}),n})();const wp=new l.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function zb(){return new y_}});let SL=(()=>{class n{constructor(t,i,r,s,c,d){this._overlay=t,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=c,this._defaultConfig=d,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,i){return this._attach(t,i)}openFromTemplate(t,i){return this._attach(t,i)}open(t,i="",r){const s=Object.assign(Object.assign({},this._defaultConfig),r);return s.data={message:t,action:i},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,i){const s=l.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:y_,useValue:i}]}),c=new Lc(this.snackBarContainerComponent,i.viewContainerRef,s),d=t.attach(c);return d.instance.snackBarConfig=i,d.instance}_attach(t,i){const r=Object.assign(Object.assign(Object.assign({},new y_),this._defaultConfig),i),s=this._createOverlay(r),c=this._attachSnackBarContainer(s,r),d=new jb(c,s);if(t instanceof l.Rgc){const p=new th(t,null,{$implicit:r.data,snackBarRef:d});d.instance=c.attachTemplatePortal(p)}else{const p=this._createInjector(r,d),y=new Lc(t,void 0,p),E=c.attachComponentPortal(y);d.instance=E.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(An(s.detachments())).subscribe(p=>{s.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),r.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(d,r),this._openedSnackBarRef=d,this._openedSnackBarRef}_animateSnackBar(t,i){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),i.duration&&i.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(i.duration))}_createOverlay(t){const i=new Zl;i.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,c="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,d=!c&&"center"!==t.horizontalPosition;return c?r.left("0"):d?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(t,i){return l.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:jb,useValue:i},{provide:__,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Wa),l.LFG(Hm),l.LFG(l.zs3),l.LFG(Hb),l.LFG(n,12),l.LFG(wp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),uT=(()=>{class n extends SL{constructor(t,i,r,s,c,d){super(t,i,r,s,c,d),this.simpleSnackBarComponent=Yx,this.snackBarContainerComponent=cT,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Wa),l.LFG(Hm),l.LFG(l.zs3),l.LFG(Hb),l.LFG(n,12),l.LFG(wp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:v_}),n})();var b_=F(5363),dT=F(6063);class w_ extends gt.x{constructor(e=1/0,t=1/0,i=dT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;t||(i.push(e),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!e.closed;c+=i?1:2)e.next(s[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=t.now();let d=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)d=p;d&&i.splice(0,d+1)}}}var C_=F(3099);function hT(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=null!=n?n:1/0,(0,C_.B)({connector:()=>new w_(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function E_(n,e){return(0,dr.m)(e)?In(()=>n,e):In(()=>n)}var Cp=F(9468),mn=F(5813),Gi=F(2011);F(5867);var Ee=F(5861),Cs=F(9681),nl=F(4859),N=F(2090),il=F(1877);const nR=new Map,kL={activated:!1,tokenObservers:[]},OL={initialized:!1,enabled:!1};function wi(n){return nR.get(n)||kL}function rl(n,e){nR.set(n,e)}function Dp(){return OL}class bT{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function wT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Pr=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function I_(n){if(!wi(n).activated)throw Pr.create("use-before-activation",{appName:n.name})}function ET(n,e){return qb.apply(this,arguments)}function qb(){return(qb=(0,Ee.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const T=yield r.getHeartbeatsHeader();T&&(i["X-Firebase-Client"]=T)}const s={method:"POST",body:JSON.stringify(e),headers:i};let c,d;try{c=yield fetch(n,s)}catch(T){throw Pr.create("fetch-network-error",{originalErrorMessage:T.message})}if(200!==c.status)throw Pr.create("fetch-status-error",{httpStatus:c.status});try{d=yield c.json()}catch(T){throw Pr.create("fetch-parse-error",{originalErrorMessage:T.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Pr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(p[1]),E=Date.now();return{token:d.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}})).apply(this,arguments)}function FL(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Sp="firebase-app-check-store";let A_=null;function M_(){return A_||(A_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Pr.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Sp,{keyPath:"compositeKey"})}}catch(t){e(Pr.create("storage-open",{originalErrorMessage:t.message}))}}),A_)}function Kb(){return(Kb=(0,Ee.Z)(function*(n,e){const i=(yield M_()).transaction(Sp,"readwrite"),s=i.objectStore(Sp).put({compositeKey:n,value:e});return new Promise((c,d)=>{s.onsuccess=p=>{c()},i.onerror=p=>{var y;d(Pr.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Ip=new il.Yd("@firebase/app-check");function ST(n,e){return(0,N.hl)()?function lR(n,e){return function Yb(n,e){return Kb.apply(this,arguments)}(function TT(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ip.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ew(){return Dp().enabled}function IT(){return tw.apply(this,arguments)}function tw(){return(tw=(0,Ee.Z)(function*(){const n=Dp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const cR={error:"UNKNOWN_ERROR"};function BL(n){return N.US.encodeString(JSON.stringify(n),!1)}function Ap(n){return R_.apply(this,arguments)}function R_(){return(R_=(0,Ee.Z)(function*(n,e=!1){const t=n.app;I_(t);const i=wi(t);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&Mp(p)&&(r=p)}if(!e&&r&&Mp(r))return{token:r.token};let d,c=!1;if(ew()){i.exchangeTokenPromise||(i.exchangeTokenPromise=ET(FL(t,yield IT()),n.heartbeatServiceProvider).then(y=>(i.exchangeTokenPromise=void 0,y)),c=!0);const p=yield i.exchangeTokenPromise;return yield ST(t,p),rl(t,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),c=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Ip.warn(p.message):Ip.error(p),s=p}return r?(d={token:r.token},rl(t,Object.assign(Object.assign({},i),{token:r})),yield ST(t,r)):d=uR(s),c&&k_(t,d),d})).apply(this,arguments)}function iw(n,e){const t=wi(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),rl(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function rw(n){const{app:e}=n,t=wi(e);let i=t.tokenRefresher;i||(i=function sw(n){const{app:e}=n;return new bT((0,Ee.Z)(function*(){let i;if(i=wi(e).token?yield Ap(n,!0):yield Ap(n),i.error)throw i.error}),()=>!0,()=>{const t=wi(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),rl(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function k_(n,e){const t=wi(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function Mp(n){return n.expireTimeMillis-Date.now()>0}function uR(n){return{token:BL(cR),error:n}}class MT{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=wi(this.app);for(const t of e)iw(this.app,t.next);return Promise.resolve()}}const vR="app-check-internal";!function zL(){(0,Cs._registerComponent)(new nl.wA("app-check",n=>function xT(n,e){return new MT(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(vR).initialize()})),(0,Cs._registerComponent)(new nl.wA(vR,n=>function dR(n){return{getToken:e=>Ap(n,e),addTokenListener:e=>function nw(n,e,t,i){const{app:r}=n,s=wi(r),c={next:t,error:i,type:e};if(rl(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&Mp(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),rw(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>rw(n))}(n,"INTERNAL",e),removeTokenListener:e=>iw(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Cs.registerVersion)("@firebase/app-check","0.5.8")}();class wh{constructor(){return(0,mn.vb)("app-check")}}"undefined"!=typeof window&&window;var N_=F(127);const GT=new l.OlP("angularfire2.auth.use-emulator"),zT=new l.OlP("angularfire2.auth.settings"),cw=new l.OlP("angularfire2.auth.tenant-id"),uw=new l.OlP("angularfire2.auth.langugage-code"),$T=new l.OlP("angularfire2.auth.use-device-language"),qT=new l.OlP("angularfire.auth.persistence"),WT=(n,e,t,i,r,s,c,d)=>(0,Gi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),c)for(const[y,E]of Object.entries(c))p.settings[y]=E;return d&&p.setPersistence(d),p},[t,i,r,s,c,d]);let F_=(()=>{class n{constructor(t,i,r,s,c,d,p,y,E,T,x,P){const L=new gt.x,Z=Ze(void 0).pipe((0,b_.Q)(c.outsideAngular),In(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8775)))),(0,ot.U)(()=>(0,Gi.on)(t,s,i)),(0,ot.U)(oe=>WT(oe,s,d,y,E,T,p,x)),hT({bufferSize:1,refCount:!1}));if(va(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ze(null);else{Z.pipe(Pa()).subscribe();const Le=Z.pipe(In(Ge=>Ge.getRedirectResult().then(At=>At,()=>null)),mn.iC,hT({bufferSize:1,refCount:!1})),We=Z.pipe(In(Ge=>new sn.y(At=>({unsubscribe:s.runOutsideAngular(()=>Ge.onAuthStateChanged(xt=>At.next(xt),xt=>At.error(xt),()=>At.complete()))})))),He=Z.pipe(In(Ge=>new sn.y(At=>({unsubscribe:s.runOutsideAngular(()=>Ge.onIdTokenChanged(xt=>At.next(xt),xt=>At.error(xt),()=>At.complete()))}))));this.authState=Le.pipe(E_(We),(0,Cp.R)(c.outsideAngular),(0,b_.Q)(c.insideAngular)),this.user=Le.pipe(E_(He),(0,Cp.R)(c.outsideAngular),(0,b_.Q)(c.insideAngular)),this.idToken=this.user.pipe(In(Ge=>Ge?(0,vn.D)(Ge.getIdToken()):Ze(null))),this.idTokenResult=this.user.pipe(In(Ge=>Ge?(0,vn.D)(Ge.getIdTokenResult()):Ze(null))),this.credential=(0,si.T)(Le,L,this.authState.pipe(Nn(Ge=>!Ge))).pipe((0,ot.U)(Ge=>(null==Ge?void 0:Ge.user)?Ge:null),(0,Cp.R)(c.outsideAngular),(0,b_.Q)(c.insideAngular))}return(0,Gi.pX)(this,Z,s,{spy:{apply:(oe,Le,We)=>{(oe.startsWith("signIn")||oe.startsWith("createUser"))&&We.then(He=>L.next(He))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Gi.Dh),l.LFG(Gi.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(mn.HU),l.LFG(GT,8),l.LFG(zT,8),l.LFG(cw,8),l.LFG(uw,8),l.LFG($T,8),l.LFG(qT,8),l.LFG(wh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QL=(()=>{class n{constructor(){N_.Z.registerVersion("angularfire",mn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[F_]}),n})();F(8775);var ZT=F(3942);const TR="@firebase/database",o="0.13.0";let a="";function u(n){a=n}class h{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class f{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const m=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(e){}return new f},b=m("localStorage"),C=m("sessionStorage"),D=new il.Yd("@firebase/database"),M=function(){let n=1;return function(){return n++}}(),R=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const i=t.digest();return N.US.encodeByteArray(i)},V=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=V.apply(null,i):e+="object"==typeof i?(0,N.Pz)(i):i,e+=" "}return e};let j=null,X=!0;const we=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(D.logLevel=il.in.VERBOSE,j=D.log.bind(D),e&&C.set("logging_enabled",!0)):"function"==typeof n?j=n:(j=null,C.remove("logging_enabled"))},ke=function(...n){if(!0===X&&(X=!1,null===j&&!0===C.get("logging_enabled")&&we(!0)),j){const e=V.apply(null,n);j(e)}},qe=function(n){return function(...e){ke(n,...e)}},at=function(...n){const e="FIREBASE INTERNAL ERROR: "+V(...n);D.error(e)},Se=function(...n){const e=`FIREBASE FATAL ERROR: ${V(...n)}`;throw D.error(e),new Error(e)},st=function(...n){const e="FIREBASE WARNING: "+V(...n);D.warn(e)},on=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Zr="[MIN_NAME]",Do="[MAX_NAME]",Kl=function(n,e){if(n===e)return 0;if(n===Zr||e===Do)return-1;if(e===Zr||n===Do)return 1;{const t=YT(n),i=YT(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},dw=function(n,e){return n===e?0:n<e?-1:1},Ju=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Pz)(e))},kp=function(n){if("object"!=typeof n||null===n)return(0,N.Pz)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,N.Pz)(e[i]),t+=":",t+=kp(n[e[i]]);return t+="}",t},L_=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const B_=function(n){(0,N.hu)(!on(n),"Invalid JSON number");const i=1023;let r,s,c,d,p;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const E=y.join("");let T="";for(p=0;p<64;p+=8){let x=parseInt(E.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),T+=x}return T.toLowerCase()},oq=new RegExp("^-?(0*)\\d{1,10}$"),XL=-2147483648,SR=2147483647,YT=function(n){if(oq.test(n)){const e=Number(n);if(e>=XL&&e<=SR)return e}return null},V_=function(n){try{n()}catch(e){setTimeout(()=>{throw st("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},fw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class lq{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){st(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class cq{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ke("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',st(e)}}let pw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const rB=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aB="websocket",lB="long_polling";class AR{constructor(e,t,i,r,s=!1,c="",d=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=b.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&b.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function cB(n,e,t){let i;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===aB)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==lB)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function uq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Ri(t,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class dq{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const MR={},xR={};function RR(n){const e=n.toString();return MR[e]||(MR[e]=new dq),MR[e]}class fq{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&V_(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ch{constructor(e,t,i,r,s,c,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qe(e),this.stats_=RR(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),cB(t,lB,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new fq(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new kR((...s)=>{const[c,d,p,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&rB.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ch.forceAllow_=!0}static forceDisallow(){Ch.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!Ch.forceAllow_&&(Ch.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,N.h$)(t),r=L_(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class kR{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=M(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=kR.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){ke("frame writing exception"),d.stack&&ke(d.stack),ke(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ke("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{ke("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let QT=null;"undefined"!=typeof MozWebSocket?QT=MozWebSocket:"undefined"!=typeof WebSocket&&(QT=WebSocket);let U_=(()=>{class n{constructor(t,i,r,s,c,d,p){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qe(this.connId),this.stats_=RR(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,c){const d={v:"5"};return!(0,N.Yr)()&&"undefined"!=typeof location&&location.hostname&&rB.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),cB(t,aB,d)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,b.set("previous_websocket_failure",!0);try{let r;if((0,N.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${a}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,p=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;p&&(c.proxy={origin:p})}this.mySock=new QT(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==QT&&!n.forceDisallow_}static previouslyFailed(){return b.isInMemoryStorage||!0===b.get("previous_websocket_failure")}markConnectionHealthy(){b.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,N.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,N.Pz)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=L_(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),mB=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ch,U_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=U_&&U_.isAvailable();let r=i&&!U_.previouslyFailed();if(t.webSocketOnly&&(i||st("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[U_];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class EB{constructor(e,t,i,r,s,c,d,p,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qe("c:"+this.id+":"),this.transportManager_=new mB(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=fw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ju("t",e),i=Ju("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ju("t",e),i=Ju("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ju("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?at("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):at("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&st("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),fw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(b.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class DB{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class TB{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class JT extends TB{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new JT}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Mn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function wn(){return new Mn("")}function Kt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Eh(n){return n.pieces_.length-n.pieceNum_}function jn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Mn(n.pieces_,e)}function PR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function gw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function AB(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Mn(e,0)}function oi(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Mn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Mn(t,0)}function Qt(n){return n.pieceNum_>=n.pieces_.length}function $s(n,e){const t=Kt(n),i=Kt(e);if(null===t)return e;if(t===i)return $s(jn(n),jn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Nq(n,e){const t=gw(n,0),i=gw(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=Kl(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function NR(n,e){if(Eh(n)!==Eh(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function sl(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Eh(n)>Eh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Fq{constructor(e,t){this.errorPrefix_=t,this.parts_=gw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,N.ug)(this.parts_[i]);MB(this)}}function MB(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Op(n))}function Op(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class FR extends TB{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new FR}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const mw=1e3;let eS,Pp=(()=>{class n extends DB{constructor(t,i,r,s,c,d,p,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=qe("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=mw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");FR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&JT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,c={r:s,a:t,b:i};this.log_((0,N.Pz)(c)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new N.BH,r={p:t._path.toString(),q:t._queryObject},s={action:"g",request:r,onComplete:d=>{const p=d.d;"ok"===d.s?(this.onDataUpdate_(r.p,p,!1,null),i.resolve(p)):i.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[c];void 0===d||s!==d||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),i.promise}listen(t,i,r,s){this.initConnection_();const c=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(d).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};t.tag&&(c.q=i._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,p=>{const y=p.d,E=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(r,s),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const r=(0,N.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();st(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,N.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const c={p:t};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Pz)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):at("Unrecognized action received from server: "+(0,N.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=mw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=mw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,y=null;const E=function(){y?y.close():(p=!0,s())};t.realtime_={close:E,sendRequest:function(P){(0,N.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,L]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);p?ke("getToken() completed but was canceled"):(ke("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=L&&L.token,y=new EB(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,Z=>{st(Z+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(P){t.log_("Failed to get token: "+P),p||(t.repoInfo_.nodeAdmin&&st(P),E())}}})()}interrupt(t){ke("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ke("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=mw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(c=>kp(c)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new Mn(t).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){ke("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){ke("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,N.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+a.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=JT.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new en(e,t)}}class XT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new en(Zr,e),r=new en(Zr,t);return 0!==this.compare(i,r)}minPost(){return en.MIN}}class kB extends XT{static get __EMPTY_NODE(){return eS}static set __EMPTY_NODE(e){eS=e}compare(e,t){return Kl(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return en.MIN}maxPost(){return new en(Do,eS)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new en(e,eS)}toString(){return".key"}}const Wc=new kB;class tS{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?i(e.key,t):1,r&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let BR,Ql=(()=>{class n{constructor(t,i,r,s,c){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:To.EMPTY_NODE,this.right=null!=c?c:To.EMPTY_NODE}copy(t,i,r,s,c){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const c=r(t,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return To.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return To.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class To{constructor(e,t=To.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new To(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ql.BLACK,null,null))}remove(e){return new To(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ql.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new tS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new tS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new tS(this.root_,null,this.comparator_,!0,e)}}function $q(n,e){return Kl(n.name,e.name)}function LR(n,e){return Kl(n,e)}To.EMPTY_NODE=new class zq{copy(e,t,i,r,s){return this}insert(e,t,i){return new Ql(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const OB=function(n){return"number"==typeof n?"number:"+B_(n):"string:"+n},PB=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===BR||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===BR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let NB,FB,LB,H_=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),PB(this.priorityNode_)}static set __childrenNodeConstructor(t){NB=t}static get __childrenNodeConstructor(){return NB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Qt(t)?this:".priority"===Kt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Kt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,N.hu)(".priority"!==r||1===Eh(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(jn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+OB(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?B_(this.value_):this.value_,this.lazyHash_=R(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,N.hu)(s>=0,"Unknown leaf type: "+i),(0,N.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Zn=new class Yq extends XT{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?Kl(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return en.MIN}maxPost(){return new en(Do,new H_("[PRIORITY-POST]",LB))}makePost(e,t){const i=FB(e);return new en(t,new H_("[PRIORITY-POST]",i))}toString(){return".priority"}},Kq=Math.log(2);class Qq{constructor(e){this.count=parseInt(Math.log(e+1)/Kq,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nS=function(n,e,t,i){n.sort(e);const r=function(p,y){const E=y-p;let T,x;if(0===E)return null;if(1===E)return T=n[p],x=t?t(T):T,new Ql(x,T.node,Ql.BLACK,null,null);{const P=parseInt(E/2,10)+p,L=r(p,P),Z=r(P+1,y);return T=n[P],x=t?t(T):T,new Ql(x,T.node,Ql.BLACK,L,Z)}},d=function(p){let y=null,E=null,T=n.length;const x=function(L,Z){const oe=T-L,Le=T;T-=L;const We=r(oe+1,Le),He=n[oe],Ge=t?t(He):He;P(new Ql(Ge,He.node,Z,null,We))},P=function(L){y?(y.left=L,y=L):(E=L,y=L)};for(let L=0;L<p.count;++L){const Z=p.nextBitIsOne(),oe=Math.pow(2,p.count-(L+1));Z?x(oe,Ql.BLACK):(x(oe,Ql.BLACK),x(oe,Ql.RED))}return E}(new Qq(n.length));return new To(i||e,d)};let VR;const j_={};class Xu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(j_&&Zn,"ChildrenNode.ts has not been loaded"),VR=VR||new Xu({".priority":j_},{".priority":Zn}),VR}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof To?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==Wc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(en.Wrap);let d,c=s.getNext();for(;c;)r=r||e.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?nS(i,e.getCompare()):j_;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const E=Object.assign({},this.indexes_);return E[p]=d,new Xu(E,y)}addToIndexes(e,t){const i=(0,N.UI)(this.indexes_,(r,s)=>{const c=(0,N.DV)(this.indexSet_,s);if((0,N.hu)(c,"Missing index implementation for "+s),r===j_){if(c.isDefinedOn(e.node)){const d=[],p=t.getIterator(en.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&d.push(y),y=p.getNext();return d.push(e),nS(d,c.getCompare())}return j_}{const d=t.get(e.name);let p=r;return d&&(p=p.remove(new en(e.name,d))),p.insert(e,e.node)}});return new Xu(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,N.UI)(this.indexes_,r=>{if(r===j_)return r;{const s=t.get(e.name);return s?r.remove(new en(e.name,s)):r}});return new Xu(i,this.indexSet_)}}let _w,Vt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&PB(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _w||(_w=new n(new To(LR),null,Xu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_w}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?_w:i}}getChild(t){const i=Kt(t);return null===i?this:this.getImmediateChild(i).getChild(jn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,N.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new en(t,i);let s,c;i.isEmpty()?(s=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?_w:this.priorityNode_;return new n(s,d,c)}}updateChild(t,i){const r=Kt(t);if(null===r)return i;{(0,N.hu)(".priority"!==Kt(t)||1===Eh(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(jn(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(Zn,(d,p)=>{i[d]=p.val(t),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!t&&c&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+OB(this.getPriority().val())+":"),this.forEachChild(Zn,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":R(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new en(t,i));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new en(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new en(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,en.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,t)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,en.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,t)>0;)s.getNext(),c=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===yw?-1:0}withIndex(t){if(t===Wc||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Wc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Zn),s=i.getIterator(Zn);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(t){return t===Wc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const yw=new class Jq extends Vt{constructor(){super(new To(LR),Vt.EMPTY_NODE,Xu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}};function Ci(n,e=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new H_(n,Ci(e));if(n instanceof Array){let t=Vt.EMPTY_NODE;return Ri(n,(i,r)=>{if((0,N.r3)(n,i)&&"."!==i.substring(0,1)){const s=Ci(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Ci(e))}{const t=[];let i=!1;if(Ri(n,(c,d)=>{if("."!==c.substring(0,1)){const p=Ci(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new en(c,p)))}}),0===t.length)return Vt.EMPTY_NODE;const s=nS(t,$q,c=>c.name,LR);if(i){const c=nS(t,Zn.getCompare());return new Vt(s,Ci(e),new Xu({".priority":c},{".priority":Zn}))}return new Vt(s,Ci(e),Xu.Default)}}Object.defineProperties(en,{MIN:{value:new en(Zr,Vt.EMPTY_NODE)},MAX:{value:new en(Do,yw)}}),kB.__EMPTY_NODE=Vt.EMPTY_NODE,H_.__childrenNodeConstructor=Vt,function qq(n){BR=n}(yw),function Zq(n){LB=n}(yw),function Wq(n){FB=n}(Ci);class UR extends XT{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!Qt(e)&&".priority"!==Kt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?Kl(e.name,t.name):s}makePost(e,t){const i=Ci(e),r=Vt.EMPTY_NODE.updateChild(this.indexPath_,i);return new en(t,r)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,yw);return new en(Do,e)}toString(){return gw(this.indexPath_,0).join("/")}}const HR=new class e6 extends XT{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Kl(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(e,t){const i=Ci(e);return new en(t,i)}toString(){return".value"}},G_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t6=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=G_.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=G_.charAt(e[r]);return(0,N.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),UB=function(n){if(n===""+SR)return"-";const e=YT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return Do;const s=G_.charAt(G_.indexOf(t[i])+1);return t[i]=s,t.slice(0,i+1).join("")},HB=function(n){if(n===""+XL)return Zr;const e=YT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+SR:(delete t[t.length-1],t.join("")):(t[t.length-1]=G_.charAt(G_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function jB(n){return{type:"value",snapshotNode:n}}function z_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function vw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function bw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class GR{constructor(e){this.index_=e}updateChild(e,t,i,r,s,c){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(vw(t,d)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(z_(t,i)):c.trackChildChange(bw(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Zn,(r,s)=>{t.hasChild(r)||i.trackChildChange(vw(r,s))}),t.isLeafNode()||t.forEachChild(Zn,(r,s)=>{if(e.hasChild(r)){const c=e.getImmediateChild(r);c.equals(s)||i.trackChildChange(bw(r,s,c))}else i.trackChildChange(z_(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ww{constructor(e){this.indexedFilter_=new GR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ww.getStartPost_(e),this.endPost_=ww.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,c){return this.matches(new en(t,i))||(i=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Vt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Vt.EMPTY_NODE);const s=this;return t.forEachChild(Zn,(c,d)=>{s.matches(new en(c,d))||(r=r.updateImmediateChild(c,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class i6{constructor(e){this.rangedFilter_=new ww(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,c){return this.rangedFilter_.matches(new en(t,i))||(i=Vt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,c):this.fullLimitUpdateChild_(e,t,i,s,c)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=Vt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),c++}}else{let s,c,d,p;if(r=t.withIndex(this.index_),r=r.updatePriority(Vt.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();d=(x,P)=>T(P,x)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,E=!1;for(;p.hasNext();){const T=p.getNext();!E&&d(s,T)<=0&&(E=!0),E&&y<this.limit_&&d(T,c)<=0?y++:r=r.updateImmediateChild(T.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let c;if(this.reverse_){const T=this.index_.getCompare();c=(x,P)=>T(P,x)}else c=this.index_.getCompare();const d=e;(0,N.hu)(d.numChildren()===this.limit_,"");const p=new en(t,i),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(d.hasChild(t)){const T=d.getImmediateChild(t);let x=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||d.hasChild(x.name));)x=r.getChildAfterChild(this.index_,x,this.reverse_);const P=null==x?1:c(x,p);if(E&&!i.isEmpty()&&P>=0)return null!=s&&s.trackChildChange(bw(t,i,T)),d.updateImmediateChild(t,i);{null!=s&&s.trackChildChange(vw(t,T));const Z=d.updateImmediateChild(t,Vt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=s&&s.trackChildChange(z_(x.name,x.node)),Z.updateImmediateChild(x.name,x.node)):Z}}return i.isEmpty()?e:E&&c(y,p)>=0?(null!=s&&(s.trackChildChange(vw(y.name,y.node)),s.trackChildChange(z_(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(y.name,Vt.EMPTY_NODE)):e}}class iS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Do}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zn}copy(){const e=new iS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zR(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function $R(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function rS(n,e){const t=n.copy();return t.index_=e,t}function GB(n){const e={};if(n.isDefault())return e;let t;return n.index_===Zn?t="$priority":n.index_===HR?t="$value":n.index_===Wc?t="$key":((0,N.hu)(n.index_ instanceof UR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Pz)(t),n.startSet_&&(e.startAt=(0,N.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,N.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,N.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,N.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function zB(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Zn&&(e.i=n.index_.toString()),e}class sS extends DB{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=qe("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const c=sS.getListenId_(e,i),d={};this.listens_[c]=d;const p=GB(e._queryParams);this.restRequest_(s+".json",p,(y,E)=>{let T=E;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(s,T,!1,i),(0,N.DV)(this.listens_,c)===d){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(x,null)}})}unlisten(e,t){const i=sS.getListenId_(e,t);delete this.listens_[i]}get(e){const t=GB(e._queryParams),i=e._path.toString(),r=new N.BH;return this.restRequest_(i+".json",t,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,N.cI)(d.responseText)}catch(y){st("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&st("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class c6{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function oS(){return{value:null,children:new Map}}function $_(n,e,t){if(Qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Kt(e);n.children.has(i)||n.children.set(i,oS()),$_(n.children.get(i),e=jn(e),t)}}function qR(n,e){if(Qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Zn,(i,r)=>{$_(n,new Mn(i),r)}),qR(n,e)}}if(n.children.size>0){const t=Kt(e);return e=jn(e),n.children.has(t)&&qR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function WR(n,e,t){null!==n.value?t(e,n.value):function u6(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{WR(r,new Mn(e.toString()+"/"+i),t)})}class d6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ri(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class p6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new d6(e);const i=1e4+2e4*Math.random();fw(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Ri(e,(r,s)=>{s>0&&(0,N.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),fw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ol=(()=>{return(n=ol||(ol={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ol;var n})();function KR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class aS{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=ol.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Qt(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Mn(e));return new aS(wn(),t,this.revert)}}return(0,N.hu)(Kt(this.path)===e,"operationForChild called for unrelated child."),new aS(jn(this.path),this.affectedTree,this.revert)}}class Cw{constructor(e,t){this.source=e,this.path=t,this.type=ol.LISTEN_COMPLETE}operationForChild(e){return Qt(this.path)?new Cw(this.source,wn()):new Cw(this.source,jn(this.path))}}class Np{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=ol.OVERWRITE}operationForChild(e){return Qt(this.path)?new Np(this.source,wn(),this.snap.getImmediateChild(e)):new Np(this.source,jn(this.path),this.snap)}}class q_{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=ol.MERGE}operationForChild(e){if(Qt(this.path)){const t=this.children.subtree(new Mn(e));return t.isEmpty()?null:t.value?new Np(this.source,wn(),t.value):new q_(this.source,wn(),t)}return(0,N.hu)(Kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new q_(this.source,jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dh{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Kt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class g6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ew(n,e,t,i,r,s){const c=i.filter(d=>d.type===t);c.sort((d,p)=>function y6(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const i=new en(e.childName,e.snapshotNode),r=new en(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),c.forEach(d=>{const p=function _6(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);r.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(p,n.query_))})})}function lS(n,e){return{eventCache:n,serverCache:e}}function Dw(n,e,t,i){return lS(new Dh(e,t,i),n.serverCache)}function qB(n,e,t,i){return lS(n.eventCache,new Dh(e,t,i))}function cS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let QR;class Yn{constructor(e,t=(()=>(QR||(QR=new To(dw)),QR))()){this.value=e,this.children=t}static fromObject(e){let t=new Yn(null);return Ri(e,(i,r)=>{t=t.set(new Mn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:wn(),value:this.value};if(Qt(e))return null;{const i=Kt(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(jn(e),t);return null!=s?{path:oi(new Mn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Qt(e))return this;{const t=Kt(e),i=this.children.get(t);return null!==i?i.subtree(jn(e)):new Yn(null)}}set(e,t){if(Qt(e))return new Yn(t,this.children);{const i=Kt(e),s=(this.children.get(i)||new Yn(null)).set(jn(e),t),c=this.children.insert(i,s);return new Yn(this.value,c)}}remove(e){if(Qt(e))return this.children.isEmpty()?new Yn(null):new Yn(null,this.children);{const t=Kt(e),i=this.children.get(t);if(i){const r=i.remove(jn(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new Yn(null):new Yn(this.value,s)}return this}}get(e){if(Qt(e))return this.value;{const t=Kt(e),i=this.children.get(t);return i?i.get(jn(e)):null}}setTree(e,t){if(Qt(e))return t;{const i=Kt(e),s=(this.children.get(i)||new Yn(null)).setTree(jn(e),t);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Yn(this.value,c)}}fold(e){return this.fold_(wn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(oi(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,wn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Qt(e))return null;{const s=Kt(e),c=this.children.get(s);return c?c.findOnPath_(jn(e),oi(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,wn(),t)}foreachOnPath_(e,t,i){if(Qt(e))return this;{this.value&&i(t,this.value);const r=Kt(e),s=this.children.get(r);return s?s.foreachOnPath_(jn(e),oi(t,r),i):new Yn(null)}}foreach(e){this.foreach_(wn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(oi(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Jl{constructor(e){this.writeTree_=e}static empty(){return new Jl(new Yn(null))}}function Tw(n,e,t){if(Qt(e))return new Jl(new Yn(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const c=$s(r,e);return s=s.updateChild(c,t),new Jl(n.writeTree_.set(r,s))}{const r=new Yn(t),s=n.writeTree_.setTree(e,r);return new Jl(s)}}}function JR(n,e,t){let i=n;return Ri(t,(r,s)=>{i=Tw(i,oi(e,r),s)}),i}function WB(n,e){if(Qt(e))return Jl.empty();{const t=n.writeTree_.setTree(e,new Yn(null));return new Jl(t)}}function XR(n,e){return null!=Lp(n,e)}function Lp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild($s(t.path,e)):null}function ZB(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Zn,(i,r)=>{e.push(new en(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new en(i,r.value))}),e}function Th(n,e){if(Qt(e))return n;{const t=Lp(n,e);return new Jl(null!=t?new Yn(t):n.writeTree_.subtree(e))}}function ek(n){return n.writeTree_.isEmpty()}function W_(n,e){return YB(wn(),n.writeTree_,e)}function YB(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,N.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=YB(oi(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(oi(n,".priority"),i)),t}}function uS(n,e){return eV(e,n)}function D6(n,e){if(n.snap)return sl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&sl(oi(n.path,t),e))return!0;return!1}function S6(n){return n.visible}function KB(n,e,t){let i=Jl.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const c=s.path;let d;if(s.snap)sl(t,c)?(d=$s(t,c),i=Tw(i,d,s.snap)):sl(c,t)&&(d=$s(c,t),i=Tw(i,wn(),s.snap.getChild(d)));else{if(!s.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(sl(t,c))d=$s(t,c),i=JR(i,d,s.children);else if(sl(c,t))if(d=$s(c,t),Qt(d))i=JR(i,wn(),s.children);else{const p=(0,N.DV)(s.children,Kt(d));if(p){const y=p.getChild(jn(d));i=Tw(i,wn(),y)}}}}}return i}function QB(n,e,t,i,r){if(i||r){const s=Th(n.visibleWrites,e);return!r&&ek(s)?t:r||null!=t||XR(s,wn())?W_(KB(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(sl(y.path,e)||sl(e,y.path))},e),t||Vt.EMPTY_NODE):null}{const s=Lp(n.visibleWrites,e);if(null!=s)return s;{const c=Th(n.visibleWrites,e);return ek(c)?t:null!=t||XR(c,wn())?W_(c,t||Vt.EMPTY_NODE):null}}}function dS(n,e,t,i){return QB(n.writeTree,n.treePath,e,t,i)}function tk(n,e){return function I6(n,e,t){let i=Vt.EMPTY_NODE;const r=Lp(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Zn,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(t){const s=Th(n.visibleWrites,e);return t.forEachChild(Zn,(c,d)=>{const p=W_(Th(s,new Mn(c)),d);i=i.updateImmediateChild(c,p)}),ZB(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return ZB(Th(n.visibleWrites,e)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,e)}function JB(n,e,t,i){return function A6(n,e,t,i,r){(0,N.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=oi(e,t);if(XR(n.visibleWrites,s))return null;{const c=Th(n.visibleWrites,s);return ek(c)?r.getChild(t):W_(c,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function hS(n,e){return function x6(n,e){return Lp(n.visibleWrites,e)}(n.writeTree,oi(n.treePath,e))}function nk(n,e,t){return function M6(n,e,t,i){const r=oi(e,t),s=Lp(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?W_(Th(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function XB(n,e){return eV(oi(n.treePath,e),n.writeTree)}function eV(n,e){return{treePath:n,writeTree:e}}class P6{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,bw(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,vw(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,z_(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,bw(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const tV=new class N6{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class ik{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Dh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nk(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fp(this.viewCache_),s=function O6(n,e,t,i,r,s){return function R6(n,e,t,i,r,s,c){let d;const p=Th(n.visibleWrites,e),y=Lp(p,wn());if(null!=y)d=y;else{if(null==t)return[];d=W_(p,t)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const E=[],T=c.getCompare(),x=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let P=x.getNext();for(;P&&E.length<r;)0!==T(P,i)&&E.push(P),P=x.getNext();return E}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function nV(n,e,t,i,r,s){const c=e.eventCache;if(null!=hS(i,t))return e;{let d,p;if(Qt(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Fp(e),T=tk(i,y instanceof Vt?y:Vt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),T,s)}else{const y=dS(i,Fp(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Kt(t);if(".priority"===y){(0,N.hu)(1===Eh(t),"Can't have a priority with additional path components");const E=c.getNode();p=e.serverCache.getNode();const T=JB(i,t,E,p);d=null!=T?n.filter.updatePriority(E,T):c.getNode()}else{const E=jn(t);let T;if(c.isCompleteForChild(y)){p=e.serverCache.getNode();const x=JB(i,t,c.getNode(),p);T=null!=x?c.getNode().getImmediateChild(y).updateChild(E,x):c.getNode().getImmediateChild(y)}else T=nk(i,y,e.serverCache);d=null!=T?n.filter.updateChild(c.getNode(),y,T,E,r,s):c.getNode()}}return Dw(e,d,c.isFullyInitialized()||Qt(t),n.filter.filtersNodes())}}function fS(n,e,t,i,r,s,c,d){const p=e.serverCache;let y;const E=c?n.filter:n.filter.getIndexedFilter();if(Qt(t))y=E.updateFullNode(p.getNode(),i,null);else if(E.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(t,i);y=E.updateFullNode(p.getNode(),P,null)}else{const P=Kt(t);if(!p.isCompleteForPath(t)&&Eh(t)>1)return e;const L=jn(t),oe=p.getNode().getImmediateChild(P).updateChild(L,i);y=".priority"===P?E.updatePriority(p.getNode(),oe):E.updateChild(p.getNode(),P,oe,L,tV,null)}const T=qB(e,y,p.isFullyInitialized()||Qt(t),E.filtersNodes());return nV(n,T,t,r,new ik(r,T,s),d)}function rk(n,e,t,i,r,s,c){const d=e.eventCache;let p,y;const E=new ik(r,e,s);if(Qt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,c),p=Dw(e,y,!0,n.filter.filtersNodes());else{const T=Kt(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),i),p=Dw(e,y,d.isFullyInitialized(),d.isFiltered());else{const x=jn(t),P=d.getNode().getImmediateChild(T);let L;if(Qt(x))L=i;else{const Z=E.getCompleteChild(T);L=null!=Z?".priority"===PR(x)&&Z.getChild(AB(x)).isEmpty()?Z:Z.updateChild(x,i):Vt.EMPTY_NODE}p=P.equals(L)?e:Dw(e,n.filter.updateChild(d.getNode(),T,L,x,E,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function iV(n,e){return n.eventCache.isCompleteForChild(e)}function rV(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function sk(n,e,t,i,r,s,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=Qt(t)?i:new Yn(null).setTree(t,i);const E=e.serverCache.getNode();return y.children.inorderTraversal((T,x)=>{if(E.hasChild(T)){const L=rV(0,e.serverCache.getNode().getImmediateChild(T),x);p=fS(n,p,new Mn(T),L,r,s,c,d)}}),y.children.inorderTraversal((T,x)=>{const P=!e.serverCache.isCompleteForChild(T)&&void 0===x.value;if(!E.hasChild(T)&&!P){const Z=rV(0,e.serverCache.getNode().getImmediateChild(T),x);p=fS(n,p,new Mn(T),Z,r,s,c,d)}}),p}class z6{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new GR(i.getIndex()),s=function r6(n){return n.loadsAllData()?new GR(n.getIndex()):n.hasLimit()?new i6(n):new ww(n)}(i);this.processor_=function F6(n){return{filter:n}}(s);const c=t.serverCache,d=t.eventCache,p=r.updateFullNode(Vt.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(Vt.EMPTY_NODE,d.getNode(),null),E=new Dh(p,c.isFullyInitialized(),r.filtersNodes()),T=new Dh(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=lS(T,E),this.eventGenerator_=new g6(this.query_)}get query(){return this.query_}}function W6(n,e){const t=Fp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Qt(e)&&!t.getImmediateChild(Kt(e)).isEmpty())?t.getChild(e):null}function sV(n){return 0===n.eventRegistrations_.length}function oV(n,e,t){const i=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(t,r);c&&i.push(c)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function aV(n,e,t,i){e.type===ol.MERGE&&null!==e.source.queryId&&((0,N.hu)(Fp(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(cS(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function B6(n,e,t,i,r){const s=new P6;let c,d;if(t.type===ol.OVERWRITE){const y=t;y.source.fromUser?c=rk(n,e,y.path,y.snap,i,r,s):((0,N.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!Qt(y.path),c=fS(n,e,y.path,y.snap,i,r,d,s))}else if(t.type===ol.MERGE){const y=t;y.source.fromUser?c=function U6(n,e,t,i,r,s,c){let d=e;return i.foreach((p,y)=>{const E=oi(t,p);iV(e,Kt(E))&&(d=rk(n,d,E,y,r,s,c))}),i.foreach((p,y)=>{const E=oi(t,p);iV(e,Kt(E))||(d=rk(n,d,E,y,r,s,c))}),d}(n,e,y.path,y.children,i,r,s):((0,N.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),c=sk(n,e,y.path,y.children,i,r,d,s))}else if(t.type===ol.ACK_USER_WRITE){const y=t;c=y.revert?function G6(n,e,t,i,r,s){let c;if(null!=hS(i,t))return e;{const d=new ik(i,e,r),p=e.eventCache.getNode();let y;if(Qt(t)||".priority"===Kt(t)){let E;if(e.serverCache.isFullyInitialized())E=dS(i,Fp(e));else{const T=e.serverCache.getNode();(0,N.hu)(T instanceof Vt,"serverChildren would be complete if leaf node"),E=tk(i,T)}E=E,y=n.filter.updateFullNode(p,E,s)}else{const E=Kt(t);let T=nk(i,E,e.serverCache);null==T&&e.serverCache.isCompleteForChild(E)&&(T=p.getImmediateChild(E)),y=null!=T?n.filter.updateChild(p,E,T,jn(t),d,s):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Vt.EMPTY_NODE,jn(t),d,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=dS(i,Fp(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=e.serverCache.isFullyInitialized()||null!=hS(i,wn()),Dw(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,i,r,s):function H6(n,e,t,i,r,s,c){if(null!=hS(r,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=i.value){if(Qt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return fS(n,e,t,p.getNode().getChild(t),r,s,d,c);if(Qt(t)){let y=new Yn(null);return p.getNode().forEachChild(Wc,(E,T)=>{y=y.set(new Mn(E),T)}),sk(n,e,t,y,r,s,d,c)}return e}{let y=new Yn(null);return i.foreach((E,T)=>{const x=oi(t,E);p.isCompleteForPath(x)&&(y=y.set(E,p.getNode().getChild(x)))}),sk(n,e,t,y,r,s,d,c)}}(n,e,y.path,y.affectedTree,i,r,s)}else{if(t.type!==ol.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);c=function j6(n,e,t,i,r){const s=e.serverCache;return nV(n,qB(e,s.getNode(),s.isFullyInitialized()||Qt(t),s.isFiltered()),t,i,tV,r)}(n,e,t.path,i,s)}const p=s.getChanges();return function V6(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=cS(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(jB(cS(e)))}}(e,c,p),{viewCache:c,changes:p}}(n.processor_,r,e,t,i);return function L6(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,N.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,lV(n,s.changes,s.viewCache.eventCache.getNode(),null)}function lV(n,e,t,i){return function m6(n,e,t,i){const r=[],s=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function n6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Ew(n,r,"child_removed",e,i,t),Ew(n,r,"child_added",e,i,t),Ew(n,r,"child_moved",s,i,t),Ew(n,r,"child_changed",e,i,t),Ew(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let pS,mS;class cV{constructor(){this.views=new Map}}function ok(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,N.hu)(null!=s,"SyncTree gave us an op for an invalid query."),aV(s,e,t,i)}{let s=[];for(const c of n.views.values())s=s.concat(aV(c,e,t,i));return s}}function uV(n,e,t,i,r){const c=n.views.get(e._queryIdentifier);if(!c){let d=dS(t,r?i:null),p=!1;d?p=!0:i instanceof Vt?(d=tk(t,i),p=!1):(d=Vt.EMPTY_NODE,p=!1);const y=lS(new Dh(d,p,!1),new Dh(i,r,!1));return new z6(e,y)}return c}function dV(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Sh(n,e){let t=null;for(const i of n.views.values())t=t||W6(i,e);return t}function hV(n,e){return e._queryParams.loadsAllData()?gS(n):n.views.get(e._queryIdentifier)}function fV(n,e){return null!=hV(n,e)}function Ih(n){return null!=gS(n)}function gS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let iW=1;class pV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yn(null),this.pendingWriteTree_=function k6(){return{visibleWrites:Jl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ak(n,e,t,i,r){return function b6(n,e,t,i,r){(0,N.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Tw(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Z_(n,new Np({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ah(n,e,t=!1){const i=function C6(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function E6(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&D6(d,i.path)?r=!1:sl(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function T6(n){n.visibleWrites=KB(n.allWrites,S6,wn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=WB(n.visibleWrites,i.path):Ri(i.children,p=>{n.visibleWrites=WB(n.visibleWrites,oi(i.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new Yn(null);return null!=i.snap?s=s.set(wn(),!0):Ri(i.children,c=>{s=s.set(new Mn(c),!0)}),Z_(n,new aS(i.path,s,t))}return[]}function Sw(n,e,t){return Z_(n,new Np({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function lk(n,e,t,i){const r=e._path,s=n.syncPointTree_.get(r);let c=[];if(s&&("default"===e._queryIdentifier||fV(s,e))){const d=function eW(n,e,t,i){const r=e._queryIdentifier,s=[];let c=[];const d=Ih(n);if("default"===r)for(const[p,y]of n.views.entries())c=c.concat(oV(y,t,i)),sV(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(r);p&&(c=c.concat(oV(p,t,i)),sV(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!Ih(n)&&s.push(new(function Q6(){return(0,N.hu)(pS,"Reference.ts has not been loaded"),pS}())(e._repo,e._path)),{removed:s,events:c}}(s,e,t,i);(function J6(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=d.removed;c=d.events;const y=-1!==p.findIndex(T=>T._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(r,(T,x)=>Ih(x));if(y&&!E){const T=n.syncPointTree_.subtree(r);if(!T.isEmpty()){const x=function dW(n){return n.fold((e,t,i)=>{if(t&&Ih(t))return[gS(t)];{let r=[];return t&&(r=dV(t)),Ri(i,(s,c)=>{r=r.concat(c)}),r}})}(T);for(let P=0;P<x.length;++P){const L=x[P],Z=L.query,oe=yV(n,L);n.listenProvider_.startListening(Iw(Z),yS(n,Z),oe.hashFn,oe.onComplete)}}}!E&&p.length>0&&!i&&(y?n.listenProvider_.stopListening(Iw(e),null):p.forEach(T=>{const x=n.queryToTagMap.get(vS(T));n.listenProvider_.stopListening(Iw(T),x)})),function hW(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=vS(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return c}function gV(n,e,t){const i=e._path;let r=null,s=!1;n.syncPointTree_.foreachOnPath(i,(T,x)=>{const P=$s(T,i);r=r||Sh(x,P),s=s||Ih(x)});let d,c=n.syncPointTree_.get(i);c?(s=s||Ih(c),r=r||Sh(c,wn())):(c=new cV,n.syncPointTree_=n.syncPointTree_.set(i,c)),null!=r?d=!0:(d=!1,r=Vt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((x,P)=>{const L=Sh(P,wn());L&&(r=r.updateImmediateChild(x,L))}));const p=fV(c,e);if(!p&&!e._queryParams.loadsAllData()){const T=vS(e);(0,N.hu)(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const x=function fW(){return iW++}();n.queryToTagMap.set(T,x),n.tagToQueryMap.set(x,T)}let E=function X6(n,e,t,i,r,s){const c=uV(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function Z6(n,e){n.eventRegistrations_.push(e)}(c,t),function Y6(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Zn,(s,c)=>{i.push(z_(s,c))}),t.isFullyInitialized()&&i.push(jB(t.getNode())),lV(n,i,t.getNode(),e)}(c,t)}(c,e,t,uS(n.pendingWriteTree_,i),r,d);if(!p&&!s){const T=hV(c,e);E=E.concat(function pW(n,e,t){const i=e._path,r=yS(n,e),s=yV(n,t),c=n.listenProvider_.startListening(Iw(e),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,N.hu)(!Ih(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((y,E,T)=>{if(!Qt(y)&&E&&Ih(E))return[gS(E).query];{let x=[];return E&&(x=x.concat(dV(E).map(P=>P.query))),Ri(T,(P,L)=>{x=x.concat(L)}),x}});for(let y=0;y<p.length;++y){const E=p[y];n.listenProvider_.stopListening(Iw(E),yS(n,E))}}return c}(n,e,T))}return E}function _S(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(c,d)=>{const y=Sh(d,$s(c,e));if(y)return y});return QB(r,e,s,t,!0)}function Z_(n,e){return mV(e,n.syncPointTree_,null,uS(n.pendingWriteTree_,wn()))}function mV(n,e,t,i){if(Qt(n.path))return _V(n,e,t,i);{const r=e.get(wn());null==t&&null!=r&&(t=Sh(r,wn()));let s=[];const c=Kt(n.path),d=n.operationForChild(c),p=e.children.get(c);if(p&&d){const y=t?t.getImmediateChild(c):null,E=XB(i,c);s=s.concat(mV(d,p,y,E))}return r&&(s=s.concat(ok(r,n,i,t))),s}}function _V(n,e,t,i){const r=e.get(wn());null==t&&null!=r&&(t=Sh(r,wn()));let s=[];return e.children.inorderTraversal((c,d)=>{const p=t?t.getImmediateChild(c):null,y=XB(i,c),E=n.operationForChild(c);E&&(s=s.concat(_V(E,d,p,y)))}),r&&(s=s.concat(ok(r,n,i,t))),s}function yV(n,e){const t=e.query,i=yS(n,t);return{hashFn:()=>(function $6(n){return n.viewCache_.serverCache.getNode()}(e)||Vt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function aW(n,e,t){const i=ck(n,t);if(i){const r=uk(i),s=r.path,c=r.queryId,d=$s(s,e);return dk(n,s,new Cw(KR(c),d))}return[]}(n,t._path,i):function oW(n,e){return Z_(n,new Cw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function sq(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return lk(n,t,null,s)}}}}function yS(n,e){const t=vS(e);return n.queryToTagMap.get(t)}function vS(n){return n._path.toString()+"$"+n._queryIdentifier}function ck(n,e){return n.tagToQueryMap.get(e)}function uk(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Mn(n.substr(0,e))}}function dk(n,e,t){const i=n.syncPointTree_.get(e);return(0,N.hu)(i,"Missing sync point for query tag that we're tracking"),ok(i,t,uS(n.pendingWriteTree_,e),null)}function Iw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function nW(){return(0,N.hu)(mS,"Reference.ts has not been loaded"),mS}())(n._repo,n._path):n}class hk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new hk(t)}node(){return this.node_}}class fk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=oi(this.path_,e);return new fk(this.syncTree_,t)}node(){return _S(this.syncTree_,this.path_)}}const vV=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?mW(n[".sv"],e,t):"object"==typeof n[".sv"]?_W(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},mW=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},_W=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,N.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,N.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},bV=function(n,e,t,i){return gk(e,new fk(t,n),i)},pk=function(n,e,t){return gk(n,new hk(e),t)};function gk(n,e,t){const i=n.getPriority().val(),r=vV(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const c=n,d=vV(c.getValue(),e,t);return d!==c.getValue()||r!==c.getPriority().val()?new H_(d,Ci(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new H_(r))),c.forEachChild(Zn,(d,p)=>{const y=gk(p,e.getImmediateChild(d),t);y!==p&&(s=s.updateImmediateChild(d,y))}),s}}class mk{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function bS(n,e){let t=e instanceof Mn?e:new Mn(e),i=n,r=Kt(t);for(;null!==r;){const s=(0,N.DV)(i.node.children,r)||{children:{},childCount:0};i=new mk(r,i,s),t=jn(t),r=Kt(t)}return i}function Bp(n){return n.node.value}function _k(n,e){n.node.value=e,yk(n)}function wV(n){return n.node.childCount>0}function wS(n,e){Ri(n.node.children,(t,i)=>{e(new mk(t,n,i))})}function CV(n,e,t,i){t&&!i&&e(n),wS(n,r=>{CV(r,e,!0,i)}),t&&i&&e(n)}function Aw(n){return new Mn(null===n.parent?n.name:Aw(n.parent)+"/"+n.name)}function yk(n){null!==n.parent&&function bW(n,e,t){const i=function yW(n){return void 0===Bp(n)&&!wV(n)}(t),r=(0,N.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,yk(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,yk(n))}(n.parent,n.name,n)}const wW=/[\[\].#$\/\u0000-\u001F\u007F]/,CW=/[\[\].#$\u0000-\u001F\u007F]/,vk=10485760,CS=function(n){return"string"==typeof n&&0!==n.length&&!wW.test(n)},EV=function(n){return"string"==typeof n&&0!==n.length&&!CW.test(n)},Mw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!on(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},Zc=function(n,e,t,i){i&&void 0===e||xw((0,N.gK)(n,"value"),e,t)},xw=function(n,e,t){const i=t instanceof Mn?new Fq(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Op(i));if("function"==typeof e)throw new Error(n+"contains a function "+Op(i)+" with contents = "+e.toString());if(on(e))throw new Error(n+"contains "+e.toString()+" "+Op(i));if("string"==typeof e&&e.length>vk/3&&(0,N.ug)(e)>vk)throw new Error(n+"contains a string greater than "+vk+" utf8 bytes "+Op(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Ri(e,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!CS(c)))throw new Error(n+" contains an invalid key ("+c+") "+Op(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Lq(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),MB(n)})(i,c),xw(n,d,i),function Bq(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Op(i)+" in addition to actual children.")}},DV=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Ri(e,(c,d)=>{const p=new Mn(c);if(xw(r,d,oi(t,p)),".priority"===PR(p)&&!Mw(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=gw(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!CS(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Nq);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&sl(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},bk=function(n,e,t){if(!t||void 0!==e){if(on(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Mw(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Rw=function(n,e,t,i){if(!(i&&void 0===t||CS(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},kw=function(n,e,t,i){if(!(i&&void 0===t||EV(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},al=function(n,e){if(".info"===Kt(e))throw new Error(n+" failed = Can't modify data under /.info/")},TV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!CS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),EV(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class SW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ES(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!NR(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function wk(n,e,t){ES(n,t),SV(n,i=>NR(i,e))}function ll(n,e,t){ES(n,t),SV(n,i=>sl(i,e)||sl(e,i))}function SV(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(IW(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function IW(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();j&&ke("event: "+t.toString()),V_(i)}}}const IV="repo_interrupt";class MW{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new SW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oS(),this.transactionQueueTree_=new mk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function AV(n){const t=n.infoData_.getNode(new Mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ow(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:AV(n)})}function MV(n,e,t,i,r){n.dataUpdateCount++;const s=new Mn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(r)if(i){const p=(0,N.UI)(t,y=>Ci(y));c=function cW(n,e,t,i){const r=ck(n,i);if(r){const s=uk(r),c=s.path,d=s.queryId,p=$s(c,e),y=Yn.fromObject(t);return dk(n,c,new q_(KR(d),p,y))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=Ci(t);c=function lW(n,e,t,i){const r=ck(n,i);if(null!=r){const s=uk(r),c=s.path,d=s.queryId,p=$s(c,e);return dk(n,c,new Np(KR(d),p,t))}return[]}(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,N.UI)(t,y=>Ci(y));c=function sW(n,e,t){const i=Yn.fromObject(t);return Z_(n,new q_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,p)}else{const p=Ci(t);c=Sw(n.serverSyncTree_,s,p)}let d=s;c.length>0&&(d=K_(n,s)),ll(n.eventQueue_,d,c)}function xV(n,e){Ck(n,"connected",e),!1===e&&function PW(n){Y_(n,"onDisconnectEvents");const e=Ow(n),t=oS();WR(n.onDisconnect_,wn(),(r,s)=>{const c=bV(r,s,n.serverSyncTree_,e);$_(t,r,c)});let i=[];WR(t,wn(),(r,s)=>{i=i.concat(Sw(n.serverSyncTree_,r,s));const c=Sk(n,r);K_(n,c)}),n.onDisconnect_=oS(),ll(n.eventQueue_,wn(),i)}(n)}function Ck(n,e,t){const i=new Mn("/.info/"+e),r=Ci(t);n.infoData_.updateSnapshot(i,r);const s=Sw(n.infoSyncTree_,i,r);ll(n.eventQueue_,i,s)}function DS(n){return n.nextWriteId_++}function Ek(n,e,t,i,r){Y_(n,"set",{path:e.toString(),value:t,priority:i});const s=Ow(n),c=Ci(t,i),d=_S(n.serverSyncTree_,e),p=pk(c,d,s),y=DS(n),E=ak(n.serverSyncTree_,e,p,y,!0);ES(n.eventQueue_,E),n.server_.put(e.toString(),c.val(!0),(x,P)=>{const L="ok"===x;L||st("set at "+e+" failed: "+x);const Z=Ah(n.serverSyncTree_,y,!L);ll(n.eventQueue_,e,Z),Mh(0,r,x,P)});const T=Sk(n,e);K_(n,T),ll(n.eventQueue_,T,[])}function NW(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&qR(n.onDisconnect_,e),Mh(0,t,i,r)})}function RV(n,e,t,i){const r=Ci(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,c)=>{"ok"===s&&$_(n.onDisconnect_,e,r),Mh(0,i,s,c)})}function Dk(n,e,t){let i;i=".info"===Kt(e._path)?lk(n.infoSyncTree_,e,t):lk(n.serverSyncTree_,e,t),wk(n.eventQueue_,e._path,i)}function kV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(IV)}function Y_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ke(t,...e)}function Mh(n,e,t,i){e&&V_(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,e(c)}})}function Tk(n,e,t){return _S(n.serverSyncTree_,e,t)||Vt.EMPTY_NODE}function TS(n,e=n.transactionQueueTree_){if(e||SS(n,e),Bp(e)){const t=PV(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function HW(n,e,t){const i=t.map(y=>y.currentWriteId),r=Tk(n,e,i);let s=r;const c=r.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,N.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=$s(e,E.path);s=s.updateChild(T,E.currentOutputSnapshotRaw)}const d=s.val(!0),p=e;n.server_.put(p.toString(),d,y=>{Y_(n,"transaction put response",{path:p.toString(),status:y});let E=[];if("ok"===y){const T=[];for(let x=0;x<t.length;x++)t[x].status=2,E=E.concat(Ah(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&T.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();SS(n,bS(n.transactionQueueTree_,e)),TS(n,n.transactionQueueTree_),ll(n.eventQueue_,e,E);for(let x=0;x<T.length;x++)V_(T[x])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{st("transaction at "+p.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}K_(n,e)}},c)}(n,Aw(e),t)}else wV(e)&&wS(e,t=>{TS(n,t)})}function K_(n,e){const t=OV(n,e),i=Aw(t);return function jW(n,e,t){if(0===e.length)return;const i=[];let r=[];const c=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],y=$s(t,p.path);let T,E=!1;if((0,N.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,T=p.abortReason,r=r.concat(Ah(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,T="maxretry",r=r.concat(Ah(n.serverSyncTree_,p.currentWriteId,!0));else{const x=Tk(n,p.path,c);p.currentInputSnapshot=x;const P=e[d].update(x.val());if(void 0!==P){xw("transaction failed: Data returned ",P,p.path);let L=Ci(P);"object"==typeof P&&null!=P&&(0,N.r3)(P,".priority")||(L=L.updatePriority(x.getPriority()));const oe=p.currentWriteId,Le=Ow(n),We=pk(L,x,Le);p.currentOutputSnapshotRaw=L,p.currentOutputSnapshotResolved=We,p.currentWriteId=DS(n),c.splice(c.indexOf(oe),1),r=r.concat(ak(n.serverSyncTree_,p.path,We,p.currentWriteId,p.applyLocally)),r=r.concat(Ah(n.serverSyncTree_,oe,!0))}else E=!0,T="nodata",r=r.concat(Ah(n.serverSyncTree_,p.currentWriteId,!0))}ll(n.eventQueue_,t,r),r=[],E&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&i.push("nodata"===T?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(T),!1,null)))}SS(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)V_(i[d]);TS(n,n.transactionQueueTree_)}(n,PV(n,t),i),i}function OV(n,e){let t,i=n.transactionQueueTree_;for(t=Kt(e);null!==t&&void 0===Bp(i);)i=bS(i,t),t=Kt(e=jn(e));return i}function PV(n,e){const t=[];return NV(n,e,t),t.sort((i,r)=>i.order-r.order),t}function NV(n,e,t){const i=Bp(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);wS(e,r=>{NV(n,r,t)})}function SS(n,e){const t=Bp(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,_k(e,t.length>0?t:void 0)}wS(e,i=>{SS(n,i)})}function Sk(n,e){const t=Aw(OV(n,e)),i=bS(n.transactionQueueTree_,e);return function vW(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{Ik(n,r)}),Ik(n,i),CV(i,r=>{Ik(n,r)}),t}function Ik(n,e){const t=Bp(e);if(t){const i=[];let r=[],s=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,N.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,t[c].status=3,t[c].abortReason="set"):((0,N.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),r=r.concat(Ah(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?_k(e,void 0):t.length=s+1,ll(n.eventQueue_,Aw(e),r);for(let c=0;c<i.length;c++)V_(i[c])}}const Ak=function(n,e){const t=$W(n),i=t.namespace;return"firebase.com"===t.domain&&Se(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Se("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&st("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new AR(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Mn(t.pathString)}},$W=function(n){let e="",t="",i="",r="",s="",c=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(E,T)),E<T&&(r=function GW(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}e+="/"+r}return e}(n.substring(E,T)));const x=function zW(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):st(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(c="https"===d||"wss"===d,p=parseInt(e.substring(y+1),10)):y=e.length;const P=e.slice(0,y);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const L=e.indexOf(".");i=e.substring(0,L).toLowerCase(),t=e.substring(L+1),s=i}"ns"in x&&(s=x.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}};class FV{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Pz)(this.snapshot.exportVal())}}class LV{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class BV{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class VV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return NW(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){al("OnDisconnect.remove",this._path);const e=new N.BH;return RV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){al("OnDisconnect.set",this._path),Zc("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return RV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){al("OnDisconnect.setWithPriority",this._path),Zc("OnDisconnect.setWithPriority",e,this._path,!1),bk("OnDisconnect.setWithPriority",t,!1);const i=new N.BH;return function FW(n,e,t,i,r){const s=Ci(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(c,d)=>{"ok"===c&&$_(n.onDisconnect_,e,s),Mh(0,r,c,d)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){al("OnDisconnect.update",this._path),DV("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function LW(n,e,t,i){if((0,N.xb)(t))return ke("onDisconnect().update() called with empty data.  Don't do anything."),void Mh(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&Ri(t,(c,d)=>{const p=Ci(d);$_(n.onDisconnect_,oi(e,c),p)}),Mh(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class So{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Qt(this._path)?null:PR(this._path)}get ref(){return new cl(this._repo,this._path)}get _queryIdentifier(){const e=zB(this._queryParams),t=kp(e);return"{}"===t?"default":t}get _queryObject(){return zB(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof So))return!1;const t=this._repo===e._repo,i=NR(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Pq(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function IS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Wc){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Zr)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Do)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===Zn){if(null!=e&&!Mw(e)||null!=t&&!Mw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof UR||n.getIndex()===HR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function AS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class cl extends So{constructor(e,t){super(e,t,new iS,!1)}get parent(){const e=AB(this._path);return null===e?null:new cl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Vp{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Mn(e),i=Up(this.ref,e);return new Vp(this._node.getChild(t),i,Zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Vp(r,Up(this.ref,i),Zn)))}hasChild(e){const t=new Mn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function UV(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?Up(n._root,e):n._root}function HV(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=Ak(e,n._repo.repoInfo_.nodeAdmin);TV("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Se("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),UV(n,t.path.toString())}function Up(n,e){return null===Kt((n=(0,N.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kw("child","path",t,!1)):kw("child","path",e,!1),new cl(n._repo,oi(n._path,e));var t}function Mk(n,e){n=(0,N.m9)(n),al("set",n._path),Zc("set",e,n._path,!1);const t=new N.BH;return Ek(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function KW(n,e){DV("update",e,n._path,!1);const t=new N.BH;return function OW(n,e,t,i){Y_(n,"update",{path:e.toString(),value:t});let r=!0;const s=Ow(n),c={};if(Ri(t,(d,p)=>{r=!1,c[d]=bV(oi(e,d),Ci(p),n.serverSyncTree_,s)}),r)ke("update() called with empty data.  Don't do anything."),Mh(0,i,"ok",void 0);else{const d=DS(n),p=function rW(n,e,t,i){!function w6(n,e,t,i){(0,N.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=JR(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=Yn.fromObject(t);return Z_(n,new q_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,c,d);ES(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,E)=>{const T="ok"===y;T||st("update at "+e+" failed: "+y);const x=Ah(n.serverSyncTree_,d,!T),P=x.length>0?K_(n,e):e;ll(n.eventQueue_,P,x),Mh(0,i,y,E)}),Ri(t,y=>{const E=Sk(n,oi(e,y));K_(n,E)}),ll(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function QW(n){return function kW(n,e){const t=function uW(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(y,E)=>{const T=$s(y,t);i=i||Sh(E,T)});let r=n.syncPointTree_.get(t);r?i=i||Sh(r,wn()):(r=new cV,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,c=s?new Dh(i,!0,!1):null;return function q6(n){return cS(n.viewCache_)}(uV(r,e,uS(n.pendingWriteTree_,e._path),s?c.getNode():Vt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(i=>{const r=Ci(i).withIndex(e._queryParams.getIndex()),s=Sw(n.serverSyncTree_,e._path,r);return wk(n.eventQueue_,e._path,s),Promise.resolve(r)},i=>(Y_(n,"get for query "+(0,N.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,N.m9)(n))._repo,n).then(e=>new Vp(e,new cl(n._repo,n._path),n._queryParams.getIndex()))}class MS{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new FV("value",this,new Vp(e.snapshotNode,new cl(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new LV(this,e,t):null}matches(e){return e instanceof MS&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class xS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new LV(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const i=Up(new cl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new FV(e.type,this,new Vp(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof xS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Pw(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=t,y=(E,T)=>{Dk(n._repo,n,d),p(E,T)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new BV(t,s||void 0),d="value"===e?new MS(c):new xS(e,c);return function BW(n,e,t){let i;i=".info"===Kt(e._path)?gV(n.infoSyncTree_,e,t):gV(n.serverSyncTree_,e,t),wk(n.eventQueue_,e._path,i)}(n._repo,n,d),()=>Dk(n._repo,n,d)}function xk(n,e,t,i){return Pw(n,"value",e,t,i)}function jV(n,e,t,i){return Pw(n,"child_added",e,t,i)}function GV(n,e,t,i){return Pw(n,"child_changed",e,t,i)}function zV(n,e,t,i){return Pw(n,"child_moved",e,t,i)}function $V(n,e,t,i){return Pw(n,"child_removed",e,t,i)}function qV(n,e,t){let i=null;const r=t?new BV(t):null;"value"===e?i=new MS(r):e&&(i=new xS(e,r)),Dk(n._repo,n,i)}class Xl{}class WV extends Xl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Zc("endAt",this._value,e._path,!0);const t=$R(e._queryParams,this._value,this._key);if(AS(t),xh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class XW extends Xl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Zc("endBefore",this._value,e._path,!1);const t=function l6(n,e,t){let i,r;return n.index_===Wc?("string"==typeof e&&(e=HB(e)),r=$R(n,e,t)):(i=null==t?Zr:HB(t),r=$R(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(AS(t),xh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class ZV extends Xl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Zc("startAt",this._value,e._path,!0);const t=zR(e._queryParams,this._value,this._key);if(AS(t),xh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class n4 extends Xl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Zc("startAfter",this._value,e._path,!1);const t=function a6(n,e,t){let i;if(n.index_===Wc)"string"==typeof e&&(e=UB(e)),i=zR(n,e,t);else{let r;r=null==t?Do:UB(t),i=zR(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(AS(t),xh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class s4 extends Xl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new So(e._repo,e._path,function s6(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class a4 extends Xl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new So(e._repo,e._path,function o6(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class c4 extends Xl{constructor(e){super(),this._path=e}_apply(e){IS(e,"orderByChild");const t=new Mn(this._path);if(Qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new UR(t),r=rS(e._queryParams,i);return xh(r),new So(e._repo,e._path,r,!0)}}class d4 extends Xl{_apply(e){IS(e,"orderByKey");const t=rS(e._queryParams,Wc);return xh(t),new So(e._repo,e._path,t,!0)}}class f4 extends Xl{_apply(e){IS(e,"orderByPriority");const t=rS(e._queryParams,Zn);return xh(t),new So(e._repo,e._path,t,!0)}}class g4 extends Xl{_apply(e){IS(e,"orderByValue");const t=rS(e._queryParams,HR);return xh(t),new So(e._repo,e._path,t,!0)}}class _4 extends Xl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Zc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new WV(this._value,this._key)._apply(new ZV(this._value,this._key)._apply(e))}}function ec(n,...e){let t=(0,N.m9)(n);for(const i of e)t=i._apply(t);return t}(function K6(n){(0,N.hu)(!pS,"__referenceConstructor has already been defined"),pS=n})(cl),function tW(n){(0,N.hu)(!mS,"__referenceConstructor has already been defined"),mS=n}(cl);const Rk={};function KV(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Se("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ke("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,c=Ak(s,r),d=c.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${d.namespace}`,c=Ak(s,r),d=c.repoInfo):p=!c.repoInfo.secure;const E=r&&p?new pw(pw.OWNER):new cq(n.name,n.options,e);TV("Invalid Firebase Database URL",c),Qt(c.path)||Se("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function C4(n,e,t,i){let r=Rk[e.name];r||(r={},Rk[e.name]=r);let s=r[n.toURLString()];return s&&Se("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new MW(n,false,t,i),r[n.toURLString()]=s,s}(d,n,E,new lq(n.name,t));return new D4(T,n)}class D4{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function xW(n,e,t){if(n.stats_=RR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new sS(n.repoInfo_,(i,r,s,c)=>{MV(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>xV(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Pz)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Pp(n.repoInfo_,e,(i,r,s,c)=>{MV(n,i,r,s,c)},i=>{xV(n,i)},i=>{!function RW(n,e){Ri(e,(t,i)=>{Ck(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function hq(n,e){const t=n.toString();return xR[t]||(xR[t]=e()),xR[t]}(n.repoInfo_,()=>new p6(n.stats_,n.server_)),n.infoData_=new c6,n.infoSyncTree_=new pV({startListening:(i,r,s,c)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=Sw(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),Ck(n,"connected",!1),n.serverSyncTree_=new pV({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,p)=>{const y=c(d,p);ll(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cl(this._repo,wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function w4(n,e){const t=Rk[e];(!t||t[n.key]!==n)&&Se(`Database ${e}(${n.repoInfo_}) has already been deleted.`),kV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Se("Cannot call "+e+" on a deleted database.")}}function QV(){mB.IS_TRANSPORT_INITIALIZED&&st("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function T4(){QV(),Ch.forceDisallow()}function S4(){QV(),U_.forceDisallow(),Ch.forceAllow()}function x4(n,e){we(n,e)}const k4={".sv":"timestamp"};class N4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Pp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Pp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function R4(n){u(Cs.SDK_VERSION),(0,Cs._registerComponent)(new nl.wA("database",(e,{instanceIdentifier:t})=>KV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Cs.registerVersion)(TR,o,n),(0,Cs.registerVersion)(TR,o,"esm2017")}();const V4=new il.Yd("@firebase/database-compat"),JV=function(n){V4.warn("FIREBASE WARNING: "+n)};class j4{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,JV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class G4{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Rh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),kw("DataSnapshot.child","path",e,!1),new Rh(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),kw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Rh(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new la(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Yr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const c=Yr.getCancelAndContextArgs_("Query.on",i,r),d=(y,E)=>{t.call(c.context,new Rh(this.database,y),E)};d.userCallback=t,d.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(e){case"value":return xk(this._delegate,d,p),t;case"child_added":return jV(this._delegate,d,p),t;case"child_removed":return $V(this._delegate,d,p),t;case"child_changed":return GV(this._delegate,d,p),t;case"child_moved":return zV(this._delegate,d,p),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,qV(this._delegate,e,r)}else qV(this._delegate,e)}get(){return QW(this._delegate).then(e=>new Rh(this.database,e))}once(e,t,i,r){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const s=Yr.getCancelAndContextArgs_("Query.once",i,r),c=new N.BH,d=(y,E)=>{const T=new Rh(this.database,y);t&&t.call(s.context,T,E),c.resolve(T)};d.userCallback=t,d.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(e){case"value":xk(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":jV(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":$V(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":GV(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":zV(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new Yr(this.database,ec(this._delegate,function o4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new s4(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new Yr(this.database,ec(this._delegate,function l4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new a4(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new Yr(this.database,ec(this._delegate,function u4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return kw("orderByChild","path",n,!1),new c4(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new Yr(this.database,ec(this._delegate,function h4(){return new d4}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new Yr(this.database,ec(this._delegate,function p4(){return new f4}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new Yr(this.database,ec(this._delegate,function m4(){return new g4}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new Yr(this.database,ec(this._delegate,function t4(n=null,e){return Rw("startAt","key",e,!0),new ZV(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new Yr(this.database,ec(this._delegate,function r4(n,e){return Rw("startAfter","key",e,!0),new n4(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new Yr(this.database,ec(this._delegate,function JW(n,e){return Rw("endAt","key",e,!0),new WV(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new Yr(this.database,ec(this._delegate,function e4(n,e){return Rw("endBefore","key",e,!0),new XW(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new Yr(this.database,ec(this._delegate,function y4(n,e){return Rw("equalTo","key",e,!0),new _4(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Yr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,N.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,N.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new la(this.database,new cl(this._delegate._repo,this._delegate._path))}}class la extends Yr{constructor(e,t){super(e,new So(t._repo,t._path,new iS,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new la(this.database,Up(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new la(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new la(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const i=Mk(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,JV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}al("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const i=KW(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function YW(n,e,t){if(al("setWithPriority",n._path),Zc("setWithPriority",e,n._path,!1),bk("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new N.BH;return Ek(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function WW(n){return al("remove",n._path),Mk(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function F4(n,e,t){var i;if(n=(0,N.m9)(n),al("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==t?void 0:t.applyLocally)||void 0===i||i,s=new N.BH,d=xk(n,()=>{});return function UW(n,e,t,i,r,s){Y_(n,"transaction on "+e);const c={path:e,update:t,onComplete:i,status:null,order:M(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=Tk(n,e,void 0);c.currentInputSnapshot=d;const p=c.update(d.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{xw("transaction failed: Data returned ",p,c.path),c.status=0;const y=bS(n.transactionQueueTree_,e),E=Bp(y)||[];let T;E.push(c),_k(y,E),"object"==typeof p&&null!==p&&(0,N.r3)(p,".priority")?(T=(0,N.DV)(p,".priority"),(0,N.hu)(Mw(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(_S(n.serverSyncTree_,e)||Vt.EMPTY_NODE).getPriority().val();const x=Ow(n),P=Ci(p,T),L=pk(P,d,x);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=L,c.currentWriteId=DS(n);const Z=ak(n.serverSyncTree_,e,L,c.currentWriteId,c.applyLocally);ll(n.eventQueue_,e,Z),TS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,E)=>{let T=null;p?s.reject(p):(T=new Vp(E,new cl(n._repo,n._path),Zn),s.resolve(new N4(y,T)))},d,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new G4(s.committed,new Rh(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const i=function ZW(n,e){n=(0,N.m9)(n),al("setPriority",n._path),bk("setPriority",e,!1);const t=new N.BH;return Ek(n._repo,oi(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const i=function qW(n,e){n=(0,N.m9)(n),al("push",n._path),Zc("push",e,n._path,!0);const t=AV(n._repo),i=t6(t),r=Up(n,i),s=Up(n,i);let c;return c=null!=e?Mk(s,e).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,e),r=i.then(c=>new la(this.database,c));t&&r.then(()=>t(null),c=>t(c));const s=new la(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return al("Reference.onDisconnect",this._delegate._path),new j4(new VV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Nw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:T4,forceLongPolling:S4}}useEmulator(e,t,i={}){!function I4(n,e,t,i={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Se("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Se('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new pw(pw.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,N.Sg)(i.mockUserToken,n.app.options.projectId);s=new pw(c)}!function b4(n,e,t,i){n.repoInfo_=new AR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof la){const t=HV(this._delegate,e.toString());return new la(this,t)}{const t=UV(this._delegate,e);return new la(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const i=HV(this._delegate,e);return new la(this,i)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function A4(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),kV(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function M4(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function VW(n){n.persistentConnection_&&n.persistentConnection_.resume(IV)}(n._repo)}(this._delegate)}}Nw.ServerValue={TIMESTAMP:function O4(){return k4}(),increment:n=>function P4(n){return{".sv":{increment:n}}}(n)};var $4=Object.freeze({__proto__:null,initStandalone:function z4({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){u(t);const c=new nl.zt("auth-internal",new nl.H0("database-standalone"));return c.setComponent(new nl.wA("auth-internal",()=>i,"PRIVATE")),{instance:new Nw(KV(n,c,void 0,e,s),n),namespace:r}}});const q4=Nw.ServerValue;function XV(n){return null==n}function e2(n){return"function"==typeof n.set}function t2(n,e){return e2(e)?e:n.ref(e)}function n2(n,e){if(function Z4(n){return"string"==typeof n}(n))return e.stringCase();if(e2(n))return e.firebaseCase();if(function Y4(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Fw(n,e,t="on",i=Bu.z){return new sn.y(r=>{let s=null;return s=n[t](e,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===t&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,ot.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:c,key:d}}),(0,C_.B)())}function r2(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function J4(n,e){const{payload:t,prevKey:i,key:r}=e,s=r2(n,r),c=function Q4(n,e){if(XV(e))return 0;{const t=r2(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==t.key)).splice(c,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===r?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function s2(n){return(XV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function o2(n,e,t){return function K4(n,e,t){return Fw(n,"value","once",t).pipe(In(i=>{const r=[Ze(i)];return e.forEach(s=>r.push(Fw(n,s,"on",t))),(0,si.T)(...r).pipe(Tr(J4,[]))}),Gv())}(n,e=s2(e),t)}function a2(n,e,t){const i=(e=s2(e)).map(r=>Fw(n,r,"on",t));return(0,si.T)(...i)}function l2(n,e){return function(i,r){return n2(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function nZ(n){return function(t){return t?n2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function c2(n,e){return function(){return Fw(n,"value","on",e)}}!function W4(n){n.INTERNAL.registerComponent(new nl.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new Nw(r,i)},"PUBLIC").setServiceProps({Reference:la,Query:Yr,Database:Nw,DataSnapshot:Rh,enableLogging:x4,INTERNAL:$4,ServerValue:q4}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(ZT.Z);const sZ=new l.OlP("angularfire2.realtimeDatabaseURL"),oZ=new l.OlP("angularfire2.database.use-emulator");let kk=(()=>{class n{constructor(t,i,r,s,c,d,p,y,E,T,x,P,L,Z,oe){this.schedulers=d;const Le=p,We=(0,Gi.on)(t,c,i);y&&WT(We,c,E,x,P,L,T,Z),this.database=(0,Gi.cc)(`${We.name}.database.${r}`,"AngularFireDatabase",We.name,()=>{const He=c.runOutsideAngular(()=>We.database(r||void 0));return Le&&He.useEmulator(...Le),He},[Le])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>t2(this.database,t));let s=r;return i&&(s=i(r)),function iZ(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:l2(i,"update"),set:l2(i,"set"),push:r=>i.push(r),remove:nZ(i),snapshotChanges:r=>o2(n,r,t).pipe(mn.iC),stateChanges:r=>a2(n,r,t).pipe(mn.iC),auditTrail:r=>function X4(n,e,t){return function tZ(n,e,t){return function eZ(n,e){return Fw(n,"value","on",e).pipe((0,ot.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function DR(...n){const e=(0,Ma.jO)(n);return(0,On.e)((t,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,ys.Xf)(n[p]).subscribe((0,cn.x)(i,y=>{s[p]=y,!d&&!c[p]&&(c[p]=!0,(d=c.every(Dr.y))&&(c=null))},jC.Z));t.subscribe((0,cn.x)(i,p=>{if(d){const y=[p,...s];i.next(e?e(...y):y)}}))})}(e),(0,ot.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function JL(n){return(0,On.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,cn.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ot.U)(r=>r.actions))}(n,a2(n,e).pipe(Tr((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(mn.iC),valueChanges:(r,s)=>o2(n,r,t).pipe((0,ot.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),mn.iC)}}(s,this)}object(t){return function rZ(n,e){return{query:n,snapshotChanges:()=>c2(n,e.schedulers.outsideAngular)().pipe(mn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>c2(n,e.schedulers.outsideAngular)().pipe(mn.iC,(0,ot.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>t2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Gi.Dh),l.LFG(Gi.xv,8),l.LFG(sZ,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(mn.HU),l.LFG(oZ,8),l.LFG(F_,8),l.LFG(GT,8),l.LFG(zT,8),l.LFG(cw,8),l.LFG(uw,8),l.LFG($T,8),l.LFG(qT,8),l.LFG(wh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),aZ=(()=>{class n{constructor(){N_.Z.registerVersion("angularfire",mn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[kk]}),n})(),Hp=(()=>{class n{constructor(t,i,r,s){this.snackBar=t,this.afAuth=i,this.db=r,this.router=s,this.userStatusEmitter=new l.vpe}userRegister(t,i,r){let s=this.afAuth.createUserWithEmailAndPassword(i,r);s.then(c=>{this.saveCreatedAccount(t,c,i)}),s.catch(function(c){console.error(c)})}saveCreatedAccount(t,i,r){var s=i.user.uid;t.node_id=s,t.email=r,t.created=(new Date).toLocaleString(),this.writeUserData(s,t)}writeUserData(t,i){let r=this;this.db.database.ref("users/"+t).set(i,s=>{s?console.error(s):(this.snackBar.open("Success, Please login","Ok"),r.router.navigate(["/user-login"]))})}userLogin(t,i){let r=this;const s=this.afAuth.signInWithEmailAndPassword(t,i);s.then(function(c){localStorage.uid=c.user.uid,r.userStatusEmitter.emit(!1),r.router.navigate(["/"])}).then(c=>{let d=localStorage.uid;this.db.object("users/"+d).update({password:i})}),r=this,s.catch(function(c){return r.snackBar.open("Invalid e -mail or password","Ok")})}userLogOut(){this.afAuth.signOut().then(()=>{localStorage.removeItem("uid"),this.userStatusEmitter.emit(!0),this.router.navigate(["user-login"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{this.snackBar.open("Password reset link was sent successfully","Ok"),this.router.navigate(["user-login"])}).catch(i=>{this.snackBar.open("Invalid email,enter valid E-mail address","Ok")})}userCheck(){return!!localStorage.uid}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(uT),l.LFG(F_),l.LFG(kk),l.LFG(ri))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ok=(()=>{class n{constructor(t,i){this.auth=t,this.router=i}canActivate(t,i){return!!this.auth.userCheck()||(this.router.navigate(["user-login"]),!1)}canActivateChild(t,i){throw new Error("Method not implemented.")}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Hp),l.LFG(ri))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pk=(()=>{class n{constructor(t,i){this.authSer=t,this.router=i}canActivateChild(t,i){throw new Error("Method not implemented.")}canActivate(t,i){return!this.authSer.userCheck()||(this.router.navigate(["/"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Hp),l.LFG(ri))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function u2(...n){const e=(0,Ma.jO)(n),{args:t,keys:i}=Cn(n),r=new sn.y(s=>{const{length:c}=t;if(!c)return void s.complete();const d=new Array(c);let p=c,y=c;for(let E=0;E<c;E++){let T=!1;(0,ys.Xf)(t[E]).subscribe((0,cn.x)(s,x=>{T||(T=!0,y--),d[E]=x},()=>p--,void 0,()=>{(!p||!T)&&(y||s.next(i?Eu(i,d):d),s.complete())}))}});return e?r.pipe(Cu(e)):r}let d2=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),jp=(()=>{class n extends d2{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const ul=new l.OlP("NgValueAccessor"),cZ={provide:ul,useExisting:(0,l.Gpc)(()=>Gp),multi:!0},dZ=new l.OlP("CompositionEventMode");let Gp=(()=>{class n extends d2{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function uZ(){const n=B()?B().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(dZ,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&l.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[l._Bn([cZ]),l.qOj]}),n})();function kh(n){return null==n||0===n.length}function f2(n){return null!=n&&"number"==typeof n.length}const Kr=new l.OlP("NgValidators"),Oh=new l.OlP("NgAsyncValidators"),hZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ed{static min(e){return function p2(n){return e=>{if(kh(e.value)||kh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function g2(n){return e=>{if(kh(e.value)||kh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return m2(e)}static requiredTrue(e){return function _2(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function y2(n){return kh(n.value)||hZ.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function v2(n){return e=>kh(e.value)||!f2(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function b2(n){return e=>f2(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function w2(n){if(!n)return RS;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(kh(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return I2(e)}static composeAsync(e){return A2(e)}}function m2(n){return kh(n.value)?{required:!0}:null}function RS(n){return null}function C2(n){return null!=n}function E2(n){const e=(0,l.QGY)(n)?(0,vn.D)(n):n;return(0,l.CqO)(e),e}function D2(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function T2(n,e){return e.map(t=>t(n))}function S2(n){return n.map(e=>function fZ(n){return!n.validate}(e)?e:t=>e.validate(t))}function I2(n){if(!n)return null;const e=n.filter(C2);return 0==e.length?null:function(t){return D2(T2(t,e))}}function Nk(n){return null!=n?I2(S2(n)):null}function A2(n){if(!n)return null;const e=n.filter(C2);return 0==e.length?null:function(t){return u2(T2(t,e).map(E2)).pipe((0,ot.U)(D2))}}function Fk(n){return null!=n?A2(S2(n)):null}function M2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function x2(n){return n._rawValidators}function R2(n){return n._rawAsyncValidators}function Lk(n){return n?Array.isArray(n)?n:[n]:[]}function kS(n,e){return Array.isArray(n)?n.includes(e):n===e}function k2(n,e){const t=Lk(e);return Lk(n).forEach(r=>{kS(t,r)||t.push(r)}),t}function O2(n,e){return Lk(e).filter(t=>!kS(n,t))}class P2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Nk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Fk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yc extends P2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qs extends P2{get formDirective(){return null}get path(){return null}}class N2{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}let Lw=(()=>{class n extends N2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Yc,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&l.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[l.qOj]}),n})(),Q_=(()=>{class n extends N2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(qs,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&l.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[l.qOj]}),n})();function PS(n,e){return[...e.path,n]}function Bw(n,e){Uk(n,e),e.valueAccessor.writeValue(n.value),function wZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&L2(n,e)})}(n,e),function EZ(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function CZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&L2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function bZ(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function NS(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),LS(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function FS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Uk(n,e){const t=x2(n);null!==e.validator?n.setValidators(M2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=R2(n);null!==e.asyncValidator?n.setAsyncValidators(M2(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();FS(e._rawValidators,r),FS(e._rawAsyncValidators,r)}function LS(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=x2(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=R2(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return FS(e._rawValidators,i),FS(e._rawAsyncValidators,i),t}function L2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function B2(n,e){Uk(n,e)}function Hk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function U2(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function jk(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Gp?t=s:function SZ(n){return Object.getPrototypeOf(n.constructor)===jp}(s)?i=s:r=s}),r||i||t||null}function Gk(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Vw="VALID",BS="INVALID",J_="PENDING",Uw="DISABLED";function $k(n){return(VS(n)?n.validators:n)||null}function H2(n){return Array.isArray(n)?Nk(n):n||null}function qk(n,e){return(VS(e)?e.asyncValidators:n)||null}function j2(n){return Array.isArray(n)?Fk(n):n||null}function VS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const G2=n=>n instanceof zp,Wk=n=>n instanceof Hw;function z2(n){return G2(n)?n.value:n.getRawValue()}function $2(n,e){const t=Wk(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new l.vHH(1e3,"");if(!i[e])throw new l.vHH(1001,"")}function q2(n,e){Wk(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new l.vHH(1002,"")})}class Zk{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=H2(this._rawValidators),this._composedAsyncValidatorFn=j2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Vw}get invalid(){return this.status===BS}get pending(){return this.status==J_}get disabled(){return this.status===Uw}get enabled(){return this.status!==Uw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=H2(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=j2(e)}addValidators(e){this.setValidators(k2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(k2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(O2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(O2(e,this._rawAsyncValidators))}hasValidator(e){return kS(this._rawValidators,e)}hasAsyncValidator(e){return kS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=J_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Uw,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vw,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vw||this.status===J_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Uw:Vw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=J_,this._hasOwnPendingAsyncValidator=!0;const t=E2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function IZ(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=Wk(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof MZ)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?Uw:this.errors?BS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(J_)?J_:this._anyControlsHaveStatus(BS)?BS:Vw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){VS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class zp extends Zk{constructor(e=null,t,i){super($k(t),qk(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),VS(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Gk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Gk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Hw extends Zk{constructor(e,t,i){super($k(t),qk(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){q2(this,e),Object.keys(e).forEach(i=>{$2(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=z2(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class MZ extends Zk{constructor(e,t,i){super($k(t),qk(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){q2(this,e),e.forEach((i,r)=>{$2(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>z2(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const xZ={provide:qs,useExisting:(0,l.Gpc)(()=>td)},jw=(()=>Promise.resolve(null))();let td=(()=>{class n extends qs{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new Hw({},Nk(t),Fk(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){jw.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Bw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){jw.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){jw.then(()=>{const i=this._findContainer(t.path),r=new Hw({});B2(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){jw.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){jw.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,U2(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Kr,10),l.Y36(Oh,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&l.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([xZ]),l.qOj]}),n})();const kZ={provide:Yc,useExisting:(0,l.Gpc)(()=>US)},Y2=(()=>Promise.resolve(null))();let US=(()=>{class n extends Yc{constructor(t,i,r,s,c){super(),this._changeDetectorRef=c,this.control=new zp,this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=jk(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Hk(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Bw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Y2.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;Y2.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?PS(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(qs,9),l.Y36(Kr,10),l.Y36(Oh,10),l.Y36(ul,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([kZ]),l.qOj,l.TTD]}),n})(),X_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Q2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Yk=new l.OlP("NgModelWithFormControlWarning"),BZ={provide:qs,useExisting:(0,l.Gpc)(()=>$p)};let $p=(()=>{class n extends qs{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(LS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Bw(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){NS(t.control||null,t,!1),Gk(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,U2(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(NS(i||null,t),G2(r)&&(Bw(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);B2(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function DZ(n,e){return LS(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Uk(this.form,this),this._oldForm&&LS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Kr,10),l.Y36(Oh,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&l.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([BZ]),l.qOj,l.TTD]}),n})();const HZ={provide:Yc,useExisting:(0,l.Gpc)(()=>HS)};let HS=(()=>{class n extends Yc{constructor(t,i,r,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=jk(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Hk(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return PS(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(l.Y36(qs,13),l.Y36(Kr,10),l.Y36(Oh,10),l.Y36(ul,10),l.Y36(Yk,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([HZ]),l.qOj,l.TTD]}),n})(),qp=(()=>{class n{constructor(){this._validator=RS}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):RS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const QZ={provide:Kr,useExisting:(0,l.Gpc)(()=>Gw),multi:!0};let Gw=(()=>{class n extends qp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function ZZ(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>m2}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&l.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([QZ]),l.qOj]}),n})(),hU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Q2]]}),n})(),i8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[hU]}),n})(),r8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Yk,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[hU]}),n})();const s8=["connectionContainer"],o8=["inputContainer"],a8=["label"];function l8(n,e){1&n&&(l.ynx(0),l.TgZ(1,"div",14),l._UZ(2,"div",15)(3,"div",16)(4,"div",17),l.qZA(),l.TgZ(5,"div",18),l._UZ(6,"div",15)(7,"div",16)(8,"div",17),l.qZA(),l.BQk())}function c8(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",19),l.NdJ("cdkObserveContent",function(){return l.CHM(t),l.oxw().updateOutlineGap()}),l.Hsn(1,1),l.qZA()}if(2&n){const t=l.oxw();l.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function u8(n,e){if(1&n&&(l.ynx(0),l.Hsn(1,2),l.TgZ(2,"span"),l._uU(3),l.qZA(),l.BQk()),2&n){const t=l.oxw(2);l.xp6(3),l.Oqu(t._control.placeholder)}}function d8(n,e){1&n&&l.Hsn(0,3,["*ngSwitchCase","true"])}function h8(n,e){1&n&&(l.TgZ(0,"span",23),l._uU(1," *"),l.qZA())}function f8(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"label",20,21),l.NdJ("cdkObserveContent",function(){return l.CHM(t),l.oxw().updateOutlineGap()}),l.YNc(2,u8,4,1,"ng-container",12),l.YNc(3,d8,1,0,"ng-content",12),l.YNc(4,h8,2,0,"span",22),l.qZA()}if(2&n){const t=l.oxw();l.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),l.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),l.uIk("for",t._control.id)("aria-owns",t._control.id),l.xp6(2),l.Q6J("ngSwitchCase",!1),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function p8(n,e){1&n&&(l.TgZ(0,"div",24),l.Hsn(1,4),l.qZA())}function g8(n,e){if(1&n&&(l.TgZ(0,"div",25),l._UZ(1,"span",26),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function m8(n,e){if(1&n&&(l.TgZ(0,"div"),l.Hsn(1,5),l.qZA()),2&n){const t=l.oxw();l.Q6J("@transitionMessages",t._subscriptAnimationState)}}function _8(n,e){if(1&n&&(l.TgZ(0,"div",30),l._uU(1),l.qZA()),2&n){const t=l.oxw(2);l.Q6J("id",t._hintLabelId),l.xp6(1),l.Oqu(t.hintLabel)}}function y8(n,e){if(1&n&&(l.TgZ(0,"div",27),l.YNc(1,_8,2,2,"div",28),l.Hsn(2,6),l._UZ(3,"div",29),l.Hsn(4,7),l.qZA()),2&n){const t=l.oxw();l.Q6J("@transitionMessages",t._subscriptAnimationState),l.xp6(1),l.Q6J("ngIf",t.hintLabel)}}const v8=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],b8=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],w8=new l.OlP("MatError"),C8={transitionMessages:ra("transitionMessages",[jt("enter",Bt({opacity:1,transform:"translateY(0%)"})),xi("void => enter",[Bt({opacity:0,transform:"translateY(-5px)"}),Xi("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let jS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n}),n})();const E8=new l.OlP("MatHint");let Wp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-label"]]}),n})(),D8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const T8=new l.OlP("MatPrefix"),fU=new l.OlP("MatSuffix");let pU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","matSuffix",""]],features:[l._Bn([{provide:fU,useExisting:n}])]}),n})(),gU=0;const I8=u_(class{constructor(n){this._elementRef=n}},"primary"),A8=new l.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),tO=new l.OlP("MatFormField");let Zp=(()=>{class n extends I8{constructor(t,i,r,s,c,d,p){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=c,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new gt.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+gU++,this._labelId="mat-form-field-label-"+gU++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=un(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(gi(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(An(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(An(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,si.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(gi(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(gi(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(An(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,wm(this._label.nativeElement,"transitionend").pipe((0,Pn.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const E=i.querySelectorAll(`${r}, ${s}`);for(let T=0;T<E.length;T++)E[T].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,d=0;const p=i.querySelectorAll(r),y=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const E=i.getBoundingClientRect();if(0===E.width&&0===E.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const T=this._getStartEnd(E),x=t.children,P=this._getStartEnd(x[0].getBoundingClientRect());let L=0;for(let Z=0;Z<x.length;Z++)L+=x[Z].offsetWidth;c=Math.abs(P-T)-5,d=L>0?.75*L+10:0}for(let E=0;E<p.length;E++)p[E].style.width=`${c}px`;for(let E=0;E<y.length;E++)y[E].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Uu,8),l.Y36(A8,8),l.Y36(Mi),l.Y36(l.R0b),l.Y36(el,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(l.Suo(r,jS,5),l.Suo(r,jS,7),l.Suo(r,Wp,5),l.Suo(r,Wp,7),l.Suo(r,D8,5),l.Suo(r,w8,5),l.Suo(r,E8,5),l.Suo(r,T8,5),l.Suo(r,fU,5)),2&t){let s;l.iGM(s=l.CRH())&&(i._controlNonStatic=s.first),l.iGM(s=l.CRH())&&(i._controlStatic=s.first),l.iGM(s=l.CRH())&&(i._labelChildNonStatic=s.first),l.iGM(s=l.CRH())&&(i._labelChildStatic=s.first),l.iGM(s=l.CRH())&&(i._placeholderChild=s.first),l.iGM(s=l.CRH())&&(i._errorChildren=s),l.iGM(s=l.CRH())&&(i._hintChildren=s),l.iGM(s=l.CRH())&&(i._prefixChildren=s),l.iGM(s=l.CRH())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(l.Gf(s8,7),l.Gf(o8,5),l.Gf(a8,5)),2&t){let r;l.iGM(r=l.CRH())&&(i._connectionContainerRef=r.first),l.iGM(r=l.CRH())&&(i._inputContainerRef=r.first),l.iGM(r=l.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&l.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[l._Bn([{provide:tO,useExisting:n}]),l.qOj],ngContentSelectors:b8,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(l.F$t(v8),l.TgZ(0,"div",0)(1,"div",1,2),l.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),l.YNc(3,l8,9,0,"ng-container",3),l.YNc(4,c8,2,1,"div",4),l.TgZ(5,"div",5,6),l.Hsn(7),l.TgZ(8,"span",7),l.YNc(9,f8,5,16,"label",8),l.qZA()(),l.YNc(10,p8,2,0,"div",9),l.qZA(),l.YNc(11,g8,2,4,"div",10),l.TgZ(12,"div",11),l.YNc(13,m8,2,1,"div",12),l.YNc(14,y8,5,2,"div",13),l.qZA()()),2&t&&(l.xp6(3),l.Q6J("ngIf","outline"==i.appearance),l.xp6(1),l.Q6J("ngIf",i._prefixChildren.length),l.xp6(5),l.Q6J("ngIf",i._hasFloatingLabel()),l.xp6(1),l.Q6J("ngIf",i._suffixChildren.length),l.xp6(1),l.Q6J("ngIf","outline"!=i.appearance),l.xp6(1),l.Q6J("ngSwitch",i._getDisplayedMessages()),l.xp6(1),l.Q6J("ngSwitchCase","error"),l.xp6(1),l.Q6J("ngSwitchCase","hint"))},directives:[Vn,zv,Bi,wr],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[C8.transitionMessages]},changeDetection:0}),n})(),zw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[co,bn,fE],bn]}),n})();const _U=Xd({passive:!0});let M8=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Oa.E;const i=ea(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new gt.x,c="cdk-text-field-autofilled",d=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(c)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(c)&&(i.classList.remove(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(i.classList.add(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,_U),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,_U)}}),s}stopMonitoring(t){const i=ea(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Mi),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const x8=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),R8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let k8=0;const O8=qD(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let ey=(()=>{class n extends O8{constructor(t,i,r,s,c,d,p,y,E,T){super(d,s,c,r),this._elementRef=t,this._platform=i,this._autofillMonitor=y,this._formField=T,this._uid="mat-input-"+k8++,this.focused=!1,this.stateChanges=new gt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(L=>RC().has(L)),this._iOSKeyupListener=L=>{const Z=L.target;!Z.value&&0===Z.selectionStart&&0===Z.selectionEnd&&(Z.setSelectionRange(1,1),Z.setSelectionRange(0,0))};const x=this._elementRef.nativeElement,P=x.nodeName.toLowerCase();this._inputValueAccessor=p||x,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&E.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!T,this._isNativeSelect&&(this.controlType=x.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=un(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,i,r,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(ed.required))&&void 0!==s&&s}set required(t){this._required=un(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&RC().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=un(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,i;const r=(null===(i=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===i?void 0:i.call(t))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){R8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(Mi),l.Y36(Yc,10),l.Y36(td,8),l.Y36($p,8),l.Y36(Lb),l.Y36(x8,10),l.Y36(M8),l.Y36(l.R0b),l.Y36(tO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&l.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(l.Ikx("disabled",i.disabled)("required",i.required),l.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),l.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:jS,useExisting:n}]),l.qOj,l.TTD]}),n})(),vU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Lb],imports:[[yU,zw,bn],yU,zw]}),n})(),P8=(()=>{class n{constructor(t){this.auth=t}ngOnInit(){}onUserPasswordResetBtnClick(t){this.auth.ForgotPassword(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Hp))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-password-reset"]],decls:16,vars:0,consts:[["appearance","fill"],["type","email","matInput","","placeholder","Ex. pat@example.com"],["email",""],[1,"button-group"],["routerLink","/user-login"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){if(1&t){const r=l.EpF();l.TgZ(0,"article")(1,"form")(2,"h1"),l._uU(3,"Reset your password"),l.qZA(),l.TgZ(4,"p"),l._uU(5,"Reset link will be sent to your the email addres you enter"),l.qZA(),l.TgZ(6,"mat-form-field",0)(7,"mat-label"),l._uU(8,"Email"),l.qZA(),l._UZ(9,"input",1,2),l.qZA(),l.TgZ(11,"div",3)(12,"a",4),l._uU(13,"Back to Log in"),l.qZA(),l.TgZ(14,"button",5),l.NdJ("click",function(){l.CHM(r);const c=l.MAs(10);return i.onUserPasswordResetBtnClick(c.value)}),l._uU(15,"Send"),l.qZA()()()()}},directives:[X_,Q_,td,Zp,Wp,ey,Ga,tl],styles:['@import"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai+Looped:wght@200&family=Montserrat:wght@300;500&family=Roboto+Condensed:ital@1&display=swap";button[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{font-size:medium;font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif}article[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10%}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-top:2%;padding:0%}a[_ngcontent-%COMP%]{text-decoration:none;font-size:medium}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}button[_ngcontent-%COMP%]{width:30%}h1[_ngcontent-%COMP%]{text-align:center}']}),n})();class bU{}class wU{}class nd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),c=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof nd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new nd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof nd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let c=this.headers.get(t);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class N8{encodeKey(e){return CU(e)}encodeValue(e){return CU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const L8=/%(\d[a-f0-9])/gi,B8={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function CU(n){return encodeURIComponent(n).replace(L8,(e,t)=>{var i;return null!==(i=B8[t])&&void 0!==i?i:e})}function EU(n){return`${n}`}class Ph{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new N8,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function F8(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],p=t.get(c)||[];p.push(d),t.set(c,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ph({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(EU(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(EU(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class V8{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function DU(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function TU(n){return"undefined"!=typeof Blob&&n instanceof Blob}function SU(n){return"undefined"!=typeof FormData&&n instanceof FormData}class $w{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function U8(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new nd),this.context||(this.context=new V8),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+c}}else this.params=new Ph,this.urlWithParams=t}serializeBody(){return null===this.body?null:DU(this.body)||TU(this.body)||SU(this.body)||function H8(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ph?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||SU(this.body)?null:TU(this.body)?this.body.type||null:DU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ph?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,E=e.params||this.params;const T=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((x,P)=>x.set(P,e.setHeaders[P]),y)),e.setParams&&(E=Object.keys(e.setParams).reduce((x,P)=>x.set(P,e.setParams[P]),E)),new $w(i,r,c,{params:E,headers:y,context:T,reportProgress:p,responseType:s,withCredentials:d})}}var er=(()=>((er=er||{})[er.Sent=0]="Sent",er[er.UploadProgress=1]="UploadProgress",er[er.ResponseHeader=2]="ResponseHeader",er[er.DownloadProgress=3]="DownloadProgress",er[er.Response=4]="Response",er[er.User=5]="User",er))();class nO{constructor(e,t=200,i="OK"){this.headers=e.headers||new nd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class iO extends nO{constructor(e={}){super(e),this.type=er.ResponseHeader}clone(e={}){return new iO({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class GS extends nO{constructor(e={}){super(e),this.type=er.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new GS({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class IU extends nO{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function rO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let sO=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof $w)s=t;else{let p,y;p=r.headers instanceof nd?r.headers:new nd(r.headers),r.params&&(y=r.params instanceof Ph?r.params:new Ph({fromObject:r.params})),s=new $w(t,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=Ze(s).pipe(Ol(p=>this.handler.handle(p)));if(t instanceof $w||"events"===r.observe)return c;const d=c.pipe(Nn(p=>p instanceof GS));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,ot.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,ot.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,ot.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,ot.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Ph).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,rO(r,i))}post(t,i,r={}){return this.request("POST",t,rO(r,i))}put(t,i,r={}){return this.request("PUT",t,rO(r,i))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(bU))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class AU{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const MU=new l.OlP("HTTP_INTERCEPTORS");let j8=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const G8=/^\)\]\}',?\n/;let xU=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new sn.y(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((P,L)=>r.setRequestHeader(P,L.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const P=t.detectContentTypeHeader();null!==P&&r.setRequestHeader("Content-Type",P)}if(t.responseType){const P=t.responseType.toLowerCase();r.responseType="json"!==P?P:"text"}const s=t.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const P=r.statusText||"OK",L=new nd(r.getAllResponseHeaders()),Z=function z8(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return c=new iO({headers:L,status:r.status,statusText:P,url:Z}),c},p=()=>{let{headers:P,status:L,statusText:Z,url:oe}=d(),Le=null;204!==L&&(Le=void 0===r.response?r.responseText:r.response),0===L&&(L=Le?200:0);let We=L>=200&&L<300;if("json"===t.responseType&&"string"==typeof Le){const He=Le;Le=Le.replace(G8,"");try{Le=""!==Le?JSON.parse(Le):null}catch(Ge){Le=He,We&&(We=!1,Le={error:Ge,text:Le})}}We?(i.next(new GS({body:Le,headers:P,status:L,statusText:Z,url:oe||void 0})),i.complete()):i.error(new IU({error:Le,headers:P,status:L,statusText:Z,url:oe||void 0}))},y=P=>{const{url:L}=d(),Z=new IU({error:P,status:r.status||0,statusText:r.statusText||"Unknown Error",url:L||void 0});i.error(Z)};let E=!1;const T=P=>{E||(i.next(d()),E=!0);let L={type:er.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(L.total=P.total),"text"===t.responseType&&!!r.responseText&&(L.partialText=r.responseText),i.next(L)},x=P=>{let L={type:er.UploadProgress,loaded:P.loaded};P.lengthComputable&&(L.total=P.total),i.next(L)};return r.addEventListener("load",p),r.addEventListener("error",y),r.addEventListener("timeout",y),r.addEventListener("abort",y),t.reportProgress&&(r.addEventListener("progress",T),null!==s&&r.upload&&r.upload.addEventListener("progress",x)),r.send(s),i.next({type:er.Sent}),()=>{r.removeEventListener("error",y),r.removeEventListener("abort",y),r.removeEventListener("load",p),r.removeEventListener("timeout",y),t.reportProgress&&(r.removeEventListener("progress",T),null!==s&&r.upload&&r.upload.removeEventListener("progress",x)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(gn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const oO=new l.OlP("XSRF_COOKIE_NAME"),aO=new l.OlP("XSRF_HEADER_NAME");class RU{}let $8=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ga(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ne),l.LFG(l.Lbi),l.LFG(oO))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),lO=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(RU),l.LFG(aO))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),q8=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(MU,[]);this.chain=i.reduceRight((r,s)=>new AU(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(wU),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),W8=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:lO,useClass:j8}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:oO,useValue:t.cookieName}:[],t.headerName?{provide:aO,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[lO,{provide:MU,useExisting:lO,multi:!0},{provide:RU,useClass:$8},{provide:oO,useValue:"XSRF-TOKEN"},{provide:aO,useValue:"X-XSRF-TOKEN"}]}),n})(),Z8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[sO,{provide:bU,useClass:q8},xU,{provide:wU,useExisting:xU}],imports:[[W8.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const Y8=["*"];let zS;function qw(n){var e;return(null===(e=function K8(){if(void 0===zS&&(zS=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(zS=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return zS}())||void 0===e?void 0:e.createHTML(n))||n}function kU(n){return Error(`Unable to find icon with the name "${n}"`)}function OU(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function PU(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Yp{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let $S=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Yp(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const c=this._sanitizer.sanitize(l.q3G.HTML,r);if(!c)throw PU(r);const d=qw(c);return this._addSvgIconConfig(t,i,new Yp("",d,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Yp(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(l.q3G.HTML,i);if(!s)throw PU(i);const c=qw(s);return this._addSvgIconSetConfig(t,new Yp("",c,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,t);if(!i)throw OU(t);const r=this._cachedIconsByUrl.get(i);return r?Ze(qS(r)):this._loadSvgIconFromConfig(new Yp(t,null)).pipe((0,mi.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,ot.U)(s=>qS(s)))}getNamedSvgIcon(t,i=""){const r=NU(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(t,c):ks(kU(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Ze(qS(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ot.U)(i=>qS(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Ze(r):u2(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(hr(d=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(l.q3G.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(y)),Ze(null)})))).pipe((0,ot.U)(()=>{const c=this._extractIconWithNameFromAnySet(t,i);if(!c)throw kU(t);return c}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const c=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(c,t,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,mi.b)(i=>t.svgText=i),(0,ot.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Ze(null):this._fetchIcon(t).pipe((0,mi.b)(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const d=this._svgElementFromString(qw("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(qw("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:c,value:d}=r[s];"id"!==c&&i.setAttribute(c,d)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,c=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function Q8(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,r);if(!d)throw OU(r);const p=this._inProgressUrlFetches.get(d);if(p)return p;const y=this._httpClient.get(d,{responseType:"text",withCredentials:c}).pipe((0,ot.U)(E=>qw(E)),Du(()=>this._inProgressUrlFetches.delete(d)),(0,C_.B)());return this._inProgressUrlFetches.set(d,y),y}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(NU(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return X8(s)?new Yp(s.url,null,s.options):new Yp(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(sO,8),l.LFG(Bo),l.LFG(ne,8),l.LFG(l.qLn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qS(n){return n.cloneNode(!0)}function NU(n,e){return n+":"+e}function X8(n){return!(!n.url||!n.options)}const e5=u_(class{constructor(n){this._elementRef=n}}),t5=new l.OlP("mat-icon-location",{providedIn:"root",factory:function n5(){const n=(0,l.f3M)(ne),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),FU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],i5=FU.map(n=>`[${n}]`).join(", "),r5=/^url\(['"]?#(.*?)['"]?\)$/;let LU=(()=>{class n extends e5{constructor(t,i,r,s,c){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=c,this._inline=!1,this._currentIconFetch=pi.w0.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=un(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(c=>{s.setAttribute(c.name,`url('${t}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(i5),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)FU.forEach(c=>{const d=i[s],p=d.getAttribute(c),y=p?p.match(r5):null;if(y){let E=r.get(d);E||(E=[],r.set(d,E)),E.push({name:c,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe((0,Pn.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36($S),l.$8M("aria-hidden"),l.Y36(t5),l.Y36(l.qLn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(l.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),l.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[l.qOj],ngContentSelectors:Y8,decls:1,vars:0,template:function(t,i){1&t&&(l.F$t(),l.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),BU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[bn],bn]}),n})();function s5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"form",1)(1,"h1"),l._uU(2,"Log In"),l.qZA(),l.TgZ(3,"mat-form-field",2)(4,"mat-label"),l._uU(5,"Email"),l.qZA(),l._UZ(6,"input",3),l.qZA(),l.TgZ(7,"mat-form-field",2)(8,"mat-label"),l._uU(9,"Password"),l.qZA(),l._UZ(10,"input",4),l.TgZ(11,"button",5),l.NdJ("click",function(){l.CHM(t);const r=l.oxw();return r.hide=!r.hide}),l.TgZ(12,"mat-icon"),l._uU(13),l.qZA()()(),l.TgZ(14,"div",6)(15,"a",7),l._uU(16,"Forgot password?"),l.qZA()(),l.TgZ(17,"div")(18,"button",8),l.NdJ("click",function(){return l.CHM(t),l.oxw().onUserLogIn()}),l._uU(19,"Log In"),l.qZA()(),l.TgZ(20,"div",9)(21,"p"),l._uU(22,"Don't have an account?"),l.qZA(),l.TgZ(23,"a",10),l._uU(24,"Create one now"),l.qZA()()()}if(2&n){const t=l.oxw();l.Q6J("formGroup",t.formData),l.xp6(10),l.Q6J("type",t.hide?"password":"text"),l.xp6(1),l.uIk("aria-label","Hide password")("aria-pressed",t.hide),l.xp6(2),l.Oqu(t.hide?"visibility_off":"visibility")}}let o5=(()=>{class n{constructor(t){this.authser=t,this.hide=!0,this.formData={}}ngOnInit(){this.createFormData()}createFormData(){this.formData=new Hw({email:new zp(null,[ed.required,ed.email]),password:new zp(null,ed.required)})}onUserLogIn(){this.authser.userLogin(this.formData.value.email,this.formData.value.password)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Hp))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-user-login"]],decls:2,vars:1,consts:[["class","example-form",3,"formGroup",4,"ngIf"],[1,"example-form",3,"formGroup"],["appearance","fill",1,"example-full-width"],["formControlName","email","type","email","matInput","","placeholder","Ex. pat@example.com"],["formControlName","password","matInput","",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],[1,"forgot-password"],["routerLink","/password-reset"],["mat-raised-button","","color","primary",3,"click"],[1,"to-registerPG"],["routerLink","/user-registration"]],template:function(t,i){1&t&&(l.TgZ(0,"article"),l.YNc(1,s5,25,5,"form",0),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",i.formData))},directives:[Vn,X_,Q_,$p,Zp,Wp,Gp,ey,Lw,HS,tl,pU,LU,Ga],styles:['@import"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai+Looped:wght@200&family=Montserrat:wght@300;500&family=Roboto+Condensed:ital@1&display=swap";button[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{font-size:medium;font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif}h1[_ngcontent-%COMP%]{font-size:25px;display:flex;justify-content:center}a[_ngcontent-%COMP%]{text-decoration:none}article[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:auto;width:50%;padding:8%}button[_ngcontent-%COMP%]{margin-top:3%;margin-left:1.6%;width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%;margin:10px;padding:0%}.forgot-password[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;justify-content:flex-end}.to-registerPG[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-top:4%;margin-left:1.6%}a[_ngcontent-%COMP%]{margin-left:1%}']}),n})();function a5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"form",1)(1,"h1"),l._uU(2,"Create your Account"),l.qZA(),l.TgZ(3,"mat-form-field",2)(4,"mat-label"),l._uU(5,"Full Name"),l.qZA(),l._UZ(6,"input",3),l.qZA(),l.TgZ(7,"mat-form-field",2)(8,"mat-label"),l._uU(9,"Email"),l.qZA(),l._UZ(10,"input",4),l.qZA(),l.TgZ(11,"mat-form-field",2)(12,"mat-label"),l._uU(13,"Password"),l.qZA(),l._UZ(14,"input",5),l.TgZ(15,"button",6),l.NdJ("click",function(){l.CHM(t);const r=l.oxw();return r.hide=!r.hide}),l.TgZ(16,"mat-icon"),l._uU(17),l.qZA()()(),l.TgZ(18,"div",7)(19,"a",8),l._uU(20,"Log in instead"),l.qZA(),l.TgZ(21,"button",9),l.NdJ("click",function(){return l.CHM(t),l.oxw().onUserRegister()}),l._uU(22,"Create"),l.qZA()()()}if(2&n){const t=l.oxw();l.Q6J("formGroup",t.formData),l.xp6(14),l.Q6J("type",t.hide?"password":"text"),l.xp6(1),l.uIk("aria-label","Hide password")("aria-pressed",t.hide),l.xp6(2),l.Oqu(t.hide?"visibility_off":"visibility")}}let l5=(()=>{class n{constructor(t){this.authser=t,this.hide=!0,this.formData={}}ngOnInit(){this.createFormData()}createFormData(){this.formData=new Hw({fullname:new zp(null,ed.required),email:new zp(null,[ed.required,ed.email]),password:new zp(null,ed.required)})}onUserRegister(){let t=this.formData.value;this.authser.userRegister(t,t.email,t.password)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Hp))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-user-registration"]],decls:2,vars:1,consts:[["class","example-form",3,"formGroup",4,"ngIf"],[1,"example-form",3,"formGroup"],["appearance","fill"],["formControlName","fullname","matInput",""],["formControlName","email","type","email","matInput","","placeholder","Ex. pat@example.com"],["formControlName","password","matInput","",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"button-group"],["routerLink","/user-login"],["type","submit","mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"article"),l.YNc(1,a5,23,5,"form",0),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",i.formData))},directives:[Vn,X_,Q_,$p,Zp,Wp,Gp,ey,Lw,HS,tl,pU,LU,Ga],styles:['@import"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai+Looped:wght@200&family=Montserrat:wght@300;500&family=Roboto+Condensed:ital@1&display=swap";button[_ngcontent-%COMP%]{font-size:medium;font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif;width:18%;margin-right:-2%}p[_ngcontent-%COMP%]{font-size:medium;font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif}mat-form-field[_ngcontent-%COMP%]{font-size:medium;font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif;width:100%;margin:2%}article[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:8%}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:5%;font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}a[_ngcontent-%COMP%]{font-size:medium;text-decoration:none;margin-left:2%}']}),n})(),cO=(()=>{class n{constructor(t){this.db=t,this.carsRef=this.db.list("cars-list")}AddCar(t){return this.carsRef.push(t)}GetAllCars(){return this.carsRef.snapshotChanges().pipe((0,ot.U)(t=>t.map(i=>Object.assign({key:i.payload.key},i.payload.val()))))}GetCar(t){return this.db.object("cars-list/"+t)}GetCarByKey(t){return this.db.list("cars-list/"+t).valueChanges()}updateCar(t,i){return this.db.object("cars-list/"+t).update(i)}deleteCar(t){this.db.object("cars-list/"+t).remove()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(kk))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c5=(()=>{class n{constructor(t,i){this.router=t,this.firebaseClient=i,this.formData=td,this.hide=!0,this.formSubmitEmitter=new l.vpe,this.formDefaultData=[]}ngOnInit(){this.initFormDefaultData()}onCancelBtnClick(){this.router.navigate(["/"])}onFormSubmit(t){this.formSubmitEmitter.emit(t.value),this.firebaseClient.AddCar(t.value),t.reset(),this.router.navigate(["/"])}initFormDefaultData(){0!=this.formDefaultData.length&&this.formDefaultData.forEach(t=>{})}onImageBtnClick(t){t.click()}onImageInpUpload(t){let i=this,r=new FileReader;r.addEventListener("load",function(){i.imageSrc=r.result,i.formData.value.image=r.result}),r.readAsDataURL(t.target.files[0])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ri),l.Y36(cO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-create"]],inputs:{formDefaultData:"formDefaultData"},outputs:{formSubmitEmitter:"formSubmitEmitter"},decls:64,vars:1,consts:[[1,"main"],["name","loginForm",3,"ngSubmit"],["form","ngForm"],[1,"inline-groups"],["appearance","fill"],["required","","name","manufacturer","ngModel","","matInput",""],["required","","name","model","ngModel","","matInput",""],["required","","name","year","ngModel","","matInput",""],["required","","name","vinCode","ngModel","","matInput",""],["required","","name","price","ngModel","","matInput",""],["required","","name","mile","ngModel","","matInput",""],["required","","name","phoneNumber","ngModel","","matInput",""],["required","","name","image","ngModel","","matInput",""],["required","","name","driveTrainGeo","ngModel","","matInput",""],["required","","name","driveTrainEng","ngModel","","matInput",""],["required","","name","fuelTypeGeo","ngModel","","matInput",""],["required","","name","fuelTypeEng","ngModel","","matInput",""],[1,"form-group-inline"],["type","button","mat-raised-button","","color","warn",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,i){if(1&t){const r=l.EpF();l.TgZ(0,"div",0)(1,"h1"),l._uU(2,"Add New Car"),l.qZA(),l.TgZ(3,"form",1,2),l.NdJ("ngSubmit",function(){l.CHM(r);const c=l.MAs(4);return i.onFormSubmit(c)}),l.TgZ(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),l._uU(8,"Manufacturer"),l.qZA(),l._UZ(9,"input",5),l.qZA(),l.TgZ(10,"mat-form-field",4)(11,"mat-label"),l._uU(12,"Model"),l.qZA(),l._UZ(13,"input",6),l.qZA()(),l.TgZ(14,"div",3)(15,"mat-form-field",4)(16,"mat-label"),l._uU(17,"Year"),l.qZA(),l._UZ(18,"input",7),l.qZA(),l.TgZ(19,"mat-form-field",4)(20,"mat-label"),l._uU(21,"Vinc Code"),l.qZA(),l._UZ(22,"input",8),l.qZA()(),l.TgZ(23,"div",3)(24,"mat-form-field",4)(25,"mat-label"),l._uU(26,"Price"),l.qZA(),l._UZ(27,"input",9),l.qZA(),l.TgZ(28,"mat-form-field",4)(29,"mat-label"),l._uU(30,"Mile"),l.qZA(),l._UZ(31,"input",10),l.qZA()(),l.TgZ(32,"div",3)(33,"mat-form-field",4)(34,"mat-label"),l._uU(35,"Seller Phone Number"),l.qZA(),l._UZ(36,"input",11),l.qZA(),l.TgZ(37,"mat-form-field",4)(38,"mat-label"),l._uU(39,"Image Url"),l.qZA(),l._UZ(40,"input",12),l.qZA()(),l.TgZ(41,"div",3)(42,"mat-form-field",4)(43,"mat-label"),l._uU(44,"Drive Train Geo"),l.qZA(),l._UZ(45,"input",13),l.qZA(),l.TgZ(46,"mat-form-field",4)(47,"mat-label"),l._uU(48,"Drive Train Eng"),l.qZA(),l._UZ(49,"input",14),l.qZA()(),l.TgZ(50,"div",3)(51,"mat-form-field",4)(52,"mat-label"),l._uU(53,"Fuel Type Geo"),l.qZA(),l._UZ(54,"input",15),l.qZA(),l.TgZ(55,"mat-form-field",4)(56,"mat-label"),l._uU(57,"Fuel Type Eng"),l.qZA(),l._UZ(58,"input",16),l.qZA()(),l.TgZ(59,"div",17)(60,"button",18),l.NdJ("click",function(){return i.onCancelBtnClick()}),l._uU(61,"Cancel"),l.qZA(),l.TgZ(62,"button",19),l._uU(63,"Add"),l.qZA()()()()}if(2&t){const r=l.MAs(4);l.xp6(62),l.Q6J("disabled",!r.valid)}},directives:[X_,Q_,td,Zp,Wp,Gp,ey,Gw,Lw,US,tl],styles:['@import"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai+Looped:wght@200&family=Montserrat:wght@300;500&family=Roboto+Condensed:ital@1&display=swap";*[_ngcontent-%COMP%]{font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif}.main[_ngcontent-%COMP%]{text-align:center}mat-form-field[_ngcontent-%COMP%]{margin:5px;width:25%}.inline-groups[_ngcontent-%COMP%]{margin:.5%}button[_ngcontent-%COMP%]{width:12.5%;height:35px}.form-group-inline[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.image-box[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:100%!important;height:100%important;margin-bottom:1%}img[_ngcontent-%COMP%]{width:250px;height:150px}']}),n})();const d5=new l.OlP("MAT_SORT_DEFAULT_OPTIONS"),h5=WD(mp(class{}));let f5=(()=>{class n extends h5{constructor(t){super(),this._defaultOptions=t,this.sortables=new Map,this._stateChanges=new gt.x,this.start="asc",this._direction="",this.sortChange=new l.vpe}get direction(){return this._direction}set direction(t){this._direction=t}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=un(t)}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){var i,r,s;if(!t)return"";const c=null!==(r=null!==(i=null==t?void 0:t.disableClear)&&void 0!==i?i:this.disableClear)&&void 0!==r?r:!!(null===(s=this._defaultOptions)||void 0===s?void 0:s.disableClear);let d=function p5(n,e){let t=["asc","desc"];return"desc"==n&&t.reverse(),e||t.push(""),t}(t.start||this.start,c),p=d.indexOf(this.direction)+1;return p>=d.length&&(p=0),d[p]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(d5,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],active:["matSortActive","active"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[l.qOj,l.TTD]}),n})();function dO(n){return n&&"function"==typeof n.connect}class VU{applyChanges(e,t,i,r,s){e.forEachOperation((c,d,p)=>{let y,E;if(null==c.previousIndex){const T=i(c,d,p);y=t.createEmbeddedView(T.templateRef,T.context,T.index),E=1}else null==p?(t.remove(d),E=3):(y=t.get(d),t.move(y,p),E=2);s&&s({context:null==y?void 0:y.context,operation:E,record:c})})}detach(){}}class HU{constructor(e=!1,t,i=!0){this._multiple=e,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new gt.x,t&&t.length&&(e?t.forEach(r=>this._markSelected(r)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}const Ww=new l.OlP("_ViewRepeater"),_5=[[["caption"]],[["colgroup"],["col"]]],y5=["caption","colgroup, col"];function hO(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=un(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const ty=new l.OlP("CDK_TABLE");let ny=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),iy=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),WS=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class C5{}const E5=hO(C5);let id=(()=>{class n extends E5{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=un(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ty,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(l.Suo(r,ny,5),l.Suo(r,iy,5),l.Suo(r,WS,5)),2&t){let s;l.iGM(s=l.CRH())&&(i.cell=s.first),l.iGM(s=l.CRH())&&(i.headerCell=s.first),l.iGM(s=l.CRH())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[l._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),l.qOj]}),n})();class fO{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let pO=(()=>{class n extends fO{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(id),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[l.qOj]}),n})(),gO=(()=>{class n extends fO{constructor(t,i){var r;if(super(t,i),1===(null===(r=t._table)||void 0===r?void 0:r._elementRef.nativeElement.nodeType)){const s=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===s||"treegrid"===s?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(id),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[l.qOj]}),n})();class GU{constructor(){this.tasks=[],this.endTasks=[]}}const mO=new l.OlP("_COALESCED_STYLE_SCHEDULER");let zU=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new gt.x}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new GU,this._getScheduleObservable().pipe(An(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new GU;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,vn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe((0,Pn.q)(1))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),_O=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Zw?t.headerCell.template:this instanceof Yw?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();class D5 extends _O{}const T5=hO(D5);let Zw=(()=>{class n extends T5{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc),l.Y36(l.ZZ4),l.Y36(ty,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[l.qOj,l.TTD]}),n})();class S5 extends _O{}const I5=hO(S5);let Yw=(()=>{class n extends I5{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc),l.Y36(l.ZZ4),l.Y36(ty,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[l.qOj,l.TTD]}),n})(),ZS=(()=>{class n extends _O{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc),l.Y36(l.ZZ4),l.Y36(ty,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[l.qOj]}),n})(),rd=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),yO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&l.GkF(0,0)},directives:[rd],encapsulation:2}),n})(),bO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&l.GkF(0,0)},directives:[rd],encapsulation:2}),n})(),YS=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const $U=["top","bottom","left","right"];class A5{constructor(e,t,i,r,s=!0,c=!0,d){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=c,this._positionListener=d,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(x=>x)&&!i.some(x=>x))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],c=s.children.length,d=this._getCellWidths(s,r),p=this._getStickyStartColumnPositions(d,t),y=this._getStickyEndColumnPositions(d,i),E=t.lastIndexOf(!0),T=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const x="rtl"===this.direction,P=x?"right":"left",L=x?"left":"right";for(const Z of e)for(let oe=0;oe<c;oe++){const Le=Z.children[oe];t[oe]&&this._addStickyStyle(Le,P,p[oe],oe===E),i[oe]&&this._addStickyStyle(Le,L,y[oe],oe===T)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===E?[]:d.slice(0,E+1).map((Z,oe)=>t[oe]?Z:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===T?[]:d.slice(T).map((Z,oe)=>i[oe+T]?Z:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,s="bottom"===i?t.slice().reverse():t,c=[],d=[],p=[];for(let E=0,T=0;E<r.length;E++){if(!s[E])continue;c[E]=T;const x=r[E];p[E]=this._isNativeHtmlTable?Array.from(x.children):[x];const P=x.getBoundingClientRect().height;T+=P,d[E]=P}const y=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var E,T;for(let x=0;x<r.length;x++){if(!s[x])continue;const P=c[x],L=x===y;for(const Z of p[x])this._addStickyStyle(Z,i,P,L)}"top"===i?null===(E=this._positionListener)||void 0===E||E.stickyHeaderRowsUpdated({sizes:d,offsets:c,elements:p}):null===(T=this._positionListener)||void 0===T||T.stickyFooterRowsUpdated({sizes:d,offsets:c,elements:p})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);$U.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of $U)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=r,r+=e[s]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=r,r+=e[s]);return i}}const wO=new l.OlP("CDK_SPL");let KS=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),QS=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),JS=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),XS=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),eI=(()=>{class n{constructor(t,i,r,s,c,d,p,y,E,T,x,P){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=c,this._platform=p,this._viewRepeater=y,this._coalescedStyleScheduler=E,this._viewportRuler=T,this._stickyPositioningListener=x,this._ngZone=P,this._onDestroy=new gt.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new l.vpe,this.viewChange=new fi({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=d,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=un(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=un(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(An(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),dO(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,s,c)=>this._getEmbeddedViewArgs(r.item,c),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&l.R0b.isInAngularZone()?this._ngZone.onStable.pipe((0,Pn.q)(1),An(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const s=this._headerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const s=this._footerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,c)=>{this._addStickyColumnStyles([s],this._headerRowDefs[c])}),this._rowDefs.forEach(s=>{const c=[];for(let d=0;d<i.length;d++)this._renderRows[d].rowDef===s&&c.push(i[d]);this._addStickyColumnStyles(c,s)}),r.forEach((s,c)=>{this._addStickyColumnStyles([s],this._footerRowDefs[c])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const c=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<c.length;d++){let p=c[d];const y=this._cachedRenderRowsMap.get(p.data);y.has(p.rowDef)?y.get(p.rowDef).push(p):y.set(p.rowDef,[p]),t.push(p)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(c=>{const d=r&&r.has(c)?r.get(c):[];if(d.length){const p=d.shift();return p.dataIndex=i,p}return{data:t,rowDef:c,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),tI(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=tI(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=tI(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=tI(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(c,d)=>c||!!d.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(t){this._data=[],dO(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;dO(this.dataSource)?t=this.dataSource.connect(this):function m5(n){return!!n&&(n instanceof sn.y||(0,dr.m)(n.lift)&&(0,dr.m)(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=Ze(this.dataSource)),this._renderChangeSubscription=t.pipe(An(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(d=>this._columnDefsByName.get(d)),s=r.map(d=>d.sticky),c=r.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,c,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const s=t.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(c=>c.when&&c.when(i,t))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,s={}){const c=t.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),c}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))rd.mostRecentCellOutlet&&rd.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const c=t.get(i).context;c.count=r,c.first=0===i,c.last=i===r-1,c.even=i%2==0,c.odd=!c.even,this.multiTemplateDataRows?(c.dataIndex=this._renderRows[i].dataIndex,c.renderIndex=i):c.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const c of r.outlets)s.appendChild(c.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new A5(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:Ze()).pipe(An(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(t.templateRef),c=s.rootNodes[0];1===s.rootNodes.length&&(null==c?void 0:c.nodeType)===this._document.ELEMENT_NODE&&(c.setAttribute("role","row"),c.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.ZZ4),l.Y36(l.sBO),l.Y36(l.SBq),l.$8M("role"),l.Y36(Uu,8),l.Y36(ne),l.Y36(Mi),l.Y36(Ww),l.Y36(mO),l.Y36(Sm),l.Y36(wO,12),l.Y36(l.R0b,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(l.Suo(r,YS,5),l.Suo(r,id,5),l.Suo(r,ZS,5),l.Suo(r,Zw,5),l.Suo(r,Yw,5)),2&t){let s;l.iGM(s=l.CRH())&&(i._noDataRow=s.first),l.iGM(s=l.CRH())&&(i._contentColumnDefs=s),l.iGM(s=l.CRH())&&(i._contentRowDefs=s),l.iGM(s=l.CRH())&&(i._contentHeaderRowDefs=s),l.iGM(s=l.CRH())&&(i._contentFooterRowDefs=s)}},viewQuery:function(t,i){if(1&t&&(l.Gf(KS,7),l.Gf(QS,7),l.Gf(JS,7),l.Gf(XS,7)),2&t){let r;l.iGM(r=l.CRH())&&(i._rowOutlet=r.first),l.iGM(r=l.CRH())&&(i._headerRowOutlet=r.first),l.iGM(r=l.CRH())&&(i._footerRowOutlet=r.first),l.iGM(r=l.CRH())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&l.ekj("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[l._Bn([{provide:ty,useExisting:n},{provide:Ww,useClass:VU},{provide:mO,useClass:zU},{provide:wO,useValue:null}])],ngContentSelectors:y5,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(l.F$t(_5),l.Hsn(0),l.Hsn(1,1),l.GkF(2,0)(3,1)(4,2)(5,3))},directives:[QS,KS,XS,JS],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function tI(n,e){return n.concat(Array.from(e))}let x5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Fc]]}),n})();const R5=[[["caption"]],[["colgroup"],["col"]]],k5=["caption","colgroup, col"];let WU=(()=>{class n extends eI{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&l.ekj("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[l._Bn([{provide:Ww,useClass:VU},{provide:eI,useExisting:n},{provide:ty,useExisting:n},{provide:mO,useClass:zU},{provide:wO,useValue:null}]),l.qOj],ngContentSelectors:k5,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(l.F$t(R5),l.Hsn(0),l.Hsn(1,1),l.GkF(2,0)(3,1)(4,2)(5,3))},directives:[QS,KS,XS,JS],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),CO=(()=>{class n extends ny{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","matCellDef",""]],features:[l._Bn([{provide:ny,useExisting:n}]),l.qOj]}),n})(),EO=(()=>{class n extends iy{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[l._Bn([{provide:iy,useExisting:n}]),l.qOj]}),n})(),DO=(()=>{class n extends id{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[l._Bn([{provide:id,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),l.qOj]}),n})(),TO=(()=>{class n extends pO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[l.qOj]}),n})(),SO=(()=>{class n extends gO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[l.qOj]}),n})(),ZU=(()=>{class n extends Zw{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[l._Bn([{provide:Zw,useExisting:n}]),l.qOj]}),n})(),YU=(()=>{class n extends ZS{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[l._Bn([{provide:ZS,useExisting:n}]),l.qOj]}),n})(),KU=(()=>{class n extends yO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[l._Bn([{provide:yO,useExisting:n}]),l.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&l.GkF(0,0)},directives:[rd],encapsulation:2}),n})(),QU=(()=>{class n extends bO{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[l._Bn([{provide:bO,useExisting:n}]),l.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&l.GkF(0,0)},directives:[rd],encapsulation:2}),n})(),JU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[x5,bn],bn]}),n})();class z5 extends class G5 extends class g5{}{constructor(e=[]){super(),this._renderData=new fi([]),this._filter=new fi(""),this._internalPageChanges=new gt.x,this._renderChangesSubscription=null,this.sortingDataAccessor=(t,i)=>{const r=t[i];if(yC(r)){const s=Number(r);return s<9007199254740991?s:r}return r},this.sortData=(t,i)=>{const r=i.active,s=i.direction;return r&&""!=s?t.sort((c,d)=>{let p=this.sortingDataAccessor(c,r),y=this.sortingDataAccessor(d,r);const E=typeof p,T=typeof y;E!==T&&("number"===E&&(p+=""),"number"===T&&(y+=""));let x=0;return null!=p&&null!=y?p>y?x=1:p<y&&(x=-1):null!=p?x=1:null!=y&&(x=-1),x*("asc"==s?1:-1)}):t},this.filterPredicate=(t,i)=>{const r=Object.keys(t).reduce((c,d)=>c+t[d]+"\u25ec","").toLowerCase(),s=i.trim().toLowerCase();return-1!=r.indexOf(s)},this._data=new fi(e),this._updateChangeSubscription()}get data(){return this._data.value}set data(e){e=Array.isArray(e)?e:[],this._data.next(e),this._renderChangesSubscription||this._filterData(e)}get filter(){return this._filter.value}set filter(e){this._filter.next(e),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(e){this._sort=e,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(e){this._paginator=e,this._updateChangeSubscription()}_updateChangeSubscription(){var e;const t=this._sort?(0,si.T)(this._sort.sortChange,this._sort.initialized):Ze(null),i=this._paginator?(0,si.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):Ze(null),s=_s([this._data,this._filter]).pipe((0,ot.U)(([p])=>this._filterData(p))),c=_s([s,t]).pipe((0,ot.U)(([p])=>this._orderData(p))),d=_s([c,i]).pipe((0,ot.U)(([p])=>this._pageData(p)));null===(e=this._renderChangesSubscription)||void 0===e||e.unsubscribe(),this._renderChangesSubscription=d.subscribe(p=>this._renderData.next(p))}_filterData(e){return this.filteredData=null==this.filter||""===this.filter?e:e.filter(t=>this.filterPredicate(t,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(e){return this.sort?this.sortData(e.slice(),this.sort):e}_pageData(e){if(!this.paginator)return e;const t=this.paginator.pageIndex*this.paginator.pageSize;return e.slice(t,t+this.paginator.pageSize)}_updatePaginator(e){Promise.resolve().then(()=>{const t=this.paginator;if(t&&(t.length=e,t.pageIndex>0)){const i=Math.ceil(t.length/t.pageSize)-1||0,r=Math.min(t.pageIndex,i);r!==t.pageIndex&&(t.pageIndex=r,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){var e;null===(e=this._renderChangesSubscription)||void 0===e||e.unsubscribe(),this._renderChangesSubscription=null}}{}function $5(n,e){}class IO{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const q5={dialogContainer:ra("dialogContainer",[jt("void, exit",Bt({opacity:0,transform:"scale(0.7)"})),jt("enter",Bt({transform:"none"})),xi("* => enter",xE([Xi("150ms cubic-bezier(0, 0, 0.2, 1)",Bt({transform:"none",opacity:1})),Jf("@*",Qf(),{optional:!0})])),xi("* => void, * => exit",xE([Xi("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Bt({opacity:0})),Jf("@*",Qf(),{optional:!0})]))])};let W5=(()=>{class n extends Gu{constructor(t,i,r,s,c,d,p,y){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=c,this._interactivityChecker=d,this._ngZone=p,this._focusMonitor=y,this._animationStateChanged=new l.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=E=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(E)),this._ariaLabelledBy=c.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=kC())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=kC(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=kC();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(Bm),l.Y36(l.sBO),l.Y36(ne,8),l.Y36(IO),l.Y36(yE),l.Y36(l.R0b),l.Y36(uh))},n.\u0275dir=l.lG2({type:n,viewQuery:function(t,i){if(1&t&&l.Gf(Mm,7),2&t){let r;l.iGM(r=l.CRH())&&(i._portalOutlet=r.first)}},features:[l.qOj]}),n})(),Z5=(()=>{class n extends W5{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&l.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(l.Ikx("id",i._id),l.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),l.d8E("@dialogContainer",i._state))},features:[l.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&l.YNc(0,$5,0,0,"ng-template",0)},directives:[Mm],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[q5.dialogContainer]}}),n})(),Y5=0;class XU{constructor(e,t,i="mat-dialog-"+Y5++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new gt.x,this._afterClosed=new gt.x,this._beforeClosed=new gt.x,this._state=0,t._id=i,t._animationStateChanged.pipe(Nn(r=>"opened"===r.state),(0,Pn.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Nn(r=>"closed"===r.state),(0,Pn.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Nn(r=>27===r.keyCode&&!this.disableClose&&!Wl(r))).subscribe(r=>{r.preventDefault(),AO(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():AO(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Nn(t=>"closing"===t.state),(0,Pn.q)(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function AO(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const K5=new l.OlP("MatDialogData"),Q5=new l.OlP("mat-dialog-default-options"),eH=new l.OlP("mat-dialog-scroll-strategy"),X5={provide:eH,deps:[Wa],useFactory:function J5(n){return()=>n.scrollStrategies.block()}};let eY=(()=>{class n{constructor(t,i,r,s,c,d,p,y,E,T){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=c,this._dialogRefConstructor=p,this._dialogContainerType=y,this._dialogDataToken=E,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new gt.x,this._afterOpenedAtThisLevel=new gt.x,this._ariaHiddenElements=new Map,this.afterAllClosed=mo(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(gi(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){i=function tY(n,e){return Object.assign(Object.assign({},e),n)}(i,this._defaultOptions||new IO),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),c=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.afterClosed().subscribe(()=>this._removeOpenDialog(c)),this.afterOpened.next(c),s._initializeWithAttachedContent(),c}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new Zl({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=l.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:IO,useValue:i}]}),c=new Lc(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,s){const c=new this._dialogRefConstructor(r,i,s.id);if(t instanceof l.Rgc)i.attachTemplatePortal(new th(t,null,{$implicit:s.data,dialogRef:c}));else{const d=this._createInjector(s,c,i),p=i.attachComponentPortal(new Lc(t,s.viewContainerRef,d,s.componentFactoryResolver));c.componentInstance=p.instance}return c.updateSize(s.width,s.height).updatePosition(s.position),c}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,c=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(Uu,null,l.XFs.Optional))&&c.push({provide:Uu,useValue:{value:t.direction,change:Ze()}}),l.zs3.create({parent:s||this._injector,providers:c})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275dir=l.lG2({type:n}),n})(),nI=(()=>{class n extends eY{constructor(t,i,r,s,c,d,p,y){super(t,i,s,d,p,c,XU,Z5,K5,y)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Wa),l.LFG(l.zs3),l.LFG(Ce,8),l.LFG(Q5,8),l.LFG(eH),l.LFG(n,12),l.LFG(Nm),l.LFG(el,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),nY=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=function iY(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){AO(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(XU,8),l.Y36(l.SBq),l.Y36(nI))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,i){1&t&&l.NdJ("click",function(s){return i._onButtonClick(s)}),2&t&&l.uIk("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[l.TTD]}),n})(),tH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[nI,X5],imports:[[jv,Av,bn],bn]}),n})(),rY=(()=>{class n{constructor(t,i){this.dialog=t,this.auth=i}ngOnInit(){}onUserLogOut(){this.auth.userLogOut(),this.dialog.closeAll()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(nI),l.Y36(Hp))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-dialog"]],decls:7,vars:0,consts:[["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","mat-dialog-close","","color","primary"]],template:function(t,i){1&t&&(l.TgZ(0,"h1"),l._uU(1,"Are you sure you want to log out?"),l.qZA(),l.TgZ(2,"div")(3,"button",0),l.NdJ("click",function(){return i.onUserLogOut()}),l._uU(4,"Yes"),l.qZA(),l.TgZ(5,"button",1),l._uU(6,"No"),l.qZA()())},directives:[tl,nY],styles:["div[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}"]}),n})(),sY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),n})(),nH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[bn],bn]}),n})();const oY=["trigger"],aY=["panel"];function lY(n,e){if(1&n&&(l.TgZ(0,"span",8),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Oqu(t.placeholder)}}function cY(n,e){if(1&n&&(l.TgZ(0,"span",12),l._uU(1),l.qZA()),2&n){const t=l.oxw(2);l.xp6(1),l.Oqu(t.triggerValue)}}function uY(n,e){1&n&&l.Hsn(0,0,["*ngSwitchCase","true"])}function dY(n,e){if(1&n&&(l.TgZ(0,"span",9),l.YNc(1,cY,2,1,"span",10),l.YNc(2,uY,1,0,"ng-content",11),l.qZA()),2&n){const t=l.oxw();l.Q6J("ngSwitch",!!t.customTrigger),l.xp6(2),l.Q6J("ngSwitchCase",!0)}}function hY(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",13)(1,"div",14,15),l.NdJ("@transformPanel.done",function(r){return l.CHM(t),l.oxw()._panelDoneAnimatingStream.next(r.toState)})("keydown",function(r){return l.CHM(t),l.oxw()._handleKeydown(r)}),l.Hsn(3,1),l.qZA()()}if(2&n){const t=l.oxw();l.Q6J("@transformPanelWrap",void 0),l.xp6(1),l.Gre("mat-select-panel ",t._getPanelTheme(),""),l.Udp("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),l.Q6J("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),l.uIk("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const fY=[[["mat-select-trigger"]],"*"],pY=["mat-select-trigger","*"],iH={transformPanelWrap:ra("transformPanelWrap",[xi("* => void",Jf("@transformPanel",[Qf()],{optional:!0}))]),transformPanel:ra("transformPanel",[jt("void",Bt({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),jt("showing",Bt({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),jt("showing-multiple",Bt({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),xi("void => *",Xi("120ms cubic-bezier(0, 0, 0.2, 1)")),xi("* => void",Xi("100ms 25ms linear",Bt({opacity:0})))])};let rH=0;const oH=new l.OlP("mat-select-scroll-strategy"),yY=new l.OlP("MAT_SELECT_CONFIG"),vY={provide:oH,deps:[Wa],useFactory:function _Y(n){return()=>n.scrollStrategies.reposition()}};class bY{constructor(e,t){this.source=e,this.value=t}}const wY=d_($D(mp(qD(class{constructor(n,e,t,i,r){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=i,this.ngControl=r}})))),CY=new l.OlP("MatSelectTrigger");let EY=(()=>{class n extends wY{constructor(t,i,r,s,c,d,p,y,E,T,x,P,L,Z){var oe,Le,We;super(c,s,p,y,T),this._viewportRuler=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=d,this._parentFormField=E,this._liveAnnouncer=L,this._defaultOptions=Z,this._panelOpen=!1,this._compareWith=(He,Ge)=>He===Ge,this._uid="mat-select-"+rH++,this._triggerAriaLabelledBy=null,this._destroy=new gt.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+rH++,this._panelDoneAnimatingStream=new gt.x,this._overlayPanelClass=(null===(oe=this._defaultOptions)||void 0===oe?void 0:oe.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(We=null===(Le=this._defaultOptions)||void 0===Le?void 0:Le.disableOptionCentering)&&void 0!==We&&We,this.ariaLabel="",this.optionSelectionChanges=mo(()=>{const He=this.options;return He?He.changes.pipe(gi(He),In(()=>(0,si.T)(...He.map(Ge=>Ge.onSelectionChange)))):this._ngZone.onStable.pipe((0,Pn.q)(1),In(()=>this.optionSelectionChanges))}),this.openedChange=new l.vpe,this._openedStream=this.openedChange.pipe(Nn(He=>He),(0,ot.U)(()=>{})),this._closedStream=this.openedChange.pipe(Nn(He=>!He),(0,ot.U)(()=>{})),this.selectionChange=new l.vpe,this.valueChange=new l.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==Z?void 0:Z.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=Z.typeaheadDebounceInterval),this._scrollStrategyFactory=P,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(x)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){var t,i,r,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(ed.required))&&void 0!==s&&s}set required(t){this._required=un(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=un(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=un(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=za(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new HU(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Gv(),An(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(An(this._destroy)).subscribe(t=>{t.added.forEach(i=>i.select()),t.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(gi(null),An(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),i=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var t,i;return this.multiple?(null===(t=this._selectionModel)||void 0===t?void 0:t.selected)||[]:null===(i=this._selectionModel)||void 0===i?void 0:i.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const i=t.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,c=this._keyManager;if(!c.isTyping()&&s&&!Wl(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const d=this.selected;c.onKeydown(t);const p=this.selected;p&&d!==p&&this._liveAnnouncer.announce(p.viewValue,1e4)}}_handleOpenKeydown(t){const i=this._keyManager,r=t.keyCode,s=40===r||38===r,c=i.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(c||13!==r&&32!==r||!i.activeItem||Wl(t))if(!c&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const d=this.options.some(p=>!p.disabled&&!p.selected);this.options.forEach(p=>{p.disabled||(d?p.select():p.deselect())})}else{const d=i.activeItemIndex;i.onKeydown(t),this._multiple&&s&&t.shiftKey&&i.activeItem&&i.activeItemIndex!==d&&i.activeItem._selectViaInteraction()}else t.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,Pn.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(t);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch(s){return!1}});return i&&this._selectionModel.select(i),i}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new xM(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(An(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(An(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=(0,si.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(An(t)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,si.T)(...this.options.map(i=>i._stateChanges)).pipe(An(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,i){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),i&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),i&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,t):t.indexOf(i)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var t;return!this._panelOpen&&!this.disabled&&(null===(t=this.options)||void 0===t?void 0:t.length)>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){var t;if(this.ariaLabel)return null;const i=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();return this.ariaLabelledby?(i?i+" ":"")+this.ariaLabelledby:i}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var t;if(this.ariaLabel)return null;const i=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();let r=(i?i+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Sm),l.Y36(l.sBO),l.Y36(l.R0b),l.Y36(Lb),l.Y36(l.SBq),l.Y36(Uu,8),l.Y36(td,8),l.Y36($p,8),l.Y36(tO,8),l.Y36(Yc,10),l.$8M("tabindex"),l.Y36(oH),l.Y36(Hm),l.Y36(yY,8))},n.\u0275dir=l.lG2({type:n,viewQuery:function(t,i){if(1&t&&(l.Gf(oY,5),l.Gf(aY,5),l.Gf(Hv,5)),2&t){let r;l.iGM(r=l.CRH())&&(i.trigger=r.first),l.iGM(r=l.CRH())&&(i.panel=r.first),l.iGM(r=l.CRH())&&(i._overlayDir=r.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[l.qOj,l.TTD]}),n})(),DY=(()=>{class n extends EY{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,i,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*t-i+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(An(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,Pn.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const i=XD(t,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===i?0:function Gx(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}((t+i)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new bY(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let c;if(this.multiple)c=40;else if(this.disableOptionCentering)c=16;else{let y=this._selectionModel.selected[0]||this.options.first;c=y&&y.group?32:16}r||(c*=-1);const d=0-(t.left+c-(r?s:0)),p=t.right+c-i.width+(r?0:s);d>0?c+=d+8:p>0&&(c-=p+8),this._overlayDir.offsetX=Math.round(c),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,i,r){const s=this._getItemHeight(),c=(s-this._triggerRect.height)/2,d=Math.floor(256/s);let p;return this.disableOptionCentering?0:(p=0===this._scrollTop?t*s:this._scrollTop===r?(t-(this._getItemCount()-d))*s+(s-(this._getItemCount()*s-256)%s):i-s/2,Math.round(-1*p-c))}_checkOverlayWithinViewport(t){const i=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,c=r.height-this._triggerRect.bottom-8,d=Math.abs(this._offsetY),y=Math.min(this._getItemCount()*i,256)-d-this._triggerRect.height;y>c?this._adjustPanelUp(y,c):d>s?this._adjustPanelDown(d,s,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,i){const r=Math.round(t-i);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,i,r){const s=Math.round(t-i);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),i=this._getItemCount(),r=Math.min(i*t,256),c=i*t-r;let d;d=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),d+=XD(d,this.options,this.optionGroups);const p=r/2;this._scrollTop=this._calculateOverlayScroll(d,p,c),this._offsetY=this._calculateOverlayOffsetY(d,p,c),this._checkOverlayWithinViewport(c)}_getOriginBasedOnOption(){const t=this._getItemHeight(),i=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(t,i,r){if(1&t&&(l.Suo(r,CY,5),l.Suo(r,m_,5),l.Suo(r,jx,5)),2&t){let s;l.iGM(s=l.CRH())&&(i.customTrigger=s.first),l.iGM(s=l.CRH())&&(i.options=s),l.iGM(s=l.CRH())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(t,i){1&t&&l.NdJ("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&t&&(l.uIk("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-describedby",i._ariaDescribedby||null)("aria-activedescendant",i._getAriaActiveDescendant()),l.ekj("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[l._Bn([{provide:jS,useExisting:n},{provide:g_,useExisting:n}]),l.qOj],ngContentSelectors:pY,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,i){if(1&t&&(l.F$t(fY),l.TgZ(0,"div",0,1),l.NdJ("click",function(){return i.toggle()}),l.TgZ(3,"div",2),l.YNc(4,lY,2,1,"span",3),l.YNc(5,dY,3,2,"span",4),l.qZA(),l.TgZ(6,"div",5),l._UZ(7,"div",6),l.qZA()(),l.YNc(8,hY,4,14,"ng-template",7),l.NdJ("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&t){const r=l.MAs(1);l.uIk("aria-owns",i.panelOpen?i.id+"-panel":null),l.xp6(3),l.Q6J("ngSwitch",i.empty),l.uIk("id",i._valueId),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1),l.xp6(3),l.Q6J("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},directives:[dE,Bi,wr,yl,Hv,as],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[iH.transformPanelWrap,iH.transformPanel]},changeDetection:0}),n})(),TY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[vY],imports:[[co,jv,eT,bn],Nc,zw,eT,bn]}),n})();const SY=["tooltip"],aH="tooltip-panel",lH=Xd({passive:!0}),cH=new l.OlP("mat-tooltip-scroll-strategy"),xY={provide:cH,deps:[Wa],useFactory:function MY(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},RY=new l.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function kY(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let OY=(()=>{class n{constructor(t,i,r,s,c,d,p,y,E,T,x,P){this._overlay=t,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=c,this._platform=d,this._ariaDescriber=p,this._focusMonitor=y,this._dir=T,this._defaultOptions=x,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new gt.x,this._scrollStrategy=E,this._document=P,x&&(x.position&&(this.position=x.position),x.touchGestures&&(this.touchGestures=x.touchGestures)),T.change.pipe(An(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(t){var i;t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(i=this._tooltipInstance)||void 0===i||i.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=un(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=za(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=za(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(An(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{t.removeEventListener(i,r,lH)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const i=this._createOverlay();this._detach(),this._portal=this._portal||new Lc(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=i.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(An(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(t)}hide(t=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(t)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){var t;if(this._overlayRef)return this._overlayRef;const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return r.positionChanges.pipe(An(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${aH}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(An(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(An(this._destroyed)).subscribe(()=>{var s;return null===(s=this._tooltipInstance)||void 0===s?void 0:s._handleBodyInteraction()}),this._overlayRef.keydownEvents().pipe(An(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!Wl(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),(null===(t=this._defaultOptions)||void 0===t?void 0:t.disableTooltipInteractivity)&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const i=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();i.withPositions([this._addOffset(Object.assign(Object.assign({},r.main),s.main)),this._addOffset(Object.assign(Object.assign({},r.fallback),s.fallback))])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:c}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:c}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:c}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:c}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,Pn.q)(1),An(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:i}}_updateCurrentPositionClass(t){const{overlayY:i,originX:r,originY:s}=t;let c;if(c="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===s?"above":"below",c!==this._currentPosition){const d=this._overlayRef;if(d){const p=`${this._cssClassPrefix}-${aH}-`;d.removePanelClass(p+this._currentPosition),d.addPanelClass(p+c)}this._currentPosition=c}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",i=>{var r;const s=i.relatedTarget;(!s||!(null===(r=this._overlayRef)||void 0===r?void 0:r.overlayElement.contains(s)))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",i],["touchcancel",i])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,lH)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const i=this._elementRef.nativeElement,r=i.style;("on"===t||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275dir=l.lG2({type:n,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),PY=(()=>{class n extends OY{constructor(t,i,r,s,c,d,p,y,E,T,x,P){super(t,i,r,s,c,d,p,y,E,T,x,P),this._tooltipComponent=FY}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Wa),l.Y36(l.SBq),l.Y36(FC),l.Y36(l.s_b),l.Y36(l.R0b),l.Y36(Mi),l.Y36(mE),l.Y36(uh),l.Y36(cH),l.Y36(Uu,8),l.Y36(RY,8),l.Y36(ne))},n.\u0275dir=l.lG2({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[l.qOj]}),n})(),NY=(()=>{class n{constructor(t,i){this._changeDetectorRef=t,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new gt.x,this._animationsDisabled="NoopAnimations"===i}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const i=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(i.classList.remove(t?s:r),i.classList.add(t?r:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const c=getComputedStyle(i);("0s"===c.getPropertyValue("animation-duration")||"none"===c.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.sBO),l.Y36(el,8))},n.\u0275dir=l.lG2({type:n}),n})(),FY=(()=>{class n extends NY{constructor(t,i,r){super(t,r),this._breakpointObserver=i,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.sBO),l.Y36(Hb),l.Y36(el,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(t,i){if(1&t&&l.Gf(SY,7),2&t){let r;l.iGM(r=l.CRH())&&(i._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,i){1&t&&l.NdJ("mouseleave",function(s){return i._handleMouseLeave(s)}),2&t&&l.Udp("zoom",i.isVisible()?1:null)},features:[l.qOj],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(t,i){if(1&t&&(l.TgZ(0,"div",0,1),l.NdJ("animationend",function(s){return i._handleAnimationEnd(s)}),l.ALo(2,"async"),l._uU(3),l.qZA()),2&t){let r;l.ekj("mat-tooltip-handset",null==(r=l.lcZ(2,4,i._isHandset))?null:r.matches),l.Q6J("ngClass",i.tooltipClass),l.xp6(3),l.Oqu(i.message)}},directives:[as],pipes:[tf],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}\n"],encapsulation:2,changeDetection:0}),n})(),LY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[xY],imports:[[AE,co,jv,bn],bn,Nc]}),n})();function BY(n,e){if(1&n&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.Q6J("value",t),l.xp6(1),l.hij(" ",t," ")}}function VY(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"mat-form-field",16)(1,"mat-select",17),l.NdJ("selectionChange",function(r){return l.CHM(t),l.oxw(2)._changePageSize(r.value)}),l.YNc(2,BY,2,2,"mat-option",18),l.qZA()()}if(2&n){const t=l.oxw(2);l.Q6J("appearance",t._formFieldAppearance)("color",t.color),l.xp6(1),l.Q6J("value",t.pageSize)("disabled",t.disabled)("aria-label",t._intl.itemsPerPageLabel),l.xp6(1),l.Q6J("ngForOf",t._displayedPageSizeOptions)}}function UY(n,e){if(1&n&&(l.TgZ(0,"div",20),l._uU(1),l.qZA()),2&n){const t=l.oxw(2);l.xp6(1),l.Oqu(t.pageSize)}}function HY(n,e){if(1&n&&(l.TgZ(0,"div",12)(1,"div",13),l._uU(2),l.qZA(),l.YNc(3,VY,3,6,"mat-form-field",14),l.YNc(4,UY,2,1,"div",15),l.qZA()),2&n){const t=l.oxw();l.xp6(2),l.hij(" ",t._intl.itemsPerPageLabel," "),l.xp6(1),l.Q6J("ngIf",t._displayedPageSizeOptions.length>1),l.xp6(1),l.Q6J("ngIf",t._displayedPageSizeOptions.length<=1)}}function jY(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",21),l.NdJ("click",function(){return l.CHM(t),l.oxw().firstPage()}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",22),l.qZA()()}if(2&n){const t=l.oxw();l.Q6J("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),l.uIk("aria-label",t._intl.firstPageLabel)}}function GY(n,e){if(1&n){const t=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"button",23),l.NdJ("click",function(){return l.CHM(t),l.oxw().lastPage()}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",24),l.qZA()()}if(2&n){const t=l.oxw();l.Q6J("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),l.uIk("aria-label",t._intl.lastPageLabel)}}let rI=(()=>{class n{constructor(){this.changes=new gt.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=t*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $Y={provide:rI,deps:[[new l.FiY,new l.tp0,rI]],useFactory:function zY(n){return n||new rI}},WY=new l.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),ZY=mp(WD(class{}));let YY=(()=>{class n extends ZY{constructor(t,i,r){if(super(),this._intl=t,this._changeDetectorRef=i,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new l.vpe,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){const{pageSize:s,pageSizeOptions:c,hidePageSize:d,showFirstLastButtons:p}=r;null!=s&&(this._pageSize=s),null!=c&&(this._pageSizeOptions=c),null!=d&&(this._hidePageSize=d),null!=p&&(this._showFirstLastButtons=p)}}get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(za(t),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=za(t),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(za(t),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(i=>za(i)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(t){this._hidePageSize=un(t)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(t){this._showFirstLastButtons=un(t)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const r=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,i)=>t-i),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return n.\u0275fac=function(t){l.$Z()},n.\u0275dir=l.lG2({type:n,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons"},outputs:{page:"page"},features:[l.qOj]}),n})(),KY=(()=>{class n extends YY{constructor(t,i,r){super(t,i,r),r&&null!=r.formFieldAppearance&&(this._formFieldAppearance=r.formFieldAppearance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(rI),l.Y36(l.sBO),l.Y36(WY,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[l.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l.YNc(2,HY,5,3,"div",2),l.TgZ(3,"div",3)(4,"div",4),l._uU(5),l.qZA(),l.YNc(6,jY,3,5,"button",5),l.TgZ(7,"button",6),l.NdJ("click",function(){return i.previousPage()}),l.O4$(),l.TgZ(8,"svg",7),l._UZ(9,"path",8),l.qZA()(),l.kcU(),l.TgZ(10,"button",9),l.NdJ("click",function(){return i.nextPage()}),l.O4$(),l.TgZ(11,"svg",7),l._UZ(12,"path",10),l.qZA()(),l.YNc(13,GY,3,5,"button",11),l.qZA()()()),2&t&&(l.xp6(2),l.Q6J("ngIf",!i.hidePageSize),l.xp6(3),l.hij(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),l.xp6(1),l.Q6J("ngIf",i.showFirstLastButtons),l.xp6(1),l.Q6J("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),l.uIk("aria-label",i._intl.previousPageLabel),l.xp6(3),l.Q6J("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),l.uIk("aria-label",i._intl.nextPageLabel),l.xp6(3),l.Q6J("ngIf",i.showFirstLastButtons))},directives:[Zp,DY,m_,tl,Vn,ui,PY],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}\n"],encapsulation:2,changeDetection:0}),n})(),uH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[$Y],imports:[[co,vp,TY,LY,bn]]}),n})();const QY=["paginator"];function JY(n,e){1&n&&(l.TgZ(0,"th",24),l._uU(1," Vin Code "),l.qZA())}function XY(n,e){if(1&n&&(l.TgZ(0,"td",25),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t.key," ")}}function eK(n,e){1&n&&(l.TgZ(0,"th",24),l._uU(1," Manufacturer "),l.qZA())}function tK(n,e){if(1&n&&(l.TgZ(0,"td",25),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t.manufacturer," ")}}function nK(n,e){1&n&&(l.TgZ(0,"th",24),l._uU(1," Image "),l.qZA())}function iK(n,e){if(1&n&&(l.TgZ(0,"td",25),l._UZ(1,"img",26),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.Q6J("src",t.image,l.LSH)}}function rK(n,e){1&n&&(l.TgZ(0,"th",24),l._uU(1," Model "),l.qZA())}function sK(n,e){if(1&n&&(l.TgZ(0,"td",25),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t.model," ")}}function oK(n,e){1&n&&(l.TgZ(0,"th",24),l._uU(1," Year "),l.qZA())}function aK(n,e){if(1&n&&(l.TgZ(0,"td",25),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t.year," ")}}function lK(n,e){1&n&&(l.TgZ(0,"th",24),l._uU(1," Phone Number "),l.qZA())}function cK(n,e){if(1&n&&(l.TgZ(0,"td",25),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t.phoneNumber," ")}}function uK(n,e){1&n&&(l.TgZ(0,"th",24),l._uU(1," Price "),l.qZA())}function dK(n,e){if(1&n&&(l.TgZ(0,"td",25),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t.price," $ ")}}function hK(n,e){1&n&&(l.TgZ(0,"th",24),l._uU(1," Mile "),l.qZA())}function fK(n,e){if(1&n&&(l.TgZ(0,"td",25),l._uU(1),l.qZA()),2&n){const t=e.$implicit;l.xp6(1),l.hij(" ",t.mile," ")}}function pK(n,e){1&n&&(l.TgZ(0,"th",24),l._uU(1," Delete "),l.qZA())}function gK(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"td",25)(1,"button",2),l.NdJ("click",function(){const s=l.CHM(t).$implicit;return l.oxw().onDeleteBtnClick(s.key)}),l._uU(2,"Delete"),l.qZA()()}}function mK(n,e){1&n&&(l.TgZ(0,"th",24),l._uU(1," Update "),l.qZA())}function _K(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"td",25)(1,"button",27),l.NdJ("click",function(){const s=l.CHM(t).$implicit;return l.oxw().openUpdateService(s.id)}),l._uU(2,"Update"),l.qZA()()}if(2&n){const t=e.$implicit;l.xp6(1),l.MGl("routerLink","/update/",t.key,"")}}function yK(n,e){1&n&&l._UZ(0,"tr",28)}function vK(n,e){1&n&&l._UZ(0,"tr",29)}const bK=function(){return[2,5,10,50,100]},wK=[{path:"create",canActivate:[Ok],component:c5},{path:"update/:key",canActivate:[Ok],component:(()=>{class n{constructor(t,i,r){this.activatedRoute=t,this.router=i,this.firebaseClient=r,this.formDefaultData=[],this.key=""}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.firebaseClient.GetCarByKey(t.key).subscribe(r=>{console.log(r),this.formDefaultData=r})})}onCancelBtnClick(){this.router.navigate(["/"])}onUpdateFormSubit(t){console.log(t),this.firebaseClient.updateCar(this.key,t).then(i=>{this.router.navigate(["/"])})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Bl),l.Y36(ri),l.Y36(cO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-update"]],decls:65,vars:12,consts:[[1,"main"],["name","loginForm",3,"ngSubmit"],["form","ngForm"],[1,"inline-groups"],["appearance","fill"],["required","","name","manufacturer","matInput","",3,"ngModel","ngModelChange"],["required","","name","model","matInput","",3,"ngModel","ngModelChange"],["required","","name","year","matInput","",3,"ngModel","ngModelChange"],["required","","name","vinCode","matInput","",3,"ngModel","ngModelChange"],["required","","name","price","matInput","",3,"ngModel","ngModelChange"],["required","","name","mile","matInput","",3,"ngModel","ngModelChange"],["required","","name","phoneNumber","matInput","",3,"ngModel","ngModelChange"],["required","","name","image","matInput","",3,"ngModel","ngModelChange"],["required","","name","driveTrainGeo","matInput","",3,"ngModel","ngModelChange"],["required","","name","driveTrainEng","ngModel","","matInput","",3,"ngModel","ngModelChange"],["required","","name","fuelTypeGeo","matInput","",3,"ngModel","ngModelChange"],["required","","name","fuelTypeEng","ngModel","","matInput","",3,"ngModel","ngModelChange"],[1,"form-group-inline"],["type","button","mat-raised-button","","color","warn",3,"click"],["type","submit","mat-raised-button","","color","primary"]],template:function(t,i){if(1&t){const r=l.EpF();l.TgZ(0,"article")(1,"div",0)(2,"h1"),l._uU(3,"Update Car Information"),l.qZA(),l.TgZ(4,"form",1,2),l.NdJ("ngSubmit",function(){l.CHM(r);const c=l.MAs(5);return i.onUpdateFormSubit(c)}),l.TgZ(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),l._uU(9,"Manufacturer"),l.qZA(),l.TgZ(10,"input",5),l.NdJ("ngModelChange",function(c){return i.formDefaultData[5]=c}),l.qZA()(),l.TgZ(11,"mat-form-field",4)(12,"mat-label"),l._uU(13,"Model"),l.qZA(),l.TgZ(14,"input",6),l.NdJ("ngModelChange",function(c){return i.formDefaultData[7]=c}),l.qZA()()(),l.TgZ(15,"div",3)(16,"mat-form-field",4)(17,"mat-label"),l._uU(18,"Year"),l.qZA(),l.TgZ(19,"input",7),l.NdJ("ngModelChange",function(c){return i.formDefaultData[11]=c}),l.qZA()(),l.TgZ(20,"mat-form-field",4)(21,"mat-label"),l._uU(22,"Vinc Code"),l.qZA(),l.TgZ(23,"input",8),l.NdJ("ngModelChange",function(c){return i.formDefaultData[10]=c}),l.qZA()()(),l.TgZ(24,"div",3)(25,"mat-form-field",4)(26,"mat-label"),l._uU(27,"Price"),l.qZA(),l.TgZ(28,"input",9),l.NdJ("ngModelChange",function(c){return i.formDefaultData[9]=c}),l.qZA()(),l.TgZ(29,"mat-form-field",4)(30,"mat-label"),l._uU(31,"Mile"),l.qZA(),l.TgZ(32,"input",10),l.NdJ("ngModelChange",function(c){return i.formDefaultData[6]=c}),l.qZA()()(),l.TgZ(33,"div",3)(34,"mat-form-field",4)(35,"mat-label"),l._uU(36,"Seller Phone Number"),l.qZA(),l.TgZ(37,"input",11),l.NdJ("ngModelChange",function(c){return i.formDefaultData[8]=c}),l.qZA()(),l.TgZ(38,"mat-form-field",4)(39,"mat-label"),l._uU(40,"Image Url"),l.qZA(),l.TgZ(41,"input",12),l.NdJ("ngModelChange",function(c){return i.formDefaultData[4]=c}),l.qZA()()(),l.TgZ(42,"div",3)(43,"mat-form-field",4)(44,"mat-label"),l._uU(45,"Drive Train Geo"),l.qZA(),l.TgZ(46,"input",13),l.NdJ("ngModelChange",function(c){return i.formDefaultData[1]=c}),l.qZA()(),l.TgZ(47,"mat-form-field",4)(48,"mat-label"),l._uU(49,"Drive Train Eng"),l.qZA(),l.TgZ(50,"input",14),l.NdJ("ngModelChange",function(c){return i.formDefaultData[0]=c}),l.qZA()()(),l.TgZ(51,"div",3)(52,"mat-form-field",4)(53,"mat-label"),l._uU(54,"Fuel Type Geo"),l.qZA(),l.TgZ(55,"input",15),l.NdJ("ngModelChange",function(c){return i.formDefaultData[3]=c}),l.qZA()(),l.TgZ(56,"mat-form-field",4)(57,"mat-label"),l._uU(58,"Fuel Type Eng"),l.qZA(),l.TgZ(59,"input",16),l.NdJ("ngModelChange",function(c){return i.formDefaultData[2]=c}),l.qZA()()(),l.TgZ(60,"div",17)(61,"button",18),l.NdJ("click",function(){return i.onCancelBtnClick()}),l._uU(62,"Cancel"),l.qZA(),l.TgZ(63,"button",19),l._uU(64,"Save"),l.qZA()()()()()}2&t&&(l.xp6(10),l.Q6J("ngModel",i.formDefaultData[5]),l.xp6(4),l.Q6J("ngModel",i.formDefaultData[7]),l.xp6(5),l.Q6J("ngModel",i.formDefaultData[11]),l.xp6(4),l.Q6J("ngModel",i.formDefaultData[10]),l.xp6(5),l.Q6J("ngModel",i.formDefaultData[9]),l.xp6(4),l.Q6J("ngModel",i.formDefaultData[6]),l.xp6(5),l.Q6J("ngModel",i.formDefaultData[8]),l.xp6(4),l.Q6J("ngModel",i.formDefaultData[4]),l.xp6(5),l.Q6J("ngModel",i.formDefaultData[1]),l.xp6(4),l.Q6J("ngModel",i.formDefaultData[0]),l.xp6(5),l.Q6J("ngModel",i.formDefaultData[3]),l.xp6(4),l.Q6J("ngModel",i.formDefaultData[2]))},directives:[X_,Q_,td,Zp,Wp,ey,Gp,Gw,Lw,US,tl],styles:['@import"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai+Looped:wght@200&family=Montserrat:wght@300;500&family=Roboto+Condensed:ital@1&display=swap";*[_ngcontent-%COMP%]{font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif}.main[_ngcontent-%COMP%]{text-align:center}mat-form-field[_ngcontent-%COMP%]{margin:5px;width:25%}.inline-groups[_ngcontent-%COMP%]{margin:.5%}button[_ngcontent-%COMP%]{width:12.5%}.form-group-inline[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}']}),n})()},{path:"",canActivate:[Ok],component:(()=>{class n{constructor(t,i,r,s){this.dialog=t,this.firebaseClient=i,this.router=r,this.auth=s,this.length=30,this.pageSize=5,this.pageSizeOptions=[5,10,25,100],this.displayedColumns=["image","key","manufacturer","model","year","phoneNumber","mile","price","delete","update"]}ngOnInit(){this.readDataToFirebase()}filterData(t){this.dataSource.filter=t.target.value}readDataToFirebase(){this.firebaseClient.GetAllCars().subscribe(t=>{this.dataSource=new z5(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.matSort})}openDialog(){this.dialog.open(rY)}openUpdateService(t){this.firebaseClient.GetCarByKey(t).subscribe(i=>{})}onDeleteBtnClick(t){this.firebaseClient.deleteCar(t)}openCreateService(){this.router.navigate(["create"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(nI),l.Y36(cO),l.Y36(ri),l.Y36(Hp))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home"]],viewQuery:function(t,i){if(1&t&&(l.Gf(QY,5),l.Gf(f5,5)),2&t){let r;l.iGM(r=l.CRH())&&(i.paginator=r.first),l.iGM(r=l.CRH())&&(i.matSort=r.first)}},decls:45,vars:6,consts:[[1,"add-Btn"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"search-bar"],["appearance","standard",2,"margin","0.5%"],["matInput","","placeholder","Search","autocomplete","off",3,"keyup"],["input",""],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","key"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","manufacturer"],["matColumnDef","image"],["matColumnDef","model"],["matColumnDef","year"],["matColumnDef","phoneNumber"],["matColumnDef","price"],["matColumnDef","mile"],["matColumnDef","delete"],["matColumnDef","update"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-card-image","","alt","Photo of a Shiba Inu",3,"src"],["mat-raised-button","","color","primary",3,"routerLink","click"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(l.TgZ(0,"div")(1,"div",0)(2,"button",1),l.NdJ("click",function(){return i.openCreateService()}),l._uU(3,"Add New Car"),l.qZA(),l.TgZ(4,"button",2),l.NdJ("click",function(){return i.openDialog()}),l._uU(5,"Log out"),l.qZA()(),l.TgZ(6,"div",3)(7,"mat-form-field",4)(8,"input",5,6),l.NdJ("keyup",function(s){return i.filterData(s)}),l.qZA()()(),l.TgZ(10,"table",7),l.ynx(11,8),l.YNc(12,JY,2,0,"th",9),l.YNc(13,XY,2,1,"td",10),l.BQk(),l.ynx(14,11),l.YNc(15,eK,2,0,"th",9),l.YNc(16,tK,2,1,"td",10),l.BQk(),l.ynx(17,12),l.YNc(18,nK,2,0,"th",9),l.YNc(19,iK,2,1,"td",10),l.BQk(),l.ynx(20,13),l.YNc(21,rK,2,0,"th",9),l.YNc(22,sK,2,1,"td",10),l.BQk(),l.ynx(23,14),l.YNc(24,oK,2,0,"th",9),l.YNc(25,aK,2,1,"td",10),l.BQk(),l.ynx(26,15),l.YNc(27,lK,2,0,"th",9),l.YNc(28,cK,2,1,"td",10),l.BQk(),l.ynx(29,16),l.YNc(30,uK,2,0,"th",9),l.YNc(31,dK,2,1,"td",10),l.BQk(),l.ynx(32,17),l.YNc(33,hK,2,0,"th",9),l.YNc(34,fK,2,1,"td",10),l.BQk(),l.ynx(35,18),l.YNc(36,pK,2,0,"th",9),l.YNc(37,gK,3,0,"td",10),l.BQk(),l.ynx(38,19),l.YNc(39,mK,2,0,"th",9),l.YNc(40,_K,3,1,"td",10),l.BQk(),l.YNc(41,yK,1,0,"tr",20),l.YNc(42,vK,1,0,"tr",21),l.qZA(),l._UZ(43,"mat-paginator",22,23),l.qZA()),2&t&&(l.xp6(10),l.Q6J("dataSource",i.dataSource),l.xp6(31),l.Q6J("matHeaderRowDef",i.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",i.displayedColumns),l.xp6(1),l.Q6J("pageSize",10)("pageSizeOptions",l.DdM(5,bK)))},directives:[tl,Zp,ey,WU,DO,EO,TO,CO,SO,sY,Qd,ZU,KU,YU,QU,KY],styles:['@import"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai+Looped:wght@200&family=Montserrat:wght@300;500&family=Roboto+Condensed:ital@1&display=swap";*[_ngcontent-%COMP%]{font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif}table[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%]{width:200px;height:100px;object-fit:cover}.add-Btn[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:.5%}']}),n})()},{path:"user-login",canActivate:[Pk],component:o5},{path:"user-registration",canActivate:[Pk],component:l5},{path:"password-reset",canActivate:[Pk],component:P8}];let CK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Rf.forRoot(wK)],Rf]}),n})(),EK=(()=>{class n{constructor(){this.title="angularcr"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,i){1&t&&(l.TgZ(0,"div"),l._UZ(1,"router-outlet"),l.qZA(),l._UZ(2,"router-outlet"))},directives:[Pu],styles:[""]}),n})();const dH="firebasestorage.googleapis.com",hH="storageBucket";class ki extends N.ZR{constructor(e,t){super(MO(e),`Firebase Storage: ${t} (${MO(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ki.prototype)}_codeEquals(e){return MO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function MO(n){return"storage/"+n}function xO(){return new ki("unknown","An unknown error occurred, please check the error payload for server response.")}function fH(){return new ki("canceled","User canceled the upload/download.")}function pH(){return new ki("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function sy(n){return new ki("invalid-argument",n)}function gH(){return new ki("app-deleted","The Firebase app was deleted.")}function mH(n){return new ki("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qw(n,e){return new ki("invalid-format","String does not match format '"+n+"': "+e)}function Jw(n){throw new ki("internal-error","Internal error: "+n)}class Es{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Es.makeFromUrl(e,t)}catch(r){return new Es(e,"")}if(""===i.path)return i;throw function OK(n){return new ki("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(Ge){Ge.path_=decodeURIComponent(Ge.path)}const T=t.replace(/[.]/g,"\\."),He=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Ge){"/"===Ge.path.charAt(Ge.path.length-1)&&(Ge.path_=Ge.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===dH?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ge=0;Ge<He.length;Ge++){const At=He[Ge],xt=At.regex.exec(e);if(xt){let qi=xt[At.indices.path];qi||(qi=""),i=new Es(xt[At.indices.bucket],qi),At.postModify(i);break}}if(null==i)throw function kK(n){return new ki("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class LK{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sI(n){return"string"==typeof n||n instanceof String}function _H(n){return RO()&&n instanceof Blob}function RO(){return"undefined"!=typeof Blob}function kO(n,e,t,i){if(i<e)throw sy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw sy(`Invalid value for '${n}'. Expected ${t} or less.`)}function sd(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function yH(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Fh=(()=>{return(n=Fh||(Fh={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Fh;var n})();class GK{constructor(e,t,i,r,s,c,d,p,y,E,T){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,P)=>{this.resolve_=x,this.reject_=P,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function UK(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==d){const p=xO();p.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,p):p)}else c(r.canceled?this.appDelete_?gH():fH():function RK(){return new ki("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new oI(!1,null,!0)):this.backoffId_=function BK(n,e,t){let i=1,r=null,s=null,c=!1,d=0;function p(){return 2===d}let y=!1;function E(...oe){y||(y=!0,e.apply(null,oe))}function T(oe){r=setTimeout(()=>{r=null,n(P,p())},oe)}function x(){s&&clearTimeout(s)}function P(oe,...Le){if(y)return void x();if(oe)return x(),void E.call(null,oe,...Le);if(p()||c)return x(),void E.call(null,oe,...Le);let He;i<64&&(i*=2),1===d?(d=2,He=0):He=1e3*(i+Math.random()),T(He)}let L=!1;function Z(oe){L||(L=!0,x(),!y&&(null!==r?(oe||(d=2),clearTimeout(r),T(0)):oe||(d=1)))}return T(0),s=setTimeout(()=>{c=!0,Z(!0)},t),Z}((i,r)=>{if(r)return void i(!1,new oI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===Fh.NO_ERROR,p=s.getStatus();if(!d||this.isRetryStatusCode_(p)){const E=s.getErrorCode()===Fh.ABORT;return void i(!1,new oI(!1,null,E))}const y=-1!==this.successCodes_.indexOf(p);i(!0,new oI(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function VK(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||s}}class oI{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function KK(...n){const e=function YK(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(RO())return new Blob(n);throw new ki("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ca={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class OO{constructor(e,t){this.data=e,this.contentType=t||null}}function PO(n,e){switch(n){case ca.RAW:return new OO(vH(e));case ca.BASE64:case ca.BASE64URL:return new OO(bH(n,e));case ca.DATA_URL:return new OO(function e7(n){const e=new wH(n);return e.base64?bH(ca.BASE64,e.rest):function XK(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Qw(ca.DATA_URL,"Malformed data URL.")}return vH(e)}(e.rest)}(e),function t7(n){return new wH(n).contentType}(e))}throw xO()}function vH(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function bH(n,e){switch(n){case ca.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw Qw(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ca.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw Qw(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function JK(n){return atob(n)}(e)}catch(r){throw Qw(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class wH{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Qw(ca.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function n7(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class Kc{constructor(e,t){let i=0,r="";_H(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(_H(this.data_)){const r=function QK(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new Kc(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Kc(i,!0)}}static getBlob(...e){if(RO()){const t=e.map(i=>i instanceof Kc?i.data_:i);return new Kc(KK.apply(null,t))}{const t=e.map(c=>sI(c)?PO(ca.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new Kc(r,!0)}}uploadData(){return this.data_}}function NO(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function jK(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function CH(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function s7(n,e){return e}class Ws{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||s7}}let aI=null;function Xw(){if(aI)return aI;const n=[];n.push(new Ws("bucket")),n.push(new Ws("generation")),n.push(new Ws("metageneration")),n.push(new Ws("name","fullPath",!0));const t=new Ws("name");t.xform=function e(s,c){return function o7(n){return!sI(n)||n.length<2?n:CH(n)}(c)},n.push(t);const r=new Ws("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new Ws("timeCreated")),n.push(new Ws("updated")),n.push(new Ws("md5Hash",null,!0)),n.push(new Ws("cacheControl",null,!0)),n.push(new Ws("contentDisposition",null,!0)),n.push(new Ws("contentEncoding",null,!0)),n.push(new Ws("contentLanguage",null,!0)),n.push(new Ws("contentType",null,!0)),n.push(new Ws("metadata","customMetadata",!0)),aI=n,aI}function EH(n,e,t){const i=NO(e);return null===i?null:function l7(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const c=t[s];i[c.local]=c.xform(i,e[c.server])}return function a7(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Es(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function FO(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const DH="prefixes";class Qc{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Jc(n){if(!n)throw xO()}function lI(n,e){return function t(i,r){const s=EH(n,r,e);return Jc(null!==s),s}}function oy(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function MK(){return new ki("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function AK(){return new ki("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function IK(n){return new ki("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function xK(n){return new ki("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function e0(n){const e=oy(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function SK(n){return new ki("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function SH(n,e,t){const r=sd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Qc(r,"GET",lI(n,t),c);return d.errorHandler=e0(e),d}function p7(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=sd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,E=new Qc(d,"GET",function h7(n,e){return function t(i,r){const s=function d7(n,e,t){const i=NO(t);return null===i?null:function u7(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[DH])for(const r of t[DH]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new Es(e,s));i.prefixes.push(c)}if(t.items)for(const r of t.items){const s=n._makeStorageReference(new Es(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return Jc(null!==s),s}}(n,e.bucket),y);return E.urlParams=s,E.errorHandler=oy(e),E}function AH(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function y7(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class cI{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function LO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){Jc(!1)}return Jc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const C7={STATE_CHANGED:"state_changed"},Zs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function BO(n){switch(n){case"running":case"pausing":case"canceling":return Zs.RUNNING;case"paused":return Zs.PAUSED;case"success":return Zs.SUCCESS;case"canceled":return Zs.CANCELED;default:return Zs.ERROR}}class E7{constructor(e,t,i){if(function HK(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function ay(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class T7 extends class D7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw Jw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Jw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function tc(){return new T7}class kH{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Xw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function v7(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),c=AH(e,i,r),d={name:c.fullPath},p=sd(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},T=FO(c,t),L=new Qc(p,"POST",function P(Z){let oe;LO(Z);try{oe=Z.getResponseHeader("X-Goog-Upload-URL")}catch(Le){Jc(!1)}return Jc(sI(oe)),oe},n.maxUploadRetryTime);return L.urlParams=d,L.headers=E,L.body=T,L.errorHandler=oy(e),L}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,tc,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function b7(n,e,t,i){const p=new Qc(t,"POST",function s(y){const E=LO(y,["active","final"]);let T=null;try{T=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(P){Jc(!1)}T||Jc(!1);const x=Number(T);return Jc(!isNaN(x)),new cI(x,i.size(),"final"===E)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=oy(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,tc,t,i);this._request=s,s.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new cI(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function w7(n,e,t,i,r,s,c,d){const p=new cI(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function NK(){return new ki("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let E=y;r>0&&(E=Math.min(E,r));const T=p.current,L={"X-Goog-Upload-Command":E===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},Z=i.slice(T,T+E);if(null===Z)throw pH();const He=new Qc(t,"POST",function oe(Ge,At){const xt=LO(Ge,["active","final"]),nn=p.current+E,qi=i.size();let ha;return ha="final"===xt?lI(e,s)(Ge,At):null,new cI(nn,qi,"final"===xt,ha)},e.maxUploadRetryTime);return He.headers=L,He.body=Z.uploadData(),He.progressCallback=d||null,He.errorHandler=oy(n),He}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(c,tc,r,s);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=SH(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,tc,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function MH(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let He="";for(let Ge=0;Ge<2;Ge++)He+=Math.random().toString().slice(2);return He}();c["Content-Type"]="multipart/related; boundary="+p;const y=AH(e,i,r),E=FO(y,t),P=Kc.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===P)throw pH();const L={name:y.fullPath},Z=sd(s,n.host,n._protocol),Le=n.maxUploadRetryTime,We=new Qc(Z,"POST",lI(n,t),Le);return We.urlParams=L,We.headers=c,We.body=P.uploadData(),We.errorHandler=oy(e),We}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,tc,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=fH(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=BO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new E7(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(BO(this._state)){case Zs.SUCCESS:ay(this._resolve.bind(null,this.snapshot))();break;case Zs.CANCELED:case Zs.ERROR:ay(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(BO(this._state)){case Zs.RUNNING:case Zs.PAUSED:e.next&&ay(e.next.bind(e,this.snapshot))();break;case Zs.SUCCESS:e.complete&&ay(e.complete.bind(e))();break;default:e.error&&ay(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Kp{constructor(e,t){this._service=e,this._location=t instanceof Es?t:Es.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Kp(e,t)}get root(){const e=new Es(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CH(this._location.path)}get storage(){return this._service}get parent(){const e=function i7(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Es(this._location.bucket,e);return new Kp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw mH(e)}}function PH(n,e,t){return VO.apply(this,arguments)}function VO(){return(VO=(0,Ee.Z)(function*(n,e,t){const r=yield NH(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield PH(n,e,r.nextPageToken))})).apply(this,arguments)}function NH(n,e){null!=e&&"number"==typeof e.maxResults&&kO("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=p7(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,tc)}function L7(n){n._throwIfRoot("getDownloadURL");const e=function g7(n,e,t){const r=sd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Qc(r,"GET",function f7(n,e){return function t(i,r){const s=EH(n,r,e);return Jc(null!==s),function c7(n,e,t,i){const r=NO(e);if(null===r||!sI(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(y=>{const T=n.fullPath;return sd("/b/"+c(n.bucket)+"/o/"+c(T),t,i)+yH({alt:"media",token:y})})[0]}(s,r,n.host,n._protocol)}}(n,t),c);return d.errorHandler=e0(e),d}(n.storage,n._location,Xw());return n.storage.makeRequestWithTokens(e,tc).then(t=>{if(null===t)throw function FK(){return new ki("no-download-url","The given file does not have any download URLs.")}();return t})}function FH(n,e){const t=function r7(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Es(n._location.bucket,t);return new Kp(n.storage,i)}function LH(n,e){if(n instanceof UO){const t=n;if(null==t._bucket)throw function PK(){return new ki("no-default-bucket","No default bucket found. Did you set the '"+hH+"' property when initializing the app?")}();const i=new Kp(t,t._bucket);return null!=e?LH(i,e):i}return void 0!==e?FH(n,e):n}function H7(n,e){if(e&&function V7(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof UO)return function U7(n,e){return new Kp(n,e)}(n,e);throw sy("To use ref(service, url), the first argument must be a Storage instance.")}return LH(n,e)}function BH(n,e){const t=null==e?void 0:e[hH];return null==t?null:Es.makeFromBucketSpec(t,n)}class UO{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=dH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Es.makeFromBucketSpec(r,this._host):BH(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Es.makeFromBucketSpec(this._url,e):BH(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kp(this,e)}_makeRequest(e,t,i,r){if(this._deleted)return new LK(gH());{const s=function ZK(n,e,t,i,r,s){const c=yH(n.urlParams),d=n.url+c,p=Object.assign({},n.headers);return function qK(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function zK(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function $K(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(p,s),function WK(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,i),new GK(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(e,this._appId,i,r,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var i=this;return(0,Ee.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const VH="@firebase/storage";function jH(n,e){return H7(n=(0,N.m9)(n),e)}function J7(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new UO(t,i,r,e,Cs.SDK_VERSION)}!function X7(){(0,Cs._registerComponent)(new nl.wA("storage",J7,"PUBLIC").setMultipleInstances(!0)),(0,Cs.registerVersion)(VH,"0.9.6",""),(0,Cs.registerVersion)(VH,"0.9.6","esm2017")}();class uI{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class GH{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new uI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new uI(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?c=>t(new uI(c,this,this._ref)):{next:t.next?c=>t.next(new uI(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class zH{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new od(e,this._service))}get items(){return this._delegate.items.map(e=>new od(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class od{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function K7(n,e){return FH(n,e)}(this._delegate,e);return new od(t,this.storage)}get root(){return new od(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new od(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new GH(function G7(n,e,t){return function k7(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new kH(n,new Kc(e),t)}(n=(0,N.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ca.RAW,i){this._throwIfRoot("putString");const r=PO(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new GH(new kH(this._delegate,new Kc(r.data,!0),s),this)}listAll(){return function W7(n){return function P7(n){const e={prefixes:[],items:[]};return PH(n,e).then(()=>e)}(n=(0,N.m9)(n))}(this._delegate).then(e=>new zH(e,this.storage))}list(e){return function q7(n,e){return NH(n=(0,N.m9)(n),e)}(this._delegate,e||void 0).then(t=>new zH(t,this.storage))}getMetadata(){return function z7(n){return function N7(n){n._throwIfRoot("getMetadata");const e=SH(n.storage,n._location,Xw());return n.storage.makeRequestWithTokens(e,tc)}(n=(0,N.m9)(n))}(this._delegate)}updateMetadata(e){return function $7(n,e){return function F7(n,e){n._throwIfRoot("updateMetadata");const t=function m7(n,e,t,i){const s=sd(e.fullServerUrl(),n.host,n._protocol),d=FO(t,i),y=n.maxOperationRetryTime,E=new Qc(s,"PATCH",lI(n,i),y);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=d,E.errorHandler=e0(e),E}(n.storage,n._location,e,Xw());return n.storage.makeRequestWithTokens(t,tc)}(n=(0,N.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Z7(n){return L7(n=(0,N.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Y7(n){return function B7(n){n._throwIfRoot("deleteObject");const e=function _7(n,e){const i=sd(e.fullServerUrl(),n.host,n._protocol),d=new Qc(i,"DELETE",function c(p,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=e0(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,tc)}(n=(0,N.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw mH(e)}}class $H{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(qH(e))throw sy("ref() expected a child path but got a URL, use refFromURL instead.");return new od(jH(this._delegate,e),this)}refFromURL(e){if(!qH(e))throw sy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Es.makeFromUrl(e,this._delegate.host)}catch(t){throw sy("refFromUrl() expected a valid full URL but got an invalid one.")}return new od(jH(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function Q7(n,e,t,i={}){!function j7(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,N.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function qH(n){return/^[A-Za-z]+:\/\//.test(n)}function i9(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new $H(t,i)}function WH(n){const e=function s9(n){return new sn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const s=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){s()}}).pipe(ah(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ot.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function dI(n){return{getDownloadURL:()=>Ze(void 0).pipe(mn.fc,In(()=>n.getDownloadURL()),mn.iC),getMetadata:()=>Ze(void 0).pipe(mn.fc,In(()=>n.getMetadata()),mn.iC),delete:()=>(0,vn.D)(n.delete()),child:e=>dI(n.child(e)),updateMetadata:e=>(0,vn.D)(n.updateMetadata(e)),put:(e,t)=>WH(n.put(e,t)),putString:(e,t,i)=>WH(n.putString(e,t,i)),list:e=>(0,vn.D)(n.list(e)),listAll:()=>(0,vn.D)(n.listAll())}}!function r9(n){const e={TaskState:Zs,TaskEvent:C7,StringFormat:ca,Storage:$H,Reference:od};n.INTERNAL.registerComponent(new nl.wA("storage-compat",i9,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(ZT.Z);const o9=new l.OlP("angularfire2.storageBucket"),a9=new l.OlP("angularfire2.storage.maxUploadRetryTime"),l9=new l.OlP("angularfire2.storage.maxOperationRetryTime"),c9=new l.OlP("angularfire2.storage.use-emulator");let u9=(()=>{class n{constructor(t,i,r,s,c,d,p,y,E,T){const x=(0,Gi.on)(t,c,i);this.storage=(0,Gi.cc)(`${x.name}.storage.${r}`,"AngularFireStorage",x.name,()=>{const P=c.runOutsideAngular(()=>x.storage(r||void 0)),L=E;return L&&P.useEmulator(...L),p&&P.setMaxUploadRetryTime(p),y&&P.setMaxOperationRetryTime(y),P},[p,y])}ref(t){return dI(this.storage.ref(t))}refFromURL(t){return dI(this.storage.refFromURL(t))}upload(t,i,r){return dI(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Gi.Dh),l.LFG(Gi.xv,8),l.LFG(o9,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(mn.HU),l.LFG(a9,8),l.LFG(l9,8),l.LFG(c9,8),l.LFG(wh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),d9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),h9=(()=>{class n{constructor(){N_.Z.registerVersion("angularfire",mn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[u9],imports:[d9]}),n})();function HO(){return(0,On.e)((n,e)=>{let t,i=!1;n.subscribe((0,cn.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}var lt,f9="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ad={},jO=jO||{},Ft=f9||self;function hI(){}function GO(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function t0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var zO="closure_uid_"+(1e9*Math.random()>>>0),g9=0;function m9(n,e,t){return n.call.apply(n.bind,arguments)}function _9(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Qr(n,e,t){return(Qr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m9:_9).apply(null,arguments)}function fI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Jr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return e.prototype[r].apply(i,c)}}function Lh(){this.s=this.s,this.o=this.o}var v9={};Lh.prototype.s=!1,Lh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function p9(n){return Object.prototype.hasOwnProperty.call(n,zO)&&n[zO]||(n[zO]=++g9)}(this);delete v9[n]}},Lh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ZH=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},YH=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&e.call(t,r[s],s,n)};function KH(n){return Array.prototype.concat.apply([],arguments)}function $O(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function pI(n){return/^[\s\xa0]*$/.test(n)}var Ks,QH=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ys(n,e){return-1!=n.indexOf(e)}function qO(n,e){return n<e?-1:n>e?1:0}e:{var JH=Ft.navigator;if(JH){var XH=JH.userAgent;if(XH){Ks=XH;break e}}Ks=""}function WO(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function ej(n){const e={};for(const t in n)e[t]=n[t];return e}var tj="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nj(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<tj.length;s++)t=tj[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function ZO(n){return ZO[" "](n),n}ZO[" "]=hI;var gI,n,C9=Ys(Ks,"Opera"),ly=Ys(Ks,"Trident")||Ys(Ks,"MSIE"),ij=Ys(Ks,"Edge"),YO=ij||ly,rj=Ys(Ks,"Gecko")&&!(Ys(Ks.toLowerCase(),"webkit")&&!Ys(Ks,"Edge"))&&!(Ys(Ks,"Trident")||Ys(Ks,"MSIE"))&&!Ys(Ks,"Edge"),E9=Ys(Ks.toLowerCase(),"webkit")&&!Ys(Ks,"Edge");function sj(){var n=Ft.document;return n?n.documentMode:void 0}e:{var KO="",QO=(n=Ks,rj?/rv:([^\);]+)(\)|;)/.exec(n):ij?/Edge\/([\d\.]+)/.exec(n):ly?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):E9?/WebKit\/(\S+)/.exec(n):C9?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(QO&&(KO=QO?QO[1]:""),ly){var JO=sj();if(null!=JO&&JO>parseFloat(KO)){gI=String(JO);break e}}gI=KO}var D9={};var S9=Ft.document&&ly&&(sj()||parseInt(gI,10))||void 0,I9=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",hI,e),Ft.removeEventListener("test",hI,e)}catch(t){}return n}();function Ds(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function n0(n,e){if(Ds.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(rj){e:{try{ZO(e.nodeName);var r=!0;break e}catch(s){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:A9[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&n0.Z.h.call(this)}}Ds.prototype.h=function(){this.defaultPrevented=!0},Jr(n0,Ds);var A9={2:"touch",3:"pen",4:"mouse"};n0.prototype.h=function(){n0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var r0="closure_listenable_"+(1e6*Math.random()|0),M9=0;function x9(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=r,this.key=++M9,this.ca=this.fa=!1}function mI(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function _I(n){this.src=n,this.g={},this.h=0}function eP(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=ZH(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(mI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function tP(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==i)return r}return-1}_I.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=tP(n,e,i,r);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new x9(e,this.src,s,!!i,r)).fa=t,n.push(e)),e};var nP="closure_lm_"+(1e6*Math.random()|0),iP={};function aj(n,e,t,i,r){if(i&&i.once)return cj(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)aj(n,e[s],t,i,r);return null}return t=aP(t),n&&n[r0]?n.N(e,t,t0(i)?!!i.capture:!!i,r):lj(n,e,t,!1,i,r)}function lj(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var c=t0(r)?!!r.capture:!!r,d=sP(n);if(d||(n[nP]=d=new _I(n)),(t=d.add(e,t,i,c,s)).proxy)return t;if(i=function R9(){var e=k9;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)I9||(r=c),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(dj(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function cj(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)cj(n,e[s],t,i,r);return null}return t=aP(t),n&&n[r0]?n.O(e,t,t0(i)?!!i.capture:!!i,r):lj(n,e,t,!0,i,r)}function uj(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)uj(n,e[s],t,i,r);else i=t0(i)?!!i.capture:!!i,t=aP(t),n&&n[r0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=tP(s=n.g[e],t,i,r))&&(mI(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=sP(n))&&(e=n.g[e.toString()],n=-1,e&&(n=tP(e,t,i,r)),(t=-1<n?e[n]:null)&&rP(t))}function rP(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[r0])eP(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(dj(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=sP(e))?(eP(t,n),0==t.h&&(t.src=null,e[nP]=null)):mI(n)}}}function dj(n){return n in iP?iP[n]:iP[n]="on"+n}function k9(n,e){if(n.ca)n=!0;else{e=new n0(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&rP(n),n=t.call(i,e)}return n}function sP(n){return(n=n[nP])instanceof _I?n:null}var oP="__closure_events_fn_"+(1e9*Math.random()>>>0);function aP(n){return"function"==typeof n?n:(n[oP]||(n[oP]=function(e){return n.handleEvent(e)}),n[oP])}function Nr(){Lh.call(this),this.i=new _I(this),this.P=this,this.I=null}function Xr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Ds(e,n);else if(e instanceof Ds)e.target=e.target||n;else{var r=e;nj(e=new Ds(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];r=yI(c,i,!0,e)&&r}if(r=yI(c=e.g=n,i,!0,e)&&r,r=yI(c,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=yI(c=e.g=t[s],i,!1,e)&&r}function yI(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ca&&c.capture==t){var d=c.listener,p=c.ia||c.src;c.fa&&eP(n.i,c),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}Jr(Nr,Lh),Nr.prototype[r0]=!0,Nr.prototype.removeEventListener=function(n,e,t,i){uj(this,n,e,t,i)},Nr.prototype.M=function(){if(Nr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)mI(t[i]);delete n.g[e],n.h--}}this.I=null},Nr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Nr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var lP=Ft.JSON.stringify;function O9(){var n=fj;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var uP,hj=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new N9,n=>n.reset());class N9{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function F9(n){Ft.setTimeout(()=>{throw n},0)}function cP(n,e){uP||function L9(){var n=Ft.Promise.resolve(void 0);uP=function(){n.then(B9)}}(),dP||(uP(),dP=!0),fj.add(n,e)}var dP=!1,fj=new class P9{constructor(){this.h=this.g=null}add(e,t){const i=hj.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function B9(){for(var n;n=O9();){try{n.h.call(n.g)}catch(t){F9(t)}var e=hj;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}dP=!1}function vI(n,e){Nr.call(this),this.h=n||1,this.g=e||Ft,this.j=Qr(this.kb,this),this.l=Date.now()}function hP(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function fP(n,e,t){if("function"==typeof n)t&&(n=Qr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Qr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function pj(n){n.g=fP(()=>{n.g=null,n.i&&(n.i=!1,pj(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Jr(vI,Nr),(lt=vI.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xr(this,"tick"),this.da&&(hP(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){vI.Z.M.call(this),hP(this),delete this.g};class V9 extends Lh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pj(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function s0(n){Lh.call(this),this.h=n,this.g={}}Jr(s0,Lh);var gj=[];function mj(n,e,t,i){Array.isArray(t)||(t&&(gj[0]=t.toString()),t=gj);for(var r=0;r<t.length;r++){var s=aj(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function _j(n){WO(n.g,function(e,t){this.g.hasOwnProperty(t)&&rP(e)},n),n.g={}}function bI(){this.g=!0}function cy(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function G9(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return lP(t)}catch(d){return e}}(n,t)+(i?" "+i:"")})}s0.prototype.M=function(){s0.Z.M.call(this),_j(this)},s0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bI.prototype.Aa=function(){this.g=!1},bI.prototype.info=function(){};var Qp={},yj=null;function wI(){return yj=yj||new Nr}function vj(n){Ds.call(this,Qp.Ma,n)}function o0(n){const e=wI();Xr(e,new vj(e,n))}function bj(n,e){Ds.call(this,Qp.STAT_EVENT,n),this.stat=e}function Qs(n){const e=wI();Xr(e,new bj(e,n))}function wj(n,e){Ds.call(this,Qp.Na,n),this.size=e}function a0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Qp.Ma="serverreachability",Jr(vj,Ds),Qp.STAT_EVENT="statevent",Jr(bj,Ds),Qp.Na="timingevent",Jr(wj,Ds);var CI={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Cj={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function pP(){}function Dj(){}pP.prototype.h=null;var _P,l0={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function gP(){Ds.call(this,"d")}function mP(){Ds.call(this,"c")}function EI(){}function c0(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new s0(this),this.P=z9,this.W=new vI(n=YO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Tj}function Tj(){this.i=null,this.g="",this.h=!1}Jr(gP,Ds),Jr(mP,Ds),Jr(EI,pP),EI.prototype.g=function(){return new XMLHttpRequest},EI.prototype.i=function(){return{}},_P=new EI;var z9=45e3,yP={},DI={};function vP(n,e,t){n.K=1,n.v=MI(ld(e)),n.s=t,n.U=!0,Sj(n,null)}function Sj(n,e){n.F=Date.now(),u0(n),n.A=ld(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),Nj(t.h,"t",i),n.C=0,t=n.l.H,n.h=new Tj,n.g=rG(n.l,t?e:null,!n.s),0<n.O&&(n.L=new V9(Qr(n.Ia,n,n.g),n.O)),mj(n.V,n.g,"readystatechange",n.gb),e=n.H?ej(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),o0(1),function U9(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var E=y[0];y=y[1];var T=E.split("_");c=2<=T.length&&"type"==T[1]?c+(E+"=")+y+"&":c+(E+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ij(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Aj(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=$9(n,t),r==DI){4==e&&(n.o=4,Qs(14),i=!1),cy(n.j,n.m,null,"[Incomplete Response]");break}if(r==yP){n.o=4,Qs(15),cy(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}cy(n.j,n.m,r,null),bP(n,r)}Ij(n)&&r!=DI&&r!=yP&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qs(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),RP(e),e.L=!0,Qs(11))):(cy(n.j,n.m,t,"[Invalid Chunked Response]"),Jp(n),d0(n))}function $9(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?DI:(t=Number(e.substring(t,i)),isNaN(t)?yP:(i+=1)+t>e.length?DI:(e=e.substr(i,t),n.C=i+t,e))}function u0(n){n.Y=Date.now()+n.P,Mj(n,n.P)}function Mj(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=a0(Qr(n.eb,n),e)}function TI(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function d0(n){0==n.l.G||n.I||eG(n.l,n)}function Jp(n){TI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,hP(n.W),_j(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function bP(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||EP(t.i,n)))if(t.I=n.N,!n.J&&EP(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.ta=r[1],0<t.ta-t.U&&37500>r[2]&&t.N&&0==t.A&&!t.v&&(t.v=a0(Qr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;NI(t),OI(t)}xP(t),Qs(18)}if(1>=Bj(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else tg(t,11)}else if((n.J||t.g==n)&&NI(t),!pI(e))for(r=t.Ca.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const E=y[3];null!=E&&(t.ma=E,t.h.info("VER="+t.ma));const T=y[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.K=i=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const P=n.g;if(P){const L=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(L){var s=i.i;!s.g&&(Ys(L,"spdy")||Ys(L,"quic")||Ys(L,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(DP(s,s.h),s.h=null))}if(i.D){const Z=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;Z&&(i.sa=Z,ai(i.F,i.D,Z))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((i=t).oa=iG(i,i.H?i.la:null,i.W),c.J){Vj(i.i,c);var d=c,p=i.K;p&&d.setTimeout(p),d.B&&(TI(d),u0(d)),i.g=c}else Jj(i);0<t.l.length&&PI(t)}else"stop"!=y[0]&&"close"!=y[0]||tg(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?tg(t,7):AP(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}o0(4)}catch(y){}}function wP(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(GO(n)||"string"==typeof n)YH(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(GO(n)||"string"==typeof n){t=[];for(var i=n.length,r=0;r<i;r++)t.push(r)}else for(r in t=[],i=0,n)t[i++]=r;i=function q9(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(GO(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}}function uy(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof uy)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function CP(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];Xp(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var r={};for(t=e=0;e<n.g.length;)Xp(r,i=n.g[e])||(n.g[t++]=i,r[i]=1),e++;n.g.length=t}}function Xp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(lt=c0.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const e=this.L;e&&3==cd(n)?e.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const E=cd(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>E)&&(3!=E||YO||this.g&&(this.h.h||this.g.ga()||Wj(this.g)))){this.I||4!=E||7==e||o0(8==e||0>=T?3:2),TI(this);var t=this.g.ba();this.N=t;t:if(Ij(this)){var i=Wj(this.g);n="";var r=i.length,s=4==cd(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Jp(this),d0(this);var c="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function H9(n,e,t,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,E,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pI(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Qs(12),Jp(this),d0(this);break e}cy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bP(this,t)}this.U?(Aj(this,E,c),YO&&this.i&&3==E&&(mj(this.V,this.W,"tick",this.fb),this.W.start())):(cy(this.j,this.m,c,null),bP(this,c)),4==E&&Jp(this),this.i&&!this.I&&(4==E?eG(this.l,this):(this.i=!1,u0(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Qs(12)):(this.o=0,Qs(13)),Jp(this),d0(this)}}}catch(E){}},lt.fb=function(){if(this.g){var n=cd(this.g),e=this.g.ga();this.C<e.length&&(TI(this),Aj(this,n,e),this.i&&4!=n&&u0(this))}},lt.cancel=function(){this.I=!0,Jp(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function j9(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(o0(3),Qs(17)),Jp(this),this.o=2,d0(this)):Mj(this,this.Y-n)},(lt=uy.prototype).R=function(){CP(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},lt.T=function(){return CP(this),this.g.concat()},lt.get=function(n,e){return Xp(this.h,n)?this.h[n]:e},lt.set=function(n,e){Xp(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},lt.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var r=t[i],s=this.get(r);n.call(e,s,r,this)}};var xj=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function eg(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof eg){this.g=void 0!==e?e:n.g,SI(this,n.j),this.s=n.s,II(this,n.i),AI(this,n.m),this.l=n.l,e=n.h;var t=new p0;t.i=e.i,e.g&&(t.g=new uy(e.g),t.h=e.h),Rj(this,t),this.o=n.o}else n&&(t=String(n).match(xj))?(this.g=!!e,SI(this,t[1]||"",!0),this.s=h0(t[2]||""),II(this,t[3]||"",!0),AI(this,t[4]),this.l=h0(t[5]||"",!0),Rj(this,t[6]||"",!0),this.o=h0(t[7]||"")):(this.g=!!e,this.h=new p0(null,this.g))}function ld(n){return new eg(n)}function SI(n,e,t){n.j=t?h0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function II(n,e,t){n.i=t?h0(e,!0):e}function AI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Rj(n,e,t){e instanceof p0?(n.h=e,function tQ(n,e){e&&!n.j&&(Bh(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(Oj(this,i),Nj(this,r,t))},n)),n.j=e}(n.h,n.g)):(t||(e=f0(e,X9)),n.h=new p0(e,n.g))}function ai(n,e,t){n.h.set(e,t)}function MI(n){return ai(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function h0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function f0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,K9),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function K9(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}eg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(f0(e,kj,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(f0(e,kj,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(f0(t,"/"==t.charAt(0)?J9:Q9,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",f0(t,eQ)),n.join("")};var kj=/[#\/\?@]/g,Q9=/[#\?:]/g,J9=/[#\?]/g,X9=/[#\?@]/g,eQ=/#/g;function p0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Bh(n){n.g||(n.g=new uy,n.h=0,n.i&&function W9(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Oj(n,e){Bh(n),e=dy(n,e),Xp(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Xp((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&CP(n)))}function Pj(n,e){return Bh(n),e=dy(n,e),Xp(n.g.h,e)}function Nj(n,e,t){Oj(n,e),0<t.length&&(n.i=null,n.g.set(dy(n,e),$O(t)),n.h+=t.length)}function dy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Fj(n){this.l=n||iQ,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ea&&Ft.g.Ea()&&Ft.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=p0.prototype).add=function(n,e){Bh(this),this.i=null,n=dy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){Bh(this),this.g.forEach(function(t,i){YH(t,function(r){n.call(e,r,i,this)},this)},this)},lt.T=function(){Bh(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var r=n[i],s=0;s<r.length;s++)t.push(e[i]);return t},lt.R=function(n){Bh(this);var e=[];if("string"==typeof n)Pj(this,n)&&(e=KH(e,this.g.get(dy(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=KH(e,n[t])}return e},lt.set=function(n,e){return Bh(this),this.i=null,Pj(this,n=dy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var c=r;""!==i[s]&&(c+="="+encodeURIComponent(String(i[s]))),n.push(c)}}return this.i=n.join("&")};var iQ=10;function Lj(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Bj(n){return n.h?1:n.g?n.g.size:0}function EP(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function DP(n,e){n.g?n.g.add(e):n.h=e}function Vj(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Uj(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return $O(n.i)}function TP(){}function rQ(){this.g=new TP}function sQ(n,e,t){const i=t||"";try{wP(n,function(r,s){let c=r;t0(r)&&(c=lP(r)),e.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function xI(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function g0(n){this.l=n.$b||null,this.j=n.ib||!1}function RI(n,e){Nr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=SP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fj.prototype.cancel=function(){if(this.i=Uj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},TP.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},TP.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},Jr(g0,pP),g0.prototype.g=function(){return new RI(this.l,this.j)},g0.prototype.i=function(n){return function(){return n}}({}),Jr(RI,Nr);var SP=0;function Hj(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function m0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_0(n)}function _0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=RI.prototype).open=function(n,e){if(this.readyState!=SP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_0(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,m0(this)),this.readyState=SP},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_0(this)),this.g&&(this.readyState=3,_0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ft.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Hj(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?m0(this):_0(this),3==this.readyState&&Hj(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,m0(this))},lt.Ta=function(n){this.g&&(this.response=n,m0(this))},lt.ha=function(){this.g&&m0(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(RI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var aQ=Ft.JSON.parse;function tr(n){Nr.call(this),this.headers=new uy,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jj,this.K=this.L=!1}Jr(tr,Nr);var jj="",lQ=/^https?$/i,cQ=["POST","PUT"];function dQ(n){return"content-type"==n.toLowerCase()}function Gj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zj(n),kI(n)}function zj(n){n.D||(n.D=!0,Xr(n,"complete"),Xr(n,"error"))}function $j(n){if(n.h&&void 0!==jO&&(!n.C[1]||4!=cd(n)||2!=n.ba()))if(n.v&&4==cd(n))fP(n.Fa,0,n);else if(Xr(n,"readystatechange"),4==cd(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===d){var r=String(n.H).match(xj)[1]||null;if(!r&&Ft.self&&Ft.self.location){var s=Ft.self.location.protocol;r=s.substr(0,s.length-1)}i=!lQ.test(r?r.toLowerCase():"")}t=i}if(t)Xr(n,"complete"),Xr(n,"success");else{n.m=6;try{var c=2<cd(n)?n.g.statusText:""}catch(p){c=""}n.j=c+" ["+n.ba()+"]",zj(n)}}finally{kI(n)}}}function kI(n,e){if(n.g){qj(n);const t=n.g,i=n.C[0]?hI:null;n.g=null,n.C=null,e||Xr(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function qj(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function cd(n){return n.g?n.g.readyState:0}function Wj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case jj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function IP(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function hQ(n){let e="";return WO(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ai(n,e,t))}function y0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Zj(n){this.za=0,this.l=[],this.h=new bI,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=y0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=y0("baseRetryDelayMs",5e3,n),this.$a=y0("retryDelaySeedMs",1e4,n),this.Ya=y0("forwardChannelMaxRetries",2,n),this.ra=y0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Fj(n&&n.concurrentRequestLimit),this.Ca=new rQ,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function AP(n){if(Yj(n),3==n.G){var e=n.V++,t=ld(n.F);ai(t,"SID",n.J),ai(t,"RID",e),ai(t,"TYPE","terminate"),v0(n,t),(e=new c0(n,n.h,e,void 0)).K=2,e.v=MI(ld(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=rG(e.l,null),e.g.ea(e.v)),e.F=Date.now(),u0(e)}nG(n)}function OI(n){n.g&&(RP(n),n.g.cancel(),n.g=null)}function Yj(n){OI(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),NI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function MP(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&PI(n)}function PI(n){Lj(n.i)||n.m||(n.m=!0,cP(n.Ha,n),n.C=0)}function Kj(n,e){var t;t=e?e.m:n.V++;const i=ld(n.F);ai(i,"SID",n.J),ai(i,"RID",t),ai(i,"AID",n.U),v0(n,i),n.o&&n.s&&IP(i,n.o,n.s),t=new c0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Qj(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),DP(n.i,t),vP(t,i,e)}function v0(n,e){n.j&&wP({},function(t,i){ai(e,i,t)})}function Qj(n,e,t){t=Math.min(n.l.length,t);var i=n.j?Qr(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let y=r[p].h;const E=r[p].g;if(y-=s,0>y)s=Math.max(0,r[p].h-100),d=!1;else try{sQ(E,c,"req"+y+"_")}catch(T){i&&i(E)}}if(d){i=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function Jj(n){n.g||n.u||(n.Y=1,cP(n.Ga,n),n.A=0)}function xP(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=a0(Qr(n.Ga,n),tG(n,n.A)),n.A++,0))}function RP(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Xj(n){n.g=new c0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ld(n.oa);ai(e,"RID","rpc"),ai(e,"SID",n.J),ai(e,"CI",n.N?"0":"1"),ai(e,"AID",n.U),v0(n,e),ai(e,"TYPE","xmlhttp"),n.o&&n.s&&IP(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=MI(ld(e)),t.s=null,t.U=!0,Sj(t,n)}function NI(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function eG(n,e){var t=null;if(n.g==e){NI(n),RP(n),n.g=null;var i=2}else{if(!EP(n.i,e))return;t=e.D,Vj(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;Xr(i=wI(),new wj(i,t,e,r)),PI(n)}else Jj(n);else if(3==(r=e.o)||0==r&&0<n.I||!(1==i&&function fQ(n,e){return!(Bj(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=a0(Qr(n.Ha,n,e),tG(n,n.C)),n.C++,0)))}(n,e)||2==i&&xP(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:tg(n,5);break;case 4:tg(n,10);break;case 3:tg(n,6);break;default:tg(n,2)}}function tG(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function tg(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=Qr(n.jb,n);t||(t=new eg("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||SI(t,"https"),MI(t)),function oQ(n,e){const t=new bI;if(Ft.Image){const i=new Image;i.onload=fI(xI,t,i,"TestLoadImage: loaded",!0,e),i.onerror=fI(xI,t,i,"TestLoadImage: error",!1,e),i.onabort=fI(xI,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=fI(xI,t,i,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Qs(2);n.G=0,n.j&&n.j.va(e),nG(n),Yj(n)}function nG(n){n.G=0,n.I=-1,n.j&&((0!=Uj(n.i).length||0!=n.l.length)&&(n.i.i.length=0,$O(n.l),n.l.length=0),n.j.ua())}function iG(n,e,t){let i=function Z9(n){return n instanceof eg?ld(n):new eg(n,void 0)}(t);if(""!=i.i)e&&II(i,e+"."+i.i),AI(i,i.m);else{const r=Ft.location;i=function Y9(n,e,t,i){var r=new eg(null,void 0);return n&&SI(r,n),e&&II(r,e),t&&AI(r,t),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return n.aa&&WO(n.aa,function(r,s){ai(i,s,r)}),t=n.sa,(e=n.D)&&t&&ai(i,e,t),ai(i,"VER",n.ma),v0(n,i),i}function rG(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tr(t&&n.Ba&&!n.qa?new g0({ib:!0}):n.qa)).L=n.H,e}function sG(){}function FI(){if(ly&&!(10<=Number(S9)))throw Error("Environmental error: no available transport.")}function ua(n,e){Nr.call(this),this.g=new Zj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!pI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new hy(this)}function oG(n){gP.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function aG(){mP.call(this),this.status=1}function hy(n){this.g=n}(lt=tr.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_P.g(),this.C=function Ej(n){return n.h||(n.h=n.i())}(this.u?this.u:_P),this.g.onreadystatechange=Qr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void Gj(this,s)}n=t||"";const r=new uy(this.headers);i&&wP(i,function(s,c){r.set(c,s)}),i=function b9(n){e:{var e=dQ;const t=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<t;r++)if(r in i&&e.call(void 0,i[r],r,n)){e=r;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(r.T()),t=Ft.FormData&&n instanceof Ft.FormData,!(0<=ZH(cQ,e))||i||t||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qj(this),0<this.B&&((this.K=function uQ(n){return ly&&function T9(){return function w9(n){var e=D9;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=QH(String(gI)).split("."),t=QH("9").split("."),i=Math.max(e.length,t.length);for(let c=0;0==n&&c<i;c++){var r=e[c]||"",s=t[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=qO(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||qO(0==r[2].length,0==s[2].length)||qO(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qr(this.pa,this)):this.A=fP(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Gj(this,s)}},lt.pa=function(){void 0!==jO&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xr(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xr(this,"complete"),Xr(this,"abort"),kI(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kI(this,!0)),tr.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?$j(this):this.cb())},lt.cb=function(){$j(this)},lt.ba=function(){try{return 2<cd(this)?this.g.status:-1}catch(n){return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},lt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),aQ(e)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=Zj.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new c0(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=ej(s),nj(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Qj(this,r,e),ai(t=ld(this.F),"RID",n),ai(t,"CVER",22),this.D&&ai(t,"X-HTTP-Session-Id",this.D),v0(this,t),this.o&&s&&IP(t,this.o,s),DP(this.i,r),this.Ra&&ai(t,"TYPE","init"),this.ja?(ai(t,"$req",e),ai(t,"SID","null"),r.$=!0,vP(r,t,null)):vP(r,t,e),this.G=2}}else 3==this.G&&(n?Kj(this,n):0==this.l.length||Lj(this.i)||Kj(this))},lt.Ga=function(){if(this.u=null,Xj(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=a0(Qr(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qs(10),OI(this),Xj(this))},lt.ab=function(){null!=this.v&&(this.v=null,OI(this),xP(this),Qs(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Qs(2)):(this.h.info("Failed to ping google.com"),Qs(1))},(lt=sG.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},FI.prototype.g=function(n,e){return new ua(n,e)},Jr(ua,Nr),ua.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),cP(Qr(n.hb,n,e))),Qs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=iG(n,null,n.W),PI(n)},ua.prototype.close=function(){AP(this.g)},ua.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,MP(this.g,e)}else this.v?((e={}).__data__=lP(n),MP(this.g,e)):MP(this.g,n)},ua.prototype.M=function(){this.g.j=null,delete this.j,AP(this.g),delete this.g,ua.Z.M.call(this)},Jr(oG,gP),Jr(aG,mP),Jr(hy,sG),hy.prototype.xa=function(){Xr(this.g,"a")},hy.prototype.wa=function(n){Xr(this.g,new oG(n))},hy.prototype.va=function(n){Xr(this.g,new aG(n))},hy.prototype.ua=function(){Xr(this.g,"b")},FI.prototype.createWebChannel=FI.prototype.g,ua.prototype.send=ua.prototype.u,ua.prototype.open=ua.prototype.m,ua.prototype.close=ua.prototype.close,CI.NO_ERROR=0,CI.TIMEOUT=8,CI.HTTP_ERROR=6,Cj.COMPLETE="complete",Dj.EventType=l0,l0.OPEN="a",l0.CLOSE="b",l0.ERROR="c",l0.MESSAGE="d",Nr.prototype.listen=Nr.prototype.N,tr.prototype.listenOnce=tr.prototype.O,tr.prototype.getLastError=tr.prototype.La,tr.prototype.getLastErrorCode=tr.prototype.Da,tr.prototype.getStatus=tr.prototype.ba,tr.prototype.getResponseJson=tr.prototype.Qa,tr.prototype.getResponseText=tr.prototype.ga,tr.prototype.send=tr.prototype.ea;var pQ=ad.createWebChannelTransport=function(){return new FI},gQ=ad.getStatEventTarget=function(){return wI()},kP=ad.ErrorCode=CI,mQ=ad.EventType=Cj,_Q=ad.Event=Qp,lG=ad.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yQ=ad.FetchXmlHttpFactory=g0,LI=ad.WebChannel=Dj,vQ=ad.XhrIo=tr;const cG="@firebase/firestore";class es{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");let fy="9.8.0";const Vh=new il.Yd("@firebase/firestore");function OP(){return Vh.logLevel}function Ve(n,...e){if(Vh.logLevel<=il.in.DEBUG){const t=e.map(PP);Vh.debug(`Firestore (${fy}): ${n}`,...t)}}function nr(n,...e){if(Vh.logLevel<=il.in.ERROR){const t=e.map(PP);Vh.error(`Firestore (${fy}): ${n}`,...t)}}function b0(n,...e){if(Vh.logLevel<=il.in.WARN){const t=e.map(PP);Vh.warn(`Firestore (${fy}): ${n}`,...t)}}function PP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${fy}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function Pt(n,e){n||ut()}function nt(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class uG{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(es.UNAUTHENTICATED))}shutdown(){}}class EQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class DQ{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let c=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fr,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},p=y=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Pt("string"==typeof i.accessToken),new uG(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new es(e)}}class TQ{constructor(e,t,i){this.type="FirstParty",this.user=es.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class SQ{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new TQ(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(es.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IQ{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=s=>{null!=s.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.p=t.token,new dG(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class da{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.I(i),this.T=i=>t.writeSequenceNumber(i))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function AQ(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}da.A=-1;class hG{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=AQ(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function Gt(n,e){return n<e?-1:n>e?1:0}function py(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function fG(n){return n+"\0"}class zi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zi.fromMillis(Date.now())}static fromDate(e){return zi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new zi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new zi(0,0))}static max(){return new Mt(new zi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function pG(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ng(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class w0{constructor(e,t,i){void 0===t?t=0:t>e.length&&ut(),void 0===i?i=e.length-t:i>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===w0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof w0?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),c=t.get(r);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends w0{construct(e,t,i){return new dn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const MQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gr extends w0{construct(e,t,i){return new gr(e,t,i)}static isValidIdentifier(e){return MQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gr(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;r<e.length;){const d=e[r];if("\\"===d){if(r+1===e.length)throw new Pe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Pe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new Pe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gr(t)}static emptyPath(){return new gr([])}}class gy{constructor(e){this.fields=e,e.sort(gr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return py(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new mr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mr.EMPTY_BYTE_STRING=new mr("");const RQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uh(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=RQ.exec(n);if(Pt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Oi(n.seconds),nanos:Oi(n.nanos)}}function Oi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ig(n){return"string"==typeof n?mr.fromBase64String(n):mr.fromUint8Array(n)}function NP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function mG(n){const e=n.mapValue.fields.__previous_value__;return NP(e)?mG(e):e}function C0(n){const e=Uh(n.mapValue.fields.__local_write_time__.timestampValue);return new zi(e.seconds,e.nanos)}class kQ{constructor(e,t,i,r,s,c,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class ud{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ud("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ud&&e.projectId===this.projectId&&e.database===this.database}}function E0(n){return null==n}function D0(n){return 0===n&&1/n==-1/0}function _G(n){return"number"==typeof n&&Number.isInteger(n)&&!D0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(dn.fromString(e))}static fromName(e){return new Je(dn.fromString(e).popFirst(5))}static empty(){return new Je(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new dn(e.slice()))}}const Hh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},BI={nullValue:"NULL_VALUE"};function rg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?NP(n)?4:wG(n)?9007199254740991:10:ut()}function Xc(n,e){if(n===e)return!0;const t=rg(n);if(t!==rg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return C0(n).isEqual(C0(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Uh(i.timestampValue),c=Uh(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,ig(n.bytesValue).isEqual(ig(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Oi(i.geoPointValue.latitude)===Oi(r.geoPointValue.latitude)&&Oi(i.geoPointValue.longitude)===Oi(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Oi(i.integerValue)===Oi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Oi(i.doubleValue),c=Oi(r.doubleValue);return s===c?D0(s)===D0(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return py(n.arrayValue.values||[],e.arrayValue.values||[],Xc);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(pG(s)!==pG(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!Xc(s[d],c[d])))return!1;return!0}(n,e);default:return ut()}var r}function T0(n,e){return void 0!==(n.values||[]).find(t=>Xc(t,e))}function jh(n,e){if(n===e)return 0;const t=rg(n),i=rg(e);if(t!==i)return Gt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(r,s){const c=Oi(r.integerValue||r.doubleValue),d=Oi(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return yG(n.timestampValue,e.timestampValue);case 4:return yG(C0(n),C0(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(r,s){const c=ig(r),d=ig(s);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let p=0;p<c.length&&p<d.length;p++){const y=Gt(c[p],d[p]);if(0!==y)return y}return Gt(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const c=Gt(Oi(r.latitude),Oi(s.latitude));return 0!==c?c:Gt(Oi(r.longitude),Oi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let p=0;p<c.length&&p<d.length;++p){const y=jh(c[p],d[p]);if(y)return y}return Gt(c.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Hh.mapValue&&s===Hh.mapValue)return 0;if(r===Hh.mapValue)return 1;if(s===Hh.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),p=s.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let E=0;E<d.length&&E<y.length;++E){const T=Gt(d[E],y[E]);if(0!==T)return T;const x=jh(c[d[E]],p[y[E]]);if(0!==x)return x}return Gt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw ut()}}function yG(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Uh(n),i=Uh(e),r=Gt(t.seconds,i.seconds);return 0!==r?r:Gt(t.nanos,i.nanos)}function my(n){return FP(n)}function FP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Uh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ig(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=FP(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${FP(i.fields[d])}`;return s+"}"}(n.mapValue):ut();var e}function sg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function LP(n){return!!n&&"integerValue"in n}function S0(n){return!!n&&"arrayValue"in n}function vG(n){return!!n&&"nullValue"in n}function bG(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function VI(n){return!!n&&"mapValue"in n}function I0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ng(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=I0(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=I0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wG(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function OQ(n){return"nullValue"in n?BI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sg(ud.empty(),Je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function PQ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sg(ud.empty(),Je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Hh:ut()}function CG(n,e){const t=jh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function EG(n,e){const t=jh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ts{constructor(e){this.value=e}static empty(){return new Ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!VI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=I0(t)}setAll(e){let t=gr.emptyPath(),i={},r=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,r),i={},r=[],t=d.popLast()}c?i[d.lastSegment()]=I0(c):r.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());VI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];VI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){ng(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Ts(I0(this.value))}}function DG(n){const e=[];return ng(n.fields,(t,i)=>{const r=new gr([t]);if(VI(i)){const s=DG(i.mapValue).fields;if(0===s.length)e.push(r);else for(const c of s)e.push(r.child(c))}else e.push(r)}),new gy(e)}class Xn{constructor(e,t,i,r,s,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(e){return new Xn(e,0,Mt.min(),Mt.min(),Ts.empty(),0)}static newFoundDocument(e,t,i){return new Xn(e,1,t,Mt.min(),i,0)}static newNoDocument(e,t){return new Xn(e,2,t,Mt.min(),Ts.empty(),0)}static newUnknownDocument(e,t){return new Xn(e,3,t,Mt.min(),Ts.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class UI{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function BP(n){return n.fields.find(e=>2===e.kind)}function og(n){return n.fields.filter(e=>2!==e.kind)}UI.UNKNOWN_ID=-1;class HI{constructor(e,t){this.fieldPath=e,this.kind=t}}class A0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new A0(0,nc.min())}}function TG(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Mt.fromTimestamp(1e9===i?new zi(t+1,0):new zi(t,i));return new nc(r,Je.empty(),e)}function NQ(n){return new nc(n.readTime,n.key,-1)}class nc{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new nc(Mt.min(),Je.empty(),-1)}static max(){return new nc(Mt.max(),Je.empty(),-1)}}function SG(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}class $i{constructor(e,t){this.comparator=e,this.root=t||ts.EMPTY}insert(e,t){return new $i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ts.BLACK,null,null))}remove(e){return new $i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ts.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jI(this.root,e,this.comparator,!1)}getReverseIterator(){return new jI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jI(this.root,e,this.comparator,!0)}}class jI{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ts{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=null!=i?i:ts.RED,this.left=null!=r?r:ts.EMPTY,this.right=null!=s?s:ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new ts(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ts.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}ts.EMPTY=null,ts.RED=!0,ts.BLACK=!1,ts.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,i,r){return this}insert(n,e,t){return new ts(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new $i(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IG(this.data.getIterator())}getIteratorFrom(e){return new IG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class IG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _y(n){return n.hasNext()?n.getNext():void 0}class FQ{constructor(e,t=null,i=[],r=[],s=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.P=null}}function AG(n,e=null,t=[],i=[],r=null,s=null,c=null){return new FQ(n,e,t,i,r,s,c)}function ag(n){const e=nt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+my(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),E0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>my(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>my(i)).join(",")),e.P=t}return e.P}function M0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!$Q(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!Xc(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OG(n.startAt,e.startAt)&&OG(n.endAt,e.endAt)}function GI(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function zI(n,e){return n.filters.filter(t=>t instanceof ns&&t.field.isEqual(e))}function MG(n,e,t){let i=BI,r=!0;for(const s of zI(n,e)){let c=BI,d=!0;switch(s.op){case"<":case"<=":c=OQ(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=BI}CG({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];CG({value:i,inclusive:r},{value:c,inclusive:t.inclusive})<0&&(i=c,r=t.inclusive);break}return{value:i,inclusive:r}}function xG(n,e,t){let i=Hh,r=!0;for(const s of zI(n,e)){let c=Hh,d=!0;switch(s.op){case">=":case">":c=PQ(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=Hh}EG({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];EG({value:i,inclusive:r},{value:c,inclusive:t.inclusive})>0&&(i=c,r=t.inclusive);break}return{value:i,inclusive:r}}class ns extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,i):new BQ(e,t,i):"array-contains"===t?new HQ(e,i):"in"===t?new jQ(e,i):"not-in"===t?new GQ(e,i):"array-contains-any"===t?new zQ(e,i):new ns(e,t,i)}static V(e,t,i){return"in"===t?new VQ(e,i):new UQ(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(jh(t,this.value)):null!==t&&rg(this.value)===rg(t)&&this.v(jh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class BQ extends ns{constructor(e,t,i){super(e,t,i),this.key=Je.fromName(i.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.v(t)}}class VQ extends ns{constructor(e,t){super(e,"in",t),this.keys=RG(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class UQ extends ns{constructor(e,t){super(e,"not-in",t),this.keys=RG(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RG(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Je.fromName(i.referenceValue))}class HQ extends ns{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return S0(t)&&T0(t.arrayValue,this.value)}}class jQ extends ns{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&T0(this.value.arrayValue,t)}}class GQ extends ns{constructor(e,t){super(e,"not-in",t)}matches(e){if(T0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!T0(this.value.arrayValue,t)}}class zQ extends ns{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!S0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>T0(this.value.arrayValue,i))}}class Gh{constructor(e,t){this.position=e,this.inclusive=t}}class yy{constructor(e,t="asc"){this.field=e,this.dir=t}}function $Q(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function kG(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],c=n.position[r];if(i=s.field.isKeyField()?Je.comparator(Je.fromName(c.referenceValue),t.key):jh(c,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function OG(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xc(n.position[t],e.position[t]))return!1;return!0}class dd{constructor(e,t=null,i=[],r=[],s=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=p,this.D=null,this.C=null}}function PG(n,e,t,i,r,s,c,d){return new dd(n,e,t,i,r,s,c,d)}function vy(n){return new dd(n)}function VP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function UP(n){for(const e of n.filters)if(e.S())return e.field;return null}function HP(n){return null!==n.collectionGroup}function by(n){const e=nt(n);if(null===e.D){e.D=[];const t=UP(e),i=VP(e);if(null!==t&&null===i)t.isKeyField()||e.D.push(new yy(t)),e.D.push(new yy(gr.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new yy(gr.keyField(),s))}}}return e.D}function dl(n){const e=nt(n);if(!e.C)if("F"===e.limitType)e.C=AG(e.path,e.collectionGroup,by(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of by(e))t.push(new yy(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new Gh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gh(e.startAt.position,e.startAt.inclusive):null;e.C=AG(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.C}function NG(n,e,t){return new dd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function x0(n,e){return M0(dl(n),dl(e))&&n.limitType===e.limitType}function FG(n){return`${ag(dl(n))}|lt:${n.limitType}`}function jP(n){return`Query(target=${function LQ(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${my(i.value)}`;var i}).join(", ")}]`),E0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>my(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>my(t)).join(",")),`Target(${e})`}(dl(n))}; limitType=${n.limitType})`}function GP(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):Je.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,c){const d=kG(r,s,c);return r.inclusive?d<=0:d<0}(t.startAt,by(t),i)||t.endAt&&!function(r,s,c){const d=kG(r,s,c);return r.inclusive?d>=0:d>0}(t.endAt,by(t),i)));var t,i}function LG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BG(n){return(e,t)=>{let i=!1;for(const r of by(n)){const s=WQ(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function WQ(n,e,t){const i=n.field.isKeyField()?Je.comparator(e.key,t.key):function(r,s,c){const d=s.data.field(r),p=c.data.field(r);return null!==d&&null!==p?jh(d,p):ut()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ut()}}function VG(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:D0(e)?"-0":e}}function UG(n){return{integerValue:""+n}}function HG(n,e){return _G(e)?UG(e):VG(n,e)}class $I{constructor(){this._=void 0}}function ZQ(n,e,t){return n instanceof wy?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof lg?GG(n,e):n instanceof cg?zG(n,e):function(i,r){const s=jG(i,r),c=$G(s)+$G(i.k);return LP(s)&&LP(i.k)?UG(c):VG(i.M,c)}(n,e)}function YQ(n,e,t){return n instanceof lg?GG(n,e):n instanceof cg?zG(n,e):t}function jG(n,e){return n instanceof Cy?LP(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class wy extends $I{}class lg extends $I{constructor(e){super(),this.elements=e}}function GG(n,e){const t=qG(e);for(const i of n.elements)t.some(r=>Xc(r,i))||t.push(i);return{arrayValue:{values:t}}}class cg extends $I{constructor(e){super(),this.elements=e}}function zG(n,e){let t=qG(e);for(const i of n.elements)t=t.filter(r=>!Xc(r,i));return{arrayValue:{values:t}}}class Cy extends $I{constructor(e,t){super(),this.M=e,this.k=t}}function $G(n){return Oi(n.integerValue||n.doubleValue)}function qG(n){return S0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class R0{constructor(e,t){this.field=e,this.transform=t}}class QQ{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class WI{}function JQ(n,e,t){n instanceof k0?function(i,r,s){const c=i.value.clone(),d=KG(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ug?function(i,r,s){if(!qI(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=KG(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(YG(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zP(n,e,t){var r;n instanceof k0?function(i,r,s){if(!qI(i.precondition,r))return;const c=i.value.clone(),d=QG(i.fieldTransforms,s,r);c.setAll(d),r.convertToFoundDocument(ZG(r),c).setHasLocalMutations()}(n,e,t):n instanceof ug?function(i,r,s){if(!qI(i.precondition,r))return;const c=QG(i.fieldTransforms,s,r),d=r.data;d.setAll(YG(i)),d.setAll(c),r.convertToFoundDocument(ZG(r),d).setHasLocalMutations()}(n,e,t):qI(n.precondition,r=e)&&r.convertToNoDocument(Mt.min())}function XQ(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=jG(i.transform,r||null);null!=s&&(null==t&&(t=Ts.empty()),t.set(i.field,s))}return t||null}function WG(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&py(t,i,(r,s)=>function KQ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof lg&&i instanceof lg||t instanceof cg&&i instanceof cg?py(t.elements,i.elements,Xc):t instanceof Cy&&i instanceof Cy?Xc(t.k,i.k):t instanceof wy&&i instanceof wy);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}function ZG(n){return n.isFoundDocument()?n.version:Mt.min()}class k0 extends WI{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}}class ug extends WI{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}}function YG(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function KG(n,e,t){const i=new Map;Pt(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],c=s.transform,d=e.data.field(s.field);i.set(s.field,YQ(c,d,t[r]))}return i}function QG(n,e,t){const i=new Map;for(const r of n){const s=r.transform,c=t.data.field(r.field);i.set(r.field,ZQ(s,c,e))}return i}class O0 extends WI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class $P extends WI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class eJ{constructor(e){this.count=e}}var rr,hn;function JG(n){switch(n){default:return ut();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function XG(n){if(void 0===n)return nr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case rr.OK:return fe.OK;case rr.CANCELLED:return fe.CANCELLED;case rr.UNKNOWN:return fe.UNKNOWN;case rr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case rr.INTERNAL:return fe.INTERNAL;case rr.UNAVAILABLE:return fe.UNAVAILABLE;case rr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case rr.NOT_FOUND:return fe.NOT_FOUND;case rr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case rr.ABORTED:return fe.ABORTED;case rr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case rr.DATA_LOSS:return fe.DATA_LOSS;default:return ut()}}(hn=rr||(rr={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";class zh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ng(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return gG(this.inner)}size(){return this.innerSize}}const tJ=new $i(Je.comparator);function hl(){return tJ}const nJ=new $i(Je.comparator);function qP(...n){let e=nJ;for(const t of n)e=e.insert(t.key,t);return e}function P0(){return new zh(n=>n.toString(),(n,e)=>n.isEqual(e))}const iJ=new $i(Je.comparator),rJ=new Kn(Je.comparator);function xn(...n){let e=rJ;for(const t of n)e=e.add(t);return e}const sJ=new Kn(Gt);function ZI(){return sJ}class N0{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,F0.createSynthesizedTargetChangeForCurrentChange(e,t)),new N0(Mt.min(),i,ZI(),hl(),xn())}}class F0{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new F0(mr.EMPTY_BYTE_STRING,t,xn(),xn(),xn())}}class YI{constructor(e,t,i,r){this.O=e,this.removedTargetIds=t,this.key=i,this.F=r}}class e3{constructor(e,t){this.targetId=e,this.$=t}}class t3{constructor(e,t,i=mr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class n3{constructor(){this.B=0,this.L=s3(),this.U=mr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=xn(),t=xn(),i=xn();return this.L.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ut()}}),new F0(this.U,this.q,e,t,i)}J(){this.K=!1,this.L=s3()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class oJ{constructor(e){this.nt=e,this.st=new Map,this.it=hl(),this.rt=r3(),this.ot=new Kn(Gt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const i=this.lt(t);switch(e.state){case 0:this.ft(t)&&i.W(e.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(e.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(t);break;case 3:this.ft(t)&&(i.et(),i.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),i.W(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((i,r)=>{this.ft(r)&&t(r)})}_t(e){const t=e.targetId,i=e.$.count,r=this.wt(t);if(r){const s=r.target;if(GI(s))if(0===i){const c=new Je(s.path);this.ct(t,c,Xn.newNoDocument(c,Mt.min()))}else Pt(1===i);else this.gt(t)!==i&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,c)=>{const d=this.wt(c);if(d){if(s.current&&GI(d.target)){const p=new Je(d.target.path);null!==this.it.get(p)||this.It(c,p)||this.ct(c,p,Xn.newNoDocument(p,e))}s.j&&(t.set(c,s.H()),s.J())}});let i=xn();this.rt.forEach((s,c)=>{let d=!0;c.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.it.forEach((s,c)=>c.setReadTime(e));const r=new N0(e,t,this.ot,this.it,i);return this.it=hl(),this.rt=r3(),this.ot=new Kn(Gt),r}at(e,t){if(!this.ft(e))return;const i=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,i),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,i){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),i&&(this.it=this.it.insert(t,i))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new n3,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Kn(Gt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new n3),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function r3(){return new $i(Je.comparator)}function s3(){return new $i(Je.comparator)}const aJ={asc:"ASCENDING",desc:"DESCENDING"},lJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class cJ{constructor(e,t){this.databaseId=e,this.N=t}}function L0(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o3(n,e){return n.N?e.toBase64():e.toUint8Array()}function uJ(n,e){return L0(n,e.toTimestamp())}function Lr(n){return Pt(!!n),Mt.fromTimestamp(function(e){const t=Uh(e);return new zi(t.seconds,t.nanos)}(n))}function WP(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function a3(n){const e=dn.fromString(n);return Pt(m3(e)),e}function B0(n,e){return WP(n.databaseId,e.path)}function eu(n,e){const t=a3(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(c3(t))}function ZP(n,e){return WP(n.databaseId,e)}function l3(n){const e=a3(n);return 4===e.length?dn.emptyPath():c3(e)}function V0(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function c3(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function u3(n,e,t){return{name:B0(n,e),fields:t.value.mapValue.fields}}function d3(n,e,t){const i=eu(n,e.name),r=Lr(e.updateTime),s=new Ts({mapValue:{fields:e.fields}}),c=Xn.newFoundDocument(i,r,s);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function U0(n,e){let t;if(e instanceof k0)t={update:u3(n,e.key,e.value)};else if(e instanceof O0)t={delete:B0(n,e.key)};else if(e instanceof ug)t={update:u3(n,e.key,e.data),updateMask:vJ(e.fieldMask)};else{if(!(e instanceof $P))return ut();t={verify:B0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof wy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof lg)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof cg)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Cy)return{fieldPath:s.field.canonicalString(),increment:c.k};throw ut()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:uJ(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ut()),t;var r}function YP(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?ir.updateTime(Lr(r.updateTime)):void 0!==r.exists?ir.exists(r.exists):ir.none():ir.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(Pt("REQUEST_TIME"===c.setToServerValue),d=new wy):"appendMissingElements"in c?d=new lg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new cg(c.removeAllFromArray.values||[]):"increment"in c?d=new Cy(s,c.increment):ut();const p=gr.fromServerFormat(c.fieldPath);return new R0(p,d)}(n,r)):[];var r;if(e.update){const r=eu(n,e.update.name),s=new Ts({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new gy((e.updateMask.fieldPaths||[]).map(y=>gr.fromServerFormat(y)));return new ug(r,s,c,t,i)}return new k0(r,s,t,i)}if(e.delete){const r=eu(n,e.delete);return new O0(r,t)}if(e.verify){const r=eu(n,e.verify);return new $P(r,t)}return ut()}function h3(n,e){return{documents:[ZP(n,e.path)]}}function f3(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=ZP(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ZP(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const y=p.map(E=>function(T){if("=="===T.op){if(bG(T.value))return{unaryFilter:{field:Ey(T.field),op:"IS_NAN"}};if(vG(T.value))return{unaryFilter:{field:Ey(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(bG(T.value))return{unaryFilter:{field:Ey(T.field),op:"IS_NOT_NAN"}};if(vG(T.value))return{unaryFilter:{field:Ey(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ey(T.field),op:mJ(T.op),value:T.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:Ey((E=y).field),direction:gJ(E.dir)};var E})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=(y=e.limit,n.N||E0(y)?y:{value:y});var y,d,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function p3(n){let e=l3(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Pt(1===i);const E=t.from[0];E.allDescendants?r=E.collectionId:e=e.child(E.collectionId)}let s=[];t.where&&(s=g3(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(E=>{return new yy(Dy((T=E).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let d=null;t.limit&&(d=function(E){let T;return T="object"==typeof E?E.value:E,E0(T)?null:T}(t.limit));let p=null;var E;t.startAt&&(p=new Gh((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new Gh(E.values||[],!E.before)}(t.endAt)),PG(e,r,c,s,d,"F",p,y)}function g3(n){return n?void 0!==n.unaryFilter?[yJ(n)]:void 0!==n.fieldFilter?[_J(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>g3(e)).reduce((e,t)=>e.concat(t)):ut():[]}function gJ(n){return aJ[n]}function mJ(n){return lJ[n]}function Ey(n){return{fieldPath:n.canonicalString()}}function Dy(n){return gr.fromServerFormat(n.fieldPath)}function _J(n){return ns.create(Dy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function yJ(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Dy(n.unaryFilter.field);return ns.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Dy(n.unaryFilter.field);return ns.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Dy(n.unaryFilter.field);return ns.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Dy(n.unaryFilter.field);return ns.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function vJ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function m3(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Js(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_3(e)),e=bJ(n.get(t),e);return _3(e)}function bJ(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function _3(n){return n+"\x01\x01"}function tu(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const c=n.indexOf("\x01",s);switch((c<0||c>t)&&ut(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:ut()}s=c+2}return new dn(i)}const y3=["userId","batchId"];function KI(n,e){return[n,Js(e)]}function v3(n,e,t){return[n,Js(e),t]}const wJ={},CJ=["prefixPath","collectionGroup","readTime","documentId"],EJ=["prefixPath","collectionGroup","documentId"],DJ=["collectionGroup","readTime","prefixPath","documentId"],TJ=["canonicalId","targetId"],SJ=["targetId","path"],IJ=["path","targetId"],AJ=["collectionId","parent"],MJ=["indexId","uid"],xJ=["uid","sequenceNumber"],RJ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kJ=["indexId","uid","orderedDocumentKey"],OJ=["userId","collectionPath","documentId"],PJ=["userId","collectionPath","largestBatchId"],NJ=["userId","collectionGroup","largestBatchId"],b3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],FJ=[...b3,"documentOverlays"],w3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LJ=[...w3,"indexConfiguration","indexState","indexEntries"],C3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,i)=>{t(e)})}static reject(e){return new me((t,i)=>{i(e)})}static waitFor(e){return new me((t,i)=>{let r=0,s=0,c=!1;e.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&t()},p=>i(p))}),c=!0,s===r&&t()})}static or(e){let t=me.resolve(!1);for(const i of e)t=t.next(r=>r?me.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}}class QI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Fr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new H0(e,t.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=KP(i.target.error);this.At.reject(new H0(e,r))}}static open(e,t,i,r){try{return new QI(t,e.transaction(r,i))}catch(s){throw new H0(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new VJ(t)}}class ic{constructor(e,t,i){this.name=e,this.version=t,this.Pt=i,12.2===ic.Vt((0,N.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),hg(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,N.hl)())return!1;if(ic.St())return!0;const e=(0,N.z$)(),t=ic.Vt(e),i=0<t&&t<10,r=ic.Dt(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Nt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new H0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new Pe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Pe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new H0(e,d))},s.onupgradeneeded=c=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,s.transaction,c.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=i=>t.Mt(i)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.Nt(e);const p=QI.open(s.db,e,c?"readonly":"readwrite",i),y=r(p).next(E=>(p.bt(),E)).catch(E=>(p.abort(E),me.reject(E))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&d<3;if(Ve("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),s.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class BJ{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return hg(this.Ft.delete())}}class H0 extends Pe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dg(n){return"IndexedDbTransactionError"===n.name}class VJ{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),hg(i)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),hg(this.store.add(e))}get(e){return hg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),hg(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),hg(this.store.count())}qt(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.Kt(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new me((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}Gt(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new me((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Qt(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.jt=!1;const r=this.cursor(i);return this.Kt(r,(s,c,d)=>d.delete())}Wt(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.Kt(r,t)}zt(e){const t=this.cursor({});return new me((i,r)=>{t.onerror=s=>{const c=KP(s.target.error);r(c)},t.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}Kt(e,t){const i=[];return new me((r,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const p=new BJ(d),y=t(d.primaryKey,d.value,p);if(y instanceof me){const E=y.catch(T=>(p.done(),me.reject(T)));i.push(E)}p.isDone?r():null===p.Lt?d.continue():d.continue(p.Lt)}}).next(()=>me.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.jt?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hg(n){return new me((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=KP(i.target.error);t(r)}})}let D3=!1;function KP(n){const e=ic.Vt((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return D3||(D3=!0,setTimeout(()=>{throw i},0)),i}}return n}class T3 extends E3{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Br(n,e){const t=nt(n);return ic.xt(t.Ht,e)}class QP{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&JQ(s,e,i[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&zP(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&zP(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const i=e.get(t.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(Mt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xn())}isEqual(e){return this.batchId===e.batchId&&py(this.mutations,e.mutations,(t,i)=>WG(t,i))&&py(this.baseMutations,e.baseMutations,(t,i)=>WG(t,i))}}class JP{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Pt(e.mutations.length===i.length);let r=iJ;const s=e.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new JP(e,t,i,r)}}class XP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $h{constructor(e,t,i,r,s=Mt.min(),c=Mt.min(),d=mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(e){return new $h(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new $h(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new $h(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class S3{constructor(e){this.Jt=e}}function I3(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:JI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:B0(r=n.Jt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:L0(r,s.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:fg(e.version)};else{if(!e.isUnknownDocument())return ut();i.unknownDocument={path:t.path.toArray(),version:fg(e.version)}}var r,s;return i}function JI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pg(n){const e=new zi(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function Ty(n,e){const t=(e.baseMutations||[]).map(s=>YP(n.Jt,s));for(let s=0;s<e.mutations.length-1;++s){const c=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(c.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>YP(n.Jt,s)),r=zi.fromMillis(e.localWriteTimeMs);return new QP(e.batchId,r,t,i)}function j0(n){const e=pg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pg(n.lastLimboFreeSnapshotVersion):Mt.min();let i;var r;return void 0!==n.query.documents?(Pt(1===(r=n.query).documents.length),i=dl(vy(l3(r.documents[0])))):i=dl(p3(n.query)),new $h(i,n.targetId,0,n.lastListenSequenceNumber,e,t,mr.fromBase64String(n.resumeToken))}function A3(n,e){const t=fg(e.snapshotVersion),i=fg(e.lastLimboFreeSnapshotVersion);let r;r=GI(e.target)?h3(n.Jt,e.target):f3(n.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ag(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function eN(n){const e=p3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?NG(e,e.limit,"L"):e}function tN(n,e){return new XP(e.largestBatchId,YP(n.Jt,e.overlayMutation))}function M3(n,e){const t=e.path.lastSegment();return[n,Js(e.path.popLast()),t]}class HJ{getBundleMetadata(e,t){return x3(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:pg(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return x3(e).put({bundleId:(i=t).id,createTime:fg(Lr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return R3(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:eN(r.bundledQuery),readTime:pg(r.readTime)};var r})}saveNamedQuery(e,t){return R3(e).put({name:(i=t).name,readTime:fg(Lr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function x3(n){return Br(n,"bundles")}function R3(n){return Br(n,"namedQueries")}class nN{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new nN(e,t.uid||"")}getOverlay(e,t){return G0(e).get(M3(this.userId,t)).next(i=>i?tN(this.M,i):null)}saveOverlays(e,t,i){const r=[];return i.forEach((s,c)=>{const d=new XP(t,c);r.push(this.Xt(e,d))}),me.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(c=>r.add(Js(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(G0(e).Qt("collectionPathOverlayIndex",d))}),me.waitFor(s)}getOverlaysForCollection(e,t,i){const r=P0(),s=Js(t),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return G0(e).qt("collectionPathOverlayIndex",c).next(d=>{for(const p of d){const y=tN(this.M,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=P0();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return G0(e).Wt({index:"collectionGroupOverlayIndex",range:d},(p,y,E)=>{const T=tN(this.M,y);s.size()<r||T.largestBatchId===c?(s.set(T.getKey(),T),c=T.largestBatchId):E.done()}).next(()=>s)}Xt(e,t){return G0(e).put(function(i,r,s){const[c,d,p]=M3(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:U0(i.Jt,s.mutation)}}(this.M,this.userId,t))}}function G0(n){return Br(n,"documentOverlays")}class gg{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Oi(e.integerValue));else if("doubleValue"in e){const i=Oi(e.doubleValue);isNaN(i)?this.ne(t,13):(this.ne(t,15),D0(i)?t.se(0):t.se(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ne(t,20),"string"==typeof i?t.ie(i):(t.ie(`${i.seconds||""}`),t.se(i.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(ig(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?wG(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ut()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const i=e.fields||{};this.ne(t,55);for(const r of Object.keys(i))this.re(r,t),this.te(i[r],t)}he(e,t){const i=e.values||[];this.ne(t,50);for(const r of i)this.te(r,t)}ae(e,t){this.ne(t,37),Je.fromName(e).path.forEach(i=>{this.ne(t,60),this.le(i,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function jJ(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function k3(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=jJ(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}gg.fe=new gg;class GJ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this._e(i.value),i=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.ge(i.value),i=t.next();this.ye()}pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(t<"\ud800"||"\udbff"<t)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{const r=t.codePointAt(0);this._e(240|r>>>18),this._e(128|63&r>>>12),this._e(128|63&r>>>6),this._e(128|63&r)}}this.we()}Ie(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{const r=t.codePointAt(0);this.ge(240|r>>>18),this.ge(128|63&r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r)}}this.ye()}Te(e){const t=this.Ee(e),i=k3(t);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Re(e){const t=this.Ee(e),i=k3(t);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class zJ{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class $J{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class z0{constructor(){this.De=new GJ,this.Ce=new zJ(this.De),this.xe=new $J(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class mg{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new mg(this.indexId,this.documentKey,this.arrayValue,i)}}function _g(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=O3(n.arrayValue,e.arrayValue),0!==t?t:(t=O3(n.directionalValue,e.directionalValue),0!==t?t:Je.comparator(n.documentKey,e.documentKey)))}function O3(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class qJ{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const i=t;i.S()?this.Fe=i:this.Oe.push(i)}}$e(e){const t=BP(e);if(void 0!==t&&!this.Be(t))return!1;const i=og(e);let r=0,s=0;for(;r<i.length&&this.Be(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Fe){const c=i[r];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Me.length||!this.Ue(this.Me[s++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class WJ{constructor(){this.qe=new iN}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(nc.min())}updateCollectionGroup(e,t,i){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class iN{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Kn(dn.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Kn(dn.comparator)).toArray()}}const XI=new Uint8Array(0);class ZJ{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new iN,this.Ge=new zh(i=>ag(i),(i,r)=>M0(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const s={collectionId:i,parent:Js(r)};return P3(e).put(s)}return me.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[fG(t),""],!1,!0);return P3(e).qt(r).next(s=>{for(const c of s){if(c.collectionId!==t)break;i.push(tu(c.parent))}return i})}addFieldIndex(e,t){const i=eA(e),r={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var s;return delete r.indexId,i.add(r).next()}deleteFieldIndex(e,t){const i=eA(e),r=tA(e),s=$0(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=$0(e);let r=!0;const s=new Map;return me.forEach(this.Qe(t),c=>this.je(e,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=xn();const d=[];return me.forEach(s,(p,y)=>{var E;Ve("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(He=>`${He.fieldPath}:${He.kind}`).join(",")}`} to execute ${ag(t)}`);const T=function(He,Ge){const At=BP(Ge);if(void 0===At)return null;for(const xt of zI(He,At.fieldPath))switch(xt.op){case"array-contains-any":return xt.value.arrayValue.values||[];case"array-contains":return[xt.value]}return null}(y,p),x=function(He,Ge){const At=new Map;for(const xt of og(Ge))for(const nn of zI(He,xt.fieldPath))switch(nn.op){case"==":case"in":At.set(xt.fieldPath.canonicalString(),nn.value);break;case"not-in":case"!=":return At.set(xt.fieldPath.canonicalString(),nn.value),Array.from(At.values())}return null}(y,p),P=function(He,Ge){const At=[];let xt=!0;for(const nn of og(Ge)){const qi=0===nn.kind?MG(He,nn.fieldPath,He.startAt):xG(He,nn.fieldPath,He.startAt);At.push(qi.value),xt&&(xt=qi.inclusive)}return new Gh(At,xt)}(y,p),L=function(He,Ge){const At=[];let xt=!0;for(const nn of og(Ge)){const qi=0===nn.kind?xG(He,nn.fieldPath,He.endAt):MG(He,nn.fieldPath,He.endAt);At.push(qi.value),xt&&(xt=qi.inclusive)}return new Gh(At,xt)}(y,p),Z=this.We(p,y,P),oe=this.We(p,y,L),Le=this.ze(p,y,x),We=this.He(p.indexId,T,Z,P.inclusive,oe,L.inclusive,Le);return me.forEach(We,He=>i.Gt(He,t.limit).next(Ge=>{Ge.forEach(At=>{const xt=Je.fromSegments(At.documentKey);c.has(xt)||(c=c.add(xt),d.push(xt))})}))}).next(()=>d)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,i,r,s,c,d){const p=(null!=t?t.length:1)*Math.max(i.length,s.length),y=p/(null!=t?t.length:1),E=[];for(let T=0;T<p;++T){const x=t?this.Je(t[T/y]):XI,P=this.Ye(e,x,i[T%y],r),L=this.Xe(e,x,s[T%y],c),Z=d.map(oe=>this.Ye(e,x,oe,!0));E.push(...this.createRange(P,L,Z))}return E}Ye(e,t,i,r){const s=new mg(e,Je.empty(),t,i);return r?s:s.ke()}Xe(e,t,i,r){const s=new mg(e,Je.empty(),t,i);return r?s.ke():s}je(e,t){const i=new qJ(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let c=null;for(const d of s)i.$e(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let i=2;return me.forEach(this.Qe(t),r=>this.je(e,r).next(s=>{s?0!==i&&s.fields.length<function(c){let d=new Kn(gr.comparator),p=!1;for(const y of c.filters){const E=y;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:d=d.add(E.field))}for(const y of c.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}Ze(e,t){const i=new z0;for(const r of og(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const c=i.Ne(r.kind);gg.fe.Zt(s,c)}return i.Se()}Je(e){const t=new z0;return gg.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const i=new z0;return gg.fe.Zt(sg(this.databaseId,t),i.Ne(function(r){const s=og(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.Se()}ze(e,t,i){if(null===i)return[];let r=[];r.push(new z0);let s=0;for(const c of og(e)){const d=i[s++];for(const p of r)if(this.en(t,c.fieldPath)&&S0(d))r=this.nn(r,c,d);else{const y=p.Ne(c.kind);gg.fe.Zt(d,y)}}return this.sn(r)}We(e,t,i){return this.ze(e,t,i.position)}sn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Se();return t}nn(e,t,i){const r=[...e],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const p=new z0;p.seed(d.Se()),gg.fe.Zt(c,p.Ne(t.kind)),s.push(p)}return s}en(e,t){return!!e.filters.find(i=>i instanceof ns&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=eA(e),r=tA(e);return(t?i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.qt()).next(s=>{const c=[];return me.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{c.push(function(y,E){const T=E?new A0(E.sequenceNumber,new nc(pg(E.readTime),new Je(tu(E.documentKey)),E.largestBatchId)):A0.empty(),x=y.fields.map(([P,L])=>new HI(gr.fromServerFormat(P),L));return new UI(y.indexId,y.collectionGroup,x,T)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Gt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=eA(e),s=tA(e);return this.rn(e).next(c=>r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>me.forEach(d,p=>{return s.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:fg((x=i).readTime),documentKey:Js(x.documentKey.path),largestBatchId:x.largestBatchId});var x})))}updateIndexEntries(e,t){const i=new Map;return me.forEach(t,(r,s)=>{const c=i.get(r.collectionGroup);return(c?me.resolve(c):this.getFieldIndexes(e,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),me.forEach(d,p=>this.on(e,r,p).next(y=>{const E=this.un(s,p);return y.isEqual(E)?me.resolve():this.an(e,s,p,y,E)}))))})}cn(e,t,i,r){return $0(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(i,t.key),documentKey:t.key.path.toArray()})}hn(e,t,i,r){return $0(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(i,t.key),t.key.path.toArray()])}on(e,t,i){const r=$0(e);let s=new Kn(_g);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.tn(i,t)])},(c,d)=>{s=s.add(new mg(i.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}un(e,t){let i=new Kn(_g);const r=this.Ze(t,e);if(null==r)return i;const s=BP(t);if(null!=s){const c=e.data.field(s.fieldPath);if(S0(c))for(const d of c.arrayValue.values||[])i=i.add(new mg(t.indexId,e.key,this.Je(d),r))}else i=i.add(new mg(t.indexId,e.key,XI,r));return i}an(e,t,i,r,s){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(d,p,y,E,T){const x=d.getIterator(),P=p.getIterator();let L=_y(x),Z=_y(P);for(;L||Z;){let oe=!1,Le=!1;if(L&&Z){const We=y(L,Z);We<0?Le=!0:We>0&&(oe=!0)}else null!=L?Le=!0:oe=!0;oe?(E(Z),Z=_y(P)):Le?(T(L),L=_y(x)):(L=_y(x),Z=_y(P))}}(r,s,_g,d=>{c.push(this.cn(e,t,i,d))},d=>{c.push(this.hn(e,t,i,d))}),me.waitFor(c)}rn(e){let t=1;return tA(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((c,d)=>_g(c,d)).filter((c,d,p)=>!d||0!==_g(c,p[d-1]));const r=[];r.push(e);for(const c of i){const d=_g(c,e),p=_g(c,t);if(0===d)r[0]=e.ke();else if(d>0&&p<0)r.push(c),r.push(c.ke());else if(p>0)break}r.push(t);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,XI,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,XI,[]]));return s}getMinOffset(e,t){let i;return me.forEach(this.Qe(t),r=>this.je(e,r).next(s=>{s?(!i||SG(s.indexState.offset,i)<0)&&(i=s.indexState.offset):i=nc.min()})).next(()=>i)}}function P3(n){return Br(n,"collectionParents")}function $0(n){return Br(n,"indexEntries")}function eA(n){return Br(n,"indexConfiguration")}function tA(n){return Br(n,"indexState")}const N3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Io{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Io(e,Io.DEFAULT_COLLECTION_PERCENTILE,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function F3(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=i.Wt({range:c},(E,T,x)=>(d++,x.delete()));s.push(p.next(()=>{Pt(1===d)}));const y=[];for(const E of t.mutations){const T=v3(e,E.key.path,t.batchId);s.push(r.delete(T)),y.push(E.key)}return me.waitFor(s).next(()=>y)}function nA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}Io.DEFAULT_COLLECTION_PERCENTILE=10,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Io.DEFAULT=new Io(41943040,Io.DEFAULT_COLLECTION_PERCENTILE,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Io.DISABLED=new Io(-1,0,0);class rN{constructor(e,t,i,r){this.userId=e,this.M=t,this.indexManager=i,this.referenceDelegate=r,this.ln={}}static Yt(e,t,i,r){Pt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new rN(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qh(e).Wt({index:"userMutationsIndex",range:i},(r,s,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=Sy(e),c=qh(e);return c.add({}).next(d=>{Pt("number"==typeof d);const p=new QP(d,t,i,r),y=function(x,P,L){const Z=L.baseMutations.map(Le=>U0(x.Jt,Le)),oe=L.mutations.map(Le=>U0(x.Jt,Le));return{userId:P,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:Z,mutations:oe}}(this.M,this.userId,p),E=[];let T=new Kn((x,P)=>Gt(x.canonicalString(),P.canonicalString()));for(const x of r){const P=v3(this.userId,x.key.path,d);T=T.add(x.key.path.popLast()),E.push(c.put(y)),E.push(s.put(P,wJ))}return T.forEach(x=>{E.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.ln[d]=p.keys()}),me.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return qh(e).get(t).next(i=>i?(Pt(i.userId===this.userId),Ty(this.M,i)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.ln[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return qh(e).Wt({index:"userMutationsIndex",range:r},(c,d,p)=>{d.userId===this.userId&&(Pt(d.batchId>=i),s=Ty(this.M,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return qh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qh(e).qt("userMutationsIndex",t).next(i=>i.map(r=>Ty(this.M,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=KI(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return Sy(e).Wt({range:r},(c,d,p)=>{const[y,E,T]=c,x=tu(E);if(y===this.userId&&t.path.isEqual(x))return qh(e).get(T).next(P=>{if(!P)throw ut();Pt(P.userId===this.userId),s.push(Ty(this.M,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Kn(Gt);const r=[];return t.forEach(s=>{const c=KI(this.userId,s.path),d=IDBKeyRange.lowerBound(c),p=Sy(e).Wt({range:d},(y,E,T)=>{const[x,P,L]=y,Z=tu(P);x===this.userId&&s.path.isEqual(Z)?i=i.add(L):T.done()});r.push(p)}),me.waitFor(r).next(()=>this.dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=KI(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new Kn(Gt);return Sy(e).Wt({range:c},(p,y,E)=>{const[T,x,P]=p,L=tu(x);T===this.userId&&i.isPrefixOf(L)?L.length===r&&(d=d.add(P)):E.done()}).next(()=>this.dn(e,d))}dn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(qh(e).get(s).next(c=>{if(null===c)throw ut();Pt(c.userId===this.userId),i.push(Ty(this.M,c))}))}),me.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return F3(e.Ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Sy(e).Wt({range:i},(s,c,d)=>{if(s[0]===this.userId){const p=tu(s[1]);r.push(p)}else d.done()}).next(()=>{Pt(0===r.length)})})}containsKey(e,t){return L3(e,this.userId,t)}wn(e){return B3(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function L3(n,e,t){const i=KI(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return Sy(n).Wt({range:s,jt:!0},(d,p,y)=>{const[E,T,x]=d;E===e&&T===r&&(c=!0),y.done()}).next(()=>c)}function qh(n){return Br(n,"mutations")}function Sy(n){return Br(n,"documentMutations")}function B3(n){return Br(n,"mutationQueues")}class yg{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new yg(0)}static yn(){return new yg(-1)}}class YJ{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const i=new yg(t.highestTargetId);return t.highestTargetId=i.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Mt.fromTimestamp(new zi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.pn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.In(e,r)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(i=>(i.targetCount+=1,this.En(t,i),this.In(e,i))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Iy(e).delete(t.targetId)).next(()=>this.pn(e)).next(i=>(Pt(i.targetCount>0),i.targetCount-=1,this.In(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return Iy(e).Wt((c,d)=>{const p=j0(d);p.sequenceNumber<=t&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(e,p)))}).next(()=>me.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Iy(e).Wt((i,r)=>{const s=j0(r);t(s)})}pn(e){return V3(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}In(e,t){return V3(e).put("targetGlobalKey",t)}Tn(e,t){return Iy(e).put(A3(this.M,t))}En(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=ag(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Iy(e).Wt({range:r,index:"queryTargetsIndex"},(c,d,p)=>{const y=j0(d);M0(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=Wh(e);return t.forEach(c=>{const d=Js(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(e,i,c))}),me.waitFor(r)}removeMatchingKeys(e,t,i){const r=Wh(e);return me.forEach(t,s=>{const c=Js(s.path);return me.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=Wh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Wh(e);let s=xn();return r.Wt({range:i,jt:!0},(c,d,p)=>{const y=tu(c[1]),E=new Je(y);s=s.add(E)}).next(()=>s)}containsKey(e,t){const i=Js(t.path),r=IDBKeyRange.bound([i],[fG(i)],!1,!0);let s=0;return Wh(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},([c,d],p,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}Et(e,t){return Iy(e).get(t).next(i=>i?j0(i):null)}}function Iy(n){return Br(n,"targets")}function V3(n){return Br(n,"targetGlobal")}function Wh(n){return Br(n,"targetDocuments")}function vg(n){return sN.apply(this,arguments)}function sN(){return sN=(0,Ee.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==C3)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),sN.apply(this,arguments)}function U3([n,e],[t,i]){const r=Gt(n,t);return 0===r?Gt(e,i):r}class KJ{constructor(e){this.An=e,this.buffer=new Kn(U3),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();U3(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QJ{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const i=this.Vn?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,Ee.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(r){dg(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield vg(r)}yield t.Sn(e)}))}}class JJ{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return me.resolve(da.A);const i=new KJ(t);return this.Dn.forEachTarget(e,r=>i.Pn(r.sequenceNumber)).next(()=>this.Dn.xn(e,r=>i.Pn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Dn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(N3)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N3):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let i,r,s,c,d,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(e,r))).next(T=>(i=T,d=Date.now(),this.removeTargets(e,i,t))).next(T=>(s=T,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(y=Date.now(),OP()<=il.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-E}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${T} documents in `+(y-p)+`ms\nTotal Duration: ${y-E}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:T})))}}class XJ{constructor(e,t){this.db=e,this.garbageCollector=new JJ(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}kn(e){let t=0;return this.xn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(i,r)=>t(r))}addReference(e,t,i){return iA(e,i)}removeReference(e,t,i){return iA(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return iA(e,t)}On(e,t){return function(i,r){let s=!1;return B3(i).zt(c=>L3(i,c,r).next(d=>(d&&(s=!0),me.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Mn(e,(c,d)=>{if(d<=t){const p=this.On(e,c).next(y=>{if(!y)return s++,i.getEntry(e,c).next(()=>(i.removeEntry(c,Mt.min()),Wh(e).delete([0,Js(c.path)])))});r.push(p)}}).next(()=>me.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return iA(e,t)}Mn(e,t){const i=Wh(e);let r,s=da.A;return i.Wt({index:"documentTargetsIndex"},([c,d],{path:p,sequenceNumber:y})=>{0===c?(s!==da.A&&t(new Je(tu(r)),s),s=y,r=p):s=da.A}).next(()=>{s!==da.A&&t(new Je(tu(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iA(n,e){return Wh(n).put((i=n.currentSequenceNumber,{targetId:0,path:Js(e.path),sequenceNumber:i}));var i}class H3{constructor(){this.changes=new zh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?me.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eX{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return bg(e).put(i)}removeEntry(e,t,i){return bg(e).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],JI(s),c[c.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Fn(e,i)))}getEntry(e,t){let i=Xn.newInvalidDocument(t);return bg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(q0(t))},(r,s)=>{i=this.$n(t,s)}).next(()=>i)}Bn(e,t){let i={size:0,document:Xn.newInvalidDocument(t)};return bg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(q0(t))},(r,s)=>{i={document:this.$n(t,s),size:nA(s)}}).next(()=>i)}getEntries(e,t){let i=hl();return this.Ln(e,t,(r,s)=>{const c=this.$n(r,s);i=i.insert(r,c)}).next(()=>i)}Un(e,t){let i=hl(),r=new $i(Je.comparator);return this.Ln(e,t,(s,c)=>{const d=this.$n(s,c);i=i.insert(s,d),r=r.insert(s,nA(c))}).next(()=>({documents:i,qn:r}))}Ln(e,t,i){if(t.isEmpty())return me.resolve();let r=new Kn(z3);t.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(q0(r.first()),q0(r.last())),c=r.getIterator();let d=c.getNext();return bg(e).Wt({index:"documentKeyIndex",range:s},(p,y,E)=>{const T=Je.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&z3(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,y),d=c.hasNext()?c.getNext():null),d?E.Ut(q0(d)):E.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),JI(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bg(e).qt(IDBKeyRange.bound(r,s,!0)).next(c=>{let d=hl();for(const p of c){const y=this.$n(Je.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,i,r){let s=hl();const c=G3(t,i),d=G3(t,nc.max());return bg(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(p,y,E)=>{const T=this.$n(Je.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(T.key,T),s.size===r&&E.done()}).next(()=>s)}newChangeBuffer(e){return new tX(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return j3(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}Fn(e,t){return j3(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const i=function UJ(n,e){let t;if(e.document)t=d3(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Je.fromSegments(e.noDocument.path),r=pg(e.noDocument.readTime);t=Xn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const i=Je.fromSegments(e.unknownDocument.path),r=pg(e.unknownDocument.version);t=Xn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new zi(i[0],i[1]);return Mt.fromTimestamp(r)}(e.readTime)),t}(this.M,t);if(!i.isNoDocument()||!i.version.isEqual(Mt.min()))return i}return Xn.newInvalidDocument(e)}}class tX extends H3{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new zh(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Kn((s,c)=>Gt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Gn.get(s);if(t.push(this.Kn.removeEntry(e,s,d.readTime)),c.isValidDocument()){const p=I3(this.Kn.M,c);r=r.add(s.path.popLast()),i+=nA(p)-d.size,t.push(this.Kn.addEntry(e,s,p))}else if(i-=d.size,this.trackRemovals){const p=I3(this.Kn.M,c.convertToNoDocument(Mt.min()));t.push(this.Kn.addEntry(e,s,p))}}),r.forEach(s=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Kn.updateMetadata(e,i)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(i=>(this.Gn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:i,qn:r})=>(r.forEach((s,c)=>{this.Gn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function j3(n){return Br(n,"remoteDocumentGlobal")}function bg(n){return Br(n,"remoteDocumentsV14")}function q0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function G3(n,e){const t=e.documentKey.path.toArray();return[n,JI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function z3(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=Gt(t[s],i[s]),r)return r;return r=Gt(t.length,i.length),r||(r=Gt(t[t.length-2],i[i.length-2]),r||Gt(t[t.length-1],i[i.length-1]))}class nX{constructor(e){this.M=e}kt(e,t,i,r){const s=new QI("createOrUpgrade",t);var d;i<1&&r>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y3,{unique:!0}),d.createObjectStore("documentMutations"),$3(e),function(d){d.createObjectStore("remoteDocuments")}(e));let c=me.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),$3(e)),c=c.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,p){return p.store("mutations").qt().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y3,{unique:!0});const E=p.store("mutations"),T=y.map(x=>E.put(x));return me.waitFor(T)})}(e,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(c=c.next(()=>this.Qn(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.jn(s)))),i<7&&r>=7&&(c=c.next(()=>this.Wn(s))),i<8&&r>=8&&(c=c.next(()=>this.zn(e,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(c=c.next(()=>this.Hn(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:OJ});p.createIndex("collectionPathOverlayIndex",PJ,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",NJ,{unique:!1})}(e)})),i<13&&r>=13&&(c=c.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:CJ});p.createIndex("documentKeyIndex",EJ),p.createIndex("collectionGroupIndex",DJ)}(e)).next(()=>this.Jn(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:MJ}).createIndex("sequenceNumberIndex",xJ,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:RJ}).createIndex("documentKeyIndex",kJ,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((i,r)=>{t+=nA(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Qn(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.qt().next(r=>me.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",c).next(d=>me.forEach(d,p=>{Pt(p.userId===s.userId);const y=Ty(this.M,p);return F3(e,s.userId,y).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Wt((c,d)=>{const p=new dn(c),y=[0,Js(p)];s.push(t.get(y).next(E=>E?me.resolve():t.put({targetId:0,path:Js(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>me.waitFor(s))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:AJ});const i=t.store("collectionParents"),r=new iN,s=c=>{if(r.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:Js(p)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,d)=>{const p=new dn(c);return s(p.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,d,p],y)=>{const E=tu(d);return s(E.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((i,r)=>{const s=j0(r),c=A3(this.M,s);return t.put(c)})}Jn(e,t){const i=t.store("remoteDocuments"),r=[];return i.Wt((s,c)=>{const d=t.store("remoteDocumentsV14"),p=(y=c,y.document?new Je(dn.fromString(y.document.name).popFirst(5)):y.noDocument?Je.fromSegments(y.noDocument.path):y.unknownDocument?Je.fromSegments(y.unknownDocument.path):ut()).path.toArray();var y;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(E))}).next(()=>me.waitFor(r))}}function $3(n){n.createObjectStore("targetDocuments",{keyPath:SJ}).createIndex("documentTargetsIndex",IJ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",TJ,{unique:!0}),n.createObjectStore("targetGlobal")}const oN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aN{constructor(e,t,i,r,s,c,d,p,y,E,T=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Yn=s,this.window=c,this.document=d,this.Xn=y,this.Zn=E,this.ts=T,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=x=>Promise.resolve(),!aN.vt())throw new Pe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XJ(this,r),this.hs=t+"main",this.M=new S3(p),this.ls=new ic(this.hs,this.ts,new nX(this.M)),this.fs=new YJ(this.referenceDelegate,this.M),this.ds=new eX(this.M),this._s=new HJ,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===E&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,oN);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new da(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var i=(0,Ee.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ee.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(dg(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return W0(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return rA(e).delete(this.clientId)}vs(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Br(i,"clientMetadata");return r.qt().next(s=>{const c=e.Ds(s,18e5),d=s.filter(p=>-1===c.indexOf(p));return me.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.ws)for(const i of t)e.ws.removeItem(e.Cs(i.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):W0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,oN);return!1}}return!(!this.networkEnabled||!this.inForeground)||rA(e).qt().next(i=>void 0===this.Ds(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new T3(t,da.A);return e.Rs(i).next(()=>e.Vs(i))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(i=>this.Ss(i.updateTimeMs,t)&&!this.xs(i.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>rA(e).qt().next(t=>this.Ds(t,18e5).map(i=>i.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return rN.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new ZJ(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return nN.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,i){Ve("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=14===(c=this.ts)?LJ:13===c?w3:12===c?FJ:11===c?b3:void ut();var c;let d;return this.ls.runTransaction(e,r,s,p=>(d=new T3(p,this.es?this.es.next():da.A),"readwrite-primary"===t?this.Es(d).next(y=>!!y||this.As(d)).next(y=>{if(!y)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(fe.FAILED_PRECONDITION,C3);return i(d)}).next(y=>this.bs(d).next(()=>y)):this.$s(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}$s(e){return W0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(fe.FAILED_PRECONDITION,oN)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return W0(e).put("owner",t)}static vt(){return ic.vt()}Rs(e){const t=W0(e);return t.get("owner").next(i=>this.Ps(i)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const i=Date.now();return!(e<i-t||e>i&&(nr(`Detected an update time that is in the future: ${e} > ${i}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,N.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const i=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return nr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function W0(n){return Br(n,"owner")}function rA(n){return Br(n,"clientMetadata")}function lN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class iX{constructor(e,t,i){this.ds=e,this.Bs=t,this.indexManager=i}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(i=>this.Us(e,t,i))}Us(e,t,i){return this.ds.getEntry(e,t).next(r=>{for(const s of i)s.applyToLocalView(r);return r})}qs(e,t){e.forEach((i,r)=>{for(const s of t)s.applyToLocalView(r)})}Ks(e,t){return this.ds.getEntries(e,t).next(i=>this.Gs(e,i).next(()=>i))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(i=>this.qs(t,i))}Qs(e,t,i){return Je.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.js(e,t.path):HP(t)?this.Ws(e,t,i):this.zs(e,t,i);var r}js(e,t){return this.Ls(e,new Je(t)).next(i=>{let r=qP();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Ws(e,t,i){const r=t.collectionGroup;let s=qP();return this.indexManager.getCollectionParents(e,r).next(c=>me.forEach(c,d=>{const p=(y=t,E=d.child(r),new dd(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.zs(e,p,i).next(y=>{y.forEach((E,T)=>{s=s.insert(E,T)})})}).next(()=>s))}zs(e,t,i){let r;return this.ds.getAllFromCollection(e,t.path,i).next(s=>(r=s,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const c of s)for(const d of c.mutations){const p=d.key;let y=r.get(p);null==y&&(y=Xn.newInvalidDocument(p),r=r.insert(p,y)),zP(d,y,c.localWriteTime),y.isFoundDocument()||(r=r.remove(p))}}).next(()=>(r.forEach((s,c)=>{GP(t,c)||(r=r.remove(s))}),r))}}class cN{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Hs=i,this.Js=r}static Ys(e,t){let i=xn(),r=xn();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new cN(e,t.fromCache,i,r)}}class q3{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,i,r){return this.ti(e,t).next(s=>s||this.ei(e,t,r,i)).next(s=>s||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,i,r){return function qQ(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Mt.min())?this.ni(e,t):this.Zs.Ks(e,i).next(s=>{const c=this.si(t,s);return this.ii(t,c,i,r)?this.ni(e,t):(OP()<=il.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jP(t)),this.ri(e,c,t,TG(r,-1)))})}si(e,t){let i=new Kn(BG(e));return t.forEach((r,s)=>{GP(e,s)&&(i=i.add(s))}),i}ii(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ni(e,t){return OP()<=il.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",jP(t)),this.Zs.Qs(e,t,nc.min())}ri(e,t,i,r){return this.Zs.Qs(e,i,r).next(s=>(t.forEach(c=>{s=s.insert(c.key,c)}),s))}}class rX{constructor(e,t,i,r){this.persistence=e,this.oi=t,this.M=r,this.ui=new $i(Gt),this.ai=new zh(s=>ag(s),M0),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(i)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new iX(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function W3(n,e,t,i){return new rX(n,e,t,i)}function Z3(n,e){return uN.apply(this,arguments)}function uN(){return uN=(0,Ee.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.Bs.getAllMutationBatches(i).next(s=>(r=s,t.li(e),t.Bs.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let p=xn();for(const y of r){c.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of s){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.fi.Ks(i,p).next(y=>({di:y,removedBatchIds:c,addedBatchIds:d}))})})}),uN.apply(this,arguments)}function sX(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,d,p,y){const E=p.batch,T=E.keys();let x=me.resolve();return T.forEach(P=>{x=x.next(()=>y.getEntry(d,P)).next(L=>{const Z=p.docVersions.get(P);Pt(null!==Z),L.version.compareTo(Z)<0&&(E.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),y.addEntry(L)))})}),x.next(()=>c.Bs.removeMutationBatch(d,E))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.Bs.performConsistencyCheck(i)).next(()=>t.fi.Ks(i,r))})}function Y3(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function oX(n,e){const t=nt(n),i=e.snapshotVersion;let r=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});r=t.ui;const d=[];e.targetChanges.forEach((y,E)=>{const T=r.get(E);if(!T)return;d.push(t.fs.removeMatchingKeys(s,y.removedDocuments,E).next(()=>t.fs.addMatchingKeys(s,y.addedDocuments,E)));let x=T.withSequenceNumber(s.currentSequenceNumber);var P,L,Z;e.targetMismatches.has(E)?x=x.withResumeToken(mr.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,i)),r=r.insert(E,x),L=x,Z=y,(0===(P=T).resumeToken.approximateByteSize()||L.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0)&&d.push(t.fs.updateTargetData(s,x))});let p=hl();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),d.push(K3(s,c,e.documentUpdates).next(y=>{p=y})),!i.isEqual(Mt.min())){const y=t.fs.getLastRemoteSnapshotVersion(s).next(E=>t.fs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(y)}return me.waitFor(d).next(()=>c.apply(s)).next(()=>t.fi.Gs(s,p)).next(()=>p)}).then(s=>(t.ui=r,s))}function K3(n,e,t){let i=xn();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let s=hl();return t.forEach((c,d)=>{const p=r.get(c);d.isNoDocument()&&d.version.isEqual(Mt.min())?(e.removeEntry(c,d.readTime),s=s.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||0===d.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(d),s=s.insert(c,d)):Ve("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),s})}function aX(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(i,e)))}function Ay(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.fs.getTargetData(i,e).next(s=>s?(r=s,me.resolve(r)):t.fs.allocateTargetId(i).next(c=>(r=new $h(e,c,0,i.currentSequenceNumber),t.fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ui=t.ui.insert(i.targetId,i),t.ai.set(e,i.targetId)),i})}function My(n,e,t){return dN.apply(this,arguments)}function dN(){return dN=(0,Ee.Z)(function*(n,e,t){const i=nt(n),r=i.ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!dg(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.ui=i.ui.remove(e),i.ai.delete(r.target)}),dN.apply(this,arguments)}function sA(n,e,t){const i=nt(n);let r=Mt.min(),s=xn();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,p,y){const E=nt(d),T=E.ai.get(y);return void 0!==T?me.resolve(E.ui.get(T)):E.fs.getTargetData(p,y)}(i,c,dl(e)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(c,d.targetId).next(p=>{s=p})}).next(()=>i.oi.Qs(c,e,t?r:Mt.min(),t?s:xn())).next(d=>(X3(i,LG(e),d),{documents:d,_i:s})))}function Q3(n,e){const t=nt(n),i=nt(t.fs),r=t.ui.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.Et(s,e).next(c=>c?c.target:null))}function J3(n,e){const t=nt(n),i=t.ci.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.hi.getAllFromCollectionGroup(r,e,TG(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(X3(t,e,r),r))}function X3(n,e,t){let i=Mt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ci.set(e,i)}function hN(){return hN=(0,Ee.Z)(function*(n,e,t,i){const r=nt(n);let s=xn(),c=hl();for(const y of t){const E=e.wi(y.metadata.name);y.document&&(s=s.add(E));const T=e.mi(y);T.setReadTime(e.gi(y.metadata.readTime)),c=c.insert(E,T)}const d=r.hi.newChangeBuffer({trackRemovals:!0}),p=yield Ay(r,(y=i,dl(vy(dn.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>K3(y,d,c).next(E=>(d.apply(y),E)).next(E=>r.fs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.fs.addMatchingKeys(y,s,p.targetId)).next(()=>r.fi.Gs(y,E)).next(()=>E)))}),hN.apply(this,arguments)}function cX(n,e){return fN.apply(this,arguments)}function fN(){return fN=(0,Ee.Z)(function*(n,e,t=xn()){const i=yield Ay(n,dl(eN(e.bundledQuery))),r=nt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=Lr(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r._s.saveNamedQuery(s,e);const d=i.withResumeToken(mr.EMPTY_BYTE_STRING,c);return r.ui=r.ui.insert(d.targetId,d),r.fs.updateTargetData(s,d).next(()=>r.fs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.fs.addMatchingKeys(s,t,i.targetId)).next(()=>r._s.saveNamedQuery(s,e))})}),fN.apply(this,arguments)}class uX{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var i;return this.yi.set(t.id,{id:(i=t).id,version:i.version,createTime:Lr(i.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(i=t).name,query:eN(i.bundledQuery),readTime:Lr(i.readTime)}),me.resolve();var i}}class dX{constructor(){this.overlays=new $i(Je.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.Xt(e,t,s)}),me.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Ii.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(i)),me.resolve()}getOverlaysForCollection(e,t,i){const r=P0(),s=t.length+1,c=new Je(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return me.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new $i((y,E)=>y-E);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let E=s.get(y.largestBatchId);null===E&&(E=P0(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=P0(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=r)););return me.resolve(d)}Xt(e,t,i){if(null===i)return;const r=this.overlays.get(i.key);if(null!==r){const c=this.Ii.get(r.largestBatchId).delete(i.key);this.Ii.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new XP(t,i));let s=this.Ii.get(t);void 0===s&&(s=xn(),this.Ii.set(t,s)),this.Ii.set(t,s.add(i.key))}}class pN{constructor(){this.Ti=new Kn(Vr.Ei),this.Ai=new Kn(Vr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const i=new Vr(e,t);this.Ti=this.Ti.add(i),this.Ai=this.Ai.add(i)}bi(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Pi(new Vr(e,t))}Vi(e,t){e.forEach(i=>this.removeReference(i,t))}vi(e){const t=new Je(new dn([])),i=new Vr(t,e),r=new Vr(t,e+1),s=[];return this.Ai.forEachInRange([i,r],c=>{this.Pi(c),s.push(c.key)}),s}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Je(new dn([])),i=new Vr(t,e),r=new Vr(t,e+1);let s=xn();return this.Ai.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new Vr(e,0),i=this.Ti.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Vr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Je.comparator(e.key,t.key)||Gt(e.Ci,t.Ci)}static Ri(e,t){return Gt(e.Ci,t.Ci)||Je.comparator(e.key,t.key)}}class hX{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Kn(Vr.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,i,r){const s=this.xi;this.xi++;const c=new QP(s,t,i,r);this.Bs.push(c);for(const d of r)this.Ni=this.Ni.add(new Vr(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.Mi(t+1),s=r<0?0:r;return me.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Vr(t,0),r=new Vr(t,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([i,r],c=>{const d=this.ki(c.Ci);s.push(d)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Kn(Gt);return t.forEach(r=>{const s=new Vr(r,0),c=new Vr(r,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,c],d=>{i=i.add(d.Ci)})}),me.resolve(this.Oi(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Je.isDocumentKey(s)||(s=s.child(""));const c=new Vr(new Je(s),0);let d=new Kn(Gt);return this.Ni.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(d=d.add(p.Ci)),!0)},c),me.resolve(this.Oi(d))}Oi(e){const t=[];return e.forEach(i=>{const r=this.ki(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Pt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let i=this.Ni;return me.forEach(t.mutations,r=>{const s=new Vr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Ni=i})}_n(e){}containsKey(e,t){const i=new Vr(t,0),r=this.Ni.firstAfterOrEqual(i);return me.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class fX{constructor(e){this.$i=e,this.docs=new $i(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,c=this.$i(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return me.resolve(i?i.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let i=hl();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Xn.newInvalidDocument(r))}),me.resolve(i)}getAllFromCollection(e,t,i){let r=hl();const s=new Je(t.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||SG(NQ(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return me.resolve(r)}getAllFromCollectionGroup(e,t,i,r){ut()}Bi(e,t){return me.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new pX(this)}getSize(e){return me.resolve(this.size)}}class pX extends H3{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Kn.addEntry(e,r)):this.Kn.removeEntry(i)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class gX{constructor(e){this.persistence=e,this.Li=new zh(t=>ag(t),M0),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new pN,this.targetCount=0,this.Ki=yg.gn()}forEachTarget(e,t){return this.Li.forEach((i,r)=>t(r)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new yg(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Li.forEach((c,d)=>{d.sequenceNumber<=t&&null===i.get(d.targetId)&&(this.Li.delete(c),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)}),me.waitFor(s).next(()=>r)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const i=this.Li.get(t)||null;return me.resolve(i)}addMatchingKeys(e,t,i){return this.qi.bi(t,i),me.resolve()}removeMatchingKeys(e,t,i){this.qi.Vi(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(c=>{s.push(r.markPotentiallyOrphaned(e,c))}),me.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qi.Di(t);return me.resolve(i)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class mX{constructor(e,t){this.Gi={},this.overlays={},this.es=new da(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new gX(this),this.indexManager=new WJ,this.ds=new fX(i=>this.referenceDelegate.Qi(i)),this.M=new S3(t),this._s=new uX(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dX,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Gi[e.toKey()];return i||(i=new hX(t,this.referenceDelegate),this.Gi[e.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,i){Ve("MemoryPersistence","Starting transaction:",e);const r=new _X(this.es.next());return this.referenceDelegate.ji(),i(r).next(s=>this.referenceDelegate.Wi(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}zi(e,t){return me.or(Object.values(this.Gi).map(i=>()=>i.containsKey(e,t)))}}class _X extends E3{constructor(e){super(),this.currentSequenceNumber=e}}class gN{constructor(e){this.persistence=e,this.Hi=new pN,this.Ji=null}static Yi(e){return new gN(e)}get Xi(){if(this.Ji)return this.Ji;throw ut()}addReference(e,t,i){return this.Hi.addReference(i,t),this.Xi.delete(i.toString()),me.resolve()}removeReference(e,t,i){return this.Hi.removeReference(i,t),this.Xi.add(i.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(r=>this.Xi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xi.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,i=>{const r=Je.fromPath(i);return this.Zi(e,r).next(s=>{s||t.removeEntry(r,Mt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(i=>{i?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function ez(n,e){return`firestore_clients_${n}_${e}`}function tz(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function mN(n,e){return`firestore_targets_${n}_${e}`}class oA{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static tr(e,t,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Pe(r.error.code,r.error.message))),c?new oA(e,t,r.state,s):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Z0{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static tr(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Pe(i.error.code,i.error.message))),s?new Z0(e,i.state,r):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class aA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=ZI();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=_G(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new aA(e,s):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class _N{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _N(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class yN{constructor(){this.activeTargetIds=ZI()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vN{constructor(e,t,i,r,s){this.window=e,this.Yn=t,this.persistenceKey=i,this.ir=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new $i(Gt),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=ez(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new yN),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Fs();for(const r of t){if(r===e.ir)continue;const s=e.getItem(ez(e.persistenceKey,r));if(s){const c=aA.tr(r,s);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const i=e.storage.getItem(e.mr);if(i){const r=e.pr(i);r&&e.Ir(r)}for(const r of e.cr)e.ur(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,i){this.Er(e,t,i),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(mN(this.persistenceKey,e));if(i){const r=Z0.tr(e,i);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mN(this.persistenceKey,e))}updateQueryState(e,t,i){this.br(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Ar(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ve("SharedClientState","EVENT",i.key,i.newValue),i.key===this.hr)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==i.key)if(t.dr.test(i.key)){if(null==i.newValue){const r=t.vr(i.key);return t.Sr(r,null)}{const r=t.Dr(i.key,i.newValue);if(r)return t.Sr(r.clientId,r)}}else if(t._r.test(i.key)){if(null!==i.newValue){const r=t.Cr(i.key,i.newValue);if(r)return t.Nr(r)}}else if(t.wr.test(i.key)){if(null!==i.newValue){const r=t.kr(i.key,i.newValue);if(r)return t.Mr(r)}}else if(i.key===t.mr){if(null!==i.newValue){const r=t.pr(i.newValue);if(r)return t.Ir(r)}}else if(i.key===t.lr){const r=function(s){let c=da.A;if(null!=s)try{const d=JSON.parse(s);Pt("number"==typeof d),c=d}catch(d){nr("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==da.A&&t.sequenceNumberHandler(r)}else if(i.key===t.gr){const r=t.Or(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Fr(s)))}}else t.cr.push(i)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,i){const r=new oA(this.currentUser,e,t,i),s=tz(this.persistenceKey,this.currentUser,e);this.setItem(s,r.er())}Ar(e){const t=tz(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,i){const r=mN(this.persistenceKey,e),s=new Z0(e,t,i);this.setItem(r,s.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const i=this.vr(e);return aA.tr(i,t)}Cr(e,t){const i=this._r.exec(e),r=Number(i[1]);return oA.tr(new es(void 0!==i[2]?i[2]:null),r,t)}kr(e,t){const i=this.wr.exec(e),r=Number(i[1]);return Z0.tr(r,t)}pr(e){return _N.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const i=t?this.ar.insert(e,t):this.ar.remove(e),r=this.Tr(this.ar),s=this.Tr(i),c=[],d=[];return s.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Lr(c,d).then(()=>{this.ar=i})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=ZI();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class nz{constructor(){this.Ur=new yN,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,i){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new yN,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yX{Kr(e){}shutdown(){}}class iz{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class bX{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class wX extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,i,r,s){const c=this.ho(e,t);Ve("RestConnection","Sending: ",c,i);const d={};return this.lo(d,r,s),this.fo(e,c,d,i).then(p=>(Ve("RestConnection","Received: ",p),p),p=>{throw b0("RestConnection",`${e} failed with error: `,p,"url: ",c,"request:",i),p})}_o(e,t,i,r,s){return this.co(e,t,i,r,s)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+fy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}ho(e,t){return`${this.uo}/v1/${t}:${vX[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,r){return new Promise((s,c)=>{const d=new vQ;d.listenOnce(mQ.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case kP.NO_ERROR:const y=d.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(y)),s(y);break;case kP.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),c(new Pe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case kP.HTTP_ERROR:const E=d.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',E,"response text:",d.getResponseText()),E>0){const T=d.getResponseJson().error;if(T&&T.status&&T.message){const x=function(P){const L=P.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(L)>=0?L:fe.UNKNOWN}(T.status);c(new Pe(x,T.message))}else c(new Pe(fe.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Pe(fe.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(r);d.send(t,"POST",p,i,15)})}wo(e,t,i){const r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=pQ(),c=gQ(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new yQ({})),this.lo(d.initMessageHeaders,t,i),(0,N.uI)()||(0,N.b$)()||(0,N.d)()||(0,N.w1)()||(0,N.Mn)()||(0,N.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");Ve("Connection","Creating WebChannel: "+p,d);const y=s.createWebChannel(p,d);let E=!1,T=!1;const x=new bX({Jr:L=>{T?Ve("Connection","Not sending because WebChannel is closed:",L):(E||(Ve("Connection","Opening WebChannel transport."),y.open(),E=!0),Ve("Connection","WebChannel sending:",L),y.send(L))},Yr:()=>y.close()}),P=(L,Z,oe)=>{L.listen(Z,Le=>{try{oe(Le)}catch(We){setTimeout(()=>{throw We},0)}})};return P(y,LI.EventType.OPEN,()=>{T||Ve("Connection","WebChannel transport opened.")}),P(y,LI.EventType.CLOSE,()=>{T||(T=!0,Ve("Connection","WebChannel transport closed"),x.ro())}),P(y,LI.EventType.ERROR,L=>{T||(T=!0,b0("Connection","WebChannel transport errored:",L),x.ro(new Pe(fe.UNAVAILABLE,"The operation could not be completed")))}),P(y,LI.EventType.MESSAGE,L=>{var Z;if(!T){const oe=L.data[0];Pt(!!oe);const Le=oe,We=Le.error||(null===(Z=Le[0])||void 0===Z?void 0:Z.error);if(We){Ve("Connection","WebChannel received error:",We);const He=We.status;let Ge=function(xt){const nn=rr[xt];if(void 0!==nn)return XG(nn)}(He),At=We.message;void 0===Ge&&(Ge=fe.INTERNAL,At="Unknown error status: "+He+" with message "+We.message),T=!0,x.ro(new Pe(Ge,At)),y.close()}else Ve("Connection","WebChannel received:",oe),x.oo(oe)}}),P(c,_Q.STAT_EVENT,L=>{L.stat===lG.PROXY?Ve("Connection","Detected buffering proxy"):L.stat===lG.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.io()},0),x}}function rz(){return"undefined"!=typeof window?window:null}function lA(){return"undefined"!=typeof document?document:null}function Y0(n){return new cJ(n,!0)}class bN{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Yn=e,this.timerId=t,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-i);r>0&&Ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class sz{constructor(e,t,i,r,s,c,d,p){this.Yn=e,this.Vo=i,this.vo=r,this.So=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new bN(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ee.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var i=this;return(0,Ee.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==e?i.No.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):t&&t.code===fe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Do===t&&this.Qo(i,r)},i=>{e(()=>{const r=new Pe(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(r)})})}Qo(e,t){const i=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{i(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(r=>{i(()=>this.jo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CX extends sz{constructor(e,t,i,r,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,c),this.M=s}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function hJ(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ut(),r=e.targetChange.targetIds||[],s=function(p,y){return p.N?(Pt(void 0===y||"string"==typeof y),mr.fromBase64String(y||"")):(Pt(void 0===y||y instanceof Uint8Array),mr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const y=void 0===p.code?fe.UNKNOWN:XG(p.code);return new Pe(y,p.message||"")}(c);t=new t3(i,r,s,d||null)}else if("documentChange"in e){const i=e.documentChange,r=eu(n,i.document.name),s=Lr(i.document.updateTime),c=new Ts({mapValue:{fields:i.document.fields}}),d=Xn.newFoundDocument(r,s,c);t=new YI(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const i=e.documentDelete,r=eu(n,i.document),s=i.readTime?Lr(i.readTime):Mt.min(),c=Xn.newNoDocument(r,s);t=new YI([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const i=e.documentRemove,r=eu(n,i.document);t=new YI([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return ut();{const i=e.filter,s=new eJ(i.count||0);t=new e3(i.targetId,s)}}var p;return t}(this.M,e),i=function(r){if(!("targetChange"in r))return Mt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Mt.min():s.readTime?Lr(s.readTime):Mt.min()}(e);return this.listener.zo(t,i)}Ho(e){const t={};t.database=V0(this.M),t.addTarget=function(r,s){let c;const d=s.target;return c=GI(d)?{documents:h3(r,d)}:{query:f3(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=o3(r,s.resumeToken):s.snapshotVersion.compareTo(Mt.min())>0&&(c.readTime=L0(r,s.snapshotVersion.toTimestamp())),c}(this.M,e);const i=function pJ(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Lo(t)}Jo(e){const t={};t.database=V0(this.M),t.removeTarget=e,this.Lo(t)}}class EX extends sz{constructor(e,t,i,r,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,c),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function fJ(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(i,r){let s=Lr(i.updateTime?i.updateTime:r);return s.isEqual(Mt.min())&&(s=Lr(r)),new QQ(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Lr(e.commitTime);return this.listener.tu(i,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=V0(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>U0(this.M,i))};this.Lo(t)}}class DX extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=i,this.M=r,this.su=!1}iu(){if(this.su)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So.co(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Pe(fe.UNKNOWN,r.toString())})}_o(e,t,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So._o(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Pe(fe.UNKNOWN,r.toString())})}terminate(){this.su=!0}}class TX{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(nr(t),this.uu=!1):Ve("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class SX{constructor(e,t,i,r,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(d=>{i.enqueueAndForget((0,Ee.Z)(function*(){var p;Zh(c)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ee.Z)(function*(y){const E=nt(y);E.wu.add(4),yield xy(E),E.yu.set("Unknown"),E.wu.delete(4),yield K0(E)}),function(y){return p.apply(this,arguments)})(c))}))}),this.yu=new TX(i,r)}}function K0(n){return wN.apply(this,arguments)}function wN(){return wN=(0,Ee.Z)(function*(n){if(Zh(n))for(const e of n.mu)yield e(!0)}),wN.apply(this,arguments)}function xy(n){return CN.apply(this,arguments)}function CN(){return CN=(0,Ee.Z)(function*(n){for(const e of n.mu)yield e(!1)}),CN.apply(this,arguments)}function cA(n,e){const t=nt(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),TN(t)?DN(t):ky(t).Mo()&&EN(t,e))}function Q0(n,e){const t=nt(n),i=ky(t);t._u.delete(e),i.Mo()&&oz(t,e),0===t._u.size&&(i.Mo()?i.$o():Zh(t)&&t.yu.set("Unknown"))}function EN(n,e){n.pu.Z(e.targetId),ky(n).Ho(e)}function oz(n,e){n.pu.Z(e),ky(n).Jo(e)}function DN(n){n.pu=new oJ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),ky(n).start(),n.yu.au()}function TN(n){return Zh(n)&&!ky(n).ko()&&n._u.size>0}function Zh(n){return 0===nt(n).wu.size}function az(n){n.pu=void 0}function IX(n){return SN.apply(this,arguments)}function SN(){return SN=(0,Ee.Z)(function*(n){n._u.forEach((e,t)=>{EN(n,e)})}),SN.apply(this,arguments)}function AX(n,e){return IN.apply(this,arguments)}function IN(){return IN=(0,Ee.Z)(function*(n,e){az(n),TN(n)?(n.yu.lu(e),DN(n)):n.yu.set("Unknown")}),IN.apply(this,arguments)}function MX(n,e,t){return AN.apply(this,arguments)}function AN(){return AN=(0,Ee.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof t3&&2===e.state&&e.cause)try{yield(i=(0,Ee.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r._u.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r._u.delete(d),r.pu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield uA(n,i)}else if(e instanceof YI?n.pu.ut(e):e instanceof e3?n.pu._t(e):n.pu.ht(e),!t.isEqual(Mt.min()))try{const i=yield Y3(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const c=r.pu.yt(s);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=r._u.get(p);y&&r._u.set(p,y.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const p=r._u.get(d);if(!p)return;r._u.set(d,p.withResumeToken(mr.EMPTY_BYTE_STRING,p.snapshotVersion)),oz(r,d);const y=new $h(p.target,d,1,p.sequenceNumber);EN(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){Ve("RemoteStore","Failed to raise snapshot:",i),yield uA(n,i)}var i}),AN.apply(this,arguments)}function uA(n,e,t){return MN.apply(this,arguments)}function MN(){return MN=(0,Ee.Z)(function*(n,e,t){if(!dg(e))throw e;n.wu.add(1),yield xy(n),n.yu.set("Offline"),t||(t=()=>Y3(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield K0(n)}))}),MN.apply(this,arguments)}function lz(n,e){return e().catch(t=>uA(n,t,e))}function Ry(n){return xN.apply(this,arguments)}function xN(){return xN=(0,Ee.Z)(function*(n){const e=nt(n),t=Yh(e);let i=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;xX(e);)try{const r=yield aX(e.localStore,i);if(null===r){0===e.du.length&&t.$o();break}i=r.batchId,RX(e,r)}catch(r){yield uA(e,r)}cz(e)&&uz(e)}),xN.apply(this,arguments)}function xX(n){return Zh(n)&&n.du.length<10}function RX(n,e){n.du.push(e);const t=Yh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function cz(n){return Zh(n)&&!Yh(n).ko()&&n.du.length>0}function uz(n){Yh(n).start()}function kX(n){return RN.apply(this,arguments)}function RN(){return RN=(0,Ee.Z)(function*(n){Yh(n).nu()}),RN.apply(this,arguments)}function OX(n){return kN.apply(this,arguments)}function kN(){return kN=(0,Ee.Z)(function*(n){const e=Yh(n);for(const t of n.du)e.Zo(t.mutations)}),kN.apply(this,arguments)}function PX(n,e,t){return ON.apply(this,arguments)}function ON(){return ON=(0,Ee.Z)(function*(n,e,t){const i=n.du.shift(),r=JP.from(i,e,t);yield lz(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Ry(n)}),ON.apply(this,arguments)}function NX(n,e){return PN.apply(this,arguments)}function PN(){return PN=(0,Ee.Z)(function*(n,e){var t;e&&Yh(n).Xo&&(yield(t=(0,Ee.Z)(function*(i,r){if(JG(s=r.code)&&s!==fe.ABORTED){const c=i.du.shift();Yh(i).Fo(),yield lz(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield Ry(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),cz(n)&&uz(n)}),PN.apply(this,arguments)}function dz(n,e){return NN.apply(this,arguments)}function NN(){return NN=(0,Ee.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const i=Zh(t);t.wu.add(3),yield xy(t),i&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield K0(t)}),NN.apply(this,arguments)}function FN(n,e){return LN.apply(this,arguments)}function LN(){return LN=(0,Ee.Z)(function*(n,e){const t=nt(n);e?(t.wu.delete(2),yield K0(t)):e||(t.wu.add(2),yield xy(t),t.yu.set("Unknown"))}),LN.apply(this,arguments)}function ky(n){return n.Iu||(n.Iu=function(e,t,i){const r=nt(e);return r.iu(),new CX(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:IX.bind(null,n),eo:AX.bind(null,n),zo:MX.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Fo(),TN(n)?DN(n):n.yu.set("Unknown")):(yield n.Iu.stop(),az(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Yh(n){return n.Tu||(n.Tu=function(e,t,i){const r=nt(e);return r.iu(),new EX(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:kX.bind(null,n),eo:NX.bind(null,n),eu:OX.bind(null,n),tu:PX.bind(null,n)}),n.mu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Tu.Fo(),yield Ry(n)):(yield n.Tu.stop(),n.du.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class BN{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,i,r,s){const c=Date.now()+i,d=new BN(e,t,c,r,s);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oy(n,e){if(nr("AsyncQueue",`${e}: ${n}`),dg(n))return new Pe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Py{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Je.comparator(t.key,i.key):(t,i)=>Je.comparator(t.key,i.key),this.keyedMap=qP(),this.sortedSet=new $i(this.comparator)}static emptySet(e){return new Py(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Py)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Py;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class hz{constructor(){this.Eu=new $i(Je.comparator)}track(e){const t=e.doc.key,i=this.Eu.get(t);i?0!==e.type&&3===i.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==i.type?this.Eu=this.Eu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Eu=this.Eu.remove(t):1===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ut():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Ny{constructor(e,t,i,r,s,c,d,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,i,r){const s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new Ny(e,t,Py.emptySet(t),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&x0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class FX{constructor(){this.Ru=void 0,this.listeners=[]}}class LX{constructor(){this.queries=new zh(e=>FG(e),x0),this.onlineState="Unknown",this.bu=new Set}}function VN(n,e){return UN.apply(this,arguments)}function UN(){return UN=(0,Ee.Z)(function*(n,e){const t=nt(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new FX),r)try{s.Ru=yield t.onListen(i)}catch(c){const d=Oy(c,`Initialization of query '${jP(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,s),s.listeners.push(e),e.Pu(t.onlineState),s.Ru&&e.Vu(s.Ru)&&GN(t)}),UN.apply(this,arguments)}function HN(n,e){return jN.apply(this,arguments)}function jN(){return jN=(0,Ee.Z)(function*(n,e){const t=nt(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),jN.apply(this,arguments)}function BX(n,e){const t=nt(n);let i=!1;for(const r of e){const c=t.queries.get(r.query);if(c){for(const d of c.listeners)d.Vu(r)&&(i=!0);c.Ru=r}}i&&GN(t)}function VX(n,e,t){const i=nt(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function GN(n){n.bu.forEach(e=>{e.next()})}class zN{constructor(e,t,i){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}Vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Ny(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ny.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class UX{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class fz{constructor(e){this.M=e}wi(e){return eu(this.M,e)}mi(e){return e.metadata.exists?d3(this.M,e.document,!1):Xn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Lr(e)}}class HX{constructor(e,t,i){this.Ou=e,this.localStore=t,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pz(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=dn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new fz(this.M);for(const r of e)if(r.metadata.queries){const s=i.wi(r.metadata.name);for(const c of r.metadata.queries){const d=(t.get(c)||xn()).add(s);t.set(c,d)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function lX(n,e,t,i){return hN.apply(this,arguments)}(e.localStore,new fz(e.M),e.documents,e.Ou.id),i=e.$u(e.documents);for(const r of e.queries)yield cX(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function pz(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class gz{constructor(e){this.key=e}}class mz{constructor(e){this.key=e}}class _z{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=xn(),this.mutatedKeys=xn(),this.Gu=BG(e),this.Qu=new Py(this.Gu)}get ju(){return this.Uu}Wu(e,t){const i=t?t.zu:new hz,r=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,c=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((E,T)=>{const x=r.get(E),P=GP(this.query,T)?T:null,L=!!x&&this.mutatedKeys.has(x.key),Z=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let oe=!1;x&&P?x.data.isEqual(P.data)?L!==Z&&(i.track({type:3,doc:P}),oe=!0):this.Hu(x,P)||(i.track({type:2,doc:P}),oe=!0,(p&&this.Gu(P,p)>0||y&&this.Gu(P,y)<0)&&(d=!0)):!x&&P?(i.track({type:0,doc:P}),oe=!0):x&&!P&&(i.track({type:1,doc:x}),oe=!0,(p||y)&&(d=!0)),oe&&(P?(c=c.add(P),s=Z?s.add(E):s.delete(E)):(c=c.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const E="F"===this.query.limitType?c.last():c.first();c=c.delete(E.key),s=s.delete(E.key),i.track({type:1,doc:E})}return{Qu:c,zu:i,ii:d,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Au();s.sort((y,E)=>function(T,x){const P=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return P(T)-P(x)}(y.type,E.type)||this.Gu(y.doc,E.doc)),this.Ju(i);const c=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==s.length||p?{snapshot:new Ny(this.query,e.Qu,r,s,e.mutatedKeys,0===d,p,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new hz,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=xn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new mz(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new gz(i))}),t}ta(e){this.Uu=e._i,this.Ku=xn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Ny.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class jX{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class GX{constructor(e){this.key=e,this.na=!1}}class zX{constructor(e,t,i,r,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new zh(d=>FG(d),x0),this.ra=new Map,this.oa=new Set,this.ua=new $i(Je.comparator),this.aa=new Map,this.ca=new pN,this.ha={},this.la=new Map,this.fa=yg.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function $X(n,e){return $N.apply(this,arguments)}function $N(){return $N=(0,Ee.Z)(function*(n,e){const t=g1(n);let i,r;const s=t.ia.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.ea();else{const c=yield Ay(t.localStore,dl(e));t.isPrimaryClient&&cA(t.remoteStore,c);const d=t.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield qN(t,e,i,"current"===d)}return r}),$N.apply(this,arguments)}function qN(n,e,t,i){return WN.apply(this,arguments)}function WN(){return WN=(0,Ee.Z)(function*(n,e,t,i){n._a=(E,T,x)=>{return(P=(0,Ee.Z)(function*(L,Z,oe,Le){let We=Z.view.Wu(oe);We.ii&&(We=yield sA(L.localStore,Z.query,!1).then(({documents:At})=>Z.view.Wu(At,We)));const He=Le&&Le.targetChanges.get(Z.targetId),Ge=Z.view.applyChanges(We,L.isPrimaryClient,He);return r1(L,Z.targetId,Ge.Xu),Ge.snapshot}),function(L,Z,oe,Le){return P.apply(this,arguments)})(n,E,T,x);var P};const r=yield sA(n.localStore,e,!0),s=new _z(e,r._i),c=s.Wu(r.documents),d=F0.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),p=s.applyChanges(c,n.isPrimaryClient,d);r1(n,t,p.Xu);const y=new jX(e,t,s);return n.ia.set(e,y),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),p.snapshot}),WN.apply(this,arguments)}function qX(n,e){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,Ee.Z)(function*(n,e){const t=nt(n),i=t.ia.get(e),r=t.ra.get(i.targetId);if(r.length>1)return t.ra.set(i.targetId,r.filter(s=>!x0(s,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield My(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Q0(t.remoteStore,i.targetId),Fy(t,i.targetId)}).catch(vg))):(Fy(t,i.targetId),yield My(t.localStore,i.targetId,!0))}),ZN.apply(this,arguments)}function YN(){return YN=(0,Ee.Z)(function*(n,e,t){const i=m1(n);try{const r=yield function(s,c){const d=nt(s),p=zi.now(),y=c.reduce((T,x)=>T.add(x.key),xn());let E;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>d.fi.Ks(T,y).next(x=>{E=x;const P=[];for(const L of c){const Z=XQ(L,E.get(L.key));null!=Z&&P.push(new ug(L.key,Z,DG(Z.value.mapValue),ir.exists(!0)))}return d.Bs.addMutationBatch(T,p,P,c)})).then(T=>(T.applyToLocalDocumentSet(E),{batchId:T.batchId,changes:E}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let p=s.ha[s.currentUser.toKey()];p||(p=new $i(Gt)),p=p.insert(c,d),s.ha[s.currentUser.toKey()]=p}(i,r.batchId,t),yield hd(i,r.changes),yield Ry(i.remoteStore)}catch(r){const s=Oy(r,"Failed to persist write");t.reject(s)}}),YN.apply(this,arguments)}function yz(n,e){return KN.apply(this,arguments)}function KN(){return KN=(0,Ee.Z)(function*(n,e){const t=nt(n);try{const i=yield oX(t.localStore,e);e.targetChanges.forEach((r,s)=>{const c=t.aa.get(s);c&&(Pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.na=!0:r.modifiedDocuments.size>0?Pt(c.na):r.removedDocuments.size>0&&(Pt(c.na),c.na=!1))}),yield hd(t,i,e)}catch(i){yield vg(i)}}),KN.apply(this,arguments)}function vz(n,e,t){const i=nt(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ia.forEach((s,c)=>{const d=c.view.Pu(e);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=nt(s);d.onlineState=c;let p=!1;d.queries.forEach((y,E)=>{for(const T of E.listeners)T.Pu(c)&&(p=!0)}),p&&GN(d)}(i.eventManager,e),r.length&&i.sa.zo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function ZX(n,e,t){return QN.apply(this,arguments)}function QN(){return QN=(0,Ee.Z)(function*(n,e,t){const i=nt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.aa.get(e),s=r&&r.key;if(s){let c=new $i(Je.comparator);c=c.insert(s,Xn.newNoDocument(s,Mt.min()));const d=xn().add(s),p=new N0(Mt.min(),new Map,new Kn(Gt),c,d);yield yz(i,p),i.ua=i.ua.remove(s),i.aa.delete(e),s1(i)}else yield My(i.localStore,e,!1).then(()=>Fy(i,e,t)).catch(vg)}),QN.apply(this,arguments)}function YX(n,e){return JN.apply(this,arguments)}function JN(){return JN=(0,Ee.Z)(function*(n,e){const t=nt(n),i=e.batch.batchId;try{const r=yield sX(t.localStore,e);n1(t,i,null),t1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield hd(t,r)}catch(r){yield vg(r)}}),JN.apply(this,arguments)}function KX(n,e,t){return XN.apply(this,arguments)}function XN(){return XN=(0,Ee.Z)(function*(n,e,t){const i=nt(n);try{const r=yield function(s,c){const d=nt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.Bs.lookupMutationBatch(p,c).next(E=>(Pt(null!==E),y=E.keys(),d.Bs.removeMutationBatch(p,E))).next(()=>d.Bs.performConsistencyCheck(p)).next(()=>d.fi.Ks(p,y))})}(i.localStore,e);n1(i,e,t),t1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield hd(i,r)}catch(r){yield vg(r)}}),XN.apply(this,arguments)}function e1(){return e1=(0,Ee.Z)(function*(n,e){const t=nt(n);Zh(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=nt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.Bs.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===i)return void e.resolve();const r=t.la.get(i)||[];r.push(e),t.la.set(i,r)}catch(i){const r=Oy(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),e1.apply(this,arguments)}function t1(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function n1(n,e,t){const i=nt(n);let r=i.ha[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.ha[i.currentUser.toKey()]=r}}function Fy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ra.get(e))n.ia.delete(i),t&&n.sa.wa(i,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(i=>{n.ca.containsKey(i)||bz(n,i)})}function bz(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Q0(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),s1(n))}function r1(n,e,t){for(const i of t)i instanceof gz?(n.ca.addReference(i.key,e),JX(n,i)):i instanceof mz?(Ve("SyncEngine","Document no longer in limbo: "+i.key),n.ca.removeReference(i.key,e),n.ca.containsKey(i.key)||bz(n,i.key)):ut()}function JX(n,e){const t=e.key,i=t.path.canonicalString();n.ua.get(t)||n.oa.has(i)||(Ve("SyncEngine","New document in limbo: "+t),n.oa.add(i),s1(n))}function s1(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Je(dn.fromString(e)),i=n.fa.next();n.aa.set(i,new GX(t)),n.ua=n.ua.insert(t,i),cA(n.remoteStore,new $h(dl(vy(t.path)),i,2,da.A))}}function hd(n,e,t){return o1.apply(this,arguments)}function o1(){return o1=(0,Ee.Z)(function*(n,e,t){const i=nt(n),r=[],s=[],c=[];var d;i.ia.isEmpty()||(i.ia.forEach((d,p)=>{c.push(i._a(p,e,t).then(y=>{if(y){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),r.push(y);const E=cN.Ys(p.targetId,y);s.push(E)}}))}),yield Promise.all(c),i.sa.zo(r),yield(d=(0,Ee.Z)(function*(p,y){const E=nt(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>me.forEach(y,x=>me.forEach(x.Hs,P=>E.persistence.referenceDelegate.addReference(T,x.targetId,P)).next(()=>me.forEach(x.Js,P=>E.persistence.referenceDelegate.removeReference(T,x.targetId,P)))))}catch(T){if(!dg(T))throw T;Ve("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const x=T.targetId;if(!T.fromCache){const P=E.ui.get(x),Z=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);E.ui=E.ui.insert(x,Z)}}}),function(p,y){return d.apply(this,arguments)})(i.localStore,s))}),o1.apply(this,arguments)}function XX(n,e){return a1.apply(this,arguments)}function a1(){return a1=(0,Ee.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const i=yield Z3(t.localStore,e);t.currentUser=e,(r=t).la.forEach(c=>{c.forEach(d=>{d.reject(new Pe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.la.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield hd(t,i.di)}var r}),a1.apply(this,arguments)}function eee(n,e){const t=nt(n),i=t.aa.get(e);if(i&&i.na)return xn().add(i.key);{let r=xn();const s=t.ra.get(e);if(!s)return r;for(const c of s){const d=t.ia.get(c);r=r.unionWith(d.view.ju)}return r}}function tee(n,e){return l1.apply(this,arguments)}function l1(){return l1=(0,Ee.Z)(function*(n,e){const t=nt(n),i=yield sA(t.localStore,e.query,!0),r=e.view.ta(i);return t.isPrimaryClient&&r1(t,e.targetId,r.Xu),r}),l1.apply(this,arguments)}function nee(n,e){return c1.apply(this,arguments)}function c1(){return c1=(0,Ee.Z)(function*(n,e){const t=nt(n);return J3(t.localStore,e).then(i=>hd(t,i))}),c1.apply(this,arguments)}function iee(n,e,t,i){return u1.apply(this,arguments)}function u1(){return u1=(0,Ee.Z)(function*(n,e,t,i){const r=nt(n),s=yield function(c,d){const p=nt(c),y=nt(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.fn(E,d).next(T=>T?p.fi.Ks(E,T):me.resolve(null)))}(r.localStore,e);var d;null!==s?("pending"===t?yield Ry(r.remoteStore):"acknowledged"===t||"rejected"===t?(n1(r,e,i||null),t1(r,e),d=e,nt(nt(r.localStore).Bs)._n(d)):ut(),yield hd(r,s)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),u1.apply(this,arguments)}function d1(){return d1=(0,Ee.Z)(function*(n,e){const t=nt(n);if(g1(t),m1(t),!0===e&&!0!==t.da){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield wz(t,i.toArray());t.da=!0,yield FN(t.remoteStore,!0);for(const s of r)cA(t.remoteStore,s)}else if(!1===e&&!1!==t.da){const i=[];let r=Promise.resolve();t.ra.forEach((s,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(Fy(t,c),My(t.localStore,c,!0))),Q0(t.remoteStore,c)}),yield r,yield wz(t,i),function(s){const c=nt(s);c.aa.forEach((d,p)=>{Q0(c.remoteStore,p)}),c.ca.Si(),c.aa=new Map,c.ua=new $i(Je.comparator)}(t),t.da=!1,yield FN(t.remoteStore,!1)}}),d1.apply(this,arguments)}function wz(n,e,t){return h1.apply(this,arguments)}function h1(){return h1=(0,Ee.Z)(function*(n,e,t){const i=nt(n),r=[],s=[];for(const c of e){let d;const p=i.ra.get(c);if(p&&0!==p.length){d=yield Ay(i.localStore,dl(p[0]));for(const y of p){const E=i.ia.get(y),T=yield tee(i,E);T.snapshot&&s.push(T.snapshot)}}else{const y=yield Q3(i.localStore,c);d=yield Ay(i.localStore,y),yield qN(i,Cz(y),c,!1)}r.push(d)}return i.sa.zo(s),r}),h1.apply(this,arguments)}function Cz(n){return PG(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function see(n){const e=nt(n);return nt(nt(e.localStore).persistence).Fs()}function oee(n,e,t,i){return f1.apply(this,arguments)}function f1(){return f1=(0,Ee.Z)(function*(n,e,t,i){const r=nt(n);if(r.da)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const s=r.ra.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const c=yield J3(r.localStore,LG(s[0])),d=N0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield hd(r,c,d);break}case"rejected":yield My(r.localStore,e,!0),Fy(r,e,i);break;default:ut()}}),f1.apply(this,arguments)}function aee(n,e,t){return p1.apply(this,arguments)}function p1(){return p1=(0,Ee.Z)(function*(n,e,t){const i=g1(n);if(i.da){for(const r of e){if(i.ra.has(r)){Ve("SyncEngine","Adding an already active target "+r);continue}const s=yield Q3(i.localStore,r),c=yield Ay(i.localStore,s);yield qN(i,Cz(s),c.targetId,!1),cA(i.remoteStore,c)}for(const r of t)i.ra.has(r)&&(yield My(i.localStore,r,!1).then(()=>{Q0(i.remoteStore,r),Fy(i,r)}).catch(vg))}}),p1.apply(this,arguments)}function g1(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZX.bind(null,e),e.sa.zo=BX.bind(null,e.eventManager),e.sa.wa=VX.bind(null,e.eventManager),e}function m1(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KX.bind(null,e),e}class Ez{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.M=Y0(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return W3(this.persistence,new q3,e.initialUser,this.M)}ya(e){return new mX(gN.Yi,this.M)}ga(e){return new nz}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Dz extends Ez{constructor(e,t,i){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield t().call(i,e),yield i.Ta.initialize(i,e),yield m1(i.Ta.syncEngine),yield Ry(i.Ta.remoteStore),yield i.persistence.Ts(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Ia(e){return W3(this.persistence,new q3,e.initialUser,this.M)}pa(e){return new QJ(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=lN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Io.withCacheSize(this.cacheSizeBytes):Io.DEFAULT;return new aN(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,rz(),lA(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new nz}}class cee extends Dz{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield t().call(i,e);const r=i.Ta.syncEngine;i.sharedClientState instanceof vN&&(i.sharedClientState.syncEngine={$r:iee.bind(null,r),Br:oee.bind(null,r),Lr:aee.bind(null,r),Fs:see.bind(null,r),Fr:nee.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ts(function(){var s=(0,Ee.Z)(function*(c){yield function ree(n,e){return d1.apply(this,arguments)}(i.Ta.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):c||i.gcScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}ga(e){const t=rz();if(!vN.vt(t))throw new Pe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=lN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vN(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class _1{initialize(e,t){var i=this;return(0,Ee.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>vz(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=XX.bind(null,i.syncEngine),yield FN(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LX}createDatastore(e){const t=Y0(e.databaseInfo.databaseId),i=new wX(e.databaseInfo);return new DX(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=d=>vz(this.syncEngine,d,0),c=iz.vt()?new iz:new yX,new SX(t,i,r,s,c);var t,i,r,s,c}createSyncEngine(e,t){return function(i,r,s,c,d,p,y){const E=new zX(i,r,s,c,d,p);return y&&(E.da=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const i=nt(t);Ve("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield xy(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Tz(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class uee{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(i=>{i&&i.Mu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Va();if(null===t)return null;const i=e.ba.decode(t),r=Number(i);isNaN(r)&&e.va(`length string (${i}) is not valid number`);const s=yield e.Sa(r);return new UX(JSON.parse(s),t.length+r)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ee.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Sa(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const i=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class dee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ee.Z)(function*(s,c){const d=nt(s),p=V0(d.M)+"/documents",y={documents:c.map(P=>B0(d.M,P))},E=yield d._o("BatchGetDocuments",p,y),T=new Map;E.forEach(P=>{const L=function dJ(n,e){return"found"in e?function(t,i){Pt(!!i.found);const r=eu(t,i.found.name),s=Lr(i.found.updateTime),c=new Ts({mapValue:{fields:i.found.fields}});return Xn.newFoundDocument(r,s,c)}(n,e):"missing"in e?function(t,i){Pt(!!i.missing),Pt(!!i.readTime);const r=eu(t,i.missing),s=Lr(i.readTime);return Xn.newNoDocument(r,s)}(n,e):ut()}(d.M,P);T.set(L.key.toString(),L)});const x=[];return c.forEach(P=>{const L=T.get(P.toString());Pt(!!L),x.push(L)}),x}),function(s,c){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new O0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=Je.fromPath(r);e.mutations.push(new $P(s,e.precondition(s)))}),yield(i=(0,Ee.Z)(function*(r,s){const c=nt(r),d=V0(c.M)+"/documents",p={writes:s.map(y=>U0(c.M,y))};yield c.co("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=Mt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Pe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Pe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hee{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.xa=i.maxAttempts,this.No=new bN(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ee.Z)(function*(){const t=new dee(e.datastore),i=e.ka(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Ma(s)}))}).catch(r=>{e.Ma(r)})}))}ka(e){try{const t=this.updateFunction(e);return!E0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!JG(t)}return!1}}class fee{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=es.UNAUTHENTICATED,this.clientId=hG.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Ee.Z)(function*(d){Ve("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Oy(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function Sz(n,e){return y1.apply(this,arguments)}function y1(){return y1=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ee.Z)(function*(s){i.isEqual(s)||(yield Z3(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),y1.apply(this,arguments)}function Iz(n,e){return v1.apply(this,arguments)}function v1(){return v1=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield b1(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>dz(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>dz(e.remoteStore,s)),n.onlineComponents=e}),v1.apply(this,arguments)}function b1(n){return w1.apply(this,arguments)}function w1(){return w1=(0,Ee.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield Sz(n,new Ez)),n.offlineComponents}),w1.apply(this,arguments)}function hA(n){return C1.apply(this,arguments)}function C1(){return C1=(0,Ee.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield Iz(n,new _1)),n.onlineComponents}),C1.apply(this,arguments)}function Az(n){return b1(n).then(e=>e.persistence)}function E1(n){return b1(n).then(e=>e.localStore)}function Mz(n){return hA(n).then(e=>e.remoteStore)}function D1(n){return hA(n).then(e=>e.syncEngine)}function Ly(n){return T1.apply(this,arguments)}function T1(){return T1=(0,Ee.Z)(function*(n){const e=yield hA(n),t=e.eventManager;return t.onListen=$X.bind(null,e.syncEngine),t.onUnlisten=qX.bind(null,e.syncEngine),t}),T1.apply(this,arguments)}function xz(n,e,t={}){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,c,d,p){const y=new dA({next:T=>{s.enqueueAndForget(()=>HN(r,E));const x=T.docs.has(c);!x&&T.fromCache?p.reject(new Pe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&d&&"server"===d.source?p.reject(new Pe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),E=new zN(vy(c.path),y,{includeMetadataChanges:!0,ku:!0});return VN(r,E)}(yield Ly(n),n.asyncQueue,e,t,i)})),i.promise}function Rz(n,e,t={}){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,c,d,p){const y=new dA({next:T=>{s.enqueueAndForget(()=>HN(r,E)),T.fromCache&&"server"===d.source?p.reject(new Pe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),E=new zN(c,y,{includeMetadataChanges:!0,ku:!0});return VN(r,E)}(yield Ly(n),n.asyncQueue,e,t,i)})),i.promise}const kz=new Map;function S1(n,e,t){if(!t)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Oz(n,e,t,i){if(!0===e&&!0===i)throw new Pe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Pz(n){if(!Je.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Nz(n){if(Je.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function an(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fA(n);throw new Pe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Fz(n,e){if(e<=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Lz{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Oz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class J0{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lz({}),this._settingsFrozen=!1,e instanceof ud?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Pe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ud(r.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lz(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new CQ;switch(t.type){case"gapi":const i=t.client;return Pt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new SQ(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kz.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),kz.delete(e),t.terminate())}(this),Promise.resolve()}}class ei{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ei(this.firestore,e,this._key)}}class Ss{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class nu extends Ss{constructor(e,t,i){super(e,t,vy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ei(this.firestore,null,new Je(e))}withConverter(e){return new nu(this.firestore,e,this._path)}}function Bz(n,e,...t){if(n=(0,N.m9)(n),S1("collection","path",e),n instanceof J0){const i=dn.fromString(e,...t);return Nz(i),new nu(n,null,i)}{if(!(n instanceof ei||n instanceof nu))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dn.fromString(e,...t));return Nz(i),new nu(n.firestore,null,i)}}function pA(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=hG.R()),S1("doc","path",e),n instanceof J0){const i=dn.fromString(e,...t);return Pz(i),new ei(n,null,new Je(i))}{if(!(n instanceof ei||n instanceof nu))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dn.fromString(e,...t));return Pz(i),new ei(n.firestore,n instanceof nu?n.converter:null,new Je(i))}}function Vz(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof ei||n instanceof nu)&&(e instanceof ei||e instanceof nu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Uz(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof Ss&&e instanceof Ss&&n.firestore===e.firestore&&x0(n._query,e._query)&&n.converter===e.converter}class Dee{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new bN(this,"async_queue_retry"),this.Qa=()=>{const t=lA();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=lA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=lA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Fr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!dg(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(i=>{throw this.Ua=i,this.qa=!1,nr("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.qa=!1,i))));return this.Fa=t,t}enqueueAfterDelay(e,t,i){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const r=BN.createAndSchedule(this,e,t,i,s=>this.Ha(s));return this.La.push(r),r}ja(){this.Ua&&ut()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function I1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class Tee{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class li extends J0{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new Dee,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Hz(this),this._firestoreClient.terminate()}}function sr(n){return n._firestoreClient||Hz(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Hz(n){var e;const t=n._freezeSettings(),i=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new kQ(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new fee(n._authCredentials,n._appCheckCredentials,n._queue,i)}function jz(n,e,t){const i=new Fr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield Sz(n,t),yield Iz(n,e),i.resolve()}catch(r){if(!("FirebaseError"===(s=r).name?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var s})).then(()=>i.promise)}function Gz(n){if(n._initialized||n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iu(mr.fromBase64String(e))}catch(t){throw new Pe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new iu(mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wg{constructor(e){this._methodName=e}}class gA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const Nee=/^__.*__$/;class Fee{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new ug(e,this.data,this.fieldMask,t,this.fieldTransforms):new k0(e,this.data,t,this.fieldTransforms)}}class zz{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ug(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $z(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class mA{constructor(e,t,i,r,s,c){this.settings=e,this.databaseId=t,this.M=i,this.ignoreUndefinedProperties=r,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new mA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:i,ic:!1});return r.rc(e),r}oc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:i,ic:!1});return r.tc(),r}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return vA(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if($z(this.ec)&&Nee.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Lee{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=i||Y0(e)}lc(e,t,i,r=!1){return new mA({ec:e,methodName:t,hc:i,path:gr.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Cg(n){const e=n._freezeSettings(),t=Y0(n._databaseId);return new Lee(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _A(n,e,t,i,r,s={}){const c=n.lc(s.merge||s.mergeFields?2:0,e,t,r);R1("Data must be an object, but it was:",c,i);const d=Zz(i,c);let p,y;if(s.merge)p=new gy(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const E=[];for(const T of s.mergeFields){const x=k1(e,T,t);if(!c.contains(x))throw new Pe(fe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Kz(E,x)||E.push(x)}p=new gy(E),y=c.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=c.fieldTransforms;return new Fee(new Ts(d),p,y)}class X0 extends wg{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof X0}}function qz(n,e,t){return new mA({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class A1 extends wg{_toFieldTransform(e){return new R0(e.path,new wy)}isEqual(e){return e instanceof A1}}class Bee extends wg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=qz(this,e,!0),i=this.fc.map(s=>Eg(s,t)),r=new lg(i);return new R0(e.path,r)}isEqual(e){return this===e}}class Vee extends wg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=qz(this,e,!0),i=this.fc.map(s=>Eg(s,t)),r=new cg(i);return new R0(e.path,r)}isEqual(e){return this===e}}class Uee extends wg{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Cy(e.M,HG(e.M,this.dc));return new R0(e.path,t)}isEqual(e){return this===e}}function M1(n,e,t,i){const r=n.lc(1,e,t);R1("Data must be an object, but it was:",r,i);const s=[],c=Ts.empty();ng(i,(p,y)=>{const E=yA(e,p,t);y=(0,N.m9)(y);const T=r.oc(E);if(y instanceof X0)s.push(E);else{const x=Eg(y,T);null!=x&&(s.push(E),c.set(E,x))}});const d=new gy(s);return new zz(c,d,r.fieldTransforms)}function x1(n,e,t,i,r,s){const c=n.lc(1,e,t),d=[k1(e,i,t)],p=[r];if(s.length%2!=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)d.push(k1(e,s[x])),p.push(s[x+1]);const y=[],E=Ts.empty();for(let x=d.length-1;x>=0;--x)if(!Kz(y,d[x])){const P=d[x];let L=p[x];L=(0,N.m9)(L);const Z=c.oc(P);if(L instanceof X0)y.push(P);else{const oe=Eg(L,Z);null!=oe&&(y.push(P),E.set(P,oe))}}const T=new gy(y);return new zz(E,T,c.fieldTransforms)}function Wz(n,e,t,i=!1){return Eg(t,n.lc(i?4:3,e))}function Eg(n,e){if(Yz(n=(0,N.m9)(n)))return R1("Unsupported field value:",e,n),Zz(n,e);if(n instanceof wg)return function(t,i){if(!$z(i.ec))throw i.ac(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ac(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const c of t){let d=Eg(c,i.uc(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return HG(i.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=zi.fromDate(t);return{timestampValue:L0(i.M,r)}}if(t instanceof zi){const r=new zi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:L0(i.M,r)}}if(t instanceof gA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof iu)return{bytesValue:o3(i.M,t._byteString)};if(t instanceof ei){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:WP(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ac(`Unsupported field value: ${fA(t)}`)}(n,e)}function Zz(n,e){const t={};return gG(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ng(n,(i,r)=>{const s=Eg(r,e.sc(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function Yz(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof zi||n instanceof gA||n instanceof iu||n instanceof ei||n instanceof wg)}function R1(n,e,t){if(!Yz(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=fA(t);throw e.ac("an object"===i?n+" a custom object":n+" "+i)}var i}function k1(n,e,t){if((e=(0,N.m9)(e))instanceof fd)return e._internalPath;if("string"==typeof e)return yA(n,e);throw vA("Field path arguments must be of type string or ",n,!1,void 0,t)}const Hee=new RegExp("[~\\*/\\[\\]]");function yA(n,e,t){if(e.search(Hee)>=0)throw vA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fd(...e.split("."))._internalPath}catch(i){throw vA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vA(n,e,t,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new Pe(fe.INVALID_ARGUMENT,d+n+p)}function Kz(n,e){return n.some(t=>t.isEqual(e))}class eC{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ei(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class jee extends eC{data(){return super.data()}}function bA(n,e){return"string"==typeof e?yA(n,e):e instanceof fd?e._internalPath:e._delegate._internalPath}class Dg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pd extends eC{constructor(e,t,i,r,s,c){super(e,t,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(bA("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class tC extends pd{data(e={}){return super.data(e)}}class Kh{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Dg(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new tC(this._firestore,this._userDataWriter,i.key,i,new Dg(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new tC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Dg(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new tC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Dg(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:Gee(c.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Gee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function Qz(n,e){return n instanceof pd&&e instanceof pd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kh&&e instanceof Kh&&n._firestore===e._firestore&&Uz(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Jz(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nC{}function Qh(n,...e){for(const t of e)n=t._apply(n);return n}class zee extends nC{constructor(e,t,i){super(),this._c=e,this.wc=t,this.mc=i,this.type="where"}_apply(e){const t=Cg(e.firestore),i=function(r,s,c,d,p,y,E){let T;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){r$(E,y);const P=[];for(const L of E)P.push(i$(d,r,L));T={arrayValue:{values:P}}}else T=i$(d,r,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||r$(E,y),T=Wz(c,"where",E,"in"===y||"not-in"===y);const x=ns.create(p,y,T);return function(P,L){if(L.S()){const oe=UP(P);if(null!==oe&&!oe.isEqual(L.field))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${oe.toString()}' and '${L.field.toString()}'`);const Le=VP(P);null!==Le&&s$(0,L.field,Le)}const Z=function(oe,Le){for(const We of oe.filters)if(Le.indexOf(We.op)>=0)return We.op;return null}(P,function(oe){switch(oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(L.op));if(null!==Z)throw new Pe(fe.INVALID_ARGUMENT,Z===L.op?`Invalid query. You cannot use more than one '${L.op.toString()}' filter.`:`Invalid query. You cannot use '${L.op.toString()}' filters with '${Z.toString()}' filters.`)}(r,x),x}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Ss(e.firestore,e.converter,function(r,s){const c=r.filters.concat([s]);return new dd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class qee extends nC{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new yy(r,s);return function(d,p){if(null===VP(d)){const y=UP(d);null!==y&&s$(0,y,p.field)}}(i,c),c}(e._query,this._c,this.gc);return new Ss(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new dd(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Xz extends nC{constructor(e,t,i){super(),this.type=e,this.yc=t,this.Ic=i}_apply(e){return new Ss(e.firestore,e.converter,NG(e._query,this.yc,this.Ic))}}class e$ extends nC{constructor(e,t,i){super(),this.type=e,this.Tc=t,this.Ec=i}_apply(e){const t=n$(e,this.type,this.Tc,this.Ec);return new Ss(e.firestore,e.converter,(r=t,new dd((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class t$ extends nC{constructor(e,t,i){super(),this.type=e,this.Tc=t,this.Ec=i}_apply(e){const t=n$(e,this.type,this.Tc,this.Ec);return new Ss(e.firestore,e.converter,(r=t,new dd((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function n$(n,e,t,i){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof eC)return function(r,s,c,d,p){if(!d)throw new Pe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const E of by(r))if(E.field.isKeyField())y.push(sg(s,d.key));else{const T=d.data.field(E.field);if(NP(T))throw new Pe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const x=E.field.canonicalString();throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(T)}return new Gh(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Cg(n.firestore);return function(s,c,d,p,y,E){const T=s.explicitOrderBy;if(y.length>T.length)throw new Pe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let P=0;P<y.length;P++){const L=y[P];if(T[P].field.isKeyField()){if("string"!=typeof L)throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof L}`);if(!HP(s)&&-1!==L.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${L}' contains a slash.`);const Z=s.path.child(dn.fromString(L));if(!Je.isDocumentKey(Z))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Z}' is not because it contains an odd number of segments.`);const oe=new Je(Z);x.push(sg(c,oe))}else{const Z=Wz(d,p,L);x.push(Z)}}return new Gh(x,E)}(n._query,n.firestore._databaseId,r,e,t,i)}}function i$(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HP(e)&&-1!==t.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(dn.fromString(t));if(!Je.isDocumentKey(i))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return sg(n,new Je(i))}if(t instanceof ei)return sg(n,t._key);throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fA(t)}.`)}function r$(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function s$(n,e,t){if(!t.isEqual(e))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const ete={maxAttempts:5};class O1{convertValue(e,t="none"){switch(rg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ig(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const i={};return ng(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new gA(Oi(e.latitude),Oi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=mG(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(C0(e));default:return null}}convertTimestamp(e){const t=Uh(e);return new zi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dn.fromString(e);Pt(m3(i));const r=new ud(i.get(1),i.get(3)),s=new Je(i.popFirst(5));return r.isEqual(t)||nr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function wA(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class tte extends O1{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}class o${constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cg(e)}set(e,t,i){this._verifyNotCommitted();const r=Jh(e,this._firestore),s=wA(r.converter,t,i),c=_A(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,ir.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Jh(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof fd?x1(this._dataReader,"WriteBatch.update",s._key,t,i,r):M1(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(c.toMutation(s._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Jh(e,this._firestore);return this._mutations=this._mutations.concat(new O0(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jh(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new Pe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Tg extends O1{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}function a$(n,e,t){n=an(n,ei);const i=an(n.firestore,li),r=wA(n.converter,e,t);return By(i,[_A(Cg(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,ir.none())])}function l$(n,e,t,...i){n=an(n,ei);const r=an(n.firestore,li),s=Cg(r);let c;return c="string"==typeof(e=(0,N.m9)(e))||e instanceof fd?x1(s,"updateDoc",n._key,e,t,i):M1(s,"updateDoc",n._key,e),By(r,[c.toMutation(n._key,ir.exists(!0))])}function c$(n,...e){var t,i,r;n=(0,N.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||I1(e[c])||(s=e[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(I1(e[c])){const T=e[c];e[c]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[c+1]=null===(i=T.error)||void 0===i?void 0:i.bind(T),e[c+2]=null===(r=T.complete)||void 0===r?void 0:r.bind(T)}let p,y,E;if(n instanceof ei)y=an(n.firestore,li),E=vy(n._key.path),p={next:T=>{e[c]&&e[c](P1(y,n,T))},error:e[c+1],complete:e[c+2]};else{const T=an(n,Ss);y=an(T.firestore,li),E=T._query;const x=new Tg(y);p={next:P=>{e[c]&&e[c](new Kh(y,x,T,P))},error:e[c+1],complete:e[c+2]},Jz(n._query)}return function(T,x,P,L){const Z=new dA(L),oe=new zN(x,Z,P);return T.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return VN(yield Ly(T),oe)})),()=>{Z.Aa(),T.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return HN(yield Ly(T),oe)}))}}(sr(y),E,d,p)}function By(n,e){return function(t,i){const r=new Fr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function WX(n,e,t){return YN.apply(this,arguments)}(yield D1(t),i,r)})),r.promise}(sr(n),e)}function P1(n,e,t){const i=t.docs.get(e._key),r=new Tg(n);return new pd(n,r,e._key,i,new Dg(t.hasPendingWrites,t.fromCache),e.converter)}class dte extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cg(e)}get(e){const t=Jh(e,this._firestore),i=new tte(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return ut();const s=r[0];if(s.isFoundDocument())return new eC(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new eC(this._firestore,i,t._key,null,t.converter);throw ut()})}set(e,t,i){const r=Jh(e,this._firestore),s=wA(r.converter,t,i),c=_A(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(e,t,i,...r){const s=Jh(e,this._firestore);let c;return c="string"==typeof(t=(0,N.m9)(t))||t instanceof fd?x1(this._dataReader,"Transaction.update",s._key,t,i,r):M1(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,c),this}delete(e){const t=Jh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Jh(e,this._firestore),i=new Tg(this._firestore);return super.get(e).then(r=>new pd(this._firestore,i,t._key,r._document,new Dg(!1,!1),t.converter))}}function N1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function d$(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function h$(){if(!function xQ(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){fy=Cs.SDK_VERSION,(0,Cs._registerComponent)(new nl.wA("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=new li(r,new DQ(t.getProvider("auth-internal")),new IQ(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC")),(0,Cs.registerVersion)(cG,"3.4.9",n),(0,Cs.registerVersion)(cG,"3.4.9","esm2017")}();class iC{constructor(e){this._delegate=e}static fromBase64String(e){return h$(),new iC(iu.fromBase64String(e))}static fromUint8Array(e){return d$(),new iC(iu.fromUint8Array(e))}toBase64(){return h$(),this._delegate.toBase64()}toUint8Array(){return d$(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function F1(n){return function bte(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class wte{enableIndexedDbPersistence(e,t){return function Iee(n,e){Gz(n=an(n,li));const t=sr(n),i=n._freezeSettings(),r=new _1;return jz(t,r,new Dz(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Aee(n){Gz(n=an(n,li));const e=sr(n),t=n._freezeSettings(),i=new _1;return jz(e,i,new cee(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Mee(n){if(n._initialized&&!n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(i){if(!ic.vt())return Promise.resolve();const r=i+"main";yield ic.delete(r)}),function(i){return t.apply(this,arguments)})(lN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class f${constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof ud||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&b0("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function Cee(n,e,t,i={}){var r;const s=(n=an(n,J0))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&b0("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=es.MOCK_USER;else{c=(0,N.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Pe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new es(p)}n._authCredentials=new EQ(new uG(c,d))}}(this._delegate,e,t,i)}enableNetwork(){return function Ree(n){return function pee(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Az(n),t=yield Mz(n);return e.setNetworkEnabled(!0),function(i){const r=nt(i);return r.wu.delete(0),K0(r)}(t)}))}(sr(n=an(n,li)))}(this._delegate)}disableNetwork(){return function kee(n){return function gee(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield Az(n),t=yield Mz(n);return e.setNetworkEnabled(!1),(i=(0,Ee.Z)(function*(r){const s=nt(r);s.wu.add(0),yield xy(s),s.yu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(sr(n=an(n,li)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Oz("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function xee(n){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function QX(n,e){return e1.apply(this,arguments)}(yield D1(e),t)})),t.promise}(sr(n=an(n,li)))}(this._delegate)}onSnapshotsInSync(e){return function ute(n,e){return function yee(n,e){const t=new dA(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield Ly(n),r=t,nt(i).bu.add(r),void r.next();var i,r})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield Ly(n),r=t,void nt(i).bu.delete(r);var i,r}))}}(sr(n=an(n,li)),I1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vy(this,Bz(this._delegate,e))}catch(t){throw Xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new fl(this,pA(this._delegate,e))}catch(t){throw Xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,function Eee(n,e){if(n=an(n,J0),S1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ss(n,null,(t=e,new dd(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function hte(n,e,t){n=an(n,li);const i=Object.assign(Object.assign({},ete),t);return function(r){if(r.maxAttempts<1)throw new Pe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function vee(n,e,t){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const r=yield(s=n,hA(s).then(c=>c.datastore));var s;new hee(n.asyncQueue,r,t,e,i).run()})),i.promise}(sr(n),r=>e(new dte(n,r)),i)}(this._delegate,t=>e(new p$(this,t)))}batch(){return sr(this._delegate),new g$(new o$(this._delegate,e=>By(this._delegate,e)))}loadBundle(e){return function Oee(n,e){const t=sr(n=an(n,li)),i=new Tee;return function bee(n,e,t,i){const r=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return Tz(p,y);if(p instanceof ArrayBuffer)return Tz(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new uee(p,c);var p}(t,Y0(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function lee(n,e,t){const i=nt(n);var r;(r=(0,Ee.Z)(function*(s,c,d){try{const p=yield c.getMetadata();if(yield function(x,P){const L=nt(x),Z=Lr(P.createTime);return L.persistence.runTransaction("hasNewerBundle","readonly",oe=>L._s.getBundleMetadata(oe,P.id)).then(oe=>!!oe&&oe.createTime.compareTo(Z)>=0)}(s.localStore,p))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(x=p).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);d._updateProgress(pz(p));const y=new HX(p,s.localStore,c.M);let E=yield c.ma();for(;E;){const x=yield y.Fu(E);x&&d._updateProgress(x),E=yield c.ma()}const T=yield y.complete();return yield hd(s,T.Lu,void 0),yield function(x,P){const L=nt(x);return L.persistence.runTransaction("Save bundle","readwrite",Z=>L._s.saveBundleMetadata(Z,P))}(s.localStore,p),d._completeWith(T.progress),Promise.resolve(T.Bu)}catch(p){return b0("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var x}),function(s,c,d){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield D1(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function Pee(n,e){return function wee(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,i){const r=nt(t);return r.persistence.runTransaction("Get named query","readonly",s=>r._s.getNamedQuery(s,i))}(yield E1(n),e)}))}(sr(n=an(n,li)),e).then(t=>t?new Ss(n,null,t.query):null)}(this._delegate,e).then(t=>t?new eo(this,t):null)}}class CA extends O1{constructor(e){super(),this.firestore=e}convertBytes(e){return new iC(new iu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fl.forKey(t,this.firestore,null)}}class p${constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new CA(e)}get(e){const t=Ig(e);return this._delegate.get(t).then(i=>new rC(this._firestore,new pd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Ig(e);return i?(N1("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Ig(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Ig(e);return this._delegate.delete(t),this}}class g${constructor(e){this._delegate=e}set(e,t,i){const r=Ig(e);return i?(N1("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Ig(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Ig(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Sg{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new tC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sC(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Sg.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Sg(e,new CA(e),t),r.set(t,s)),s}}Sg.INSTANCES=new WeakMap;class fl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CA(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fl(t,new ei(t._delegate,i,new Je(e)))}static forKey(e,t,i){return new fl(t,new ei(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vy(this.firestore,Bz(this._delegate,e))}catch(t){throw Xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof ei&&Vz(this._delegate,e)}set(e,t){t=N1("DocumentReference.set",t);try{return t?a$(this._delegate,e,t):a$(this._delegate,e)}catch(i){throw Xs(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?l$(this._delegate,e):l$(this._delegate,e,t,...i)}catch(r){throw Xs(r,"updateDoc()","DocumentReference.update()")}}delete(){return function lte(n){return By(an(n.firestore,li),[new O0(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=m$(e),i=_$(e,r=>new rC(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return c$(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ite(n){n=an(n,ei);const e=an(n.firestore,li),t=sr(e),i=new Tg(e);return function mee(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,c){try{const d=yield function(p,y){const E=nt(p);return E.persistence.runTransaction("read document","readonly",T=>E.fi.Ls(T,y))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Pe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=Oy(d,`Failed to get document '${s} from cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield E1(n),e,t);var i})),t.promise}(t,n._key).then(r=>new pd(e,i,n._key,r,new Dg(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function rte(n){n=an(n,ei);const e=an(n.firestore,li);return xz(sr(e),n._key,{source:"server"}).then(t=>P1(e,n,t))}(this._delegate):function nte(n){n=an(n,ei);const e=an(n.firestore,li);return xz(sr(e),n._key).then(t=>P1(e,n,t))}(this._delegate),t.then(i=>new rC(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new fl(this.firestore,this._delegate.withConverter(e?Sg.getInstance(this.firestore,e):null))}}function Xs(n,e,t){return n.message=n.message.replace(e,t),n}function m$(n){for(const e of n)if("object"==typeof e&&!F1(e))return e;return{}}function _$(n,e){var t,i;let r;return r=F1(n[0])?n[0]:F1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class rC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Qz(this._delegate,e._delegate)}}class sC extends rC{data(e){const t=this._delegate.data(e);return function wQ(n,e){n||ut()}(void 0!==t),t}}class eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CA(e)}where(e,t,i){try{return new eo(this.firestore,Qh(this._delegate,function $ee(n,e,t){const i=e,r=bA("where",n);return new zee(r,i,t)}(e,t,i)))}catch(r){throw Xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new eo(this.firestore,Qh(this._delegate,function Wee(n,e="asc"){const t=e,i=bA("orderBy",n);return new qee(i,t)}(e,t)))}catch(i){throw Xs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new eo(this.firestore,Qh(this._delegate,function Zee(n){return Fz("limit",n),new Xz("limit",n,"F")}(e)))}catch(t){throw Xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new eo(this.firestore,Qh(this._delegate,function Yee(n){return Fz("limitToLast",n),new Xz("limitToLast",n,"L")}(e)))}catch(t){throw Xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new eo(this.firestore,Qh(this._delegate,function Kee(...n){return new e$("startAt",n,!0)}(...e)))}catch(t){throw Xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new eo(this.firestore,Qh(this._delegate,function Qee(...n){return new e$("startAfter",n,!1)}(...e)))}catch(t){throw Xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new eo(this.firestore,Qh(this._delegate,function Jee(...n){return new t$("endBefore",n,!1)}(...e)))}catch(t){throw Xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new eo(this.firestore,Qh(this._delegate,function Xee(...n){return new t$("endAt",n,!0)}(...e)))}catch(t){throw Xs(t,"endAt()","Query.endAt()")}}isEqual(e){return Uz(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ote(n){n=an(n,Ss);const e=an(n.firestore,li),t=sr(e),i=new Tg(e);return function _ee(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,c){try{const d=yield sA(r,s,!0),p=new _z(s,d._i),y=p.Wu(d.documents),E=p.applyChanges(y,!1);c.resolve(E.snapshot)}catch(d){const p=Oy(d,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield E1(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Kh(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function ate(n){n=an(n,Ss);const e=an(n.firestore,li),t=sr(e),i=new Tg(e);return Rz(t,n._query,{source:"server"}).then(r=>new Kh(e,i,n,r))}(this._delegate):function ste(n){n=an(n,Ss);const e=an(n.firestore,li),t=sr(e),i=new Tg(e);return Jz(n._query),Rz(t,n._query).then(r=>new Kh(e,i,n,r))}(this._delegate),t.then(i=>new L1(this.firestore,new Kh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=m$(e),i=_$(e,r=>new L1(this.firestore,new Kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return c$(this._delegate,t,i)}withConverter(e){return new eo(this.firestore,this._delegate.withConverter(e?Sg.getInstance(this.firestore,e):null))}}class Ete{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new sC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class L1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ete(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new sC(this._firestore,i))})}isEqual(e){return Qz(this._delegate,e._delegate)}}class Vy extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fl(this.firestore,e):null}doc(e){try{return new fl(this.firestore,void 0===e?pA(this._delegate):pA(this._delegate,e))}catch(t){throw Xs(t,"doc()","CollectionReference.doc()")}}add(e){return function cte(n,e){const t=an(n.firestore,li),i=pA(n),r=wA(n.converter,e);return By(t,[_A(Cg(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,ir.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new fl(this.firestore,t))}isEqual(e){return Vz(this._delegate,e._delegate)}withConverter(e){return new Vy(this.firestore,this._delegate.withConverter(e?Sg.getInstance(this.firestore,e):null))}}function Ig(n){return an(n,ei)}class B1{constructor(...e){this._delegate=new fd(...e)}static documentId(){return new B1(gr.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof fd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ag{constructor(e){this._delegate=e}static serverTimestamp(){const e=function pte(){return new A1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ag(e)}static delete(){const e=function fte(){return new X0("deleteField")}();return e._methodName="FieldValue.delete",new Ag(e)}static arrayUnion(...e){const t=function gte(...n){return new Bee("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ag(t)}static arrayRemove(...e){const t=function mte(...n){return new Vee("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ag(t)}static increment(e){const t=function _te(n){return new Uee("increment",n)}(e);return t._methodName="FieldValue.increment",new Ag(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Dte={Firestore:f$,GeoPoint:gA,Timestamp:zi,Blob:iC,Transaction:p$,WriteBatch:g$,DocumentReference:fl,DocumentSnapshot:rC,Query:eo,QueryDocumentSnapshot:sC,QuerySnapshot:L1,CollectionReference:Vy,FieldPath:B1,FieldValue:Ag,setLogLevel:function Cte(n){!function bQ(n){Vh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function y$(n,e){return function Ite(n,e=Bu.z){return new sn.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function V1(n,e){return y$(n,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function EA(n,e){return V1(n,e).pipe(gi(void 0),HO(),(0,ot.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const p=r.find(E=>E.doc.ref.isEqual(c.ref)),y=null==t?void 0:t.payload.docs.find(E=>E.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function v$(n,e,t){return EA(n,t).pipe(Tr((i,r)=>function Mte(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function xte(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return U1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return U1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return U1(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Gv(),(0,ot.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function U1(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function b$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Ste(n){(function Tte(n,e){n.INTERNAL.registerComponent(new nl.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Dte)))})(n,(e,t)=>new f$(e,t,new wte)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(ZT.Z);class w${constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=EA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ot.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(gi(void 0),HO(),Nn(([i,r])=>r.length>0||!i),(0,ot.U)(([i,r])=>r),mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Tr((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=b$(e);return v$(this.query,t,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return V1(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),mn.iC)}get(e){return(0,vn.D)(this.query.get(e)).pipe(mn.iC)}add(e){return this.ref.add(e)}doc(e){return new C$(this.ref.doc(e),this.afs)}}class C${constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=T$(i,t);return new w$(r,s,this.afs)}snapshotChanges(){return function Ate(n,e){return y$(n,e).pipe(gi(void 0),HO(),(0,ot.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,vn.D)(this.ref.get(e)).pipe(mn.iC)}}class Rte{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?EA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Nn(t=>t.length>0),mn.iC):EA(this.query,this.afs.schedulers.outsideAngular).pipe(mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Tr((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=b$(e);return v$(this.query,t,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return V1(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),mn.iC)}get(e){return(0,vn.D)(this.query.get(e)).pipe(mn.iC)}}const E$=new l.OlP("angularfire2.enableFirestorePersistence"),D$=new l.OlP("angularfire2.firestore.persistenceSettings"),kte=new l.OlP("angularfire2.firestore.settings"),Ote=new l.OlP("angularfire2.firestore.use-emulator");function T$(n,e=(t=>t)){return{query:e(n),ref:n}}let Pte=(()=>{class n{constructor(t,i,r,s,c,d,p,y,E,T,x,P,L,Z,oe,Le,We){this.schedulers=p;const He=(0,Gi.on)(t,d,i),Ge=E;T&&WT(He,d,x,L,Z,oe,P,Le),[this.firestore,this.persistenceEnabled$]=(0,Gi.cc)(`${He.name}.firestore`,"AngularFirestore",He.name,()=>{const At=d.runOutsideAngular(()=>He.firestore());if(s&&At.settings(s),Ge&&At.useEmulator(...Ge),r&&!va(c)){const xt=()=>{try{return(0,vn.D)(At.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(nn){return"undefined"!=typeof console&&console.warn(nn),Ze(!1)}};return[At,d.runOutsideAngular(xt)]}return[At,Ze(!1)]},[s,Ge,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:c}=T$(r,i),d=this.schedulers.ngZone.run(()=>s);return new w$(d,c,this)}collectionGroup(t,i){const r=i||(c=>c),s=this.firestore.collectionGroup(t);return new Rte(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new C$(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Gi.Dh),l.LFG(Gi.xv,8),l.LFG(E$,8),l.LFG(kte,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(mn.HU),l.LFG(D$,8),l.LFG(Ote,8),l.LFG(F_,8),l.LFG(GT,8),l.LFG(zT,8),l.LFG(cw,8),l.LFG(uw,8),l.LFG($T,8),l.LFG(qT,8),l.LFG(wh,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Nte=(()=>{class n{constructor(){N_.Z.registerVersion("angularfire",mn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:E$,useValue:!0},{provide:D$,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Pte]}),n})();const S$_firebaseConfig={apiKey:"AIzaSyAnQtjuYBulN1TSyD1wY34d74gtxKiwL-g",authDomain:"car-web-d2d5d.firebaseapp.com",projectId:"car-web-d2d5d",storageBucket:"car-web-d2d5d.appspot.com",messagingSenderId:"1016104226993",appId:"1:1016104226993:web:bfb7814e99ceaa9dfc9290",measurementId:"G-NGBR2B7S9P"};let R$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[bn,p_],bn]}),n})(),k$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),O$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[k$,p_,bn,fE],k$,bn]}),n})(),tne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[JU,nH,zw,vU,BU,vp,tH,R$,O$,uH,v_],JU,nH,zw,vU,BU,vp,tH,R$,O$,uH,v_]}),n})(),nne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[EK]}),n.\u0275inj=l.cJS({providers:[],imports:[[Da,CK,Ix,Z8,tne,i8,Gi.hO.initializeApp(S$_firebaseConfig),QL,Nte,h9,aZ,r8]]}),n})();(0,l.G48)(),gc().bootstrapModule(nne).catch(n=>console.error(n))},5867:(it,be,F)=>{F.d(be,{Mq:()=>l.getApp,C6:()=>l.getApps});var l=F(9681);(0,l.registerVersion)("firebase","9.8.2","app")},127:(it,be,F)=>{F.d(be,{Z:()=>l.Z});var l=F(3942);l.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(it,be,F)=>{F.r(be);var l=F(5861),ee=F(3942),B=F(2090),de=F(9681),ae=F(655),_e=F(1877),ne=F(4859);const Ne=function Ye(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new _e.Yd("@firebase/auth");function et(v,...g){Ke.logLevel<=_e.in.ERROR&&Ke.error(`Auth (${de.SDK_VERSION}): ${v}`,...g)}function Me(v,...g){throw $e(v,...g)}function Ce(v,...g){return $e(v,...g)}function Te(v,g,_){const w=Object.assign(Object.assign({},je()),{[g]:_});return new B.LL("auth","Firebase",w).create(g,{appName:v.name})}function ze(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Me(v,"argument-error"),Te(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(v,...g){if("string"!=typeof v){const _=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return pe.create(v,...g)}function z(v,g,..._){if(!v)throw $e(g,..._)}function De(v){const g="INTERNAL ASSERTION FAILED: "+v;throw et(g),new Error(g)}function Q(v,g){v||De(g)}const le=new Map;function ie(v){Q(v instanceof Function,"Expected a class definition");let g=le.get(v);return g?(Q(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,le.set(v,g),g)}function Fe(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function pt(){return"http:"===qt()||"https:"===qt()}function qt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ln{constructor(g,_){this.shortDelay=g,this.longDelay=_,Q(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pt()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gn(v,g){Q(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class fn{static initialize(g,_,w){this.fetchImpl=g,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void De("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void De("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void De("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Wi=new ln(3e4,6e4);function Jt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Ht(v,g,_,w){return is.apply(this,arguments)}function is(){return(is=(0,l.Z)(function*(v,g,_,w,A={}){return _r(v,A,(0,l.Z)(function*(){let O={},K={};w&&("GET"===g?K=w:O={body:JSON.stringify(w)});const ge=(0,B.xO)(Object.assign({key:v.config.apiKey},K)).slice(1),Be=yield v._getAdditionalHeaders();return Be["Content-Type"]="application/json",v.languageCode&&(Be["X-Firebase-Locale"]=v.languageCode),fn.fetch()(no(v,v.config.apiHost,_,ge),Object.assign({method:g,headers:Be,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function _r(v,g,_){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,l.Z)(function*(v,g,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},tn),g);try{const A=new or(v),O=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const K=yield O.json();if("needConfirmation"in K)throw Hr(v,"account-exists-with-different-credential",K);if(O.ok&&!("errorMessage"in K))return K;{const ge=O.ok?K.errorMessage:K.error.message,[Be,Xe]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw Hr(v,"credential-already-in-use",K);if("EMAIL_EXISTS"===Be)throw Hr(v,"email-already-in-use",K);if("USER_DISABLED"===Be)throw Hr(v,"user-disabled",K);const wt=w[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Te(v,wt,Xe);Me(v,wt)}}catch(A){if(A instanceof B.ZR)throw A;Me(v,"network-request-failed")}})).apply(this,arguments)}function Zi(v,g,_,w){return rs.apply(this,arguments)}function rs(){return(rs=(0,l.Z)(function*(v,g,_,w,A={}){const O=yield Ht(v,g,_,w,A);return"mfaPendingCredential"in O&&Me(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function no(v,g,_,w){const A=`${g}${_}?${w}`;return v.config.emulator?Gn(v.config,A):`${v.config.apiScheme}://${A}`}class or{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(Ce(this.auth,"network-request-failed")),Wi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hr(v,g,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const A=Ce(v,g,w);return A.customData._tokenResponse=_,A}function yr(){return(yr=(0,l.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Bn(v,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,l.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function io(v,g){return ar.apply(this,arguments)}function ar(){return(ar=(0,l.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ci(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Ao(){return(Ao=(0,l.Z)(function*(v,g=!1){const _=(0,B.m9)(v),w=yield _.getIdToken(g),A=ct(w);z(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,K=null==O?void 0:O.sign_in_provider;return{claims:A,token:w,authTime:ci(Wt(A.auth_time)),issuedAtTime:ci(Wt(A.iat)),expirationTime:ci(Wt(A.exp)),signInProvider:K||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Wt(v){return 1e3*Number(v)}function ct(v){const[g,_,w]=v.split(".");if(void 0===g||void 0===_||void 0===w)return et("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,B.tV)(_);return A?JSON.parse(A):(et("Failed to decode base64 JWT payload"),null)}catch(A){return et("Caught error parsing JWT payload as JSON",A),null}}function Ni(v,g){return br.apply(this,arguments)}function br(){return(br=(0,l.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(w){throw w instanceof B.ZR&&zt(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function zt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Mo{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,l.Z)(function*(){yield _.iteration()}),w)}iteration(){var g=this;return(0,l.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Fi{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ci(this.lastLoginAt),this.creationTime=ci(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Li(v){return H.apply(this,arguments)}function H(){return(H=(0,l.Z)(function*(v){var g;const _=v.auth,w=yield v.getIdToken(),A=yield Ni(v,io(_,{idToken:w}));z(null==A?void 0:A.users.length,_,"internal-error");const O=A.users[0];v._notifyReloadListener(O);const K=(null===(g=O.providerUserInfo)||void 0===g?void 0:g.length)?q(O.providerUserInfo):[],ge=Ie(v.providerData,K),wt=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==ge?void 0:ge.length)),_t={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ge,metadata:new Fi(O.createdAt,O.lastLoginAt),isAnonymous:wt};Object.assign(v,_t)})).apply(this,arguments)}function Y(){return(Y=(0,l.Z)(function*(v){const g=(0,B.m9)(v);yield Li(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Ie(v,g){return[...v.filter(w=>!g.some(A=>A.providerId===w.providerId)),...g]}function q(v){return v.map(g=>{var{providerId:_}=g,w=(0,ae._T)(g,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Oe(){return(Oe=(0,l.Z)(function*(v,g){const _=yield _r(v,{},(0,l.Z)(function*(){const w=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:A,apiKey:O}=v.config,K=no(v,A,"/v1/token",`key=${O}`),ge=yield v._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",fn.fetch()(K,{method:"POST",headers:ge,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){z(g.idToken,"internal-error"),z(void 0!==g.idToken,"internal-error"),z(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function Ct(v){const g=ct(v);return z(g,"internal-error"),z(void 0!==g.exp,"internal-error"),z(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var w=this;return(0,l.Z)(function*(){return z(!w.accessToken||w.refreshToken,g,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var w=this;return(0,l.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:K}=yield function te(v,g){return Oe.apply(this,arguments)}(g,_);w.updateTokensAndExpiration(A,O,Number(K))})()}updateTokensAndExpiration(g,_,w){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,_){const{refreshToken:w,accessToken:A,expirationTime:O}=_,K=new rt;return w&&(z("string"==typeof w,"internal-error",{appName:g}),K.refreshToken=w),A&&(z("string"==typeof A,"internal-error",{appName:g}),K.accessToken=A),O&&(z("number"==typeof O,"internal-error",{appName:g}),K.expirationTime=O),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new rt,this.toJSON())}_performRefresh(){return De("not implemented")}}function yt(v,g){z("string"==typeof v||void 0===v,"internal-error",{appName:g})}class St{constructor(g){var{uid:_,auth:w,stsTokenManager:A}=g,O=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Fi(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,l.Z)(function*(){const w=yield Ni(_,_.stsTokenManager.getToken(_.auth,g));return z(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(g){return function vr(v){return Ao.apply(this,arguments)}(this,g)}reload(){return function W(v){return Y.apply(this,arguments)}(this)}_assign(g){this!==g&&(z(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new St(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var w=this;return(0,l.Z)(function*(){let A=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),A=!0),_&&(yield Li(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,l.Z)(function*(){const _=yield g.getIdToken();return yield Ni(g,function bt(v,g){return yr.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var w,A,O,K,ge,Be,Xe,wt;const _t=null!==(w=_.displayName)&&void 0!==w?w:void 0,Hn=null!==(A=_.email)&&void 0!==A?A:void 0,Or=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Lu=null!==(K=_.photoURL)&&void 0!==K?K:void 0,dv=null!==(ge=_.tenantId)&&void 0!==ge?ge:void 0,ja=null!==(Be=_._redirectEventId)&&void 0!==Be?Be:void 0,Zd=null!==(Xe=_.createdAt)&&void 0!==Xe?Xe:void 0,Yd=null!==(wt=_.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:Af,emailVerified:Kd,isAnonymous:ri,providerData:Mf,stsTokenManager:xf}=_;z(Af&&xf,g,"internal-error");const Qd=rt.fromJSON(this.name,xf);z("string"==typeof Af,g,"internal-error"),yt(_t,g.name),yt(Hn,g.name),z("boolean"==typeof Kd,g,"internal-error"),z("boolean"==typeof ri,g,"internal-error"),yt(Or,g.name),yt(Lu,g.name),yt(dv,g.name),yt(ja,g.name),yt(Zd,g.name),yt(Yd,g.name);const Ga=new St({uid:Af,auth:g,email:Hn,emailVerified:Kd,displayName:_t,isAnonymous:ri,photoURL:Lu,phoneNumber:Or,tenantId:dv,stsTokenManager:Qd,createdAt:Zd,lastLoginAt:Yd});return Mf&&Array.isArray(Mf)&&(Ga.providerData=Mf.map(Pc=>Object.assign({},Pc))),ja&&(Ga._redirectEventId=ja),Ga}static _fromIdTokenResponse(g,_,w=!1){return(0,l.Z)(function*(){const A=new rt;A.updateFromServerResponse(_);const O=new St({uid:_.localId,auth:g,stsTokenManager:A,isAnonymous:w});return yield Li(O),O})()}}const Et=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(_,w){var A=this;return(0,l.Z)(function*(){A.storage[_]=w})()}_get(_){var w=this;return(0,l.Z)(function*(){const A=w.storage[_];return void 0===A?null:A})()}_remove(_){var w=this;return(0,l.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function ti(v,g,_){return`firebase:${v}:${g}:${_}`}class Yi{constructor(g,_,w){this.persistence=g,this.auth=_,this.userKey=w;const{config:A,name:O}=this.auth;this.fullUserKey=ti(this.userKey,A.apiKey,O),this.fullPersistenceKey=ti("persistence",A.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,l.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?St._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,l.Z)(function*(){if(_.persistence===g)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,w="authUser"){return(0,l.Z)(function*(){if(!_.length)return new Yi(ie(Et),g,w);const A=(yield Promise.all(_.map(function(){var Xe=(0,l.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let O=A[0]||ie(Et);const K=ti(w,g.config.apiKey,g.name);let ge=null;for(const Xe of _)try{const wt=yield Xe._get(K);if(wt){const _t=St._fromJSON(g,wt);Xe!==O&&(ge=_t),O=Xe;break}}catch(wt){}const Be=A.filter(Xe=>Xe._shouldAllowMigration);return O._shouldAllowMigration&&Be.length?(O=Be[0],ge&&(yield O._set(K,ge.toJSON())),yield Promise.all(_.map(function(){var Xe=(0,l.Z)(function*(wt){if(wt!==O)try{yield wt._remove(K)}catch(_t){}});return function(wt){return Xe.apply(this,arguments)}}())),new Yi(O,g,w)):new Yi(O,g,w)})()}}function rc(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ni(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(pl(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Is(g))return"Blackberry";if(ii(g))return"Webos";if(sc(g))return"Safari";if((g.includes("chrome/")||gl(g))&&!g.includes("edge/"))return"Chrome";if(Ki(g))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function pl(v=(0,B.z$)()){return/firefox\//i.test(v)}function sc(v=(0,B.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function gl(v=(0,B.z$)()){return/crios\//i.test(v)}function ni(v=(0,B.z$)()){return/iemobile/i.test(v)}function Ki(v=(0,B.z$)()){return/android/i.test(v)}function Is(v=(0,B.z$)()){return/blackberry/i.test(v)}function ii(v=(0,B.z$)()){return/webos/i.test(v)}function lr(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)}function ro(v=(0,B.z$)()){return lr(v)||Ki(v)||ii(v)||Is(v)||/windows phone/i.test(v)||ni(v)}function pa(v,g=[]){let _;switch(v){case"Browser":_=rc((0,B.z$)());break;case"Worker":_=`${rc((0,B.z$)())}-${v}`;break;default:_=v}const w=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${de.SDK_VERSION}/${w}`}class cr{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const w=O=>new Promise((K,ge)=>{try{K(g(O))}catch(Be){ge(Be)}});w.onAbort=_,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,l.Z)(function*(){if(_.auth.currentUser===g)return;const w=[];try{for(const A of _.queue)yield A(g),A.onAbort&&w.push(A.onAbort)}catch(A){w.reverse();for(const O of w)try{O()}catch(K){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:A.message})}})()}}class Qe{constructor(g,_,w){this.app=g,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pn(this),this.idTokenSubscription=new pn(this),this.beforeStateQueue=new cr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,_){var w=this;return _&&(this._popupRedirectResolver=ie(_)),this._initializationPromise=this.queue((0,l.Z)(function*(){var A,O;if(!w._deleted&&(w.persistenceManager=yield Yi.create(w,g),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(K){}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,l.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,l.Z)(function*(){var w;const A=yield _.assertedPersistence.getCurrentUser();let O=A,K=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ge=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Be=null==O?void 0:O._redirectEventId,Xe=yield _.tryRedirectSignIn(g);(!ge||ge===Be)&&(null==Xe?void 0:Xe.user)&&(O=Xe.user,K=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(K)try{yield _.beforeStateQueue.runMiddleware(O)}catch(ge){O=A,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ge))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return z(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,l.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(A){yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,l.Z)(function*(){try{yield Li(g)}catch(w){if("auth/network-request-failed"!==w.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function tt(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,l.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,l.Z)(function*(){const w=g?(0,B.m9)(g):null;return w&&z(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(g,_=!1){var w=this;return(0,l.Z)(function*(){if(!w._deleted)return g&&z(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,l.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,l.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,l.Z)(function*(){yield _.assertedPersistence.setPersistence(ie(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,_,w){return this.registerStateListener(this.authStateSubscription,g,_,w)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,w){return this.registerStateListener(this.idTokenSubscription,g,_,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var w=this;return(0,l.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(_);return null===g?A.removeCurrentUser():A.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,l.Z)(function*(){if(!_.redirectPersistenceManager){const w=g&&ie(g)||_._popupRedirectResolver;z(w,_,"argument-error"),_.redirectPersistenceManager=yield Yi.create(_,[ie(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,l.Z)(function*(){var w,A;return _._isInitialized&&(yield _.queue((0,l.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===g?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,l.Z)(function*(){if(g===_.currentUser)return _.queue((0,l.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,w,A){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),K=this._isInitialized?Promise.resolve():this._initializationPromise;return z(K,this,"internal-error"),K.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,w,A):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,l.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=pa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,l.Z)(function*(){var _;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const A=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function ht(v){return(0,B.m9)(v)}class pn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ss(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function os(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class jr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return De("not implemented")}_getIdTokenResponse(g){return De("not implemented")}_linkToIdToken(g,_){return De("not implemented")}_getReauthenticationResolver(g){return De("not implemented")}}function qn(v,g){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,l.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:resetPassword",Jt(v,g))})).apply(this,arguments)}function ga(v,g){return as.apply(this,arguments)}function as(){return(as=(0,l.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function oc(v,g){return so.apply(this,arguments)}function so(){return(so=(0,l.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",Jt(v,g))})).apply(this,arguments)}function Ro(){return(Ro=(0,l.Z)(function*(v,g){return Zi(v,"POST","/v1/accounts:signInWithPassword",Jt(v,g))})).apply(this,arguments)}function oo(v,g){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,l.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:sendOobCode",Jt(v,g))})).apply(this,arguments)}function yn(v,g){return ac.apply(this,arguments)}function ac(){return(ac=(0,l.Z)(function*(v,g){return oo(v,g)})).apply(this,arguments)}function _l(v,g){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,l.Z)(function*(v,g){return oo(v,g)})).apply(this,arguments)}function wr(v,g){return yl.apply(this,arguments)}function yl(){return(yl=(0,l.Z)(function*(v,g){return oo(v,g)})).apply(this,arguments)}function _d(v,g){return ls.apply(this,arguments)}function ls(){return(ls=(0,l.Z)(function*(v,g){return oo(v,g)})).apply(this,arguments)}function su(){return(su=(0,l.Z)(function*(v,g){return Zi(v,"POST","/v1/accounts:signInWithEmailLink",Jt(v,g))})).apply(this,arguments)}function yd(){return(yd=(0,l.Z)(function*(v,g){return Zi(v,"POST","/v1/accounts:signInWithEmailLink",Jt(v,g))})).apply(this,arguments)}class Vi extends jr{constructor(g,_,w,A=null){super("password",w),this._email=g,this._password=_,this._tenantId=A}static _fromEmailAndPassword(g,_){return new Vi(g,_,"password")}static _fromEmailAndCode(g,_,w=null){return new Vi(g,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,l.Z)(function*(){switch(_.signInMethod){case"password":return function ui(v,g){return Ro.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function cs(v,g){return su.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Me(g,"internal-error")}})()}_linkToIdToken(g,_){var w=this;return(0,l.Z)(function*(){switch(w.signInMethod){case"password":return ga(g,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function kg(v,g){return yd.apply(this,arguments)}(g,{idToken:_,email:w._email,oobCode:w._password});default:Me(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ao(v,g){return vd.apply(this,arguments)}function vd(){return(vd=(0,l.Z)(function*(v,g){return Zi(v,"POST","/v1/accounts:signInWithIdp",Jt(v,g))})).apply(this,arguments)}class As extends jr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new As(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Me("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:A}=_,O=(0,ae._T)(_,["providerId","signInMethod"]);if(!w||!A)return null;const K=new As(w,A);return K.idToken=O.idToken||void 0,K.accessToken=O.accessToken||void 0,K.secret=O.secret,K.nonce=O.nonce,K.pendingToken=O.pendingToken||null,K}_getIdTokenResponse(g){return ao(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,ao(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ao(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,B.xO)(_)}return g}}function tf(v,g){return bd.apply(this,arguments)}function bd(){return(bd=(0,l.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:sendVerificationCode",Jt(v,g))})).apply(this,arguments)}function lo(){return(lo=(0,l.Z)(function*(v,g){return Zi(v,"POST","/v1/accounts:signInWithPhoneNumber",Jt(v,g))})).apply(this,arguments)}function wd(){return(wd=(0,l.Z)(function*(v,g){const _=yield Zi(v,"POST","/v1/accounts:signInWithPhoneNumber",Jt(v,g));if(_.temporaryProof)throw Hr(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ng={USER_NOT_FOUND:"user-not-found"};function Cd(){return(Cd=(0,l.Z)(function*(v,g){return Zi(v,"POST","/v1/accounts:signInWithPhoneNumber",Jt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ng)})).apply(this,arguments)}class ma extends jr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new ma({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new ma({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function ou(v,g){return lo.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Pg(v,g){return wd.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Fg(v,g){return Cd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:w,verificationCode:A}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:w,code:A}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:w,phoneNumber:A,temporaryProof:O}=g;return w||_||A||O?new ma({verificationId:_,verificationCode:w,phoneNumber:A,temporaryProof:O}):null}}class lc{constructor(g){var _,w,A,O,K,ge;const Be=(0,B.zd)((0,B.pd)(g)),Xe=null!==(_=Be.apiKey)&&void 0!==_?_:null,wt=null!==(w=Be.oobCode)&&void 0!==w?w:null,_t=function nf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Be.mode)&&void 0!==A?A:null);z(Xe&&wt&&_t,"argument-error"),this.apiKey=Xe,this.operation=_t,this.code=wt,this.continueUrl=null!==(O=Be.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(K=Be.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(ge=Be.tenantId)&&void 0!==ge?ge:null}static parseLink(g){const _=function vl(v){const g=(0,B.zd)((0,B.pd)(v)).link,_=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,w=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(w?(0,B.zd)((0,B.pd)(w)).link:null)||w||_||g||v}(g);try{return new lc(_)}catch(w){return null}}}let Dd=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return Vi._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const A=lc.parseLink(w);return z(A,"argument-error"),Vi._fromEmailAndCode(_,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ui{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ko extends Ui{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class us extends ko{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return z("providerId"in _&&"signInMethod"in _,"argument-error"),As._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return z(g.idToken||g.accessToken,"argument-error"),As._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return us.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return us.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:O,nonce:K,providerId:ge}=g;if(!w&&!A&&!_&&!O||!ge)return null;try{return new us(ge)._credential({idToken:_,accessToken:w,nonce:K,pendingToken:O})}catch(Be){return null}}}let _a=(()=>{class v extends ko{constructor(){super("facebook.com")}static credential(_){return As._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Td=(()=>{class v extends ko{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return As._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:A}=_;if(!w&&!A)return null;try{return v.credential(w,A)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),rf=(()=>{class v extends ko{constructor(){super("github.com")}static credential(_){return As._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Oo extends jr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return ao(g,this.buildRequest())}_linkToIdToken(g,_){const w=this.buildRequest();return w.idToken=_,ao(g,w)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,ao(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:A,pendingToken:O}=_;return w&&A&&O&&w===A?new Oo(w,O):null}static _create(g,_){return new Oo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qi extends Ui{constructor(g){z(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Qi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Qi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Oo.fromJSON(g);return z(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:w}=g;if(!_||!w)return null;try{return Oo._create(w,_)}catch(A){return null}}}let Sd=(()=>{class v extends ko{constructor(){super("twitter.com")}static credential(_,w){return As._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=_;if(!w||!A)return null;try{return v.credential(w,A)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Hi(v,g){return va.apply(this,arguments)}function va(){return(va=(0,l.Z)(function*(v,g){return Zi(v,"POST","/v1/accounts:signUp",Jt(v,g))})).apply(this,arguments)}class Cr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,w,A=!1){return(0,l.Z)(function*(){const O=yield St._fromIdTokenResponse(g,w,A),K=au(w);return new Cr({user:O,providerId:K,_tokenResponse:w,operationType:_})})()}static _forOperation(g,_,w){return(0,l.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const A=au(w);return new Cr({user:g,providerId:A,_tokenResponse:w,operationType:_})})()}}function au(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function lu(){return(lu=(0,l.Z)(function*(v){var g;const _=ht(v);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new Cr({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield Hi(_,{returnSecureToken:!0}),A=yield Cr._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class ba extends B.ZR{constructor(g,_,w,A){var O;super(_.code,_.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,ba.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,_,w,A){return new ba(g,_,w,A)}}function cu(v,g,_,w){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?ba._fromErrorAndOperation(v,O,g,w):O})}function ds(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function gn(){return(gn=(0,l.Z)(function*(v,g){const _=(0,B.m9)(v);yield rn(!0,_,g);const{providerUserInfo:w}=yield Bn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),A=ds(w||[]);return _.providerData=_.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function bl(v,g){return Po.apply(this,arguments)}function Po(){return(Po=(0,l.Z)(function*(v,g,_=!1){const w=yield Ni(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return Cr._forOperation(v,"link",w)})).apply(this,arguments)}function rn(v,g,_){return wl.apply(this,arguments)}function wl(){return(wl=(0,l.Z)(function*(v,g,_){yield Li(g);const A=!1===v?"provider-already-linked":"no-such-provider";z(ds(g.providerData).has(_)===v,g.auth,A)})).apply(this,arguments)}function cc(v,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,l.Z)(function*(v,g,_=!1){const{auth:w}=v,A="reauthenticate";try{const O=yield Ni(v,cu(w,A,g,v),_);z(O.idToken,w,"internal-error");const K=ct(O.idToken);z(K,w,"internal-error");const{sub:ge}=K;return z(v.uid===ge,w,"user-mismatch"),Cr._forOperation(v,A,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Me(w,"user-mismatch"),O}})).apply(this,arguments)}function Ti(v,g){return uu.apply(this,arguments)}function uu(){return(uu=(0,l.Z)(function*(v,g,_=!1){const w="signIn",A=yield cu(v,w,g),O=yield Cr._fromIdTokenResponse(v,w,A);return _||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function kn(v,g){return hs.apply(this,arguments)}function hs(){return(hs=(0,l.Z)(function*(v,g){return Ti(ht(v),g)})).apply(this,arguments)}function Si(v,g){return No.apply(this,arguments)}function No(){return(No=(0,l.Z)(function*(v,g){const _=(0,B.m9)(v);return yield rn(!1,_,g.providerId),bl(_,g)})).apply(this,arguments)}function Ms(v,g){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,l.Z)(function*(v,g){return cc((0,B.m9)(v),g)})).apply(this,arguments)}function Gr(v,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,l.Z)(function*(v,g){return Zi(v,"POST","/v1/accounts:signInWithCustomToken",Jt(v,g))})).apply(this,arguments)}function vt(){return(vt=(0,l.Z)(function*(v,g){const _=ht(v),w=yield Gr(_,{token:g,returnSecureToken:!0}),A=yield Cr._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ca{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?uc._fromServerResponse(g,_):Me(g,"internal-error")}}class uc extends Ca{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new uc(_)}}function El(v,g,_){var w;z((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),z(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(z(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(z(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Dl(){return(Dl=(0,l.Z)(function*(v,g,_){const w=(0,B.m9)(v),A={requestType:"PASSWORD_RESET",email:g};_&&El(w,A,_),yield _l(w,A)})).apply(this,arguments)}function fu(){return(fu=(0,l.Z)(function*(v,g,_){yield qn((0,B.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Lt(){return(Lt=(0,l.Z)(function*(v,g){yield oc((0,B.m9)(v),{oobCode:g})})).apply(this,arguments)}function dc(v,g){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,l.Z)(function*(v,g){const _=(0,B.m9)(v),w=yield qn(_,{oobCode:g}),A=w.requestType;switch(z(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(w.mfaInfo,_,"internal-error");default:z(w.email,_,"internal-error")}let O=null;return w.mfaInfo&&(O=Ca._fromServerResponse(ht(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function Fo(){return(Fo=(0,l.Z)(function*(v,g){const{data:_}=yield dc((0,B.m9)(v),g);return _.email})).apply(this,arguments)}function Tl(){return(Tl=(0,l.Z)(function*(v,g,_){const w=ht(v),A=yield Hi(w,{returnSecureToken:!0,email:g,password:_}),O=yield Cr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function hc(){return(hc=(0,l.Z)(function*(v,g,_){const w=(0,B.m9)(v),A={requestType:"EMAIL_SIGNIN",email:g};z(_.handleCodeInApp,w,"argument-error"),_&&El(w,A,_),yield wr(w,A)})).apply(this,arguments)}function Wn(){return(Wn=(0,l.Z)(function*(v,g,_){const w=(0,B.m9)(v),A=Dd.credentialWithLink(g,_||Fe());return z(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),kn(w,A)})).apply(this,arguments)}function xs(v,g){return Il.apply(this,arguments)}function Il(){return(Il=(0,l.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:createAuthUri",Jt(v,g))})).apply(this,arguments)}function zr(){return(zr=(0,l.Z)(function*(v,g){const w={identifier:g,continueUri:pt()?Fe():"http://localhost"},{signinMethods:A}=yield xs((0,B.m9)(v),w);return A||[]})).apply(this,arguments)}function pc(){return(pc=(0,l.Z)(function*(v,g){const _=(0,B.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&El(_.auth,A,g);const{email:O}=yield yn(_.auth,A);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function gc(){return(gc=(0,l.Z)(function*(v,g,_){const w=(0,B.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&El(w.auth,O,_);const{email:K}=yield _d(w.auth,O);K!==v.email&&(yield v.reload())})).apply(this,arguments)}function Al(v,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,l.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ml(){return(Ml=(0,l.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const w=(0,B.m9)(v),O={idToken:yield w.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},K=yield Ni(w,Al(w.auth,O));w.displayName=K.displayName||null,w.photoURL=K.photoUrl||null;const ge=w.providerData.find(({providerId:Be})=>"password"===Be);ge&&(ge.displayName=w.displayName,ge.photoURL=w.photoURL),yield w._updateTokensIfNecessary(K)})).apply(this,arguments)}function Ta(v,g,_){return xl.apply(this,arguments)}function xl(){return(xl=(0,l.Z)(function*(v,g,_){const{auth:w}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const K=yield Ni(v,ga(w,O));yield v._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class Sa{constructor(g,_,w={}){this.isNewUser=g,this.providerId=_,this.profile=w}}class Md extends Sa{constructor(g,_,w,A){super(g,_,w),this.username=A}}class Ia extends Sa{constructor(g,_){super(g,"facebook.com",_)}}class ps extends Md{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class af extends Sa{constructor(g,_){super(g,"google.com",_)}}class di extends Md{constructor(g,_,w){super(g,"twitter.com",_,w)}}function gs(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ad(v){var g,_;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const K=null===(_=null===(g=ct(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(K)return new Sa(O,"anonymous"!==K&&"custom"!==K?K:null)}if(!w)return null;switch(w){case"facebook.com":return new Ia(O,A);case"github.com":return new ps(O,A);case"google.com":return new af(O,A);case"twitter.com":return new di(O,A,v.screenName||null);case"custom":case"anonymous":return new Sa(O,null);default:return new Sa(O,w,A)}}(_)}class Rs{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Rs("enroll",g)}static _fromMfaPendingCredential(g){return new Rs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,w;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Rs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(w=g.multiFactorSession)||void 0===w?void 0:w.idToken)return Rs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Aa{constructor(g,_,w){this.session=g,this.hints=_,this.signInResolver=w}static _fromError(g,_){const w=ht(g),A=_.customData._serverResponse,O=(A.mfaInfo||[]).map(ge=>Ca._fromServerResponse(w,ge));z(A.mfaPendingCredential,w,"internal-error");const K=Rs._fromMfaPendingCredential(A.mfaPendingCredential);return new Aa(K,O,function(){var ge=(0,l.Z)(function*(Be){const Xe=yield Be._process(w,K);delete A.mfaInfo,delete A.mfaPendingCredential;const wt=Object.assign(Object.assign({},A),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(_.operationType){case"signIn":const _t=yield Cr._fromIdTokenResponse(w,_.operationType,wt);return yield w._updateCurrentUser(_t.user),_t;case"reauthenticate":return z(_.user,w,"internal-error"),Cr._forOperation(_.user,_.operationType,wt);default:Me(w,"internal-error")}});return function(Be){return ge.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,l.Z)(function*(){return _.signInResolver(g)})()}}function cf(v,g){return Ht(v,"POST","/v2/accounts/mfaEnrollment:start",Jt(v,g))}class kd{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>Ca._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new kd(g)}getSession(){var g=this;return(0,l.Z)(function*(){return Rs._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var w=this;return(0,l.Z)(function*(){const A=g,O=yield w.getSession(),K=yield Ni(w.user,A._process(w.user.auth,O,_));return yield w.user._updateTokensIfNecessary(K),w.user.reload()})()}unenroll(g){var _=this;return(0,l.Z)(function*(){const w="string"==typeof g?g:g.uid,A=yield _.user.getIdToken(),O=yield Ni(_.user,function mc(v,g){return Ht(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(v,g))}(_.user.auth,{idToken:A,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:K})=>K!==w),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const _c=new WeakMap,fo="__sak";class vu{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(fo,"1"),this.storage.removeItem(fo),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const gt=(()=>{class v extends vu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ug(){const v=(0,B.z$)();return sc(v)||lr(v)}()&&function Di(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=ro(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),O=this.localCache[w];A!==O&&_(w,O,A)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((ge,Be,Xe)=>{this.notifyListeners(ge,Xe)});const A=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(A);if(_.newValue!==ge)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!w)return}const O=()=>{const ge=this.storage.getItem(A);!w&&this.localCache[A]===ge||this.notifyListeners(A,ge)},K=this.storage.getItem(A);!function ml(){return(0,B.w1)()&&10===document.documentMode}()||K===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,w){this.localCache[_]=w;const A=this.listeners[_];if(A)for(const O of Array.from(A))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var A=()=>super._set,O=this;return(0,l.Z)(function*(){yield A().call(O,_,w),O.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,A=this;return(0,l.Z)(function*(){const O=yield w().call(A,_);return A.localCache[_]=JSON.stringify(O),O})()}_remove(_){var w=()=>super._remove,A=this;return(0,l.Z)(function*(){yield w().call(A,_),delete A.localCache[_]})()}}return v.type="LOCAL",v})(),sn=(()=>{class v extends vu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let Od=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(O=>O.isListeningto(_));if(w)return w;const A=new v(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,l.Z)(function*(){const A=_,{eventId:O,eventType:K,data:ge}=A.data,Be=w.handlersMap[K];if(!(null==Be?void 0:Be.size))return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:K});const Xe=Array.from(Be).map(function(){var _t=(0,l.Z)(function*(Hn){return Hn(A.origin,ge)});return function(Hn){return _t.apply(this,arguments)}}()),wt=yield function bu(v){return Promise.all(v.map(function(){var g=(0,l.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return g.apply(this,arguments)}}()))}(Xe);A.ports[0].postMessage({status:"done",eventId:O,eventType:K,response:wt})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ms(v="",g=10){let _="";for(let w=0;w<g;w++)_+=Math.floor(10*Math.random());return v+_}class wu{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,w=50){var A=this;return(0,l.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let K,ge;return new Promise((Be,Xe)=>{const wt=ms("",20);O.port1.start();const _t=setTimeout(()=>{Xe(new Error("unsupported_event"))},w);ge={messageChannel:O,onMessage(Hn){const Or=Hn;if(Or.data.eventId===wt)switch(Or.data.status){case"ack":clearTimeout(_t),K=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Be(Or.data.response);break;default:clearTimeout(_t),clearTimeout(K),Xe(new Error("invalid_response"))}}},A.handlers.add(ge),O.port1.addEventListener("message",ge.onMessage),A.target.postMessage({eventType:g,eventId:wt,data:_},[O.port2])}).finally(()=>{ge&&A.removeMessageHandler(ge)})})()}}function Cn(){return window}function Dr(){return void 0!==Cn().WorkerGlobalScope&&"function"==typeof Cn().importScripts}function yc(){return(yc=(0,l.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Eu="firebaseLocalStorageDb",xa="firebaseLocalStorage",_s="fbase_key";class po{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Ii(v,g){return v.transaction([xa],g?"readwrite":"readonly").objectStore(xa)}function ks(){const v=indexedDB.open(Eu,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(xa,{keyPath:_s})}catch(A){_(A)}}),v.addEventListener("success",(0,l.Z)(function*(){const w=v.result;w.objectStoreNames.contains(xa)?g(w):(w.close(),yield function dr(){const v=indexedDB.deleteDatabase(Eu);return new po(v).toPromise()}(),g(yield ks()))}))})}function Ra(v,g,_){return go.apply(this,arguments)}function go(){return(go=(0,l.Z)(function*(v,g,_){const w=Ii(v,!0).put({[_s]:g,value:_});return new po(w).toPromise()})).apply(this,arguments)}function Vo(){return(Vo=(0,l.Z)(function*(v,g){const _=Ii(v,!1).get(g),w=yield new po(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Uo(v,g){const _=Ii(v,!0).delete(g);return new po(_).toPromise()}const pi=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,l.Z)(function*(){return _.db||(_.db=yield ks()),_.db})()}_withRetries(_){var w=this;return(0,l.Z)(function*(){let A=0;for(;;)try{const O=yield w._openDb();return yield _(O)}catch(O){if(A++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,l.Z)(function*(){return Dr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,l.Z)(function*(){_.receiver=Od._getInstance(function Cu(){return Dr()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,l.Z)(function*(A,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(A,O){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,l.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,l.Z)(function*(){var w,A;if(_.activeServiceWorker=yield function ot(){return yc.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new wu(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,l.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Pd(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ks();return yield Ra(_,fo,"1"),yield Uo(_,fo),!0}catch(_){}return!1})()}_withPendingWrite(_){var w=this;return(0,l.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var A=this;return(0,l.Z)(function*(){return A._withPendingWrite((0,l.Z)(function*(){return yield A._withRetries(O=>Ra(O,_,w)),A.localCache[_]=w,A.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,l.Z)(function*(){const A=yield w._withRetries(O=>function ka(v,g){return Vo.apply(this,arguments)}(O,_));return w.localCache[_]=A,A})()}_remove(_){var w=this;return(0,l.Z)(function*(){return w._withPendingWrite((0,l.Z)(function*(){return yield w._withRetries(A=>Uo(A,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,l.Z)(function*(){const w=yield _._withRetries(K=>{const ge=Ii(K,!1).getAll();return new po(ge).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:K,value:ge}of w)O.add(K),JSON.stringify(_.localCache[K])!==JSON.stringify(ge)&&(_.notifyListeners(K,ge),A.push(K));for(const K of Object.keys(_.localCache))_.localCache[K]&&!O.has(K)&&(_.notifyListeners(K,null),A.push(K));return A})()}notifyListeners(_,w){this.localCache[_]=w;const A=this.listeners[_];if(A)for(const O of Array.from(A))O(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function On(v,g){return Ht(v,"POST","/v2/accounts/mfaSignIn:start",Jt(v,g))}function In(){return(In=(0,l.Z)(function*(v){return(yield Ht(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function gi(v){return new Promise((g,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=g,w.onerror=A=>{const O=Ce("internal-error");O.customData=A,_(O)},w.type="text/javascript",w.charset="UTF-8",function Pn(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(w)})}function Os(v){return`__${v}${Math.floor(1e6*Math.random())}`}const hr=1e12;class Fn{constructor(g){this.auth=g,this.counter=hr,this._widgets=new Map}render(g,_){const w=this.counter;return this._widgets.set(w,new Ol(g,this.auth.name,_||{})),this.counter++,w}reset(g){var _;const w=g||hr;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(g){var _;return(null===(_=this._widgets.get(g||hr))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,l.Z)(function*(){var w;return null===(w=_._widgets.get(g||hr))||void 0===w||w.execute(),""})()}}class Ol{constructor(g,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof g?document.getElementById(g):g;z(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Pl(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Rn=Os("rcb"),Hg=new ln(3e4,6e4);class Gy{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Cn().grecaptcha}load(g,_=""){return z(function Pa(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Cn().grecaptcha):new Promise((w,A)=>{const O=Cn().setTimeout(()=>{A(Ce(g,"network-request-failed"))},Hg.get());Cn()[Rn]=()=>{Cn().clearTimeout(O),delete Cn()[Rn];const ge=Cn().grecaptcha;if(!ge)return void A(Ce(g,"internal-error"));const Be=ge.render;ge.render=(Xe,wt)=>{const _t=Be(Xe,wt);return this.counter++,_t},this.hostLanguage=_,w(ge)},gi(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Rn,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),A(Ce(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Cn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mi{load(g){return(0,l.Z)(function*(){return new Fn(g)})()}clearedOneInstance(){}}const Du="recaptcha",_o={theme:"light",type:"image"};class jo{constructor(g,_=Object.assign({},_o),w){this.parameters=_,this.type=Du,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ht(w),this.isInvisible="invisible"===this.parameters.size,z("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof g?document.getElementById(g):g;z(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mi:new Gy,this.validateStartingState()}verify(){var g=this;return(0,l.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(_)||new Promise(O=>{const K=ge=>{!ge||(g.tokenChangeListeners.delete(K),O(ge))};g.tokenChangeListeners.add(K),g.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof g)g(_);else if("string"==typeof g){const w=Cn()[g];"function"==typeof w&&w(_)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,l.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,l.Z)(function*(){z(pt()&&!Dr(),g.auth,"internal-error"),yield function bc(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function vc(v){return In.apply(this,arguments)}(g.auth);z(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ln{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=ma._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Go(){return(Go=(0,l.Z)(function*(v,g,_){const w=ht(v),A=yield Na(w,g,(0,B.m9)(_));return new Ln(A,O=>kn(w,O))})).apply(this,arguments)}function Su(){return(Su=(0,l.Z)(function*(v,g,_){const w=(0,B.m9)(v);yield rn(!1,w,"phone");const A=yield Na(w.auth,g,(0,B.m9)(_));return new Ln(A,O=>Si(w,O))})).apply(this,arguments)}function fr(){return(fr=(0,l.Z)(function*(v,g,_){const w=(0,B.m9)(v),A=yield Na(w.auth,g,(0,B.m9)(_));return new Ln(A,O=>Ms(w,O))})).apply(this,arguments)}function Na(v,g,_){return zo.apply(this,arguments)}function zo(){return(zo=(0,l.Z)(function*(v,g,_){var w;const A=yield _.verify();try{let O;if(z("string"==typeof A,v,"argument-error"),z(_.type===Du,v,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const K=O.session;if("phoneNumber"in O)return z("enroll"===K.type,v,"internal-error"),(yield cf(v,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{z("signin"===K.type,v,"internal-error");const ge=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return z(ge,v,"missing-multi-factor-info"),(yield On(v,{mfaPendingCredential:K.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield tf(v,{phoneNumber:O.phoneNumber,recaptchaToken:A});return K}}finally{_._reset()}})).apply(this,arguments)}function Fa(){return(Fa=(0,l.Z)(function*(v,g){yield bl((0,B.m9)(v),g)})).apply(this,arguments)}let qo=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=ht(_)}verifyPhoneNumber(_,w){return Na(this.auth,_,(0,B.m9)(w))}static credential(_,w){return ma._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:A}=_;return w&&A?ma._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ps(v,g){return g?ie(g):(z(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Nl extends jr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ao(g,this._buildIdpRequest())}_linkToIdToken(g,_){return ao(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return ao(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Nt(v){return Ti(v.auth,new Nl(v),v.bypassAuthState)}function wc(v){const{auth:g,user:_}=v;return z(_,g,"internal-error"),cc(_,new Nl(v),v.bypassAuthState)}function _i(v){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,l.Z)(function*(v){const{auth:g,user:_}=v;return z(_,g,"internal-error"),bl(_,new Nl(v),v.bypassAuthState)})).apply(this,arguments)}class yo{constructor(g,_,w,A,O=!1){this.auth=g,this.resolver=w,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,l.Z)(function*(w,A){g.pendingPromise={resolve:w,reject:A};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(w,A){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,l.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:O,tenantId:K,error:ge,type:Be}=g;if(ge)return void _.reject(ge);const Xe={auth:_.auth,requestUri:w,sessionId:A,tenantId:K||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Be)(Xe))}catch(wt){_.reject(wt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Nt;case"linkViaPopup":case"linkViaRedirect":return _i;case"reauthViaPopup":case"reauthViaRedirect":return wc;default:Me(this.auth,"internal-error")}}resolve(g){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gg=new ln(2e3,1e4);function vo(){return(vo=(0,l.Z)(function*(v,g,_){const w=ht(v);ze(v,g,Ui);const A=Ps(w,_);return new Iu(w,"signInViaPopup",g,A).executeNotNull()})).apply(this,arguments)}function Cc(){return(Cc=(0,l.Z)(function*(v,g,_){const w=(0,B.m9)(v);ze(w.auth,g,Ui);const A=Ps(w.auth,_);return new Iu(w.auth,"reauthViaPopup",g,A,w).executeNotNull()})).apply(this,arguments)}function vs(){return(vs=(0,l.Z)(function*(v,g,_){const w=(0,B.m9)(v);ze(w.auth,g,Ui);const A=Ps(w.auth,_);return new Iu(w.auth,"linkViaPopup",g,A,w).executeNotNull()})).apply(this,arguments)}let Iu=(()=>{class v extends yo{constructor(_,w,A,O,K){super(_,w,O,K),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,l.Z)(function*(){const w=yield _.execute();return z(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,l.Z)(function*(){Q(1===_.filter.length,"Popup operations only handle one event");const w=ms();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(Ce(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Gg.get())};_()}}return v.currentPopupAction=null,v})();const yi=new Map;class $y extends yo{constructor(g,_,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,l.Z)(function*(){let w=yi.get(_.auth._key());if(!w){try{const O=(yield function La(v,g){return Ba.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;w=()=>Promise.resolve(O)}catch(A){w=()=>Promise.reject(A)}yi.set(_.auth._key(),w)}return _.bypassAuthState||yi.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,w=this;return(0,l.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(w,g);if("unknown"!==g.type){if(g.eventId){const A=yield w.auth._redirectUserForId(g.eventId);if(A)return w.user=A,_().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Ba(){return(Ba=(0,l.Z)(function*(v,g){const _=U(g),w=k(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(_));return yield w._remove(_),A})).apply(this,arguments)}function Wo(v,g){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,l.Z)(function*(v,g){return k(v)._set(U(g),"true")})).apply(this,arguments)}function I(v,g){yi.set(v._key(),g)}function k(v){return ie(v._redirectPersistence)}function U(v){return ti("pendingRedirect",v.config.apiKey,v.name)}function ye(){return(ye=(0,l.Z)(function*(v,g,_){const w=ht(v);ze(v,g,Ui);const A=Ps(w,_);return yield Wo(A,w),A._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function mt(){return(mt=(0,l.Z)(function*(v,g,_){const w=(0,B.m9)(v);ze(w.auth,g,Ui);const A=Ps(w.auth,_);yield Wo(A,w.auth);const O=yield Ar(w);return A._openRedirect(w.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function ji(){return(ji=(0,l.Z)(function*(v,g,_){const w=(0,B.m9)(v);ze(w.auth,g,Ui);const A=Ps(w.auth,_);yield rn(!1,w,g.providerId),yield Wo(A,w.auth);const O=yield Ar(w);return A._openRedirect(w.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function Ns(){return(Ns=(0,l.Z)(function*(v,g){return yield ht(v)._initializationPromise,pr(v,g,!1)})).apply(this,arguments)}function pr(v,g){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,l.Z)(function*(v,g,_=!1){const w=ht(v),A=Ps(w,g),K=yield new $y(w,A,_).execute();return K&&!_&&(delete K.user._redirectEventId,yield w._persistUserIfCurrent(K.user),yield w._setRedirectUser(null,g)),K})).apply(this,arguments)}function Ar(v){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,l.Z)(function*(v){const g=ms(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class Dc{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(_=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function zg(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tc(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var w;if(g.error&&!Tc(g)){const A=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(Ce(this.auth,A))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const w=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Au(g))}saveEventToCache(g){this.cachedEventUids.add(Au(g)),this.lastProcessedEventTime=Date.now()}}function Au(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Tc({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function $g(v){return uf.apply(this,arguments)}function uf(){return(uf=(0,l.Z)(function*(v,g={}){return Ht(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Zo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mu=/^https?/;function qg(){return(qg=(0,l.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield $g(v);for(const _ of g)try{if(Wg(_))return}catch(w){}Me(v,"unauthorized-domain")})).apply(this,arguments)}function Wg(v){const g=Fe(),{protocol:_,hostname:w}=new URL(g);if(v.startsWith("chrome-extension://")){const K=new URL(v);return""===K.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&K.hostname===w}if(!Mu.test(_))return!1;if(Zo.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Wy=new ln(3e4,6e4);function Zg(){const v=Cn().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Sc=null;function Yo(v){return Sc=Sc||function df(v){return new Promise((g,_)=>{var w,A,O;function K(){Zg(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Zg(),_(Ce(v,"network-request-failed"))},timeout:Wy.get()})}if(null===(A=null===(w=Cn().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)g(gapi.iframes.getContext());else{if(!(null===(O=Cn().gapi)||void 0===O?void 0:O.load)){const ge=Os("iframefcb");return Cn()[ge]=()=>{gapi.load?K():_(Ce(v,"network-request-failed"))},gi(`https://apis.google.com/js/api.js?onload=${ge}`).catch(Be=>_(Be))}K()}}).catch(g=>{throw Sc=null,g})}(v),Sc}const Ko=new ln(5e3,15e3),Zy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yy(v){const g=v.config;z(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?Gn(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:v.name,v:de.SDK_VERSION},A=Bl.get(v.config.apiHost);A&&(w.eid=A);const O=v._getFrameworks();return O.length&&(w.fw=O.join(",")),`${_}?${(0,B.xO)(w).slice(1)}`}function Va(){return Va=(0,l.Z)(function*(v){const g=yield Yo(v),_=Cn().gapi;return z(_,v,"internal-error"),g.open({where:document.body,url:Yy(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zy,dontclear:!0},w=>new Promise(function(){var A=(0,l.Z)(function*(O,K){yield w.restyle({setHideOnLeave:!1});const ge=Ce(v,"network-request-failed"),Be=Cn().setTimeout(()=>{K(ge)},Ko.get());function Xe(){Cn().clearTimeout(Be),O(w)}w.ping(Xe).then(Xe,()=>{K(ge)})});return function(O,K){return A.apply(this,arguments)}}()))}),Va.apply(this,arguments)}const hf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yg{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Fs(v,g,_,w,A,O){z(v.config.authDomain,v,"auth-domain-config-required"),z(v.config.apiKey,v,"invalid-api-key");const K={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:de.SDK_VERSION,eventId:A};if(g instanceof Ui){g.setDefaultLanguage(v.languageCode),K.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(K.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Be,Xe]of Object.entries(O||{}))K[Be]=Xe}if(g instanceof ko){const Be=g.getScopes().filter(Xe=>""!==Xe);Be.length>0&&(K.scopes=Be.join(","))}v.tenantId&&(K.tid=v.tenantId);const ge=K;for(const Be of Object.keys(ge))void 0===ge[Be]&&delete ge[Be];return`${function Ic({config:v}){return v.emulator?Gn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,B.xO)(ge).slice(1)}`}const Ru="webStorageSupport";class ku extends class Jy{constructor(g){this.factorId=g}_process(g,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,w);case"signin":return this._finalizeSignIn(g,_.credential);default:return De("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new ku(g)}_finalizeEnroll(g,_,w){return function Lo(v,g){return Ht(v,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(v,g))}(g,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Ho(v,g){return Ht(v,"POST","/v2/accounts/mfaSignIn:finalize",Jt(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qg=(()=>{class v{constructor(){}static assertion(_){return ku._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Jg="@firebase/auth";class em{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,l.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(w=>{var A;g((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ls(){return window}function Vl(){return(Vl=(0,l.Z)(function*(v,g,_){var w;const{BuildInfo:A}=Ls();Q(g.sessionId,"AuthEvent did not contain a session ID");const O=yield _f(g.sessionId),K={};return lr()?K.ibi=A.packageName:Ki()?K.apn=A.packageName:Me(v,"operation-not-supported-in-this-environment"),A.displayName&&(K.appDisplayName=A.displayName),K.sessionId=O,Fs(v,_,g.type,void 0,null!==(w=g.eventId)&&void 0!==w?w:void 0,K)})).apply(this,arguments)}function jd(){return(jd=(0,l.Z)(function*(v){const{BuildInfo:g}=Ls(),_={};lr()?_.iosBundleId=g.packageName:Ki()?_.androidPackageName=g.packageName:Me(v,"operation-not-supported-in-this-environment"),yield $g(v,_)})).apply(this,arguments)}function im(){return(im=(0,l.Z)(function*(v,g,_){const{cordova:w}=Ls();let A=()=>{};try{yield new Promise((O,K)=>{let ge=null;function Be(){var _t;O();const Hn=null===(_t=w.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof Hn&&Hn(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function Xe(){ge||(ge=window.setTimeout(()=>{K(Ce(v,"redirect-cancelled-by-user"))},2e3))}function wt(){"visible"===(null==document?void 0:document.visibilityState)&&Xe()}g.addPassiveListener(Be),document.addEventListener("resume",Xe,!1),Ki()&&document.addEventListener("visibilitychange",wt,!1),A=()=>{g.removePassiveListener(Be),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",wt,!1),ge&&window.clearTimeout(ge)}})}finally{A()}})).apply(this,arguments)}function _f(v){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,l.Z)(function*(v){const g=yf(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yf(v){if(Q(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}!function aC(v){(0,de._registerComponent)(new ne.wA("auth",(g,{options:_})=>{const w=g.getProvider("app").getImmediate(),A=g.getProvider("heartbeat"),{apiKey:O,authDomain:K}=w.options;return((ge,Be)=>{z(O&&!O.includes(":"),"invalid-api-key",{appName:ge.name}),z(!(null==K?void 0:K.includes(":")),"argument-error",{appName:ge.name});const Xe={apiKey:O,authDomain:K,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pa(v)},wt=new Qe(ge,Be,Xe);return function ue(v,g){const _=(null==g?void 0:g.persistence)||[],w=(Array.isArray(_)?_:[_]).map(ie);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(w,null==g?void 0:g.popupRedirectResolver)}(wt,_),wt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,w)=>{g.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new ne.wA("auth-internal",g=>{const _=ht(g.getProvider("auth").getImmediate());return new em(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(Jg,"0.20.2",function Hd(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,de.registerVersion)(Jg,"0.20.2","esm2017")}("Browser");class zd extends Dc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,l.Z)(function*(){yield g.initPromise})()}}function xc(v){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,l.Z)(function*(v){const g=yield Hl()._get($d(v));return g&&(yield Hl()._remove($d(v))),g})).apply(this,arguments)}function vf(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*g.length);v.push(g.charAt(w))}return v.join("")}function Hl(){return ie(gt)}function $d(v){return ti("authEvent",v.config.apiKey,v.name)}function Zt(v){if(!(null==v?void 0:v.includes("?")))return{};const[g,..._]=v.split("?");return(0,B.zd)(_.join("?"))}function kc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function Ua(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function om(v=(0,B.z$)()){return!("file:"!==Ua()&&"ionic:"!==Ua()&&"capacitor:"!==Ua()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ef(){try{const v=self.localStorage,g=ms();if(v)return v.setItem(g,"1"),v.removeItem(g),!function Cf(v=(0,B.z$)()){return function Ji(){return(0,B.w1)()&&11===(null==document?void 0:document.documentMode)}()||function jl(v=(0,B.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,B.hl)()}catch(v){return Ai()&&(0,B.hl)()}return!1}function Ai(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gl(){return(function sv(){return"http:"===Ua()||"https:"===Ua()}()||(0,B.ru)()||om())&&!function Ha(){return(0,B.b$)()||(0,B.UG)()}()&&Ef()&&!Ai()}function qd(){return om()&&"undefined"!=typeof document}function Nu(){return(Nu=(0,l.Z)(function*(){return!!qd()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const xr={LOCAL:"local",NONE:"none",SESSION:"session"},Xo=z,lm="persistence";function Oc(v){return Df.apply(this,arguments)}function Df(){return(Df=(0,l.Z)(function*(v){yield v._initializationPromise;const g=um(),_=ti(lm,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function um(){var v;try{return(null===(v=function am(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(g){return null}}const av=z;class Rr{constructor(){this.browserResolver=ie(class Kg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sn,this._completeRedirectFn=pr,this._overrideRedirectResult=I}_openPopup(g,_,w,A){var O=this;return(0,l.Z)(function*(){var K;Q(null===(K=O.eventManagers[g._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const ge=Fs(g,_,w,Fe(),A);return function xu(v,g,_,w=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),K=Math.max((window.screen.availWidth-w)/2,0).toString();let ge="";const Be=Object.assign(Object.assign({},hf),{width:w.toString(),height:A.toString(),top:O,left:K}),Xe=(0,B.z$)().toLowerCase();_&&(ge=gl(Xe)?"_blank":_),pl(Xe)&&(g=g||"http://localhost",Be.scrollbars="yes");const wt=Object.entries(Be).reduce((Hn,[Or,Lu])=>`${Hn}${Or}=${Lu},`,"");if(function xo(v=(0,B.z$)()){var g;return lr(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Xe)&&"_self"!==ge)return function Ky(v,g){const _=document.createElement("a");_.href=v,_.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(g||"",ge),new Yg(null);const _t=window.open(g||"",ge,wt);z(_t,v,"popup-blocked");try{_t.focus()}catch(Hn){}return new Yg(_t)}(g,ge,ms())})()}_openRedirect(g,_,w,A){var O=this;return(0,l.Z)(function*(){return yield O._originValidation(g),function kl(v){Cn().location.href=v}(Fs(g,_,w,Fe(),A)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:A,promise:O}=this.eventManagers[_];return A?Promise.resolve(A):(Q(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(g);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(g){var _=this;return(0,l.Z)(function*(){const w=yield function Vd(v){return Va.apply(this,arguments)}(g),A=new Dc(g);return w.register("authEvent",O=>(z(null==O?void 0:O.authEvent,g,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:A},_.iframes[g._key()]=w,A})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Ru,{type:Ru},A=>{var O;const K=null===(O=null==A?void 0:A[0])||void 0===O?void 0:O[Ru];void 0!==K&&_(!!K),Me(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function qy(v){return qg.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return ro()||sc()||lr()}}),this.cordovaResolver=ie(class sm{constructor(){this._redirectPersistence=sn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=pr,this._overrideRedirectResult=I}_initialize(g){var _=this;return(0,l.Z)(function*(){const w=g._key();let A=_.eventManagers.get(w);return A||(A=new zd(g),_.eventManagers.set(w,A),_.attachCallbackListeners(g,A)),A})()}_openPopup(g){Me(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,w,A){var O=this;return(0,l.Z)(function*(){!function Ac(v){var g,_,w,A,O,K,ge,Be,Xe,wt;const _t=Ls();z("function"==typeof(null===(g=null==_t?void 0:_t.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(void 0!==(null===(_=null==_t?void 0:_t.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z("function"==typeof(null===(O=null===(A=null===(w=null==_t?void 0:_t.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(Be=null===(ge=null===(K=null==_t?void 0:_t.cordova)||void 0===K?void 0:K.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Be?void 0:Be.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(wt=null===(Xe=null==_t?void 0:_t.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===wt?void 0:wt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const K=yield O._initialize(g);yield K.initialized(),K.resetRedirect(),function S(){yi.clear()}(),yield O._originValidation(g);const ge=function Mc(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:vf(),postBody:null,tenantId:v.tenantId,error:Ce(v,"no-auth-event")}}(g,w,A);yield function Xy(v,g){return Hl()._set($d(v),g)}(g,ge);const Be=yield function Bs(v,g,_){return Vl.apply(this,arguments)}(g,ge,_),Xe=yield function Gd(v){const{cordova:g}=Ls();return new Promise(_=>{g.plugins.browsertab.isAvailable(w=>{let A=null;w?g.plugins.browsertab.openUrl(v):A=g.InAppBrowser.open(v,function md(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(A)})})}(Be);return function Ul(v,g,_){return im.apply(this,arguments)}(g,K,Xe)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function nm(v){return jd.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:w,handleOpenURL:A,BuildInfo:O}=Ls(),K=setTimeout((0,l.Z)(function*(){yield xc(g),_.onEvent(kc())}),500),ge=function(){var wt=(0,l.Z)(function*(_t){clearTimeout(K);const Hn=yield xc(g);let Or=null;Hn&&(null==_t?void 0:_t.url)&&(Or=function ev(v,g){var _,w;const A=function wf(v){const g=Zt(v),_=g.link?decodeURIComponent(g.link):void 0,w=Zt(_).link,A=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Zt(A).link||A||w||_||v}(g);if(A.includes("/__/auth/callback")){const O=Zt(A),K=O.firebaseError?function bf(v){try{return JSON.parse(v)}catch(g){return null}}(decodeURIComponent(O.firebaseError)):null,ge=null===(w=null===(_=null==K?void 0:K.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],Be=ge?Ce(ge):null;return Be?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(Hn,_t.url)),_.onEvent(Or||kc())});return function(Hn){return wt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ge);const Be=A,Xe=`${O.packageName.toLowerCase()}://`;Ls().handleOpenURL=function(){var wt=(0,l.Z)(function*(_t){if(_t.toLowerCase().startsWith(Xe)&&ge({url:_t}),"function"==typeof Be)try{Be(_t)}catch(Hn){console.error(Hn)}});return function(_t){return wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=sn,this._completeRedirectFn=pr,this._overrideRedirectResult=I}_initialize(g){var _=this;return(0,l.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,w,A){var O=this;return(0,l.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,_,w,A)})()}_openRedirect(g,_,w,A){var O=this;return(0,l.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,_,w,A)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return qd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return av(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,l.Z)(function*(){if(g.underlyingResolver)return;const _=yield function ov(){return Nu.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function dm(v){return v.unwrap()}function Wd(v){return hm(v)}function hm(v){const{_tokenResponse:g}=v instanceof B.ZR?v.customData:v;if(!g)return null;if(!(v instanceof B.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return qo.credentialFromResult(v);const _=g.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=Td;break;case"facebook.com":w=_a;break;case"github.com":w=rf;break;case"twitter.com":w=Sd;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:K,pendingToken:ge,nonce:Be}=g;return O||K||A||ge?ge?_.startsWith("saml.")?Oo._create(_,ge):As._fromParams({providerId:_,signInMethod:_,pendingToken:ge,idToken:A,accessToken:O}):new us(_).credential({idToken:A,accessToken:O,rawNonce:Be}):null}return v instanceof B.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function kr(v,g){return g.catch(_=>{throw _ instanceof B.ZR&&function cv(v,g){var _;const w=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new fm(v,function hi(v,g){var _;const w=(0,B.m9)(v),A=g;return z(g.customData.operationType,w,"argument-error"),z(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),Aa._fromError(w,A)}(v,g));else if(w){const A=hm(g),O=g;A&&(O.credential=A,O.tenantId=w.tenantId||void 0,O.email=w.email||void 0,O.phoneNumber=w.phoneNumber||void 0)}}(v,_),_}).then(_=>{const A=_.user;return{operationType:_.operationType,credential:Wd(_),additionalUserInfo:gs(_),user:bo.getOrCreate(A)}})}function Tf(v,g){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,l.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:w=>kr(v,_.confirm(w))}})).apply(this,arguments)}class fm{constructor(g,_){this.resolver=_,this.auth=function lv(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return kr(dm(this.auth),this.resolver.resolveSignIn(g))}}class bo{constructor(g){this._delegate=g,this.multiFactor=function Bo(v){const g=(0,B.m9)(v);return _c.has(g)||_c.set(g,kd._fromUser(g)),_c.get(g)}(g)}static getOrCreate(g){return bo.USER_MAP.has(g)||bo.USER_MAP.set(g,new bo(g)),bo.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,l.Z)(function*(){return kr(_.auth,Si(_._delegate,g))})()}linkWithPhoneNumber(g,_){var w=this;return(0,l.Z)(function*(){return Tf(w.auth,function zy(v,g,_){return Su.apply(this,arguments)}(w._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,l.Z)(function*(){return kr(_.auth,function Fd(v,g,_){return vs.apply(this,arguments)}(_._delegate,g,Rr))})()}linkWithRedirect(g){var _=this;return(0,l.Z)(function*(){return yield Oc(ht(_.auth)),function $t(v,g,_){return function Dt(v,g,_){return ji.apply(this,arguments)}(v,g,_)}(_._delegate,g,Rr)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,l.Z)(function*(){return kr(_.auth,Ms(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return Tf(this.auth,function Sr(v,g,_){return fr.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return kr(this.auth,function $r(v,g,_){return Cc.apply(this,arguments)}(this._delegate,g,Rr))}reauthenticateWithRedirect(g){var _=this;return(0,l.Z)(function*(){return yield Oc(ht(_.auth)),function Ue(v,g,_){return function It(v,g,_){return mt.apply(this,arguments)}(v,g,_)}(_._delegate,g,Rr)})()}sendEmailVerification(g){return function gu(v,g){return pc.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,l.Z)(function*(){return yield function sf(v,g){return gn.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Bg(v,g){return Ta((0,B.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function yu(v,g){return Ta((0,B.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function $o(v,g){return Fa.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function _u(v,g){return Ml.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function mu(v,g,_){return gc.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bo.USER_MAP=new WeakMap;const Fu=z;let pm=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=_.options;Fu(A,"invalid-api-key",{appName:_.name}),Fu(A,"invalid-api-key",{appName:_.name});const O="undefined"!=typeof window?Rr:void 0;this._delegate=w.initialize({options:{persistence:uv(A,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function ur(v,g,_){const w=ht(v);z(w._canInitEmulator,w,"emulator-config-failed"),z(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const A=!!(null==_?void 0:_.disableWarnings),O=ss(g),{host:K,port:ge}=function Qn(v){const g=ss(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const O=A[1];return{host:O,port:os(w.substr(O.length+1))}}{const[O,K]=w.split(":");return{host:O,port:os(K)}}}(g);w.config.emulator={url:`${O}//${K}${null===ge?"":`:${ge}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:K,port:ge,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Tn(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function xe(v,g){return Lt.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return dc(this._delegate,_)}confirmPasswordReset(_,w){return function hu(v,g,_){return fu.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var A=this;return(0,l.Z)(function*(){return kr(A._delegate,function Er(v,g,_){return Tl.apply(this,arguments)}(A._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function ho(v,g){return zr.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Sl(v,g){const _=lc.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,l.Z)(function*(){Fu(Gl(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function vi(v,g){return Ns.apply(this,arguments)}(_._delegate,Rr);return w?kr(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function tv(v,g){ht(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,w,A){const{next:O,error:K,complete:ge}=gm(_,w,A);return this._delegate.onAuthStateChanged(O,K,ge)}onIdTokenChanged(_,w,A){const{next:O,error:K,complete:ge}=gm(_,w,A);return this._delegate.onIdTokenChanged(O,K,ge)}sendSignInLinkToEmail(_,w){return function Lg(v,g,_){return hc.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function du(v,g,_){return Dl.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,l.Z)(function*(){let A;switch(function cm(v,g){Xo(Object.values(xr).includes(g),v,"invalid-persistence-type"),(0,B.b$)()?Xo(g!==xr.SESSION,v,"unsupported-persistence-type"):(0,B.UG)()?Xo(g===xr.NONE,v,"unsupported-persistence-type"):Ai()?Xo(g===xr.NONE||g===xr.LOCAL&&(0,B.hl)(),v,"unsupported-persistence-type"):Xo(g===xr.NONE||Ef(),v,"unsupported-persistence-type")}(w._delegate,_),_){case xr.SESSION:A=sn;break;case xr.LOCAL:A=(yield ie(pi)._isAvailable())?pi:gt;break;case xr.NONE:A=Et;break;default:return Me("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return kr(this._delegate,function Id(v){return lu.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return kr(this._delegate,kn(this._delegate,_))}signInWithCustomToken(_){return kr(this._delegate,function wa(v,g){return vt.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return kr(this._delegate,function pu(v,g,_){return kn((0,B.m9)(v),Dd.credential(g,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return kr(this._delegate,function fc(v,g,_){return Wn.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return Tf(this._delegate,function Tu(v,g,_){return Go.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,l.Z)(function*(){return Fu(Gl(),w._delegate,"operation-not-supported-in-this-environment"),kr(w._delegate,function Nd(v,g,_){return vo.apply(this,arguments)}(w._delegate,_,Rr))})()}signInWithRedirect(_){var w=this;return(0,l.Z)(function*(){return Fu(Gl(),w._delegate,"operation-not-supported-in-this-environment"),yield Oc(w._delegate),function J(v,g,_){return function se(v,g,_){return ye.apply(this,arguments)}(v,g,_)}(w._delegate,_,Rr)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Ea(v,g){return Fo.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=xr,v})();function gm(v,g,_){let w=v;"function"!=typeof v&&({next:w,error:g,complete:_}=v);const A=w;return{next:K=>A(K&&bo.getOrCreate(K)),error:g,complete:_}}function uv(v,g){const _=function zl(v,g){const _=um();if(!_)return[];const w=ti(lm,v,g);switch(_.getItem(w)){case xr.NONE:return[Et];case xr.LOCAL:return[pi,sn];case xr.SESSION:return[sn];default:return[]}}(v,g);if("undefined"!=typeof self&&!_.includes(pi)&&_.push(pi),"undefined"!=typeof window)for(const w of[gt,sn])_.includes(w)||_.push(w);return _.includes(Et)||_.push(Et),_}class If{constructor(){this.providerId="phone",this._delegate=new qo(dm(ee.Z.auth()))}static credential(g,_){return qo.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}If.PHONE_SIGN_IN_METHOD=qo.PHONE_SIGN_IN_METHOD,If.PROVIDER_ID=qo.PROVIDER_ID;const mm=z;class cC{constructor(g,_,w=ee.Z.app()){var A;mm(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new jo(g,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Vs(v){v.INTERNAL.registerComponent(new ne.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),w=g.getProvider("auth");return new pm(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Dd,FacebookAuthProvider:_a,GithubAuthProvider:rf,GoogleAuthProvider:Td,OAuthProvider:us,SAMLAuthProvider:Qi,PhoneAuthProvider:If,PhoneMultiFactorGenerator:Qg,RecaptchaVerifier:cC,TwitterAuthProvider:Sd,Auth:pm,AuthCredential:jr,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.15")}(ee.Z)},8306:(it,be,F)=>{F.d(be,{y:()=>$});var l=F(930),ee=F(727),B=F(8822),de=F(4671);var ne=F(2416),ce=F(576),he=F(2806);let $=(()=>{class Re{constructor(je){je&&(this._subscribe=je)}lift(je){const pe=new Re;return pe.source=this,pe.operator=je,pe}subscribe(je,pe,Ae){const Ke=function Ye(Re){return Re&&Re instanceof l.Lv||function re(Re){return Re&&(0,ce.m)(Re.next)&&(0,ce.m)(Re.error)&&(0,ce.m)(Re.complete)}(Re)&&(0,ee.Nn)(Re)}(je)?je:new l.Hp(je,pe,Ae);return(0,he.x)(()=>{const{operator:et,source:Me}=this;Ke.add(et?et.call(Ke,Me):Me?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(je){try{return this._subscribe(je)}catch(pe){je.error(pe)}}forEach(je,pe){return new(pe=G(pe))((Ae,Ke)=>{const et=new l.Hp({next:Me=>{try{je(Me)}catch(Ce){Ke(Ce),et.unsubscribe()}},error:Ke,complete:Ae});this.subscribe(et)})}_subscribe(je){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(je)}[B.L](){return this}pipe(...je){return function _e(Re){return 0===Re.length?de.y:1===Re.length?Re[0]:function(je){return Re.reduce((pe,Ae)=>Ae(pe),je)}}(je)(this)}toPromise(je){return new(je=G(je))((pe,Ae)=>{let Ke;this.subscribe(et=>Ke=et,et=>Ae(et),()=>pe(Ke))})}}return Re.create=Ne=>new Re(Ne),Re})();function G(Re){var Ne;return null!==(Ne=null!=Re?Re:ne.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(it,be,F)=>{F.d(be,{x:()=>ne});var l=F(8306),ee=F(727);const de=(0,F(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=F(8737),_e=F(2806);let ne=(()=>{class he extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const re=new ce(this,this);return re.operator=G,re}_throwIfClosed(){if(this.closed)throw new de}next(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(G)}})}error(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:re}=this;for(;re.length;)re.shift().error(G)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:re,isStopped:Ye,observers:Re}=this;return re||Ye?ee.Lc:(this.currentObservers=null,Re.push(G),new ee.w0(()=>{this.currentObservers=null,(0,ae.P)(Re,G)}))}_checkFinalizedStatuses(G){const{hasError:re,thrownError:Ye,isStopped:Re}=this;re?G.error(Ye):Re&&G.complete()}asObservable(){const G=new l.y;return G.source=this,G}}return he.create=($,G)=>new ce($,G),he})();class ce extends ne{constructor($,G){super(),this.destination=$,this.source=G}next($){var G,re;null===(re=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===re||re.call(G,$)}error($){var G,re;null===(re=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===re||re.call(G,$)}complete(){var $,G;null===(G=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===G||G.call($)}_subscribe($){var G,re;return null!==(re=null===(G=this.source)||void 0===G?void 0:G.subscribe($))&&void 0!==re?re:ee.Lc}}},930:(it,be,F)=>{F.d(be,{Hp:()=>je,Lv:()=>re});var l=F(576),ee=F(727),B=F(2416),de=F(7849),ae=F(5032);const _e=he("C",void 0,void 0);function he(Me,Ce,Te){return{kind:Me,value:Ce,error:Te}}var $=F(3410),G=F(2806);class re extends ee.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,ee.Nn)(Ce)&&Ce.add(this)):this.destination=et}static create(Ce,Te,ze){return new je(Ce,Te,ze)}next(Ce){this.isStopped?Ke(function ce(Me){return he("N",Me,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?Ke(function ne(Me){return he("E",void 0,Me)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?Ke(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ye=Function.prototype.bind;function Re(Me,Ce){return Ye.call(Me,Ce)}class Ne{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Ce)}catch(ze){pe(ze)}}error(Ce){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Ce)}catch(ze){pe(ze)}else pe(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(Te){pe(Te)}}}class je extends re{constructor(Ce,Te,ze){let $e;if(super(),(0,l.m)(Ce)||!Ce)$e={next:null!=Ce?Ce:void 0,error:null!=Te?Te:void 0,complete:null!=ze?ze:void 0};else{let z;this&&B.v.useDeprecatedNextContext?(z=Object.create(Ce),z.unsubscribe=()=>this.unsubscribe(),$e={next:Ce.next&&Re(Ce.next,z),error:Ce.error&&Re(Ce.error,z),complete:Ce.complete&&Re(Ce.complete,z)}):$e=Ce}this.destination=new Ne($e)}}function pe(Me){B.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Me):(0,de.h)(Me)}function Ke(Me,Ce){const{onStoppedNotification:Te}=B.v;Te&&$.z.setTimeout(()=>Te(Me,Ce))}const et={closed:!0,next:ae.Z,error:function Ae(Me){throw Me},complete:ae.Z}},727:(it,be,F)=>{F.d(be,{Lc:()=>_e,w0:()=>ae,Nn:()=>ne});var l=F(576);const B=(0,F(3888).d)(he=>function(G){he(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((re,Ye)=>`${Ye+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var de=F(8737);class ae{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Re of G)Re.remove(this);else G.remove(this);const{initialTeardown:re}=this;if((0,l.m)(re))try{re()}catch(Re){$=Re instanceof B?Re.errors:[Re]}const{_finalizers:Ye}=this;if(Ye){this._finalizers=null;for(const Re of Ye)try{ce(Re)}catch(Ne){$=null!=$?$:[],Ne instanceof B?$=[...$,...Ne.errors]:$.push(Ne)}}if($)throw new B($)}}add($){var G;if($&&$!==this)if(this.closed)ce($);else{if($ instanceof ae){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push($)}}_hasParent($){const{_parentage:G}=this;return G===$||Array.isArray(G)&&G.includes($)}_addParent($){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push($),G):G?[G,$]:$}_removeParent($){const{_parentage:G}=this;G===$?this._parentage=null:Array.isArray(G)&&(0,de.P)(G,$)}remove($){const{_finalizers:G}=this;G&&(0,de.P)(G,$),$ instanceof ae&&$._removeParent(this)}}ae.EMPTY=(()=>{const he=new ae;return he.closed=!0,he})();const _e=ae.EMPTY;function ne(he){return he instanceof ae||he&&"closed"in he&&(0,l.m)(he.remove)&&(0,l.m)(he.add)&&(0,l.m)(he.unsubscribe)}function ce(he){(0,l.m)(he)?he():he.unsubscribe()}},2416:(it,be,F)=>{F.d(be,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,be,F)=>{F.d(be,{E:()=>ee});const ee=new(F(8306).y)(ae=>ae.complete())},8996:(it,be,F)=>{F.d(be,{D:()=>Ce});var l=F(8421),ee=F(5363),B=F(9468),_e=F(8306),ce=F(2202),he=F(576),$=F(9672);function re(Te,ze){if(!Te)throw new Error("Iterable cannot be null");return new _e.y($e=>{(0,$.f)($e,ze,()=>{const z=Te[Symbol.asyncIterator]();(0,$.f)($e,ze,()=>{z.next().then(De=>{De.done?$e.complete():$e.next(De.value)})},0,!0)})})}var Ye=F(3670),Re=F(8239),Ne=F(1144),je=F(6495),pe=F(2206),Ae=F(4532),Ke=F(3260);function Ce(Te,ze){return ze?function Me(Te,ze){if(null!=Te){if((0,Ye.c)(Te))return function de(Te,ze){return(0,l.Xf)(Te).pipe((0,B.R)(ze),(0,ee.Q)(ze))}(Te,ze);if((0,Ne.z)(Te))return function ne(Te,ze){return new _e.y($e=>{let z=0;return ze.schedule(function(){z===Te.length?$e.complete():($e.next(Te[z++]),$e.closed||this.schedule())})})}(Te,ze);if((0,Re.t)(Te))return function ae(Te,ze){return(0,l.Xf)(Te).pipe((0,B.R)(ze),(0,ee.Q)(ze))}(Te,ze);if((0,pe.D)(Te))return re(Te,ze);if((0,je.T)(Te))return function G(Te,ze){return new _e.y($e=>{let z;return(0,$.f)($e,ze,()=>{z=Te[ce.h](),(0,$.f)($e,ze,()=>{let De,Q;try{({value:De,done:Q}=z.next())}catch(le){return void $e.error(le)}Q?$e.complete():$e.next(De)},0,!0)}),()=>(0,he.m)(null==z?void 0:z.return)&&z.return()})}(Te,ze);if((0,Ke.L)(Te))return function et(Te,ze){return re((0,Ke.Q)(Te),ze)}(Te,ze)}throw(0,Ae.z)(Te)}(Te,ze):(0,l.Xf)(Te)}},8421:(it,be,F)=>{F.d(be,{Xf:()=>Ye});var l=F(655),ee=F(1144),B=F(8239),de=F(8306),ae=F(3670),_e=F(2206),ne=F(4532),ce=F(6495),he=F(3260),$=F(576),G=F(7849),re=F(8822);function Ye(Me){if(Me instanceof de.y)return Me;if(null!=Me){if((0,ae.c)(Me))return function Re(Me){return new de.y(Ce=>{const Te=Me[re.L]();if((0,$.m)(Te.subscribe))return Te.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,ee.z)(Me))return function Ne(Me){return new de.y(Ce=>{for(let Te=0;Te<Me.length&&!Ce.closed;Te++)Ce.next(Me[Te]);Ce.complete()})}(Me);if((0,B.t)(Me))return function je(Me){return new de.y(Ce=>{Me.then(Te=>{Ce.closed||(Ce.next(Te),Ce.complete())},Te=>Ce.error(Te)).then(null,G.h)})}(Me);if((0,_e.D)(Me))return Ae(Me);if((0,ce.T)(Me))return function pe(Me){return new de.y(Ce=>{for(const Te of Me)if(Ce.next(Te),Ce.closed)return;Ce.complete()})}(Me);if((0,he.L)(Me))return function Ke(Me){return Ae((0,he.Q)(Me))}(Me)}throw(0,ne.z)(Me)}function Ae(Me){return new de.y(Ce=>{(function et(Me,Ce){var Te,ze,$e,z;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Te=(0,l.KL)(Me);!(ze=yield Te.next()).done;)if(Ce.next(ze.value),Ce.closed)return}catch(De){$e={error:De}}finally{try{ze&&!ze.done&&(z=Te.return)&&(yield z.call(Te))}finally{if($e)throw $e.error}}Ce.complete()})})(Me,Ce).catch(Te=>Ce.error(Te))})}},6451:(it,be,F)=>{F.d(be,{T:()=>_e});var l=F(8189),ee=F(8421),B=F(515),de=F(3269),ae=F(8996);function _e(...ne){const ce=(0,de.yG)(ne),he=(0,de._6)(ne,1/0),$=ne;return $.length?1===$.length?(0,ee.Xf)($[0]):(0,l.J)(he)((0,ae.D)($,ce)):B.E}},5403:(it,be,F)=>{F.d(be,{x:()=>ee});var l=F(930);function ee(de,ae,_e,ne,ce){return new B(de,ae,_e,ne,ce)}class B extends l.Lv{constructor(ae,_e,ne,ce,he,$){super(ae),this.onFinalize=he,this.shouldUnsubscribe=$,this._next=_e?function(G){try{_e(G)}catch(re){ae.error(re)}}:super._next,this._error=ce?function(G){try{ce(G)}catch(re){ae.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=ne?function(){try{ne()}catch(G){ae.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(it,be,F)=>{F.d(be,{U:()=>B});var l=F(4482),ee=F(5403);function B(de,ae){return(0,l.e)((_e,ne)=>{let ce=0;_e.subscribe((0,ee.x)(ne,he=>{ne.next(de.call(ae,he,ce++))}))})}},8189:(it,be,F)=>{F.d(be,{J:()=>B});var l=F(5577),ee=F(4671);function B(de=1/0){return(0,l.z)(ee.y,de)}},5577:(it,be,F)=>{F.d(be,{z:()=>ce});var l=F(4004),ee=F(8421),B=F(4482),de=F(9672),ae=F(5403),ne=F(576);function ce(he,$,G=1/0){return(0,ne.m)($)?ce((re,Ye)=>(0,l.U)((Re,Ne)=>$(re,Re,Ye,Ne))((0,ee.Xf)(he(re,Ye))),G):("number"==typeof $&&(G=$),(0,B.e)((re,Ye)=>function _e(he,$,G,re,Ye,Re,Ne,je){const pe=[];let Ae=0,Ke=0,et=!1;const Me=()=>{et&&!pe.length&&!Ae&&$.complete()},Ce=ze=>Ae<re?Te(ze):pe.push(ze),Te=ze=>{Re&&$.next(ze),Ae++;let $e=!1;(0,ee.Xf)(G(ze,Ke++)).subscribe((0,ae.x)($,z=>{null==Ye||Ye(z),Re?Ce(z):$.next(z)},()=>{$e=!0},void 0,()=>{if($e)try{for(Ae--;pe.length&&Ae<re;){const z=pe.shift();Ne?(0,de.f)($,Ne,()=>Te(z)):Te(z)}Me()}catch(z){$.error(z)}}))};return he.subscribe((0,ae.x)($,Ce,()=>{et=!0,Me()})),()=>{null==je||je()}}(re,Ye,he,G)))}},5363:(it,be,F)=>{F.d(be,{Q:()=>de});var l=F(9672),ee=F(4482),B=F(5403);function de(ae,_e=0){return(0,ee.e)((ne,ce)=>{ne.subscribe((0,B.x)(ce,he=>(0,l.f)(ce,ae,()=>ce.next(he),_e),()=>(0,l.f)(ce,ae,()=>ce.complete(),_e),he=>(0,l.f)(ce,ae,()=>ce.error(he),_e)))})}},3099:(it,be,F)=>{F.d(be,{B:()=>_e});var l=F(8996),ee=F(5698),B=F(7579),de=F(930),ae=F(4482);function _e(ce={}){const{connector:he=(()=>new B.x),resetOnError:$=!0,resetOnComplete:G=!0,resetOnRefCountZero:re=!0}=ce;return Ye=>{let Re=null,Ne=null,je=null,pe=0,Ae=!1,Ke=!1;const et=()=>{null==Ne||Ne.unsubscribe(),Ne=null},Me=()=>{et(),Re=je=null,Ae=Ke=!1},Ce=()=>{const Te=Re;Me(),null==Te||Te.unsubscribe()};return(0,ae.e)((Te,ze)=>{pe++,!Ke&&!Ae&&et();const $e=je=null!=je?je:he();ze.add(()=>{pe--,0===pe&&!Ke&&!Ae&&(Ne=ne(Ce,re))}),$e.subscribe(ze),Re||(Re=new de.Hp({next:z=>$e.next(z),error:z=>{Ke=!0,et(),Ne=ne(Me,$,z),$e.error(z)},complete:()=>{Ae=!0,et(),Ne=ne(Me,G),$e.complete()}}),(0,l.D)(Te).subscribe(Re))})(Ye)}}function ne(ce,he,...$){return!0===he?(ce(),null):!1===he?null:he(...$).pipe((0,ee.q)(1)).subscribe(()=>ce())}},9468:(it,be,F)=>{F.d(be,{R:()=>ee});var l=F(4482);function ee(B,de=0){return(0,l.e)((ae,_e)=>{_e.add(B.schedule(()=>ae.subscribe(_e),de))})}},5698:(it,be,F)=>{F.d(be,{q:()=>de});var l=F(515),ee=F(4482),B=F(5403);function de(ae){return ae<=0?()=>l.E:(0,ee.e)((_e,ne)=>{let ce=0;_e.subscribe((0,B.x)(ne,he=>{++ce<=ae&&(ne.next(he),ae<=ce&&ne.complete())}))})}},8505:(it,be,F)=>{F.d(be,{b:()=>ae});var l=F(576),ee=F(4482),B=F(5403),de=F(4671);function ae(_e,ne,ce){const he=(0,l.m)(_e)||ne||ce?{next:_e,error:ne,complete:ce}:_e;return he?(0,ee.e)(($,G)=>{var re;null===(re=he.subscribe)||void 0===re||re.call(he);let Ye=!0;$.subscribe((0,B.x)(G,Re=>{var Ne;null===(Ne=he.next)||void 0===Ne||Ne.call(he,Re),G.next(Re)},()=>{var Re;Ye=!1,null===(Re=he.complete)||void 0===Re||Re.call(he),G.complete()},Re=>{var Ne;Ye=!1,null===(Ne=he.error)||void 0===Ne||Ne.call(he,Re),G.error(Re)},()=>{var Re,Ne;Ye&&(null===(Re=he.unsubscribe)||void 0===Re||Re.call(he)),null===(Ne=he.finalize)||void 0===Ne||Ne.call(he)}))}):de.y}},4408:(it,be,F)=>{F.d(be,{o:()=>ae});var l=F(727);class ee extends l.w0{constructor(ne,ce){super()}schedule(ne,ce=0){return this}}const B={setInterval(_e,ne,...ce){const{delegate:he}=B;return(null==he?void 0:he.setInterval)?he.setInterval(_e,ne,...ce):setInterval(_e,ne,...ce)},clearInterval(_e){const{delegate:ne}=B;return((null==ne?void 0:ne.clearInterval)||clearInterval)(_e)},delegate:void 0};var de=F(8737);class ae extends ee{constructor(ne,ce){super(ne,ce),this.scheduler=ne,this.work=ce,this.pending=!1}schedule(ne,ce=0){if(this.closed)return this;this.state=ne;const he=this.id,$=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId($,he,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId($,this.id,ce),this}requestAsyncId(ne,ce,he=0){return B.setInterval(ne.flush.bind(ne,this),he)}recycleAsyncId(ne,ce,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ce;B.clearInterval(ce)}execute(ne,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ne,ce);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ne,ce){let $,he=!1;try{this.work(ne)}catch(G){he=!0,$=G||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ne,scheduler:ce}=this,{actions:he}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(he,this),null!=ne&&(this.id=this.recycleAsyncId(ce,ne,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,be,F)=>{F.d(be,{v:()=>B});var l=F(6063);class ee{constructor(ae,_e=ee.now){this.schedulerActionCtor=ae,this.now=_e}schedule(ae,_e=0,ne){return new this.schedulerActionCtor(this,ae).schedule(ne,_e)}}ee.now=l.l.now;class B extends ee{constructor(ae,_e=ee.now){super(ae,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ae){const{actions:_e}=this;if(this._active)return void _e.push(ae);let ne;this._active=!0;do{if(ne=ae.execute(ae.state,ae.delay))break}while(ae=_e.shift());if(this._active=!1,ne){for(;ae=_e.shift();)ae.unsubscribe();throw ne}}}},4986:(it,be,F)=>{F.d(be,{z:()=>B,P:()=>de});var l=F(4408);const B=new(F(7565).v)(l.o),de=B},6063:(it,be,F)=>{F.d(be,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(it,be,F)=>{F.d(be,{z:()=>l});const l={setTimeout(ee,B,...de){const{delegate:ae}=l;return(null==ae?void 0:ae.setTimeout)?ae.setTimeout(ee,B,...de):setTimeout(ee,B,...de)},clearTimeout(ee){const{delegate:B}=l;return((null==B?void 0:B.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(it,be,F)=>{F.d(be,{h:()=>ee});const ee=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,be,F)=>{F.d(be,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(it,be,F)=>{F.d(be,{jO:()=>de,yG:()=>ae,_6:()=>_e});var l=F(576),ee=F(3532);function B(ne){return ne[ne.length-1]}function de(ne){return(0,l.m)(B(ne))?ne.pop():void 0}function ae(ne){return(0,ee.K)(B(ne))?ne.pop():void 0}function _e(ne,ce){return"number"==typeof B(ne)?ne.pop():ce}},8737:(it,be,F)=>{function l(ee,B){if(ee){const de=ee.indexOf(B);0<=de&&ee.splice(de,1)}}F.d(be,{P:()=>l})},3888:(it,be,F)=>{function l(ee){const de=ee(ae=>{Error.call(ae),ae.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}F.d(be,{d:()=>l})},2806:(it,be,F)=>{F.d(be,{x:()=>B,O:()=>de});var l=F(2416);let ee=null;function B(ae){if(l.v.useDeprecatedSynchronousErrorHandling){const _e=!ee;if(_e&&(ee={errorThrown:!1,error:null}),ae(),_e){const{errorThrown:ne,error:ce}=ee;if(ee=null,ne)throw ce}}else ae()}function de(ae){l.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ae)}},9672:(it,be,F)=>{function l(ee,B,de,ae=0,_e=!1){const ne=B.schedule(function(){de(),_e?ee.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(ee.add(ne),!_e)return ne}F.d(be,{f:()=>l})},4671:(it,be,F)=>{function l(ee){return ee}F.d(be,{y:()=>l})},1144:(it,be,F)=>{F.d(be,{z:()=>l});const l=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(it,be,F)=>{F.d(be,{D:()=>ee});var l=F(576);function ee(B){return Symbol.asyncIterator&&(0,l.m)(null==B?void 0:B[Symbol.asyncIterator])}},576:(it,be,F)=>{function l(ee){return"function"==typeof ee}F.d(be,{m:()=>l})},3670:(it,be,F)=>{F.d(be,{c:()=>B});var l=F(8822),ee=F(576);function B(de){return(0,ee.m)(de[l.L])}},6495:(it,be,F)=>{F.d(be,{T:()=>B});var l=F(2202),ee=F(576);function B(de){return(0,ee.m)(null==de?void 0:de[l.h])}},8239:(it,be,F)=>{F.d(be,{t:()=>ee});var l=F(576);function ee(B){return(0,l.m)(null==B?void 0:B.then)}},3260:(it,be,F)=>{F.d(be,{Q:()=>B,L:()=>de});var l=F(655),ee=F(576);function B(ae){return(0,l.FC)(this,arguments,function*(){const ne=ae.getReader();try{for(;;){const{value:ce,done:he}=yield(0,l.qq)(ne.read());if(he)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ce)}}finally{ne.releaseLock()}})}function de(ae){return(0,ee.m)(null==ae?void 0:ae.getReader)}},3532:(it,be,F)=>{F.d(be,{K:()=>ee});var l=F(576);function ee(B){return B&&(0,l.m)(B.schedule)}},4482:(it,be,F)=>{F.d(be,{A:()=>ee,e:()=>B});var l=F(576);function ee(de){return(0,l.m)(null==de?void 0:de.lift)}function B(de){return ae=>{if(ee(ae))return ae.lift(function(_e){try{return de(_e,this)}catch(ne){this.error(ne)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(it,be,F)=>{function l(){}F.d(be,{Z:()=>l})},7849:(it,be,F)=>{F.d(be,{h:()=>B});var l=F(2416),ee=F(3410);function B(de){ee.z.setTimeout(()=>{const{onUnhandledError:ae}=l.v;if(!ae)throw de;ae(de)})}},4532:(it,be,F)=>{function l(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(be,{z:()=>l})},655:(it,be,F)=>{function de(Q,le){var ie={};for(var ve in Q)Object.prototype.hasOwnProperty.call(Q,ve)&&le.indexOf(ve)<0&&(ie[ve]=Q[ve]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var ue=0;for(ve=Object.getOwnPropertySymbols(Q);ue<ve.length;ue++)le.indexOf(ve[ue])<0&&Object.prototype.propertyIsEnumerable.call(Q,ve[ue])&&(ie[ve[ue]]=Q[ve[ue]])}return ie}function ce(Q,le,ie,ve){return new(ie||(ie=Promise))(function(Fe,pt){function qt(ln){try{tt(ve.next(ln))}catch(Gn){pt(Gn)}}function Ut(ln){try{tt(ve.throw(ln))}catch(Gn){pt(Gn)}}function tt(ln){ln.done?Fe(ln.value):function ue(Fe){return Fe instanceof ie?Fe:new ie(function(pt){pt(Fe)})}(ln.value).then(qt,Ut)}tt((ve=ve.apply(Q,le||[])).next())})}function pe(Q){return this instanceof pe?(this.v=Q,this):new pe(Q)}function Ae(Q,le,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,ve=ie.apply(Q,le||[]),Fe=[];return ue={},pt("next"),pt("throw"),pt("return"),ue[Symbol.asyncIterator]=function(){return this},ue;function pt(fn){ve[fn]&&(ue[fn]=function(tn){return new Promise(function(Wi,Jt){Fe.push([fn,tn,Wi,Jt])>1||qt(fn,tn)})})}function qt(fn,tn){try{!function Ut(fn){fn.value instanceof pe?Promise.resolve(fn.value.v).then(tt,ln):Gn(Fe[0][2],fn)}(ve[fn](tn))}catch(Wi){Gn(Fe[0][3],Wi)}}function tt(fn){qt("next",fn)}function ln(fn){qt("throw",fn)}function Gn(fn,tn){fn(tn),Fe.shift(),Fe.length&&qt(Fe[0][0],Fe[0][1])}}function et(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,le=Q[Symbol.asyncIterator];return le?le.call(Q):(Q=function re(Q){var le="function"==typeof Symbol&&Symbol.iterator,ie=le&&Q[le],ve=0;if(ie)return ie.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ve>=Q.length&&(Q=void 0),{value:Q&&Q[ve++],done:!Q}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),ie={},ve("next"),ve("throw"),ve("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ve(Fe){ie[Fe]=Q[Fe]&&function(pt){return new Promise(function(qt,Ut){!function ue(Fe,pt,qt,Ut){Promise.resolve(Ut).then(function(tt){Fe({value:tt,done:qt})},pt)}(qt,Ut,(pt=Q[Fe](pt)).done,pt.value)})}}}F.d(be,{_T:()=>de,mG:()=>ce,qq:()=>pe,FC:()=>Ae,KL:()=>et})},5e3:(it,be,F)=>{F.d(be,{deG:()=>Hg,tb:()=>wT,AFp:()=>_T,ip1:()=>Dp,CZH:()=>Tp,hGG:()=>uw,z2F:()=>sw,sBO:()=>fR,Sil:()=>rR,_Vd:()=>s_,EJc:()=>iR,SBq:()=>fp,qLn:()=>Wd,vpe:()=>aa,tBr:()=>pr,XFs:()=>bt,OlP:()=>Rn,zs3:()=>$a,ZZ4:()=>HT,aQg:()=>jT,soG:()=>I_,YKP:()=>Ax,h0i:()=>gp,PXZ:()=>IT,R0b:()=>Eo,FiY:()=>Ir,Lbi:()=>bT,g9A:()=>vT,n_E:()=>yh,Qsj:()=>Ex,FYo:()=>ND,JOm:()=>A,q3G:()=>Zt,tp0:()=>Mr,Rgc:()=>vh,dDg:()=>Qb,q4F:()=>LD,GfV:()=>Fb,s_b:()=>f_,ifc:()=>Wt,eFA:()=>AT,G48:()=>hR,Gpc:()=>G,f3M:()=>mt,X6Q:()=>dR,_c5:()=>cw,VLi:()=>Ip,c2e:()=>Pr,zSh:()=>JC,wAp:()=>ft,vHH:()=>Ne,EiD:()=>$d,mCW:()=>Ls,qzn:()=>Fs,JVY:()=>Ru,pB0:()=>ku,eBb:()=>gf,L6k:()=>Kg,LAX:()=>Jy,cg1:()=>ip,kL8:()=>iD,yhl:()=>Ic,dqk:()=>zt,sIi:()=>Om,CqO:()=>DE,QGY:()=>Vm,F4k:()=>EE,RDi:()=>cu,AaK:()=>ce,z3N:()=>Jo,qOj:()=>rE,TTD:()=>us,_Bn:()=>Ku,xp6:()=>Of,uIk:()=>Pm,Gre:()=>qE,ekj:()=>cb,Suo:()=>sT,Xpm:()=>yt,lG2:()=>sc,Yz7:()=>tn,cJS:()=>Jt,oAB:()=>Yi,Yjl:()=>gl,Y36:()=>ch,_UZ:()=>wE,GkF:()=>CE,BQk:()=>Xv,ynx:()=>Jv,qZA:()=>Bm,TgZ:()=>Lm,EpF:()=>eb,n5z:()=>vc,Ikx:()=>np,LFG:()=>Ue,$8M:()=>Pn,$Z:()=>Yv,NdJ:()=>Um,CRH:()=>tl,kcU:()=>Hy,O4$:()=>Uy,oxw:()=>Hm,ALo:()=>Fx,lcZ:()=>Lx,Hsn:()=>Kf,F$t:()=>IE,Q6J:()=>Kv,MGl:()=>nb,DdM:()=>Mx,VKq:()=>xx,iGM:()=>iT,MAs:()=>cE,CHM:()=>dc,LSH:()=>Rc,Udp:()=>lb,WFA:()=>Uc,d8E:()=>hh,YNc:()=>Vv,_uU:()=>BE,Oqu:()=>db,hij:()=>$m,Gf:()=>rT});var l=F(7579),ee=F(727),B=F(8306),de=F(6451),ae=F(3099);function _e(o){for(let a in o)if(o[a]===_e)return a;throw Error("Could not find renamed property on target object.")}function ne(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function ce(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ce).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function he(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const $=_e({__forward_ref__:_e});function G(o){return o.__forward_ref__=G,o.toString=function(){return ce(this())},o}function re(o){return Ye(o)?o():o}function Ye(o){return"function"==typeof o&&o.hasOwnProperty($)&&o.__forward_ref__===G}class Ne extends Error{constructor(a,u){super(function je(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,u)),this.code=a}}function pe(o){return"string"==typeof o?o:null==o?"":String(o)}function Ae(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():pe(o)}function Ce(o,a){const u=a?` in ${a}`:"";throw new Ne(-201,`No provider for ${Ae(o)} found${u}`)}function Ut(o,a){null==o&&function tt(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function tn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Jt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Ht(o){return is(o,rs)||is(o,or)}function is(o,a){return o.hasOwnProperty(a)?o[a]:null}function Zi(o){return o&&(o.hasOwnProperty(no)||o.hasOwnProperty(Hr))?o[no]:null}const rs=_e({\u0275prov:_e}),no=_e({\u0275inj:_e}),or=_e({ngInjectableDef:_e}),Hr=_e({ngInjectorDef:_e});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let yr;function zn(o){const a=yr;return yr=o,a}function io(o,a,u){const h=Ht(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&bt.Optional?null:void 0!==a?a:void Ce(ce(o),"Injector")}function ci(o){return{toString:o}.toString()}var $n=(()=>(($n=$n||{})[$n.OnPush=0]="OnPush",$n[$n.Default=1]="Default",$n))(),Wt=(()=>{return(o=Wt||(Wt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Wt;var o})();const ct="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,Ni="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,zt=ct||"undefined"!=typeof global&&global||Ct||Ni,Li={},H=[],W=_e({\u0275cmp:_e}),Y=_e({\u0275dir:_e}),Ie=_e({\u0275pipe:_e}),q=_e({\u0275mod:_e}),te=_e({\u0275fac:_e}),Oe=_e({__NG_ELEMENT_ID__:_e});let rt=0;function yt(o){return ci(()=>{const u={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===$n.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||H,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Wt.Emulated,id:"c",styles:o.styles||H,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,m=o.features,b=o.pipes;return h.id+=rt++,h.inputs=pl(o.inputs,u),h.outputs=pl(o.outputs),m&&m.forEach(C=>C(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(Dn):null,h.pipeDefs=b?()=>("function"==typeof b?b():b).map(Et):null,h})}function Dn(o){return ni(o)||function Ki(o){return o[Y]||null}(o)}function Et(o){return function Is(o){return o[Ie]||null}(o)}const ti={};function Yi(o){return ci(()=>{const a={type:o.type,bootstrap:o.bootstrap||H,declarations:o.declarations||H,imports:o.imports||H,exports:o.exports||H,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(ti[o.id]=o.type),a})}function pl(o,a){if(null==o)return Li;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,a&&(a[f]=m)}return u}const sc=yt;function gl(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function ni(o){return o[W]||null}function ii(o,a){const u=o[q]||null;if(!u&&!0===a)throw new Error(`Type ${ce(o)} does not have '\u0275mod' property.`);return u}function Bi(o){return Array.isArray(o)&&"object"==typeof o[1]}function wr(o){return Array.isArray(o)&&!0===o[1]}function yl(o){return 0!=(8&o.flags)}function _d(o){return 2==(2&o.flags)}function ls(o){return 1==(1&o.flags)}function cs(o){return null!==o.template}function su(o){return 0!=(512&o[2])}function Ui(o,a){return o.hasOwnProperty(te)?o[te]:null}class ko{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function us(){return _a}function _a(o){return o.type.prototype.ngOnChanges&&(o.setInput=rf),Td}function Td(){const o=Oo(this),a=null==o?void 0:o.current;if(a){const u=o.previous;if(u===Li)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function rf(o,a,u,h){const f=Oo(o)||function ya(o,a){return o[co]=a}(o,{previous:Li,current:null}),m=f.current||(f.current={}),b=f.previous,C=this.declaredInputs[u],D=b[C];m[C]=new ko(D&&D.currentValue,a,b===Li),o[h]=a}us.ngInherit=!0;const co="__ngSimpleChanges__";function Oo(o){return o[co]||null}let ba;function cu(o){ba=o}function gn(o){return!!o.listen}const bl={createRenderer:(o,a)=>function ds(){return void 0!==ba?ba:"undefined"!=typeof document?document:void 0}()};function rn(o){for(;Array.isArray(o);)o=o[0];return o}function uo(o,a){return rn(a[o])}function Ti(o,a){return rn(a[o.index])}function kn(o,a){return o.data[a]}function hs(o,a){return o[a]}function Si(o,a){const u=a[o];return Bi(u)?u:u[0]}function No(o){return 4==(4&o[2])}function Ms(o){return 128==(128&o[2])}function Gr(o,a){return null==a?null:o[a]}function fs(o){o[18]=0}function wa(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const vt={lFrame:Ad(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Dl(){return vt.bindingsEnabled}function xe(){return vt.lFrame.lView}function Lt(){return vt.lFrame.tView}function dc(o){return vt.lFrame.contextLView=o,o[8]}function Sn(){let o=Ea();for(;null!==o&&64===o.type;)o=o.parent;return o}function Ea(){return vt.lFrame.currentTNode}function Er(o,a){const u=vt.lFrame;u.currentTNode=o,u.isParent=a}function Tl(){return vt.lFrame.isParent}function pu(){vt.lFrame.isParent=!1}function Sl(){return vt.isInCheckNoChangesMode}function fc(o){vt.isInCheckNoChangesMode=o}function Wn(){const o=vt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function ho(){return vt.lFrame.bindingIndex++}function zr(o){const a=vt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function mu(o,a){const u=vt.lFrame;u.bindingIndex=u.bindingRootIndex=o,Al(a)}function Al(o){vt.lFrame.currentDirectiveIndex=o}function Da(o){const a=vt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function _u(){return vt.lFrame.currentQueryIndex}function Ml(o){vt.lFrame.currentQueryIndex=o}function Bg(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function yu(o,a,u){if(u&bt.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&bt.Host||(f=Bg(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=vt.lFrame=xl();return h.currentTNode=a,h.lView=o,!0}function Ta(o){const a=xl(),u=o[1];vt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function xl(){const o=vt.lFrame,a=null===o?null:o.child;return null===a?Ad(o):a}function Ad(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Sa(){const o=vt.lFrame;return vt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Md=Sa;function Ia(){const o=Sa();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function di(){return vt.lFrame.selectedIndex}function gs(o){vt.lFrame.selectedIndex=o}function Un(){const o=vt.lFrame;return kn(o.tView,o.selectedIndex)}function Uy(){vt.lFrame.currentNamespace="svg"}function Hy(){!function jy(){vt.lFrame.currentNamespace=null}()}function Rd(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:M,ngOnDestroy:R}=m;b&&(o.contentHooks||(o.contentHooks=[])).push(-u,b),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),D&&(o.viewHooks||(o.viewHooks=[])).push(-u,D),M&&((o.viewHooks||(o.viewHooks=[])).push(u,M),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,M)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(u,R)}}function Rl(o,a,u){hi(o,a,3,u)}function Rs(o,a,u,h){(3&o[2])===u&&hi(o,a,u,h)}function Aa(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function hi(o,a,u,h){const m=null!=h?h:-1,b=a.length-1;let C=0;for(let D=void 0!==h?65535&o[18]:0;D<b;D++)if("number"==typeof a[D+1]){if(C=a[D],null!=h&&C>=h)break}else a[D]<0&&(o[18]+=65536),(C<m||-1==m)&&(cf(o,u,a,D),o[18]=(4294901760&o[18])+D+2),D++}function cf(o,a,u,h){const f=u[h]<0,m=u[h+1],C=o[f?-u[h]:u[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class mc{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Ze(o,a,u){const h=gn(o);let f=0;for(;f<u.length;){const m=u[f];if("number"==typeof m){if(0!==m)break;f++;const b=u[f++],C=u[f++],D=u[f++];h?o.setAttribute(a,C,D,b):a.setAttributeNS(b,C,D)}else{const b=m,C=u[++f];fi(b)?h&&o.setProperty(a,b,C):h?o.setAttribute(a,b,C):a.setAttribute(b,C),f++}}return f}function gt(o){return 3===o||4===o||6===o}function fi(o){return 64===o.charCodeAt(0)}function sn(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||bu(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function bu(o,a,u,h,f){let m=0,b=o.length;if(-1===a)b=-1;else for(;m<o.length;){const C=o[m++];if("number"==typeof C){if(C===a){b=-1;break}if(C>a){b=m-1;break}}}for(;m<o.length;){const C=o[m];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==b&&(o.splice(b,0,a),m=b+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function Od(o){return-1!==o}function ms(o){return 32767&o}function Cn(o,a){let u=function wu(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let kl=!0;function Dr(o){const a=kl;return kl=o,a}let Cu=0;function cn(o,a){const u=_s(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,xa(h.data,o),xa(a,null),xa(h.blueprint,null));const f=po(o,a),m=o.injectorIndex;if(Od(f)){const b=ms(f),C=Cn(f,a),D=C[1].data;for(let M=0;M<8;M++)a[m+M]=C[b+M]|D[b+M]}return a[m+8]=f,m}function xa(o,a){o.push(0,0,0,0,0,0,0,0,a)}function _s(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function po(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){const m=f[1],b=m.type;if(h=2===b?m.declTNode:1===b?f[6]:null,null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function Ii(o,a,u){!function Eu(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Oe)&&(h=u[Oe]),null==h&&(h=u[Oe]=Cu++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function ks(o,a,u){if(u&bt.Optional)return o;Ce(a,"NodeInjector")}function Ra(o,a,u,h){if(u&bt.Optional&&void 0===h&&(h=null),0==(u&(bt.Self|bt.Host))){const f=o[9],m=zn(void 0);try{return f?f.get(a,h,u&bt.Optional):io(a,h,u&bt.Optional)}finally{zn(m)}}return ks(h,a,u)}function go(o,a,u,h=bt.Default,f){if(null!==o){const m=function Oa(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Oe)?o[Oe]:void 0;return"number"==typeof a?a>=0?255&a:Vo:a}(u);if("function"==typeof m){if(!yu(a,o,h))return h&bt.Host?ks(f,u,h):Ra(a,u,h,f);try{const b=m(h);if(null!=b||h&bt.Optional)return b;Ce(u)}finally{Md()}}else if("number"==typeof m){let b=null,C=_s(o,a),D=-1,M=h&bt.Host?a[16][6]:null;for((-1===C||h&bt.SkipSelf)&&(D=-1===C?po(o,a):a[C+8],-1!==D&&On(h,!1)?(b=a[1],C=ms(D),a=Cn(D,a)):C=-1);-1!==C;){const R=a[1];if(pi(m,C,R.data)){const V=Uo(C,a,u,b,h,M);if(V!==ka)return V}D=a[C+8],-1!==D&&On(h,a[1].data[C+8]===M)&&pi(m,C,a)?(b=R,C=ms(D),a=Cn(D,a)):C=-1}}}return Ra(a,u,h,f)}const ka={};function Vo(){return new Ho(Sn(),xe())}function Uo(o,a,u,h,f,m){const b=a[1],C=b.data[o+8],R=ys(C,b,u,null==h?_d(C)&&kl:h!=b&&0!=(3&C.type),f&bt.Host&&m===C);return null!==R?mo(a,b,R,C):ka}function ys(o,a,u,h,f){const m=o.providerIndexes,b=a.data,C=1048575&m,D=o.directiveStart,R=m>>20,j=f?C+R:o.directiveEnd;for(let X=h?C:C+R;X<j;X++){const we=b[X];if(X<D&&u===we||X>=D&&we.type===u)return X}if(f){const X=b[D];if(X&&cs(X)&&X.type===u)return D}return null}function mo(o,a,u,h){let f=o[u];const m=a.data;if(function kd(o){return o instanceof mc}(f)){const b=f;b.resolving&&function Ke(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${o}${u}`)}(Ae(m[u]));const C=Dr(b.canSeeViewProviders);b.resolving=!0;const D=b.injectImpl?zn(b.injectImpl):null;yu(o,h,bt.Default);try{f=o[u]=b.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function Vg(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const b=_a(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,b)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==D&&zn(D),Dr(C),b.resolving=!1,Md()}}return f}function pi(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function On(o,a){return!(o&bt.Self||o&bt.Host&&a)}class Ho{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return go(this._tNode,this._lView,a,h,u)}}function vc(o){return ci(()=>{const a=o.prototype.constructor,u=a[te]||In(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[te]||In(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function In(o){return Ye(o)?()=>{const a=In(re(o));return a&&a()}:Ui(o)}function Pn(o){return function dr(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(gt(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(Sn(),o)}const Os="__parameters__";function Fn(o,a,u){return ci(()=>{const h=function hr(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const b=new f(...m);return C.annotation=b,C;function C(D,M,R){const V=D.hasOwnProperty(Os)?D[Os]:Object.defineProperty(D,Os,{value:[]})[Os];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(b),D}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Rn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Hg=new Rn("AnalyzeForEntryComponents");function Sr(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),Sr(h,a)):a!==o&&a.push(h)}return a}function fr(o,a){o.forEach(u=>Array.isArray(u)?fr(u,a):a(u))}function Na(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function zo(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function $o(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function _i(o,a,u){let h=yo(o,a);return h>=0?o[1|h]=u:(h=~h,function Ps(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function Fl(o,a){const u=yo(o,a);if(u>=0)return o[1|u]}function yo(o,a){return function Nd(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const m=h+(f-h>>1),b=o[m<<u];if(a===b)return m<<u;b>a?f=m:h=m+1}return~(f<<u)}(o,a,1)}const La={},Ba="__NG_DI_FLAG__",Wo="ngTempTokenPath",S=/\n/gm,k="__source",U=_e({provide:String,useValue:_e});let J;function se(o){const a=J;return J=o,a}function ye(o,a=bt.Default){if(void 0===J)throw new Ne(203,"");return null===J?io(o,void 0,a):J.get(o,a&bt.Optional?null:void 0,a)}function Ue(o,a=bt.Default){return(function Bn(){return yr}()||ye)(re(o),a)}const mt=Ue;function $t(o){const a=[];for(let u=0;u<o.length;u++){const h=re(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Ne(900,"");let f,m=bt.Default;for(let b=0;b<h.length;b++){const C=h[b],D=ji(C);"number"==typeof D?-1===D?f=C.token:m|=D:f=C}a.push(Ue(f,m))}else a.push(Ue(h))}return a}function Dt(o,a){return o[Ba]=a,o.prototype[Ba]=a,o}function ji(o){return o[Ba]}const pr=Dt(Fn("Inject",o=>({token:o})),-1),Ir=Dt(Fn("Optional"),8),Mr=Dt(Fn("SkipSelf"),4);let Ko;function Ll(o){var a;return(null===(a=function Bd(){if(void 0===Ko&&(Ko=null,zt.trustedTypes))try{Ko=zt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Ko}())||void 0===a?void 0:a.createHTML(o))||o}class Qo{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class pf extends Qo{getTypeName(){return"HTML"}}class Yg extends Qo{getTypeName(){return"Style"}}class xu extends Qo{getTypeName(){return"Script"}}class Ky extends Qo{getTypeName(){return"URL"}}class Qy extends Qo{getTypeName(){return"ResourceURL"}}function Jo(o){return o instanceof Qo?o.changingThisBreaksApplicationSecurity:o}function Fs(o,a){const u=Ic(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function Ic(o){return o instanceof Qo&&o.getTypeName()||null}function Ru(o){return new pf(o)}function Kg(o){return new Yg(o)}function gf(o){return new xu(o)}function Jy(o){return new Ky(o)}function ku(o){return new Qy(o)}class Jg{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Ll(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class Xg{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Ll(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=Ll(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const b=u.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Hd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,tm=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ls(o){return(o=String(o)).match(Hd)||o.match(tm)?o:"unsafe:"+o}function Bs(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function Vl(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const nm=Bs("area,br,col,hr,img,wbr"),jd=Bs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gd=Bs("rp,rt"),_f=Vl(nm,Vl(jd,Bs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vl(Gd,Bs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vl(Gd,jd)),Ou=Bs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yf=Bs("srcset"),Mc=Vl(Ou,yf,Bs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xy=Bs("script,style,template");class xc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!_f.hasOwnProperty(u))return this.sanitizedSomething=!0,!Xy.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),b=m.name,C=b.toLowerCase();if(!Mc.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=m.value;Ou[C]&&(D=Ls(D)),yf[C]&&(o=D,D=(o=String(o)).split(",").map(a=>Ls(a.trim())).join(", ")),this.buf.push(" ",b,'="',vf(D),'"')}var o;return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();_f.hasOwnProperty(u)&&!nm.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(vf(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const Pu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ev=/([^\#-~ |!])/g;function vf(o){return o.replace(/&/g,"&amp;").replace(Pu,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(ev,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Hl;function $d(o,a){let u=null;try{Hl=Hl||function Qg(o){const a=new Xg(o);return function em(){try{return!!(new window.DOMParser).parseFromString(Ll(""),"text/html")}catch(o){return!1}}()?new Jg(a):a}(o);let h=a?String(a):"";u=Hl.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=u.innerHTML,u=Hl.getInertBodyElement(h)}while(h!==m);return Ll((new xc).sanitizeChildren(bf(u)||u))}finally{if(u){const h=bf(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function bf(o){return"content"in o&&function wf(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Zt=(()=>((Zt=Zt||{})[Zt.NONE=0]="NONE",Zt[Zt.HTML=1]="HTML",Zt[Zt.STYLE=2]="STYLE",Zt[Zt.SCRIPT=3]="SCRIPT",Zt[Zt.URL=4]="URL",Zt[Zt.RESOURCE_URL=5]="RESOURCE_URL",Zt))();function Rc(o){const a=function Ha(){const o=xe();return o&&o[12]}();return a?a.sanitize(Zt.URL,o)||"":Fs(o,"URL")?Jo(o):Ls(pe(o))}const Ef="__ngContext__";function Ai(o,a){o[Ef]=a}function qd(o){const a=function Gl(o){return o[Ef]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function Rr(o){return o.ngOriginalError}function lv(o,...a){o.error(...a)}class Wd{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),h=function dm(o){return o&&o.ngErrorLogger||lv}(a);h(this._console,"ERROR",a),u&&h(this._console,"ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Rr(a);for(;u&&Rr(u);)u=Rr(u);return u||null}}const uv=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(zt))();function Vs(o){return o instanceof Function?o():o}var A=(()=>((A=A||{})[A.Important=1]="Important",A[A.DashCase=2]="DashCase",A))();function K(o,a){return undefined(o,a)}function Xe(o){const a=o[3];return wr(a)?a[3]:a}function Hn(o){return Lu(o[13])}function Or(o){return Lu(o[4])}function Lu(o){for(;null!==o&&!wr(o);)o=o[4];return o}function ja(o,a,u,h,f){if(null!=h){let m,b=!1;wr(h)?m=h:Bi(h)&&(b=!0,h=h[0]);const C=rn(h);0===o&&null!==u?null==f?gv(a,u,C):Us(a,u,C,f||null,!0):1===o&&null!==u?Us(a,u,C,f||null,!0):2===o?function vv(o,a,u){const h=Rf(o,a);h&&function TA(o,a,u,h){gn(o)?o.removeChild(a,u,h):a.removeChild(u)}(o,h,a,u)}(a,C,b):3===o&&a.destroyNode(C),null!=m&&function yC(o,a,u,h,f){const m=u[7];m!==rn(u)&&ja(a,o,h,m,f);for(let C=10;C<u.length;C++){const D=u[C];vm(D[1],D,o,a,h,m)}}(a,o,m,u,f)}}function Kd(o,a,u){if(gn(o))return o.createElement(a,u);{const h=null!==u?function lu(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(u):null;return null===h?o.createElement(a):o.createElementNS(h,a)}}function uC(o,a){const u=o[9],h=u.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,wa(f,-1)),u.splice(h,1)}function hv(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const f=h[17];null!==f&&f!==o&&uC(f,h),a>0&&(o[u-1][4]=h[4]);const m=zo(o,10+a);!function ri(o,a){vm(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const b=m[19];null!==b&&b.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function fv(o,a){if(!(256&a[2])){const u=a[11];gn(u)&&u.destroyNode&&vm(o,a,u,3,null,null),function Qd(o){let a=o[13];if(!a)return pv(o[1],o);for(;a;){let u=null;if(Bi(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)Bi(a)&&pv(a[1],a),a=a[3];null===a&&(a=o),Bi(a)&&pv(a[1],a),u=a&&a[4]}a=u}}(a)}}function pv(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function hC(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof mc)){const m=u[h+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const C=f[m[b]],D=m[b+1];try{D.call(C)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function dC(o,a){const u=o.cleanup,h=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const b=u[m+1],C="function"==typeof b?b(a):rn(a[b]),D=h[f=u[m+2]],M=u[m+3];"boolean"==typeof M?C.removeEventListener(u[m],D,M):M>=0?h[f=M]():h[f=-M].unsubscribe(),m+=2}else{const b=h[f=u[m+1]];u[m].call(b)}if(null!==h){for(let m=f+1;m<h.length;m++)h[m]();a[7]=null}}(o,a),1===a[1].type&&gn(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&wr(a[3])){u!==a[3]&&uC(u,a);const h=a[19];null!==h&&h.detachView(o)}}}function _m(o,a,u){return function DA(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===Wt.None||f===Wt.Emulated)return null}return Ti(h,u)}(o,a.parent,u)}function Us(o,a,u,h,f){gn(o)?o.insertBefore(a,u,h,f):a.insertBefore(u,h,f)}function gv(o,a,u){gn(o)?o.appendChild(a,u):a.appendChild(u)}function fC(o,a,u,h,f){null!==h?Us(o,a,u,h,f):gv(o,a,u)}function Rf(o,a){return gn(o)?o.parentNode(a):a.parentNode}function pC(o,a,u){return mv(o,a,u)}let mv=function gC(o,a,u){return 40&o.type?Ti(o,u):null};function ym(o,a,u,h){const f=_m(o,h,a),m=a[11],C=pC(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let D=0;D<u.length;D++)fC(m,f,u[D],C,!1);else fC(m,f,u,C,!1)}function Jd(o,a){if(null!==a){const u=a.type;if(3&u)return Ti(a,o);if(4&u)return yv(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return Jd(o,h);{const f=o[a.index];return wr(f)?yv(-1,f):rn(f)}}if(32&u)return K(a,o)()||rn(o[a.index]);{const h=_C(o,a);return null!==h?Array.isArray(h)?h[0]:Jd(Xe(o[16]),h):Jd(o,a.next)}}return null}function _C(o,a){return null!==a?o[16][6].projection[a.projection]:null}function yv(o,a){const u=10+o+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return Jd(h,f)}return a[7]}function bv(o,a,u,h,f,m,b){for(;null!=u;){const C=h[u.index],D=u.type;if(b&&0===a&&(C&&Ai(rn(C),h),u.flags|=4),64!=(64&u.flags))if(8&D)bv(o,a,u.child,h,f,m,!1),ja(a,o,f,C,m);else if(32&D){const M=K(u,h);let R;for(;R=M();)ja(a,o,f,R,m);ja(a,o,f,C,m)}else 16&D?za(o,a,h,u,f,m):ja(a,o,f,C,m);u=b?u.projectionNext:u.next}}function vm(o,a,u,h,f,m){bv(u,h,o.firstChild,a,f,m,!1)}function za(o,a,u,h,f,m){const b=u[16],D=b[6].projection[h.projection];if(Array.isArray(D))for(let M=0;M<D.length;M++)ja(a,o,f,D[M],m);else bv(o,a,D,b[3],f,m,!0)}function bi(o,a,u){gn(o)?o.setAttribute(a,"style",u):a.style.cssText=u}function ea(o,a,u){gn(o)?""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u):a.className=u}function IA(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}u=f+1}}const vC="ng-template";function AA(o,a,u){let h=0;for(;h<o.length;){let f=o[h++];if(u&&"class"===f){if(f=o[h],-1!==IA(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function bC(o){return 4===o.type&&o.value!==vC}function wm(o,a,u){return a===(4!==o.type||u?o.value:vC)}function wC(o,a,u){let h=4;const f=o.attrs||[],m=function kf(o){for(let a=0;a<o.length;a++)if(gt(o[a]))return a;return o.length}(f);let b=!1;for(let C=0;C<a.length;C++){const D=a[C];if("number"!=typeof D){if(!b)if(4&h){if(h=2|1&h,""!==D&&!wm(o,D,u)||""===D&&1===a.length){if(ta(h))return!1;b=!0}}else{const M=8&h?D:a[++C];if(8&h&&null!==o.attrs){if(!AA(o.attrs,M,u)){if(ta(h))return!1;b=!0}continue}const V=MA(8&h?"class":D,f,bC(o),u);if(-1===V){if(ta(h))return!1;b=!0;continue}if(""!==M){let j;j=V>m?"":f[V+1].toLowerCase();const X=8&h?j:null;if(X&&-1!==IA(X,M,0)||2&h&&M!==j){if(ta(h))return!1;b=!0}}}}else{if(!b&&!ta(h)&&!ta(D))return!1;if(b&&ta(D))continue;b=!1,h=D|1&h}}return ta(h)||b}function ta(o){return 0==(1&o)}function MA(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let m=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)m=!0;else{if(1===b||2===b){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=m?1:2}return-1}return function xA(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function CC(o,a,u=!1){for(let h=0;h<a.length;h++)if(wC(o,a[h],u))return!0;return!1}function DC(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function TC(o,a){return o?":not("+a.trim()+")":a}function RA(o){let a=o[0],u=1,h=2,f="",m=!1;for(;u<o.length;){let b=o[u];if("string"==typeof b)if(2&h){const C=o[++u];f+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?f+="."+b:4&h&&(f+=" "+b);else""!==f&&!ta(b)&&(a+=TC(m,f),f=""),h=b,m=m||!ta(h);u++}return""!==f&&(a+=TC(m,f)),a}const kt={};function Of(o){wv(Lt(),xe(),di()+o,Sl())}function wv(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&Rl(a,m,u)}else{const m=o.preOrderHooks;null!==m&&Rs(a,m,0,u)}gs(u)}function Cv(o,a){return o<<17|a<<2}function na(o){return o>>17&32767}function Ev(o){return 2|o}function ql(o){return(131068&o)>>2}function Dv(o,a){return-131069&o|a<<2}function Bu(o){return 1|o}function VA(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],m=u[h+1];if(-1!==m){const b=o.data[m];Ml(f),b.contentQueries(2,a[m],m)}}}function Nc(o,a,u,h,f,m,b,C,D,M){const R=a.blueprint.slice();return R[0]=f,R[2]=140|h,fs(R),R[3]=R[15]=o,R[8]=u,R[10]=b||o&&o[10],R[11]=C||o&&o[11],R[12]=D||o&&o[12]||null,R[9]=M||o&&o[9]||null,R[6]=m,R[16]=2==a.type?o[16]:R,R}function Fc(o,a,u,h,f){let m=o.data[a];if(null===m)m=function VC(o,a,u,h,f){const m=Ea(),b=Tl(),D=o.data[a]=function Mm(o,a,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=D),null!==m&&(b?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(o,a,u,h,f),function gu(){return vt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const b=function Fo(){const o=vt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return Er(m,!0),m}function Bf(o,a,u,h){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function Im(o,a,u){Ta(a);try{const h=o.viewQuery;null!==h&&KC(1,h,u);const f=o.template;null!==f&&UA(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&VA(o,a),o.staticViewQueries&&KC(2,o.viewQuery,u);const m=o.components;null!==m&&function eF(o,a){for(let u=0;u<a.length;u++)fF(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Ia()}}function Vf(o,a,u,h){const f=a[2];if(256==(256&f))return;Ta(a);const m=Sl();try{fs(a),function Il(o){return vt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&UA(o,a,u,2,h);const b=3==(3&f);if(!m)if(b){const M=o.preOrderCheckHooks;null!==M&&Rl(a,M,null)}else{const M=o.preOrderHooks;null!==M&&Rs(a,M,0,null),Aa(a,0)}if(function YA(o){for(let a=Hn(o);null!==a;a=Or(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],m=f[3];0==(1024&f[2])&&wa(m,1),f[2]|=1024}}}(a),function dF(o){for(let a=Hn(o);null!==a;a=Or(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];Ms(h)&&Vf(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&VA(o,a),!m)if(b){const M=o.contentCheckHooks;null!==M&&Rl(a,M)}else{const M=o.contentHooks;null!==M&&Rs(a,M,1),Aa(a,1)}!function J1(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)gs(~f);else{const m=f,b=u[++h],C=u[++h];mu(b,m),C(2,a[m])}}}finally{gs(-1)}}(o,a);const C=o.components;null!==C&&function X1(o,a){for(let u=0;u<a.length;u++)hF(o,a[u])}(a,C);const D=o.viewQuery;if(null!==D&&KC(2,D,h),!m)if(b){const M=o.viewCheckHooks;null!==M&&Rl(a,M)}else{const M=o.viewHooks;null!==M&&Rs(a,M,2),Aa(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,wa(a[3],-1))}finally{Ia()}}function tF(o,a,u,h){const f=a[10],m=!Sl(),b=No(a);try{m&&!b&&f.begin&&f.begin(),b&&Im(o,a,h),Vf(o,a,u,h)}finally{m&&!b&&f.end&&f.end()}}function UA(o,a,u,h,f){const m=di(),b=2&h;try{gs(-1),b&&a.length>20&&wv(o,a,20,Sl()),u(h,f)}finally{gs(m)}}function Am(o,a,u){if(yl(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const b=o.data[m];b.contentQueries&&b.contentQueries(1,u[m],m)}}}function Lc(o,a,u){!Dl()||(function qA(o,a,u,h){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||cn(u,a),Ai(h,a);const b=u.initialInputs;for(let C=f;C<m;C++){const D=o.data[C],M=cs(D);M&&qC(a,u,D);const R=mo(a,o,C,u);Ai(R,a),null!==b&&xv(0,C-f,R,D,0,b),M&&(Si(u.index,a)[8]=R)}}(o,a,u,Ti(u,a)),128==(128&u.flags)&&function aF(o,a,u){const h=u.directiveStart,f=u.directiveEnd,b=u.index,C=function gc(){return vt.lFrame.currentDirectiveIndex}();try{gs(b);for(let D=h;D<f;D++){const M=o.data[D],R=a[D];Al(D),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&WA(M,R)}}finally{gs(-1),Al(C)}}(o,a,u))}function th(o,a,u=Ti){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const b=h[m+1],C=-1===b?u(a,o):o[b];o[f++]=C}}}function UC(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Gu(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Gu(o,a,u,h,f,m,b,C,D,M){const R=20+h,V=R+f,j=function nF(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:kt);return u}(R,V),X="function"==typeof M?M():M;return j[1]={type:o,blueprint:j,template:u,queries:null,viewQuery:C,declTNode:a,data:j.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:D,consts:X,incompleteFirstPass:!1}}function jA(o,a,u,h){const f=JA(a);null===u?f.push(h):(f.push(u),o.firstCreatePass&&XA(o).push(h,f.length-1))}function GA(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function si(o,a,u,h,f,m,b,C){const D=Ti(a,u);let R,M=a.inputs;!C&&null!=M&&(R=M[h])?(nM(o,u,R,h,f),_d(a)&&function jC(o,a){const u=Si(a,o);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(h=function iF(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=b?b(f,a.value||"",h):f,gn(m)?m.setProperty(D,h,f):fi(h)||(D.setProperty?D.setProperty(h,f):D[h]=f))}function Uf(o,a,u,h){let f=!1;if(Dl()){const m=function Mv(o,a,u){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const b=h[m];CC(u,b.selectors,!1)&&(f||(f=[]),Ii(cn(u,a),o,b.type),cs(b)?(xm(o,u),f.unshift(b)):f.push(b))}return f}(o,a,u),b=null===h?null:{"":-1};if(null!==m){f=!0,zC(u,o.data.length,m.length);for(let R=0;R<m.length;R++){const V=m[R];V.providersResolver&&V.providersResolver(V)}let C=!1,D=!1,M=Bf(o,a,m.length,null);for(let R=0;R<m.length;R++){const V=m[R];u.mergedAttrs=sn(u.mergedAttrs,V.hostAttrs),$C(o,u,a,M,V),cF(M,V,b),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const j=V.type.prototype;!C&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!D&&(j.ngOnChanges||j.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),D=!0),M++}!function Av(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,b=[];let C=null,D=null;for(let M=a.directiveStart;M<h;M++){const R=f[M],V=R.inputs,j=null===m||bC(a)?null:uF(V,m);b.push(j),C=GA(V,M,C),D=GA(R.outputs,M,D)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=C,a.outputs=D}(o,u)}b&&function lF(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new Ne(-301,!1);h.push(a[f],m)}}}(u,h,b)}return u.mergedAttrs=sn(u.mergedAttrs,u.attrs),f}function GC(o,a,u,h,f,m){const b=m.hostBindings;if(b){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const D=~a.index;(function $A(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(h,f,b)}}function WA(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function xm(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function cF(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;cs(a)&&(u[""]=o)}}function zC(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function $C(o,a,u,h,f){o.data[h]=f;const m=f.factory||(f.factory=Ui(f.type)),b=new mc(m,cs(f),null);o.blueprint[h]=b,u[h]=b,GC(o,a,0,h,Bf(o,u,f.hostVars,kt),f)}function qC(o,a,u){const h=Ti(a,o),f=UC(u),m=o[10],b=Rv(o,Nc(o,f,null,u.onPush?64:16,h,a,m,m.createRenderer(h,u),null,null));o[a.index]=b}function wo(o,a,u,h,f,m){const b=Ti(o,a);!function Rm(o,a,u,h,f,m,b){if(null==m)gn(o)?o.removeAttribute(a,f,u):a.removeAttribute(f);else{const C=null==b?pe(m):b(m,h||"",f);gn(o)?o.setAttribute(a,f,C,u):u?a.setAttributeNS(u,f,C):a.setAttribute(f,C)}}(a[11],b,m,o.value,u,h,f)}function xv(o,a,u,h,f,m){const b=m[a];if(null!==b){const C=h.setInput;for(let D=0;D<b.length;){const M=b[D++],R=b[D++],V=b[D++];null!==C?h.setInput(u,V,M,R):u[R]=V}}}function uF(o,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function ZA(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function hF(o,a){const u=Si(a,o);if(Ms(u)){const h=u[1];80&u[2]?Vf(h,u,h.template,u[8]):u[5]>0&&WC(u)}}function WC(o){for(let h=Hn(o);null!==h;h=Or(h))for(let f=10;f<h.length;f++){const m=h[f];if(1024&m[2]){const b=m[1];Vf(b,m,b.template,m[8])}else m[5]>0&&WC(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=Si(u[h],o);Ms(f)&&f[5]>0&&WC(f)}}function fF(o,a){const u=Si(a,o),h=u[1];(function pF(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),Im(h,u,u[8])}function Rv(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function ZC(o){for(;o;){o[2]|=64;const a=Xe(o);if(su(o)&&!a)return o;o=a}return null}function kv(o,a,u){const h=a[10];h.begin&&h.begin();try{Vf(o,a,o.template,u)}catch(f){throw tM(a,f),f}finally{h.end&&h.end()}}function KA(o){!function YC(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],h=qd(u),f=h[1];tF(f,h,f.template,u)}}(o[8])}function KC(o,a,u){Ml(0),a(o,u)}const yF=(()=>Promise.resolve(null))();function JA(o){return o[7]||(o[7]=[])}function XA(o){return o.cleanup||(o.cleanup=[])}function eM(o,a,u){return(null===o||cs(o))&&(u=function wl(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[a.index])),u[11]}function tM(o,a){const u=o[9],h=u?u.get(Wd,null):null;h&&h.handleError(a)}function nM(o,a,u,h,f){for(let m=0;m<u.length;){const b=u[m++],C=u[m++],D=a[b],M=o.data[b];null!==M.setInput?M.setInput(D,f,h,C):D[C]=f}}function Bc(o,a,u){const h=uo(a,o);!function Yd(o,a,u){gn(o)?o.setValue(a,u):a.textContent=u}(o[11],h,u)}function Ov(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let b=0;b<a.length;b++){const C=a[b];"number"==typeof C?m=C:1==m?f=he(f,C):2==m&&(h=he(h,C+": "+a[++b]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}const QC=new Rn("INJECTOR",-1);class iM{get(a,u=La){if(u===La){const h=new Error(`NullInjectorError: No provider for ${ce(a)}!`);throw h.name="NullInjectorError",h}return u}}const JC=new Rn("Set Injector scope."),km={},wF={};let XC;function rM(){return void 0===XC&&(XC=new iM),XC}function sM(o,a=null,u=null,h){const f=oM(o,a,u,h);return f._resolveInjectorDefTypes(),f}function oM(o,a=null,u=null,h){return new CF(o,u,a||rM(),h)}class CF{constructor(a,u,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&fr(u,C=>this.processProvider(C,a,u)),fr([a],C=>this.processInjectorType(C,[],m)),this.records.set(QC,nh(void 0,this));const b=this.records.get(JC);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:ce(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=La,h=bt.Default){this.assertNotDestroyed();const f=se(this),m=zn(void 0);try{if(!(h&bt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const D=function xF(o){return"function"==typeof o||"object"==typeof o&&o instanceof Rn}(a)&&Ht(a);C=D&&this.injectableDefInScope(D)?nh(eE(a),km):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&bt.Self?rM():this.parent).get(a,u=h&bt.Optional&&u===La?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[Wo]=b[Wo]||[]).unshift(ce(a)),f)throw b;return function vi(o,a,u,h){const f=o[Wo];throw a[k]&&f.unshift(a[k]),o.message=function Ns(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=ce(a);if(Array.isArray(a))f=a.map(ce).join(" -> ");else if("object"==typeof a){let m=[];for(let b in a)if(a.hasOwnProperty(b)){let C=a[b];m.push(b+":"+("string"==typeof C?JSON.stringify(C):ce(C)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(S,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[Wo]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{zn(m),se(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,f)=>a.push(ce(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(a,u,h){if(!(a=re(a)))return!1;let f=Zi(a);const m=null==f&&a.ngModule||void 0,b=void 0===m?a:m,C=-1!==h.indexOf(b);if(void 0!==m&&(f=Zi(m)),null==f)return!1;if(null!=f.imports&&!C){let R;h.push(b);try{fr(f.imports,V=>{this.processInjectorType(V,u,h)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:j,providers:X}=R[V];fr(X,we=>this.processProvider(we,j,X||H))}}this.injectorDefTypes.add(b);const D=Ui(b)||(()=>new b);this.records.set(b,nh(D,km));const M=f.providers;if(null!=M&&!C){const R=a;fr(M,V=>this.processProvider(V,R,M))}return void 0!==m&&void 0!==a.providers}processProvider(a,u,h){let f=Hf(a=re(a))?a:re(a&&a.provide);const m=function DF(o,a,u){return aM(o)?nh(void 0,o.useValue):nh(tE(o),km)}(a);if(Hf(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=nh(void 0,km,!0),b.factory=()=>$t(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,m)}hydrate(a,u){return u.value===km&&(u.value=wF,u.value=u.factory()),"object"==typeof u.value&&u.value&&function MF(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=re(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function eE(o){const a=Ht(o),u=null!==a?a.factory:Ui(o);if(null!==u)return u;if(o instanceof Rn)throw new Ne(204,!1);if(o instanceof Function)return function EF(o){const a=o.length;if(a>0)throw $o(a,"?"),new Ne(204,!1);const u=function _r(o){const a=o&&(o[rs]||o[or]);if(a){const u=function Pi(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ne(204,!1)}function tE(o,a,u){let h;if(Hf(o)){const f=re(o);return Ui(f)||eE(f)}if(aM(o))h=()=>re(o.useValue);else if(function SF(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...$t(o.deps||[]));else if(function TF(o){return!(!o||!o.useExisting)}(o))h=()=>Ue(re(o.useExisting));else{const f=re(o&&(o.useClass||o.provide));if(!function AF(o){return!!o.deps}(o))return Ui(f)||eE(f);h=()=>new f(...$t(o.deps))}return h}function nh(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function aM(o){return null!==o&&"object"==typeof o&&U in o}function Hf(o){return"function"==typeof o}let $a=(()=>{class o{static create(u,h){var f;if(Array.isArray(u))return sM({name:""},h,u,"");{const m=null!==(f=u.name)&&void 0!==f?f:"";return sM({name:m},u.parent,u.providers,m)}}}return o.THROW_IF_NOT_FOUND=La,o.NULL=new iM,o.\u0275prov=tn({token:o,providedIn:"any",factory:()=>Ue(QC)}),o.__NG_ELEMENT_ID__=-1,o})();function BF(o,a){Rd(qd(o)[1],Sn())}function rE(o){let a=function vM(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(cs(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ne(903,"");f=a.\u0275dir}if(f){if(u){h.push(f);const b=o;b.inputs=sE(o.inputs),b.declaredInputs=sE(o.declaredInputs),b.outputs=sE(o.outputs);const C=f.hostBindings;C&&jF(o,C);const D=f.viewQuery,M=f.contentQueries;if(D&&UF(o,D),M&&HF(o,M),ne(o.inputs,f.inputs),ne(o.declaredInputs,f.declaredInputs),ne(o.outputs,f.outputs),cs(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let b=0;b<m.length;b++){const C=m[b];C&&C.ngInherit&&C(o),C===rE&&(u=!1)}}a=Object.getPrototypeOf(a)}!function VF(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=sn(f.hostAttrs,u=sn(u,f.hostAttrs))}}(h)}function sE(o){return o===Li?{}:o===H?[]:o}function UF(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function HF(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,m)=>{a(h,f,m),u(h,f,m)}:a}function jF(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let Pv=null;function jf(){if(!Pv){const o=zt.Symbol;if(o&&o.iterator)Pv=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Pv=h)}}}return Pv}function Om(o){return!!Wl(o)&&(Array.isArray(o)||!(o instanceof Map)&&jf()in o)}function Wl(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function ia(o,a,u){return o[a]=u}function qr(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function Pm(o,a,u,h){const f=xe();return qr(f,ho(),a)&&(Lt(),wo(Un(),f,o,a,u,h)),Pm}function rh(o,a,u,h){return qr(o,ho(),u)?a+pe(u)+h:kt}function Vv(o,a,u,h,f,m,b,C){const D=xe(),M=Lt(),R=o+20,V=M.firstCreatePass?function wM(o,a,u,h,f,m,b,C,D){const M=a.consts,R=Fc(a,o,4,b||null,Gr(M,C));Uf(a,u,R,Gr(M,D)),Rd(a,R);const V=R.tViews=Gu(2,R,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,R),V.queries=a.queries.embeddedTView(R)),R}(R,M,D,a,u,h,f,m,b):M.data[R];Er(V,!1);const j=D[11].createComment("");ym(M,D,j,V),Ai(j,D),Rv(D,D[R]=ZA(j,D,j,V)),ls(V)&&Lc(M,D,V),null!=b&&th(D,V,C)}function cE(o){return hs(function hc(){return vt.lFrame.contextLView}(),20+o)}function ch(o,a=bt.Default){const u=xe();return null===u?Ue(o,a):go(Sn(),u,re(o),a)}function Yv(){throw new Error("invalid")}function Kv(o,a,u){const h=xe();return qr(h,ho(),a)&&si(Lt(),Un(),h,o,a,h[11],u,!1),Kv}function Qv(o,a,u,h,f){const b=f?"class":"style";nM(o,u,a.inputs[b],b,h)}function Lm(o,a,u,h){const f=xe(),m=Lt(),b=20+o,C=f[11],D=f[b]=Kd(C,a,function xd(){return vt.lFrame.currentNamespace}()),M=m.firstCreatePass?function OM(o,a,u,h,f,m,b){const C=a.consts,M=Fc(a,o,2,f,Gr(C,m));return Uf(a,u,M,Gr(C,b)),null!==M.attrs&&Ov(M,M.attrs,!1),null!==M.mergedAttrs&&Ov(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(b,m,f,0,a,u,h):m.data[b];Er(M,!0);const R=M.mergedAttrs;null!==R&&Ze(C,D,R);const V=M.classes;null!==V&&ea(C,D,V);const j=M.styles;return null!==j&&bi(C,D,j),64!=(64&M.flags)&&ym(m,f,D,M),0===function uc(){return vt.lFrame.elementDepthCount}()&&Ai(D,f),function El(){vt.lFrame.elementDepthCount++}(),ls(M)&&(Lc(m,f,M),Am(m,M,f)),null!==h&&th(f,M),Lm}function Bm(){let o=Sn();Tl()?pu():(o=o.parent,Er(o,!1));const a=o;!function du(){vt.lFrame.elementDepthCount--}();const u=Lt();return u.firstCreatePass&&(Rd(u,o),yl(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function vu(o){return 0!=(16&o.flags)}(a)&&Qv(u,a,xe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Ug(o){return 0!=(32&o.flags)}(a)&&Qv(u,a,xe(),a.stylesWithoutHost,!1),Bm}function wE(o,a,u,h){return Lm(o,a,u,h),Bm(),wE}function Jv(o,a,u){const h=xe(),f=Lt(),m=o+20,b=f.firstCreatePass?function eL(o,a,u,h,f){const m=a.consts,b=Gr(m,h),C=Fc(a,o,8,"ng-container",b);return null!==b&&Ov(C,b,!0),Uf(a,u,C,Gr(m,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(m,f,h,a,u):f.data[m];Er(b,!0);const C=h[m]=h[11].createComment("");return ym(f,h,C,b),Ai(C,h),ls(b)&&(Lc(f,h,b),Am(f,b,h)),null!=u&&th(h,b),Jv}function Xv(){let o=Sn();const a=Lt();return Tl()?pu():(o=o.parent,Er(o,!1)),a.firstCreatePass&&(Rd(a,o),yl(o)&&a.queries.elementEnd(o)),Xv}function CE(o,a,u){return Jv(o,a,u),Xv(),CE}function eb(){return xe()}function Vm(o){return!!o&&"function"==typeof o.then}function EE(o){return!!o&&"function"==typeof o.subscribe}const DE=EE;function Um(o,a,u,h){const f=xe(),m=Lt(),b=Sn();return TE(m,f,f[11],b,o,a,!!u,h),Um}function Uc(o,a){const u=Sn(),h=xe(),f=Lt();return TE(f,h,eM(Da(f.data),u,h),u,o,a,!1),Uc}function TE(o,a,u,h,f,m,b,C){const D=ls(h),R=o.firstCreatePass&&XA(o),V=a[8],j=JA(a);let X=!0;if(3&h.type||C){const qe=Ti(h,a),at=C?C(qe):qe,Se=j.length,st=C?Yt=>C(rn(Yt[h.index])):h.index;if(gn(u)){let Yt=null;if(!C&&D&&(Yt=function PM(o,a,u,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const b=f[m];if(b===u&&f[m+1]===h){const C=a[7],D=f[m+2];return C.length>D?C[D]:null}"string"==typeof b&&(m+=2)}return null}(o,a,f,h.index)),null!==Yt)(Yt.__ngLastListenerFn__||Yt).__ngNextListenerFn__=m,Yt.__ngLastListenerFn__=m,X=!1;else{m=tb(h,a,V,m,!1);const on=u.listen(at,f,m);j.push(m,on),R&&R.push(f,st,Se,Se+1)}}else m=tb(h,a,V,m,!0),at.addEventListener(f,m,b),j.push(m),R&&R.push(f,st,Se,b)}else m=tb(h,a,V,m,!1);const we=h.outputs;let ke;if(X&&null!==we&&(ke=we[f])){const qe=ke.length;if(qe)for(let at=0;at<qe;at+=2){const zs=a[ke[at]][ke[at+1]].subscribe(m),Zr=j.length;j.push(m,zs),R&&R.push(f,h.index,Zr,-(Zr+1))}}}function SE(o,a,u,h){try{return!1!==u(h)}catch(f){return tM(o,f),!1}}function tb(o,a,u,h,f){return function m(b){if(b===Function)return h;const C=2&o.flags?Si(o.index,a):a;0==(32&a[2])&&ZC(C);let D=SE(a,0,h,b),M=m.__ngNextListenerFn__;for(;M;)D=SE(a,0,M,b)&&D,M=M.__ngNextListenerFn__;return f&&!1===D&&(b.preventDefault(),b.returnValue=!1),D}}function Hm(o=1){return function ps(o){return(vt.lFrame.contextLView=function af(o,a){for(;o>0;)a=a[15],o--;return a}(o,vt.lFrame.contextLView))[8]}(o)}function tL(o,a){let u=null;const h=function EC(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?CC(o,m,!0):DC(h,m))return f}else u=f}return u}function IE(o){const a=xe()[16][6];if(!a.projection){const h=a.projection=$o(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const b=o?tL(m,o):0;null!==b&&(f[b]?f[b].projectionNext=m:h[b]=m,f[b]=m),m=m.next}}}function Kf(o,a=0,u){const h=xe(),f=Lt(),m=Fc(f,20+o,16,null,u||null);null===m.projection&&(m.projection=a),pu(),64!=(64&m.flags)&&function un(o,a,u){za(a[11],0,a,u,_m(o,u,a),pC(u.parent||a[6],u,a))}(f,h,m)}function nb(o,a,u,h,f){const m=xe(),b=rh(m,a,u,h);return b!==kt&&si(Lt(),Un(),m,o,b,m[11],f,!1),nb}function ab(o,a,u,h,f){const m=o[u+1],b=null===a;let C=h?na(m):ql(m),D=!1;for(;0!==C&&(!1===D||b);){const R=o[C+1];Bt(o[C],a)&&(D=!0,o[C+1]=h?Bu(R):Ev(R)),C=h?na(R):ql(R)}D&&(o[u+1]=h?Ev(m):Bu(m))}function Bt(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&yo(o,a)>=0}const jt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function dh(o){return o.substring(jt.key,jt.keyEnd)}function Qf(o,a){const u=jt.textEnd;return u===a?-1:(a=jt.keyEnd=function Xf(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,jt.key=a,u),qu(o,a,u))}function qu(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function lb(o,a,u){return sa(o,a,u,!1),lb}function cb(o,a){return sa(o,a,null,!0),cb}function Ka(o,a){for(let u=function nL(o){return function NM(o){jt.key=0,jt.keyEnd=0,jt.value=0,jt.valueEnd=0,jt.textEnd=o.length}(o),Qf(o,qu(o,0,jt.textEnd))}(a);u>=0;u=Qf(a,u))_i(o,dh(a),!0)}function sa(o,a,u,h){const f=xe(),m=Lt(),b=zr(2);m.firstUpdatePass&&OE(m,o,b,h),a!==kt&&qr(f,b,a)&&NE(m,m.data[di()],f,f[11],o,f[b+1]=function zM(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ce(Jo(o)))),o}(a,u),h,b)}function kE(o,a){return a>=o.expandoStartIndex}function OE(o,a,u,h){const f=o.data;if(null===f[u+1]){const m=f[di()],b=kE(o,u);LE(m,h)&&null===a&&!b&&(a=!1),a=function rL(o,a,u,h){const f=Da(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=tp(u=ub(null,o,a,u,h),a.attrs,h),m=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(u=ub(f,o,a,u,h),null===m){let D=function VM(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==ql(h))return o[na(h)]}(o,a,h);void 0!==D&&Array.isArray(D)&&(D=ub(null,o,a,D[1],h),D=tp(D,a.attrs,h),function UM(o,a,u,h){o[na(u?a.classBindings:a.styleBindings)]=h}(o,a,h,D))}else m=function HM(o,a,u){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=tp(h,o[m].hostAttrs,u);return tp(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,h),function Xi(o,a,u,h,f,m){let b=m?a.classBindings:a.styleBindings,C=na(b),D=ql(b);o[h]=u;let R,M=!1;if(Array.isArray(u)){const V=u;R=V[1],(null===R||yo(V,R)>0)&&(M=!0)}else R=u;if(f)if(0!==D){const j=na(o[C+1]);o[h+1]=Cv(j,C),0!==j&&(o[j+1]=Dv(o[j+1],h)),o[C+1]=function Cm(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=Cv(C,0),0!==C&&(o[C+1]=Dv(o[C+1],h)),C=h;else o[h+1]=Cv(D,0),0===C?C=h:o[D+1]=Dv(o[D+1],h),D=h;M&&(o[h+1]=Ev(o[h+1])),ab(o,R,h,!0),ab(o,R,h,!1),function xE(o,a,u,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&yo(m,a)>=0&&(u[h+1]=Bu(u[h+1]))}(a,R,o,h,m),b=Cv(C,D),m?a.classBindings=b:a.styleBindings=b}(f,m,a,u,b,h)}}function ub(o,a,u,h,f){let m=null;const b=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<b&&(m=a[C],h=tp(h,m.hostAttrs,f),m!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function tp(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const b=a[m];"number"==typeof b?f=b:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),_i(o,b,!!u||a[++m]))}return void 0===o?null:o}function NE(o,a,u,h,f,m,b,C){if(!(3&a.type))return;const D=o.data,M=D[C+1];zm(function OA(o){return 1==(1&o)}(M)?FE(D,a,u,f,ql(M),b):void 0)||(zm(m)||function IC(o){return 2==(2&o)}(M)&&(m=FE(D,null,u,f,C,b)),function bm(o,a,u,h,f){const m=gn(o);if(a)f?m?o.addClass(u,h):u.classList.add(h):m?o.removeClass(u,h):u.classList.remove(h);else{let b=-1===h.indexOf("-")?void 0:A.DashCase;if(null==f)m?o.removeStyle(u,h,b):u.style.removeProperty(h);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),b|=A.Important),m?o.setStyle(u,h,f,b):u.style.setProperty(h,f,C?"important":"")}}}(h,b,uo(di(),u),f,m))}function FE(o,a,u,h,f,m){const b=null===a;let C;for(;f>0;){const D=o[f],M=Array.isArray(D),R=M?D[1]:D,V=null===R;let j=u[f+1];j===kt&&(j=V?H:void 0);let X=V?Fl(j,h):R===h?j:void 0;if(M&&!zm(X)&&(X=Fl(D,h)),zm(X)&&(C=X,b))return C;const we=o[f+1];f=b?na(we):ql(we)}if(null!==a){let D=m?a.residualClasses:a.residualStyles;null!=D&&(C=Fl(D,h))}return C}function zm(o){return void 0!==o}function LE(o,a){return 0!=(o.flags&(a?16:32))}function BE(o,a=""){const u=xe(),h=Lt(),f=o+20,m=h.firstCreatePass?Fc(h,f,1,a,null):h.data[f],b=u[f]=function Zd(o,a){return gn(o)?o.createText(a):o.createTextNode(a)}(u[11],a);ym(h,u,b,m),Er(m,!1)}function db(o){return $m("",o,""),db}function $m(o,a,u){const h=xe(),f=rh(h,o,a,u);return f!==kt&&Bc(h,di(),f),$m}function qE(o,a,u){!function oa(o,a,u,h){const f=Lt(),m=zr(2);f.firstUpdatePass&&OE(f,null,m,h);const b=xe();if(u!==kt&&qr(b,m,u)){const C=f.data[di()];if(LE(C,h)&&!kE(f,m)){let D=h?C.classesWithoutHost:C.stylesWithoutHost;null!==D&&(u=he(D,u||"")),Qv(f,C,b,u,h)}else!function GM(o,a,u,h,f,m,b,C){f===kt&&(f=H);let D=0,M=0,R=0<f.length?f[0]:null,V=0<m.length?m[0]:null;for(;null!==R||null!==V;){const j=D<f.length?f[D+1]:void 0,X=M<m.length?m[M+1]:void 0;let ke,we=null;R===V?(D+=2,M+=2,j!==X&&(we=V,ke=X)):null===V||null!==R&&R<V?(D+=2,we=R):(M+=2,we=V,ke=X),null!==we&&NE(o,a,u,h,we,ke,b,C),R=D<f.length?f[D]:null,V=M<m.length?m[M]:null}}(f,C,b,b[11],b[m+1],b[m+1]=function jM(o,a,u){if(null==u||""===u)return H;const h=[],f=Jo(u);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(h,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(h,m,f[m]);else"string"==typeof f&&a(h,f);return h}(o,a,u),h,m)}}(_i,Ka,rh(xe(),o,a,u),!0)}function np(o,a,u){const h=xe();return qr(h,ho(),a)&&si(Lt(),Un(),h,o,a,h[11],u,!0),np}function hh(o,a,u){const h=xe();if(qr(h,ho(),a)){const m=Lt(),b=Un();si(m,b,h,o,a,eM(Da(m.data),b,h),u,!0)}return hh}const Qa=void 0;var nD=["en",[["a","p"],["AM","PM"],Qa],[["AM","PM"],Qa,Qa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qa,"{1} 'at' {0}",Qa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Wm(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let jc={};function ip(o){const a=function rD(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=Zu(a);if(u)return u;const h=a.split("-")[0];if(u=Zu(h),u)return u;if("en"===h)return nD;throw new Error(`Missing locale data for the locale "${o}".`)}function iD(o){return ip(o)[ft.PluralCase]}function Zu(o){return o in jc||(jc[o]=zt.ng&&zt.ng.common&&zt.ng.common.locales&&zt.ng.common.locales[o]),jc[o]}var ft=(()=>((ft=ft||{})[ft.LocaleId=0]="LocaleId",ft[ft.DayPeriodsFormat=1]="DayPeriodsFormat",ft[ft.DayPeriodsStandalone=2]="DayPeriodsStandalone",ft[ft.DaysFormat=3]="DaysFormat",ft[ft.DaysStandalone=4]="DaysStandalone",ft[ft.MonthsFormat=5]="MonthsFormat",ft[ft.MonthsStandalone=6]="MonthsStandalone",ft[ft.Eras=7]="Eras",ft[ft.FirstDayOfWeek=8]="FirstDayOfWeek",ft[ft.WeekendRange=9]="WeekendRange",ft[ft.DateFormat=10]="DateFormat",ft[ft.TimeFormat=11]="TimeFormat",ft[ft.DateTimeFormat=12]="DateTimeFormat",ft[ft.NumberSymbols=13]="NumberSymbols",ft[ft.NumberFormats=14]="NumberFormats",ft[ft.CurrencyCode=15]="CurrencyCode",ft[ft.CurrencySymbol=16]="CurrencySymbol",ft[ft.CurrencyName=17]="CurrencyName",ft[ft.Currencies=18]="Currencies",ft[ft.Directionality=19]="Directionality",ft[ft.PluralCase=20]="PluralCase",ft[ft.ExtraData=21]="ExtraData",ft))();const Xa="en-US";let sp=Xa;function Ob(o,a,u,h,f){if(o=re(o),Array.isArray(o))for(let m=0;m<o.length;m++)Ob(o[m],a,u,h,f);else{const m=Lt(),b=xe();let C=Hf(o)?o:re(o.provide),D=tE(o);const M=Sn(),R=1048575&M.providerIndexes,V=M.directiveStart,j=M.providerIndexes>>20;if(Hf(o)||!o.multi){const X=new mc(D,f,ch),we=Nb(C,a,f?R:R+j,V);-1===we?(Ii(cn(M,b),m,C),Pb(m,o,a.length),a.push(C),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),u.push(X),b.push(X)):(u[we]=X,b[we]=X)}else{const X=Nb(C,a,R+j,V),we=Nb(C,a,R,R+j),ke=X>=0&&u[X],qe=we>=0&&u[we];if(f&&!qe||!f&&!ke){Ii(cn(M,b),m,C);const at=function Co(o,a,u,h,f){const m=new mc(o,u,ch);return m.multi=[],m.index=a,m.componentProviders=0,hp(m,f,h&&!u),m}(f?xD:MD,u.length,f,h,D);!f&&qe&&(u[we].providerFactory=at),Pb(m,o,a.length,0),a.push(C),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),u.push(at),b.push(at)}else Pb(m,o,X>-1?X:we,hp(u[f?we:X],D,!f&&h));!f&&h&&qe&&u[we].componentProviders++}}}function Pb(o,a,u,h){const f=Hf(a),m=function IF(o){return!!o.useClass}(a);if(f||m){const D=(m?re(a.useClass):a).prototype.ngOnDestroy;if(D){const M=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=M.indexOf(u);-1===R?M.push(u,[h,D]):M[R+1].push(h,D)}else M.push(u,D)}}}function hp(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function Nb(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function MD(o,a,u,h){return i_(this.multi,[])}function xD(o,a,u,h){const f=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=mo(u,u[1],this.providerFactory.index,h);m=C.slice(0,b),i_(f,m);for(let D=b;D<C.length;D++)m.push(C[D])}else m=[],i_(f,m);return m}function i_(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Ku(o,a=[]){return u=>{u.providersResolver=(h,f)=>function kb(o,a,u){const h=Lt();if(h.firstCreatePass){const f=cs(o);Ob(u,h.data,h.blueprint,f,!0),Ob(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class RD{}class r_{resolveComponentFactory(a){throw function kD(o){const a=Error(`No component factory found for ${ce(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let s_=(()=>{class o{}return o.NULL=new r_,o})();function Cx(){return $c(Sn(),xe())}function $c(o,a){return new fp(Ti(o,a))}let fp=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=Cx,o})();function PD(o){return o instanceof fp?o.nativeElement:o}class ND{}let Ex=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function FD(){const o=xe(),u=Si(Sn().index,o);return function Dx(o){return o[11]}(Bi(u)?u:o)}(),o})(),o_=(()=>{class o{}return o.\u0275prov=tn({token:o,providedIn:"root",factory:()=>null}),o})();class Fb{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const LD=new Fb("13.2.7"),a_={};function l_(o,a,u,h,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(rn(m)),wr(m))for(let C=10;C<m.length;C++){const D=m[C],M=D[1].firstChild;null!==M&&l_(D[1],D,M,h)}const b=u.type;if(8&b)l_(o,a,u.child,h);else if(32&b){const C=K(u,a);let D;for(;D=C();)h.push(D)}else if(16&b){const C=_C(a,u);if(Array.isArray(C))h.push(...C);else{const D=Xe(a[16]);l_(D[1],D,C,h,!0)}}u=f?u.projectionNext:u.next}return h}class pp{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return l_(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(wr(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(hv(a,h),zo(u,h))}this._attachedToViewContainer=!1}fv(this._lView[1],this._lView)}onDestroy(a){jA(this._lView[1],this._lView,null,a)}markForCheck(){ZC(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){kv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function mF(o,a,u){fc(!0);try{kv(o,a,u)}finally{fc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xf(o,a){vm(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=a}}class Tx extends pp{constructor(a){super(a),this._view=a}detectChanges(){KA(this._view)}checkNoChanges(){!function _F(o){fc(!0);try{KA(o)}finally{fc(!1)}}(this._view)}get context(){return null}}class BD extends s_{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=ni(a);return new c_(u,this.ngModule)}}function VD(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class c_ extends RD{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function G1(o){return o.map(RA).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return VD(this.componentDef.inputs)}get outputs(){return VD(this.componentDef.outputs)}create(a,u,h,f){const m=(f=f||this.ngModule)?function el(o,a){return{get:(u,h,f)=>{const m=o.get(u,a_,f);return m!==a_||h===a_?m:a.get(u,h,f)}}}(a,f.injector):a,b=m.get(ND,bl),C=m.get(o_,null),D=b.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",R=h?function HA(o,a,u){if(gn(o))return o.selectRootElement(a,u===Wt.ShadowDom);let h="string"==typeof a?o.querySelector(a):a;return h.textContent="",h}(D,h,this.componentDef.encapsulation):Kd(b.createRenderer(null,this.componentDef),M,function Sx(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(M)),V=this.componentDef.onPush?576:528,j=function yM(o,a){return{components:[],scheduler:o||uv,clean:yF,playerHandler:a||null,flags:0}}(),X=Gu(0,null,null,1,0,null,null,null,null,null),we=Nc(null,X,j,V,null,null,b,D,C,m);let ke,qe;Ta(we);try{const at=function mM(o,a,u,h,f,m){const b=u[1];u[20]=o;const D=Fc(b,20,2,"#host",null),M=D.mergedAttrs=a.hostAttrs;null!==M&&(Ov(D,M,!0),null!==o&&(Ze(f,o,M),null!==D.classes&&ea(f,o,D.classes),null!==D.styles&&bi(f,o,D.styles)));const R=h.createRenderer(o,a),V=Nc(u,UC(a),null,a.onPush?64:16,u[20],D,h,R,m||null,null);return b.firstCreatePass&&(Ii(cn(D,u),b,a.type),xm(b,D),zC(D,u.length,1)),Rv(u,V),u[20]=V}(R,this.componentDef,we,b,D);if(R)if(h)Ze(D,R,["ng-version",LD.full]);else{const{attrs:Se,classes:st}=function kA(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&u.push(m);else{if(!ta(f))break;f=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Se&&Ze(D,R,Se),st&&st.length>0&&ea(D,R,st.join(" "))}if(qe=kn(X,20),void 0!==u){const Se=qe.projection=[];for(let st=0;st<this.ngContentSelectors.length;st++){const Yt=u[st];Se.push(null!=Yt?Array.from(Yt):null)}}ke=function _M(o,a,u,h,f){const m=u[1],b=function oF(o,a,u){const h=Sn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),$C(o,h,a,Bf(o,a,1,null),u));const f=mo(a,o,h.directiveStart,h);Ai(f,a);const m=Ti(h,a);return m&&Ai(m,a),f}(m,u,a);if(h.components.push(b),o[8]=b,f&&f.forEach(D=>D(b,a)),a.contentQueries){const D=Sn();a.contentQueries(1,b,D.directiveStart)}const C=Sn();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(gs(C.index),GC(u[1],C,0,C.directiveStart,C.directiveEnd,a),WA(a,b)),b}(at,this.componentDef,we,j,[BF]),Im(X,we,null)}finally{Ia()}return new Ix(this.componentType,ke,$c(qe,we),we,qe)}}class Ix extends class bx{}{constructor(a,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new Tx(f),this.componentType=a}get injector(){return new Ho(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class gp{}class Ax{}const _h=new Map;class zD extends gp{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new BD(this);const h=ii(a);this._bootstrapComponents=Vs(h.bootstrap),this._r3Injector=oM(a,u,[{provide:gp,useValue:this},{provide:s_,useValue:this.componentFactoryResolver}],ce(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=$a.THROW_IF_NOT_FOUND,h=bt.Default){return a===$a||a===gp||a===QC?this:this._r3Injector.get(a,u,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class bn extends Ax{constructor(a){super(),this.moduleType=a,null!==ii(a)&&function jD(o){const a=new Set;!function u(h){const f=ii(h,!0),m=f.id;null!==m&&(function HD(o,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${o} - ${ce(a)} vs ${ce(a.name)}`)}(m,_h.get(m),h),_h.set(m,h));const b=Vs(f.imports);for(const C of b)a.has(C)||(a.add(C),u(C))}(o)}(a)}create(a){return new zD(this.moduleType,a)}}function Mx(o,a,u){const h=Wn()+o,f=xe();return f[h]===kt?ia(f,h,u?a.call(u):a()):function Gf(o,a){return o[a]}(f,h)}function xx(o,a,u,h){return Rx(xe(),Wn(),o,a,u,h)}function Rx(o,a,u,h,f,m){const b=a+u;return qr(o,b,f)?ia(o,b+1,m?h.call(m,f):h(f)):function _p(o,a){const u=o[a];return u===kt?void 0:u}(o,b+1)}function Fx(o,a){const u=Lt();let h;const f=o+20;u.firstCreatePass?(h=function yL(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const m=h.factory||(h.factory=Ui(h.type)),b=zn(ch);try{const C=Dr(!1),D=m();return Dr(C),function CM(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,xe(),f,D),D}finally{zn(b)}}function Lx(o,a,u){const h=o+20,f=xe(),m=hs(f,h);return function Yl(o,a){return o[1].data[a].pure}(f,h)?Rx(f,Wn(),a,m.transform,u,m):m.transform(u)}function Bb(o){return a=>{setTimeout(o,void 0,a)}}const aa=class CL extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){var f,m,b;let C=a,D=u||(()=>null),M=h;if(a&&"object"==typeof a){const V=a;C=null===(f=V.next)||void 0===f?void 0:f.bind(V),D=null===(m=V.error)||void 0===m?void 0:m.bind(V),M=null===(b=V.complete)||void 0===b?void 0:b.bind(V)}this.__isAsync&&(D=Bb(D),C&&(C=Bb(C)),M&&(M=Bb(M)));const R=super.subscribe({next:C,error:D,complete:M});return a instanceof ee.w0&&a.add(R),R}};function Bx(){return this._results[jf()]()}class yh{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=jf(),h=yh.prototype;h[u]||(h[u]=Bx)}get changes(){return this._changes||(this._changes=new aa)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=Sr(a);(this._changesDetected=!function Su(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let vh=(()=>{class o{}return o.__NG_ELEMENT_ID__=Ux,o})();const ZD=vh,Vx=class extends ZD{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a){const u=this._declarationTContainer.tViews,h=Nc(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(h[19]=m.createEmbeddedView(u)),Im(u,h,a),new pp(h)}};function Ux(){return h_(Sn(),xe())}function h_(o,a){return 4&o.type?new Vx(a,o,$c(o,a)):null}let f_=(()=>{class o{}return o.__NG_ELEMENT_ID__=yp,o})();function yp(){return Hx(Sn(),xe())}const p_=f_,YD=class extends p_{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return $c(this._hostTNode,this._hostLView)}get injector(){return new Ho(this._hostTNode,this._hostLView)}get parentInjector(){const a=po(this._hostTNode,this._hostLView);if(Od(a)){const u=Cn(a,this._hostLView),h=ms(a);return new Ho(u[1].data[h+8],u)}return new Ho(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=KD(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){const f=a.createEmbeddedView(u||{});return this.insert(f,h),f}createComponent(a,u,h,f,m){const b=a&&!function Go(o){return"function"==typeof o}(a);let C;if(b)C=u;else{const V=u||{};C=V.index,h=V.injector,f=V.projectableNodes,m=V.ngModuleRef}const D=b?a:new c_(ni(a)),M=h||this.parentInjector;if(!m&&null==D.ngModule){const j=(b?M:this.parentInjector).get(gp,null);j&&(m=j)}const R=D.create(M,f,void 0,m);return this.insert(R.hostView,C),R}insert(a,u){const h=a._lView,f=h[1];if(function Cl(o){return wr(o[3])}(h)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const V=h[3],j=new YD(V,V[6],V[3]);j.detach(j.indexOf(a))}}const m=this._adjustIndex(u),b=this._lContainer;!function Ga(o,a,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=a),h<m-10?(a[4]=u[f],Na(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const b=a[17];null!==b&&u!==b&&function Pc(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(b,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=128}(f,h,b,m);const C=yv(m,b),D=h[11],M=Rf(D,b[7]);return null!==M&&function Mf(o,a,u,h,f,m){h[0]=f,h[6]=a,vm(o,h,u,1,f,m)}(f,b[6],D,h,M,C),a.attachToViewContainerRef(),Na(g_(b),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=KD(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=hv(this._lContainer,u);h&&(zo(g_(this._lContainer),u),fv(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=hv(this._lContainer,u);return h&&null!=zo(g_(this._lContainer),u)?new pp(h):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function KD(o){return o[8]}function g_(o){return o[8]||(o[8]=[])}function Hx(o,a){let u;const h=a[o.index];if(wr(h))u=h;else{let f;if(8&o.type)f=rn(h);else{const m=a[11];f=m.createComment("");const b=Ti(o,a);Us(m,Rf(m,b),f,function SA(o,a){return gn(o)?o.nextSibling(a):a.nextSibling}(m,b),!1)}a[o.index]=u=ZA(h,a,f,o),Rv(a,u)}return new YD(u,o,a)}class QD{constructor(a){this.queryList=a,this.matches=null}clone(){return new QD(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vb{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const b=u.getByIndex(m);f.push(this.queries[b.indexInDeclarationView].clone())}return new Vb(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==Qu(a,u).matches&&this.queries[u].setDirty()}}class JD{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class Ub{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new Ub(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class m_{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new m_(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,u,XD(u,m)),this.matchTNodeWithReadOption(a,u,ys(u,a,m,!1,!1))}else h===vh?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,ys(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===fp||f===f_||f===vh&&4&u.type)this.addMatch(u.index,-2);else{const m=ys(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function XD(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function eT(o,a,u,h){return-1===u?function Gx(o,a){return 11&o.type?$c(o,a):4&o.type?h_(o,a):null}(a,o):-2===u?function zx(o,a,u){return u===fp?$c(a,o):u===vh?h_(a,o):u===f_?Hx(a,o):void 0}(o,a,h):mo(o,o[1],u,a)}function tT(o,a,u,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,b=u.matches,C=[];for(let D=0;D<b.length;D+=2){const M=b[D];C.push(M<0?null:eT(a,m[M],b[D+1],u.metadata.read))}f.matches=C}return f.matches}function nT(o,a,u,h){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const b=tT(o,a,f,u);for(let C=0;C<m.length;C+=2){const D=m[C];if(D>0)h.push(b[C/2]);else{const M=m[C+1],R=a[-D];for(let V=10;V<R.length;V++){const j=R[V];j[17]===j[3]&&nT(j[1],j,M,h)}if(null!==R[9]){const V=R[9];for(let j=0;j<V.length;j++){const X=V[j];nT(X[1],X,M,h)}}}}}return h}function iT(o){const a=xe(),u=Lt(),h=_u();Ml(h+1);const f=Qu(u,h);if(o.dirty&&No(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?nT(u,a,h,[]):tT(u,a,f,h);o.reset(m,PD),o.notifyOnChanges()}return!0}return!1}function rT(o,a,u){const h=Lt();h.firstCreatePass&&($x(h,new JD(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),vp(h,xe(),a)}function sT(o,a,u,h){const f=Lt();if(f.firstCreatePass){const m=Sn();$x(f,new JD(a,u,h),m.index),function oT(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}vp(f,xe(),u)}function tl(){return function TL(o,a){return o[19].queries[a].queryList}(xe(),_u())}function vp(o,a,u){const h=new yh(4==(4&u));jA(o,a,h,h.destroy),null===a[19]&&(a[19]=new Vb),a[19].queries.push(new QD(h))}function $x(o,a,u){null===o.queries&&(o.queries=new Ub),o.queries.track(new m_(a,u))}function Qu(o,a){return o.queries.getByIndex(a)}function wi(...o){}const Dp=new Rn("Application Initializer");let Tp=(()=>{class o{constructor(u){this.appInits=u,this.resolve=wi,this.reject=wi,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Vm(m))u.push(m);else if(DE(m)){const b=new Promise((C,D)=>{m.subscribe({complete:C,error:D})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(Ue(Dp,8))},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const _T=new Rn("AppId",{providedIn:"root",factory:function yT(){return`${T_()}${T_()}${T_()}`}});function T_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vT=new Rn("Platform Initializer"),bT=new Rn("Platform ID"),wT=new Rn("appBootstrapListener");let Pr=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=tn({token:o,factory:o.\u0275fac}),o})();const I_=new Rn("LocaleId",{providedIn:"root",factory:()=>mt(I_,bt.Optional|bt.SkipSelf)||function S_(){return"undefined"!=typeof $localize&&$localize.locale||Xa}()}),iR=new Rn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class qb{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let rR=(()=>{class o{compileModuleSync(u){return new bn(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=Vs(ii(u).declarations).reduce((b,C)=>{const D=ni(C);return D&&b.push(new c_(D)),b},[]);return new qb(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const oR=(()=>Promise.resolve(0))();function Wb(o){"undefined"==typeof Zone?oR.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Eo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new aa(!1),this.onMicrotaskEmpty=new aa(!1),this.onStable=new aa(!1),this.onError=new aa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Sp(){let o=zt.requestAnimationFrame,a=zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function lR(o){const a=()=>{!function aR(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(zt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Zb(o),o.isCheckStableRunning=!0,M_(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Zb(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,b,C)=>{try{return DT(o),u.invokeTask(f,m,b,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),Yb(o)}},onInvoke:(u,h,f,m,b,C,D)=>{try{return DT(o),u.invoke(f,m,b,C,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),Yb(o)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,Zb(o),M_(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Eo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Eo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+f,a,A_,wi,wi);try{return m.runTask(b,u,h)}finally{m.cancelTask(b)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const A_={};function M_(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Zb(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function DT(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Yb(o){o._nesting--,M_(o)}class Kb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new aa,this.onMicrotaskEmpty=new aa,this.onStable=new aa,this.onError=new aa}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}let Qb=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Eo.assertNotInAngularZone(),Wb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wb(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,h,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(Ue(Eo))},o.\u0275prov=tn({token:o,factory:o.\u0275fac}),o})(),x_=(()=>{class o{constructor(){this._applications=new Map,Jb.addToWindow(this)}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return Jb.findTestabilityInTree(this,u,h)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=tn({token:o,factory:o.\u0275fac}),o})();class TT{addToWindow(a){}findTestabilityInTree(a,u,h){return null}}function Ip(o){Jb=o}let Gs,Jb=new TT;const ew=new Rn("AllowMultipleToken");class IT{constructor(a,u){this.name=a,this.token=u}}function AT(o,a,u=[]){const h=`Platform: ${a}`,f=new Rn(h);return(m=[])=>{let b=Ap();if(!b||b.injector.get(ew,!1))if(o)o(u.concat(m).concat({provide:f,useValue:!0}));else{const C=u.concat(m).concat({provide:f,useValue:!0},{provide:JC,useValue:"platform"});!function tw(o){if(Gs&&!Gs.destroyed&&!Gs.injector.get(ew,!1))throw new Ne(400,"");Gs=o.get(R_);const a=o.get(vT,null);a&&a.forEach(u=>u())}($a.create({providers:C,name:h}))}return function cR(o){const a=Ap();if(!a)throw new Ne(401,"");return a}()}}function Ap(){return Gs&&!Gs.destroyed?Gs:null}let R_=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const C=function nw(o,a){let u;return u="noop"===o?new Kb:("zone.js"===o?void 0:o)||new Eo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),D=[{provide:Eo,useValue:C}];return C.run(()=>{const M=$a.create({providers:D,parent:this.injector,name:u.moduleType.name}),R=u.create(M),V=R.injector.get(Wd,null);if(!V)throw new Ne(402,"");return C.runOutsideAngular(()=>{const j=C.onError.subscribe({next:X=>{V.handleError(X)}});R.onDestroy(()=>{k_(this._modules,R),j.unsubscribe()})}),function iw(o,a,u){try{const h=u();return Vm(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(V,C,()=>{const j=R.injector.get(Tp);return j.runInitializers(),j.donePromise.then(()=>(function YM(o){Ut(o,"Expected localeId to be defined"),"string"==typeof o&&(sp=o.toLowerCase().replace(/_/g,"-"))}(R.injector.get(I_,Xa)||Xa),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,h=[]){const f=rw({},h);return function ST(o,a,u){const h=new bn(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(sw);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Ne(403,"");u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(Ue($a))},o.\u0275prov=tn({token:o,factory:o.\u0275fac}),o})();function rw(o,a){return Array.isArray(a)?a.reduce(rw,o):Object.assign(Object.assign({},o),a)}let sw=(()=>{class o{constructor(u,h,f,m,b){this._zone=u,this._injector=h,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const C=new B.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),D=new B.y(M=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Eo.assertNotInAngularZone(),Wb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Eo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,de.T)(C,D.pipe((0,ae.B)()))}bootstrap(u,h){if(!this._initStatus.done)throw new Ne(405,"");let f;f=u instanceof RD?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(f.componentType);const m=function Xb(o){return o.isBoundToModule}(f)?void 0:this._injector.get(gp),C=f.create($a.NULL,[],h||f.selector,m),D=C.location.nativeElement,M=C.injector.get(Qb,null),R=M&&C.injector.get(x_);return M&&R&&R.registerApplication(D,M),C.onDestroy(()=>{this.detachView(C.hostView),k_(this.components,C),R&&R.unregisterApplication(D)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;k_(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(wT,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(Ue(Eo),Ue($a),Ue(Wd),Ue(s_),Ue(Tp))},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function k_(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let MT=!0,xT=!1;function dR(){return xT=!0,MT}function hR(){if(xT)throw new Error("Cannot enable prod mode after platform setup.");MT=!1}let fR=(()=>{class o{}return o.__NG_ELEMENT_ID__=pR,o})();function pR(o){return function O_(o,a,u){if(_d(o)&&!u){const h=Si(o.index,a);return new pp(h,h)}return 47&o.type?new pp(a[16],a):null}(Sn(),xe(),16==(16&o))}class wh{constructor(){}supports(a){return Om(a)}create(a){return new lw(a)}}const $L=(o,a)=>a;class lw{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||$L}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const b=!h||u&&u.currentIndex<BT(h,f,m)?u:h,C=BT(b,f,m),D=b.currentIndex;if(b===h)f--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)f++;else{m||(m=[]);const M=C-f,R=D-f;if(M!=R){for(let j=0;j<M;j++){const X=j<m.length?m[j]:m[j]=0,we=X+j;R<=we&&we<M&&(m[j]=X+1)}m[b.previousIndex]=R-M}}C!==D&&a(b,C,D)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Om(a))throw new Ne(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,b,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)m=a[C],b=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,m,b,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,b,C),h=!0),u=u._next}else f=0,function bM(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[jf()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{b=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,C,b,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,b,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new qL(u,h),m,f),a}_verifyReinsertion(a,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new CR),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new CR),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class qL{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wR{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class CR{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new wR,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BT(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class VT{constructor(){}supports(a){return a instanceof Map||Wl(a)}create(){return new WL}}class WL{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||Wl(a)))throw new Ne(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,b=f._next;return m&&(m._next=b),b&&(b._prev=m),f._next=null,f._prev=null,f}const h=new ZL(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class ZL{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UT(){return new HT([new wh])}let HT=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||UT()),deps:[[o,new Mr,new Ir]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Ne(901,"")}}return o.\u0275prov=tn({token:o,providedIn:"root",factory:UT}),o})();function ER(){return new jT([new VT])}let jT=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||ER()),deps:[[o,new Mr,new Ir]]}}find(u){const h=this.factories.find(m=>m.supports(u));if(h)return h;throw new Ne(901,"")}}return o.\u0275prov=tn({token:o,providedIn:"root",factory:ER}),o})();const cw=AT(null,"core",[{provide:bT,useValue:"unknown"},{provide:R_,deps:[$a]},{provide:x_,deps:[]},{provide:Pr,deps:[]}]);let uw=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(Ue(sw))},o.\u0275mod=Yi({type:o}),o.\u0275inj=Jt({}),o})()},3942:(it,be,F)=>{F.d(be,{Z:()=>Ne});var l=F(2090),ee=F(4859),B=F(9681),de=F(1877);class ae{constructor(pe,Ae){this._delegate=pe,this.firebase=Ae,(0,B._addComponent)(pe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(pe,Ae=B._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(pe);return!et.isInitialized()&&"EXPLICIT"===(null===(Ke=et.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&et.initialize(),et.getImmediate({identifier:Ae})}_removeServiceInstance(pe,Ae=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ae)}_addComponent(pe){(0,B._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,B._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ne=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function he(){const je=function ce(je){const pe={},Ae={__esModule:!0,initializeApp:function Me($e,z={}){const De=B.initializeApp($e,z);if((0,l.r3)(pe,De.name))return pe[De.name];const Q=new je(De,Ae);return pe[De.name]=Q,Q},app:et,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function Te($e){const z=$e.name,De=z.replace("-compat","");if(B._registerComponent($e)&&"PUBLIC"===$e.type){const Q=(le=et())=>{if("function"!=typeof le[De])throw ne.create("invalid-app-argument",{appName:z});return le[De]()};void 0!==$e.serviceProps&&(0,l.ZB)(Q,$e.serviceProps),Ae[De]=Q,je.prototype[De]=function(...le){return this._getService.bind(this,z).apply(this,$e.multipleInstances?le:[])}}return"PUBLIC"===$e.type?Ae[De]:null},removeApp:function Ke($e){delete pe[$e]},useAsService:function ze($e,z){return"serverAuth"===z?null:z},modularAPIs:B}};function et($e){if(!(0,l.r3)(pe,$e=$e||B._DEFAULT_ENTRY_NAME))throw ne.create("no-app",{appName:$e});return pe[$e]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Ce(){return Object.keys(pe).map($e=>pe[$e])}}),et.App=je,Ae}(ae);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function pe(Ae){(0,l.ZB)(je,Ae)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),je}(),G=new de.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=$;!function Re(je){(0,B.registerVersion)("@firebase/app-compat","0.1.26",je)}()},9681:(it,be,F)=>{F.r(be),F.d(be,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>rs,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>fn,_addOrOverwriteComponent:()=>tn,_apps:()=>ln,_clearComponents:()=>is,_components:()=>Gn,_getProvider:()=>Jt,_registerComponent:()=>Wi,_removeServiceInstance:()=>Ht,deleteApp:()=>bt,getApp:()=>or,getApps:()=>Hr,initializeApp:()=>no,onLog:()=>zn,registerVersion:()=>Bn,setLogLevel:()=>io});var l=F(5861),ee=F(4859),B=F(1877),de=F(2090),ae=F(8766);class _e{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function ne(q){const te=q.getComponent();return"VERSION"===(null==te?void 0:te.type)}(Oe)){const rt=Oe.getImmediate();return`${rt.library}/${rt.version}`}return null}).filter(Oe=>Oe).join(" ")}}const ce="@firebase/app",$=new B.Yd("@firebase/app"),Ut="[DEFAULT]",tt={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,Gn=new Map;function fn(q,te){try{q.container.addComponent(te)}catch(Oe){$.debug(`Component ${te.name} failed to register with FirebaseApp ${q.name}`,Oe)}}function tn(q,te){q.container.addOrOverwriteComponent(te)}function Wi(q){const te=q.name;if(Gn.has(te))return $.debug(`There were multiple attempts to register component ${te}.`),!1;Gn.set(te,q);for(const Oe of ln.values())fn(Oe,q);return!0}function Jt(q,te){const Oe=q.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),q.container.getProvider(te)}function Ht(q,te,Oe=Ut){Jt(q,te).clearInstance(Oe)}function is(){Gn.clear()}const Pi=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Zi{constructor(te,Oe,rt){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=rt,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}const rs="9.8.2";function no(q,te={}){"object"!=typeof te&&(te={name:te});const Oe=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},te),rt=Oe.name;if("string"!=typeof rt||!rt)throw Pi.create("bad-app-name",{appName:String(rt)});const yt=ln.get(rt);if(yt){if((0,de.vZ)(q,yt.options)&&(0,de.vZ)(Oe,yt.config))return yt;throw Pi.create("duplicate-app",{appName:rt})}const St=new ee.H0(rt);for(const Et of Gn.values())St.addComponent(Et);const Dn=new Zi(q,Oe,St);return ln.set(rt,Dn),Dn}function or(q=Ut){const te=ln.get(q);if(!te)throw Pi.create("no-app",{appName:q});return te}function Hr(){return Array.from(ln.values())}function bt(q){return yr.apply(this,arguments)}function yr(){return(yr=(0,l.Z)(function*(q){const te=q.name;ln.has(te)&&(ln.delete(te),yield Promise.all(q.container.getProviders().map(Oe=>Oe.delete())),q.isDeleted=!0)})).apply(this,arguments)}function Bn(q,te,Oe){var rt;let yt=null!==(rt=tt[q])&&void 0!==rt?rt:q;Oe&&(yt+=`-${Oe}`);const St=yt.match(/\s|\//),Dn=te.match(/\s|\//);if(St||Dn){const Et=[`Unable to register library "${yt}" with version "${te}":`];return St&&Et.push(`library name "${yt}" contains illegal characters (whitespace or "/")`),St&&Dn&&Et.push("and"),Dn&&Et.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void $.warn(Et.join(" "))}Wi(new ee.wA(`${yt}-version`,()=>({library:yt,version:te}),"VERSION"))}function zn(q,te){if(null!==q&&"function"!=typeof q)throw Pi.create("invalid-log-argument");(0,B.Am)(q,te)}function io(q){(0,B.Ub)(q)}const $n="firebase-heartbeat-store";let vr=null;function Ao(){return vr||(vr=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(q,te)=>{0===te&&q.createObjectStore($n)}}).catch(q=>{throw Pi.create("storage-open",{originalErrorMessage:q.message})})),vr}function ct(){return(ct=(0,l.Z)(function*(q){try{return(yield Ao()).transaction($n).objectStore($n).get(br(q))}catch(te){throw Pi.create("storage-get",{originalErrorMessage:te.message})}})).apply(this,arguments)}function Ct(q,te){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,l.Z)(function*(q,te){try{const rt=(yield Ao()).transaction($n,"readwrite");return yield rt.objectStore($n).put(te,br(q)),rt.done}catch(Oe){throw Pi.create("storage-set",{originalErrorMessage:Oe.message})}})).apply(this,arguments)}function br(q){return`${q.name}!${q.options.appId}`}class Fi{constructor(te){this.container=te,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new W(Oe),this._heartbeatsCachePromise=this._storage.read().then(rt=>(this._heartbeatsCache=rt,rt))}triggerHeartbeat(){var te=this;return(0,l.Z)(function*(){const rt=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yt=Li();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==yt&&!te._heartbeatsCache.heartbeats.some(St=>St.date===yt))return te._heartbeatsCache.heartbeats.push({date:yt,agent:rt}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(St=>{const Dn=new Date(St.date).valueOf();return Date.now()-Dn<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,l.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Oe=Li(),{heartbeatsToSend:rt,unsentEntries:yt}=function H(q,te=1024){const Oe=[];let rt=q.slice();for(const yt of q){const St=Oe.find(Dn=>Dn.agent===yt.agent);if(St){if(St.dates.push(yt.date),Y(Oe)>te){St.dates.pop();break}}else if(Oe.push({agent:yt.agent,dates:[yt.date]}),Y(Oe)>te){Oe.pop();break}rt=rt.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:rt}}(te._heartbeatsCache.heartbeats),St=(0,de.L)(JSON.stringify({version:2,heartbeats:rt}));return te._heartbeatsCache.lastSentHeartbeatDate=Oe,yt.length>0?(te._heartbeatsCache.heartbeats=yt,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),St})()}}function Li(){return(new Date).toISOString().substring(0,10)}class W{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,l.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function Wt(q){return ct.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Oe=this;return(0,l.Z)(function*(){var rt;if(yield Oe._canUseIndexedDBPromise){const St=yield Oe.read();return Ct(Oe.app,{lastSentHeartbeatDate:null!==(rt=te.lastSentHeartbeatDate)&&void 0!==rt?rt:St.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Oe=this;return(0,l.Z)(function*(){var rt;if(yield Oe._canUseIndexedDBPromise){const St=yield Oe.read();return Ct(Oe.app,{lastSentHeartbeatDate:null!==(rt=te.lastSentHeartbeatDate)&&void 0!==rt?rt:St.lastSentHeartbeatDate,heartbeats:[...St.heartbeats,...te.heartbeats]})}})()}}function Y(q){return(0,de.L)(JSON.stringify({version:2,heartbeats:q})).length}!function Ie(q){Wi(new ee.wA("platform-logger",te=>new _e(te),"PRIVATE")),Wi(new ee.wA("heartbeat",te=>new Fi(te),"PRIVATE")),Bn(ce,"0.7.25",q),Bn(ce,"0.7.25","esm2017"),Bn("fire-js","")}("")},4859:(it,be,F)=>{F.d(be,{wA:()=>B,H0:()=>ce,zt:()=>ae});var l=F(5861),ee=F(2090);class B{constructor($,G,re){this.name=$,this.instanceFactory=G,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const de="[DEFAULT]";class ae{constructor($,G){this.name=$,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const G=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(G)){const re=new ee.BH;if(this.instancesDeferred.set(G,re),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:G});Ye&&re.resolve(Ye)}catch(Ye){}}return this.instancesDeferred.get(G).promise}getImmediate($){var G;const re=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Ye=null!==(G=null==$?void 0:$.optional)&&void 0!==G&&G;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Re){if(Ye)return null;throw Re}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ne(he){return"EAGER"===he.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:de})}catch(G){}for(const[G,re]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(G);try{const Re=this.getOrInitializeService({instanceIdentifier:Ye});re.resolve(Re)}catch(Re){}}}}clearInstance($=de){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,l.Z)(function*(){const G=Array.from($.instances.values());yield Promise.all([...G.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...G.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=de){return this.instances.has($)}getOptions($=de){return this.instancesOptions.get($)||{}}initialize($={}){const{options:G={}}=$,re=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:re,options:G});for(const[Re,Ne]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Re)&&Ne.resolve(Ye);return Ye}onInit($,G){var re;const Ye=this.normalizeInstanceIdentifier(G),Re=null!==(re=this.onInitCallbacks.get(Ye))&&void 0!==re?re:new Set;Re.add($),this.onInitCallbacks.set(Ye,Re);const Ne=this.instances.get(Ye);return Ne&&$(Ne,Ye),()=>{Re.delete($)}}invokeOnInitCallbacks($,G){const re=this.onInitCallbacks.get(G);if(re)for(const Ye of re)try{Ye($,G)}catch(Re){}}getOrInitializeService({instanceIdentifier:$,options:G={}}){let re=this.instances.get($);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(he=$,he===de?void 0:he),options:G}),this.instances.set($,re),this.instancesOptions.set($,G),this.invokeOnInitCallbacks(re,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,re)}catch(Ye){}var he;return re||null}normalizeInstanceIdentifier($=de){return this.component?this.component.multipleInstances?$:de:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor($){this.name=$,this.providers=new Map}addComponent($){const G=this.getProvider($.name);if(G.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);G.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const G=new ae($,this);return this.providers.set($,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(it,be,F)=>{F.d(be,{in:()=>ee,Yd:()=>ne,Ub:()=>ce,Am:()=>he});const l=[];var ee=(()=>{return($=ee||(ee={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",ee;var $})();const B={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},de=ee.INFO,ae={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},_e=($,G,...re)=>{if(G<$.logLevel)return;const Ye=(new Date).toISOString(),Re=ae[G];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Re](`[${Ye}]  ${$.name}:`,...re)};class ne{constructor(G){this.name=G,this._logLevel=de,this._logHandler=_e,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ee))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?B[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...G),this._logHandler(this,ee.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...G),this._logHandler(this,ee.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...G),this._logHandler(this,ee.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...G),this._logHandler(this,ee.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...G),this._logHandler(this,ee.ERROR,...G)}}function ce($){l.forEach(G=>{G.setLogLevel($)})}function he($,G){for(const re of l){let Ye=null;G&&G.level&&(Ye=B[G.level]),re.userLogHandler=null===$?null:(Re,Ne,...je)=>{const pe=je.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch(Ke){return null}}).filter(Ae=>Ae).join(" ");Ne>=(null!=Ye?Ye:Re.logLevel)&&$({level:ee[Ne].toLowerCase(),message:pe,args:je,type:Re.name})}}}},8766:(it,be,F)=>{F.d(be,{Lj:()=>Me,X3:()=>et});var l=F(5861);let B,de;const ne=new WeakMap,ce=new WeakMap,he=new WeakMap,$=new WeakMap,G=new WeakMap;let Re={get(z,De,Q){if(z instanceof IDBTransaction){if("done"===De)return ce.get(z);if("objectStoreNames"===De)return z.objectStoreNames||he.get(z);if("store"===De)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return Ae(z[De])},set:(z,De,Q)=>(z[De]=Q,!0),has:(z,De)=>z instanceof IDBTransaction&&("done"===De||"store"===De)||De in z};function pe(z){return"function"==typeof z?function je(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...De){return z.apply(Ke(this),De),Ae(ne.get(this))}:function(...De){return Ae(z.apply(Ke(this),De))}:function(De,...Q){const le=z.call(Ke(this),De,...Q);return he.set(le,De.sort?De.sort():[De]),Ae(le)}}(z):(z instanceof IDBTransaction&&function Ye(z){if(ce.has(z))return;const De=new Promise((Q,le)=>{const ie=()=>{z.removeEventListener("complete",ve),z.removeEventListener("error",ue),z.removeEventListener("abort",ue)},ve=()=>{Q(),ie()},ue=()=>{le(z.error||new DOMException("AbortError","AbortError")),ie()};z.addEventListener("complete",ve),z.addEventListener("error",ue),z.addEventListener("abort",ue)});ce.set(z,De)}(z),((z,De)=>De.some(Q=>z instanceof Q))(z,function ae(){return B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,Re):z)}function Ae(z){if(z instanceof IDBRequest)return function re(z){const De=new Promise((Q,le)=>{const ie=()=>{z.removeEventListener("success",ve),z.removeEventListener("error",ue)},ve=()=>{Q(Ae(z.result)),ie()},ue=()=>{le(z.error),ie()};z.addEventListener("success",ve),z.addEventListener("error",ue)});return De.then(Q=>{Q instanceof IDBCursor&&ne.set(Q,z)}).catch(()=>{}),G.set(De,z),De}(z);if($.has(z))return $.get(z);const De=pe(z);return De!==z&&($.set(z,De),G.set(De,z)),De}const Ke=z=>G.get(z);function et(z,De,{blocked:Q,upgrade:le,blocking:ie,terminated:ve}={}){const ue=indexedDB.open(z,De),Fe=Ae(ue);return le&&ue.addEventListener("upgradeneeded",pt=>{le(Ae(ue.result),pt.oldVersion,pt.newVersion,Ae(ue.transaction))}),Q&&ue.addEventListener("blocked",()=>Q()),Fe.then(pt=>{ve&&pt.addEventListener("close",()=>ve()),ie&&pt.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Fe}function Me(z,{blocked:De}={}){const Q=indexedDB.deleteDatabase(z);return De&&Q.addEventListener("blocked",()=>De()),Ae(Q).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],ze=new Map;function $e(z,De){if(!(z instanceof IDBDatabase)||De in z||"string"!=typeof De)return;if(ze.get(De))return ze.get(De);const Q=De.replace(/FromIndex$/,""),le=De!==Q,ie=Te.includes(Q);if(!(Q in(le?IDBIndex:IDBObjectStore).prototype)||!ie&&!Ce.includes(Q))return;const ve=function(){var ue=(0,l.Z)(function*(Fe,...pt){const qt=this.transaction(Fe,ie?"readwrite":"readonly");let Ut=qt.store;return le&&(Ut=Ut.index(pt.shift())),(yield Promise.all([Ut[Q](...pt),ie&&qt.done]))[0]});return function(pt){return ue.apply(this,arguments)}}();return ze.set(De,ve),ve}!function Ne(z){Re=z(Re)}(z=>H$(U$({},z),{get:(De,Q,le)=>$e(De,Q)||z.get(De,Q,le),has:(De,Q)=>!!$e(De,Q)||z.has(De,Q)}))},5861:(it,be,F)=>{function l(B,de,ae,_e,ne,ce,he){try{var $=B[ce](he),G=$.value}catch(re){return void ae(re)}$.done?de(G):Promise.resolve(G).then(_e,ne)}function ee(B){return function(){var de=this,ae=arguments;return new Promise(function(_e,ne){var ce=B.apply(de,ae);function he(G){l(ce,_e,ne,he,$,"next",G)}function $(G){l(ce,_e,ne,he,$,"throw",G)}he(void 0)})}}F.d(be,{Z:()=>ee})}},it=>{it(it.s=4336)}]);